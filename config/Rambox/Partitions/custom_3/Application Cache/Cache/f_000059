webpackJsonp(["app-web"],{"../front/files/css/sass/deezer.scss":function(e,t){},"./js/_bundles/app-web.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("./js/_modules/publicPath.js");var a=n("./node_modules/react/index.js"),r=n.n(a),o=n("./node_modules/react-dom/index.js"),i=n.n(o),s=n("./sass/bootstrap.scss"),l=(n.n(s),n("../front/files/css/sass/deezer.scss")),c=(n.n(l),n("./sass/naboo.scss")),u=(n.n(c),n("./js/_modules/flash_detect.js"),n("./js/_modules/Events.js")),p=n("./js/_modules/config/index.js"),d=n("./js/_modules/monitoring/jiraIssueCollector.js"),f=n("./js/_modules/logger/client.js"),h=n("./js/_modules/monitoring/reportSlowResources.js"),m=n("./js/_modules/tips.js"),y=n("./js/_modules/www.js"),b=n("./js/_modules/infinite_scroll.js"),g=n("./node_modules/lodash.throttle/index.js"),_=n.n(g),v=n("./js/_modules/notification.js"),E=n("./js/_modules/userData.js"),O=n("./js/_modules/dzoffline.js"),j=n("./js/_modules/tracking.js"),T=n("./js/_modules/storage.js"),w=n("./js/_modules/favorite.js"),S=n("./js/_modules/BrowserDetect.js"),P=n("./js/_modules/redux/createStore.js"),C=n("./js/_modules/redux/stores/user.js"),k=n("./js/_components/Root.js"),N=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}(regeneratorRuntime.mark(function e(){var t,n,a,o,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("[data-layout=onboarding]"),n=document.getElementById("dzr-app"),a=document.getElementById("naboo_content"),o=window.__DZR_APP_STATE__||{},s=window.__DZR_MODAL_PATH__||{},o.legacyContent=a&&a.innerHTML,e.next=8,Object(P.a)(o);case 8:if(l=e.sent,!t&&n&&"web"===p.a.get("PLATFORM")){e.next=11;break}return e.abrupt("return");case 11:c=Object(C.c)(l.getState().user),"classList"in document.body&&c.current===c.electron&&(document.body.classList.add("os-"+S.a.OS.toLowerCase()),document.body.classList.add("electron-ui")),i.a.render(r.a.createElement(k.a,{store:l,appState:o,modalPath:s}),n),Object(y.b)(),Object(y.a)(),v.b.init(),O.a.init(),E.a.init(),j.a.init(),w.a.init(),v.a.init(),T.a.init(),m.a.init(),Object(d.a)(),u.a.trigger(u.a.navigation.page_changed,{path:y.c.getCurrentPath()}),l.getState().user.id&&u.a.resolve(u.a.user.loaded);case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();window.onunhandledrejection=function(e){e.reason&&"Readable side canceled"!==e.reason.message&&f.a.error(e.reason)},"Explorer"===S.a.browser&&S.a.version<=9?document.addEventListener("DOMContentLoaded",N):N(),u.a.subscribe(u.a.navigation.page_displayed,h.a),window.addEventListener("scroll",_()(function(){b.a.checkPosition(),u.a.trigger(u.a.layout.scroll,{height:window.innerHeight,yscroll:window.pageYOffset})},100),{passive:!0})},"./js/_components/App/components/LoadingBar.js":function(e,t,n){"use strict";(function(e){function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/classnames/index.js"),s=n.n(i),l=n("./js/_modules/Events.js"),c=void 0,u=void 0,p=void 0,d=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this));return e._onPageChanged=e._onPageChanged.bind(e),e._onPageDisplayed=e._onPageDisplayed.bind(e),e._updateWidth=e._updateWidth.bind(e),e._onTransitionEnd=e._onTransitionEnd.bind(e),e.state={isLoading:!1,width:0},e}return a(n,t),n.prototype.componentDidMount=function(){l.a.subscribe(l.a.navigation.page_changed,this._onPageChanged),l.a.subscribe(l.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.componentWillUnmount=function(){clearTimeout(c),clearTimeout(p),clearInterval(u),l.a.unsubscribe(l.a.navigation.page_changed,this._onPageChanged),l.a.unsubscribe(l.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.render=function(){var e=s()({"page-loader":!0,opened:this.state.isLoading}),t=s()({"page-loader-bar":!0,"has-transition":this.state.hasTransition});return o.a.createElement("div",{className:e,id:"page_loader",ref:"content"},o.a.createElement("div",{className:t,style:{width:this.state.width+"%"}}))},n.prototype._onPageChanged=function(){var e=this;this.state.isLoading||(this.setState({isLoading:!0,hasTransition:!0,width:20+55*Math.random()}),c=setTimeout(function(){e._updateWidth(),u=setInterval(e._updateWidth,1e3)},1e3))},n.prototype._onPageDisplayed=function(){var t=this;e.nextTick(function(){t.state.isLoading&&(clearTimeout(c),clearInterval(u),t.setState({hasTransition:!1,width:100}),p=setTimeout(function(){t.refs.content.addEventListener("transitionend",t._onTransitionEnd,!1),t.setState({isLoading:!1})},500))})},n.prototype._onTransitionEnd=function(){this.setState({width:0}),this.refs.content.removeEventListener("transitionend",this._onTransitionEnd)},n.prototype._updateWidth=function(){this.state.width>=90&&clearInterval(u),this.setState({width:this.state.width+5})},n}(r.Component);t.a=d}).call(t,n("./node_modules/process/browser.js"))},"./js/_components/Dislike.js":function(e,t,n){"use strict";function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}var r=n("./node_modules/prop-types/index.js"),o=(n.n(r),n("./node_modules/react/index.js")),i=n.n(o),s=n("./node_modules/classnames/index.js"),l=n.n(s),c=n("./js/_modules/i18n.js"),u=n("./js/_modules/favorite.js"),p=n("./js/_modules/Events.js"),d=n("./js/_modules/dzPlayer.js"),f=n("./js/_modules/userData.js"),h=n("./js/_components/Icon/index.js"),m=n("./js/_components/Tooltip/index.js"),y=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._onDislikeClick=a._onDislikeClick.bind(a),a.state={active:!1},a}return a(t,e),t.prototype.componentDidMount=function(){p.a.subscribe(p.a.user.addFavorite,this._onFavoriteToggle),p.a.subscribe(p.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.componentWillReceiveProps=function(){this.setState({active:!1})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.active!==t.active||this.props.id!==e.id},t.prototype.componentWillUnmount=function(){p.a.unsubscribe(p.a.user.addFavorite,this._onFavoriteToggle),p.a.unsubscribe(p.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.tooltip,a=e.tooltipPosition,r=this.state.active,o=Object(c.a)("Ne plus me proposer ce titre"),s=l()({"is-active":r&&d.a.skipRadioAllowed()}),u=i.a.createElement("button",{className:t,type:"button",onClick:this._onDislikeClick,"aria-label":o},i.a.createElement(h.a,{className:s,name:"cancel",size:"auto"}));return n?i.a.createElement(m.a,{text:o,position:a},u):u},t.prototype._onFavoriteToggle=function(e,t){var n=Number(this.props.id);n===Number(t.SNG_ID)&&"disliked_song"===t.type&&this.setState({active:f.a.isDisliked(n)})},t.prototype._onDislikeClick=function(e){e.stopPropagation();var t=this.props,n=t.type,a=t.id,r=t.onClickCallback;u.a.add({type:n,id:a}),r()},t}(o.Component);y.defaultProps={className:"",type:"disliked_song",tooltip:!1,tooltipPosition:"top",onClickCallback:function(){}},t.a=y},"./js/_components/Player/store/chromecast.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case r.a:return o({},u,{loading:a.a.isLoading(),active:a.a.isActive(),chunksInfo:a.a.getChunksInfo()});case i:return o({},e,{available:t.status,connecting:!1,casting:!1,active:t.active,chunksInfo:t.chunksInfo});case s:return o({},e,{available:!0,connecting:t.status,casting:!1,chunksInfo:t.chunksInfo});case l:return o({},e,{available:!0,connecting:!1,active:t.active,casting:t.status,chunksInfo:t.chunksInfo});case c:return o({},e,{loading:t.loading,active:t.active,chunksInfo:t.chunksInfo});default:return e}},n.d(t,"c",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return h});var a=n("./js/_modules/chromecast/index.js"),r=n("./js/_components/Player/store/music.js"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i="components/Player/chromecast/SET_AVAILABLE_STATUS",s="components/Player/chromecast/SET_CONNECTING_STATUS",l="components/Player/chromecast/SET_CASTING_STATUS",c="components/Player/chromecast/SET_ACTIVE_STATE",u={available:!1,connecting:!1,casting:!1,loading:!1,active:!1,chunksInfo:{}},p=function(e){return{type:i,status:e.status,active:e.active,chunksInfo:e.chunksInfo}},d=function(e){return{type:s,status:e.status,chunksInfo:e.chunksInfo}},f=function(e){return{type:l,status:e.status,active:e.active,chunksInfo:e.chunksInfo}},h=function(e){return{type:c,loading:e.loading,active:e.active,chunksInfo:e.chunksInfo}}},"./js/_components/Player/store/lyrics.js":function(e,t,n){"use strict";n.d(t,"e",function(){return p}),t.a=function(){c&&l.cancel(),c=!1},n.d(t,"f",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return h});var a=n("./node_modules/lodash.merge/index.js"),r=n.n(a),o=n("./js/_modules/api.js"),i=n("./js/_modules/dzPlayer.js"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=void 0,c=!1,u={autoScroll:!0,hasLyrics:!1,metadata:{},isSync:!1,ready:!1,list:[]};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case"components/Player/lyrics/FETCHED_LYRICS":return s({},e,{isSync:t.isSync,hasLyrics:t.hasLyrics,metadata:t.metadata,ready:t.ready,list:t.list});case"components/Player/lyrics/LOADING":return s({},e,{hasLyrics:t.hasLyrics,ready:t.ready});case"components/Player/lyrics/SET_AUTO_SCROLL":return t.autoScroll!==e.autoScroll?s({},e,{autoScroll:t.autoScroll}):e;default:return t.data&&t.data.entities&&t.data.entities.LYRICS?r()({},e,t.data.entities.LYRICS):e}};var p=function(e){return function(t){return t(function(e){return function(t){var n=i.a.hasLyrics();n&&!c&&(c=!0,l=o.a.call({method:"song.getLyrics",data:{sng_id:e.id},success:function(e){t(s({type:"components/Player/lyrics/FETCHED_LYRICS",ready:!0,hasLyrics:n&&""!==e.LYRICS_TEXT},function(e){var t=!!e.LYRICS_SYNC_JSON,n=[];if(t){var a=e.LYRICS_SYNC_JSON||[];if(a.length)for(var r=0,o=a.length;r<o;r++){var i=a[r];i&&i.line&&i.milliseconds&&n.push(i)}}else n=e.LYRICS_TEXT.split(/\r\n|\r|\n/g);return{metadata:{copyrights:e.LYRICS_COPYRIGHTS||"",writers:e.LYRICS_WRITERS||""},list:n,isSync:t}}(e))),c=!1}})),t({type:"components/Player/lyrics/LOADING",ready:!n,hasLyrics:n})}}(e))}},d=function(e){return{type:"components/Player/lyrics/SET_AUTO_SCROLL",autoScroll:e.autoScroll}},f=function(e){var t=e.player.lyrics.list;return t.length?parseInt(t[0].milliseconds,10)/1e3:0},h=function(e){var t=e.player.lyrics,n=t.list,a=t.isSync,r=Math.round(1e3*e.player.control.position);if(r<1e3*f(e)||!a)return-1;var o=n[n.length-1];if(r>Number(o.milliseconds))return n.length-1;for(var i=0,s=0,l=n.length;i!==l;)s=Math.floor((i+l)/2),Number(n[s].milliseconds)<=r?i=s+1:l=s;return 0===i?i:i-1}},"./js/_components/Player/store/player.js":function(e,t,n){"use strict";function a(e){var t=[],n=e.config.isBlindTestMode?"blindtest":"default";"radio"!==j.a.getPlayerType()||e.music.recommendations.length||"live_stream"===j.a.getMediaType(e.music.unshuffledList[0])||(n=e.config.isFlow?"flow":"mix");var a=e.music.unshuffledList.map(function(e,a){var r=j.a.getContextByIndexFromOriginal(a),o=t.findIndex(function(e){return S()(e,r)});o<0&&(o=t.push(r)-1);var i=void 0,s=void 0;switch(j.a.getMediaType(e)){case j.a.MEDIA_TYPE_TALK:i=A.ListChanged.Track.TrackType.EPISODE.value,s=A.ListChanged.PlayerUI.PODCAST.value;break;case j.a.MEDIA_TYPE_LIVE_STREAM:i=A.ListChanged.Track.TrackType.LIVE.value,s=A.ListChanged.PlayerUI.LIVE.value;break;default:i=A.ListChanged.Track.TrackType.DEFAULT.value,s="up_next_artist"===r.TYPE?A.ListChanged.PlayerUI.RECOMMENDED.value:"UPLOAD_ID"in e?A.ListChanged.PlayerUI.EXTERNAL.value:A.ListChanged.PlayerUI[n.toUpperCase()].value}return{context:o,id:String(e[j.a.getMediaId(e)]),type:i,ui:s}}),r=[],o=e.music.list.map(function(t,n){var a=0,o=j.a.getContextByIndex(n),i=t[j.a.getMediaId(t)],s=e.music.unshuffledList.filter(function(e){return e[j.a.getMediaId(e)]===t[j.a.getMediaId(t)]}).filter(function(t){return S()(o,j.a.getContextByIndexFromOriginal(e.music.unshuffledList.indexOf(t)))});return s.length>1&&(a=r.filter(function(e){return i===e}).length,r.push(i)),e.music.unshuffledList.indexOf(s[a])});if(e.music.recommendations.length){var i=t.push(j.a.getContextByIndexFromOriginal(a.length))-1;a.push.apply(a,e.music.recommendations.map(function(e){return{context:i,id:String(e[j.a.getMediaId(e)]),type:A.ListChanged.Track.TrackType.DEFAULT.value,ui:A.ListChanged.PlayerUI.RECOMMENDED.value}}))}var s={contexts:t.map(function(e){var t=e.CONTEXT_ID,n=e.ID,a=e.TYPE;return{context_id:t||void 0,id:String(n),type:a}}),id:B.id||N()(),list:a};return o.reduce(function(e,t,n){return e=e&&t===n},!0)||(s.order=o,s.shuffled=!0),s}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];if("string"!=typeof e)return e;var n=void 0;return n=atob(e),n=Array.from(n).map(function(e){return e.charCodeAt(0)}),n=n.length&&M.indexOf(t)>-1?O.a.inflate(n):n,n=new C.a(n),t.read(n)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={PlaybackCurrentIndex:A.IndexChanged,PlaybackQueueList:A.ListChanged,PlaybackRepeatMode:A.RepeatChanged},r=void 0;n.defer&&(B.retries=(B.retries||0)+1,r=Date.now()+Math.round(Math.random()*(Math.pow(2,B.retries)-Math.pow(2,B.retries-1))*1e3)),B.retries>5?b.a.error("Triforce",new Error("Playback enforcement exceeded 5 attempts.")):U.add({name:e,timestamp:r,fn:function(){return v.a.singleton.post(e,function(e,t){var n=void 0;return n=new C.a,t.write(e,n),n=n.finish(),n=n.length&&M.indexOf(t)>-1?O.a.deflate(n,7):n,n=String.fromCharCode.apply(String,n),n=btoa(n)}(t,a[e])||null)}}).run()}var i=n("./node_modules/redux/es/index.js"),s=n("./node_modules/redux-dynamic-middlewares/lib/index.js"),l=n("./js/_components/Player/store/music.js"),c=n("./js/_components/Player/store/control.js"),u=n("./js/_components/Player/store/chromecast.js"),p=n("./js/_components/Player/store/config.js"),d=n("./js/_components/Player/store/lyrics.js"),f=n("./js/_modules/redux/middlewares/player/initialization.js"),h=n("./js/_modules/redux/middlewares/player/limitation.js"),m=n("./js/_modules/Events.js"),y=n("./js/_modules/internals.js"),b=n("./js/_modules/logger/client.js"),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(y.a)(this).list=[]}return e.prototype.add=function(e){var t=Object(y.a)(this);return t.list=t.list.filter(function(t){return t.name!==e.name}),t.list.push(e),this},e.prototype.clear=function(){return Object(y.a)(this).list.length=0,this},e.prototype.has=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Boolean(Object(y.a)(this).list.filter(function(t){return Object.keys(e).reduce(function(n,a){return n=n&&t[a]===e[a]},!0)}).length)},e.prototype.pause=function(){return Object(y.a)(this).paused=!0,this},e.prototype.prioritize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(y.a)(this),n=t.list.filter(function(t){return Object.keys(e).reduce(function(n,a){return n=n&&t[a]===e[a]},!0)});if(n.length){var a=n[n.length-1];return t.list=t.list.filter(function(e){return n.indexOf(e)<0}),t.list.unshift(a),!0}return!1},e.prototype.resume=function(){return Object(y.a)(this).paused=!1,this.run(),this},e.prototype.run=function(){var e=this,t=Object(y.a)(this);if(t.paused||t.running)return this;var n=t.list[0];if(n){var a=Date.now();if(n.timeout&&self.clearTimeout(n.timeout),n.timestamp>a)return n.timeout=self.setTimeout(function(){return e.run()},n.timestamp-a),this;t.list.shift(),t.running=!0;var r=n.fn();(!function(e){return Boolean(e)&&("object"===(void 0===e?"undefined":g(e))||"function"==typeof e)&&"function"==typeof e.then}(r)?Promise.resolve():r).catch(function(e){return b.a.error(e)}).then(function(){t.running=!1,e.run()})}return this},e}(),v=n("./js/_modules/XMPPWebSocket.js"),E=n("./node_modules/deflate-js/index.js"),O=n.n(E),j=n("./js/_modules/dzPlayer.js"),T=n("./js/_modules/gatekeeper.js"),w=n("./node_modules/lodash.isequal/index.js"),S=n.n(w),P=n("./node_modules/pbf/index.js"),C=n.n(P),k=n("./node_modules/uuid-v4/index.js"),N=n.n(k),A=n("./node_modules/deezer-protocol-buffers/PlayerSynchronization.proto"),I=n("./js/_modules/redux/stores/entities/episodes.js"),R=n("./js/_modules/redux/stores/entities/lives.js"),x=n("./js/_modules/redux/stores/entities/songs.js"),D=n("./js/_modules/redux/stores/user.js"),L=void 0,M=[A.ListChanged],F=new _,U=new _,B={paused:!0};Object(s.addMiddleware)(f.a,h.b,function(e){return function(t){return function(n){var i=e.getState(),s=t(n),u=e.getState();if(i===u)return s;if(!T.a.isAllowed("triforce_queuelist_messages"))return s;if(!Object(D.e)(u.user))return s;if(B.enabled!==Object(D.f)(u.user)){var p=void 0===B.enabled;if(B.enabled=Object(D.f)(u.user),!p)if(B.enabled){var d=function(e){return L[e.node](e)};Promise.resolve().then(function(){return v.a.singleton.get("PlaybackQueueList").then(d)}).then(function(){return v.a.singleton.get("PlaybackCurrentIndex").then(d)}).then(function(){return v.a.singleton.get("PlaybackRepeatMode").then(d)})}else F.clear(),U.clear(),delete B.id}if(n.type===l.a&&(m.a.subscribe(m.a.player.play,function(){return B.paused=!1}),m.a.subscribe(m.a.player.playing,function(e,t){return B.paused=!t}),m.a.subscribe(m.a.player.paused,function(e,t){return B.paused=!j.a.isPlaying()||Boolean(t)}),L={PlaybackCurrentIndex:function(t){var n=r(t.payload,A.IndexChanged);n&&F.add({id:n.id,name:"PlaybackCurrentIndex",fn:function(){if(!F.prioritize({name:"PlaybackQueueList"})&&!F.prioritize({id:B.id,name:"PlaybackCurrentIndex"})&&!U.has({name:"PlaybackQueueList"})){if(n.id!==B.id){var t=a(e.getState().player);return o("PlaybackQueueList",t,{defer:!0}),void o("PlaybackCurrentIndex",{id:t.id,index:j.a.getIndexSong()})}n.index!==j.a.getIndexSong()&&(B.paused?T.a.isAllowed("triforce_queuelist_ui")&&(delete B.retries,j.a.setTriforceIndex(n.index)):o("PlaybackCurrentIndex",{id:B.id,index:j.a.getIndexSong()},{defer:!0}))}}}).run()},PlaybackQueueList:function(t){function n(t){var n={loadEpisodes:I.e,loadLives:R.b,loadSongs:x.d}["load"+(t.charAt(0).toUpperCase()+t.substring(1))],a=(A.ListChanged.Track.TrackType[t.substring(0,t.length-1).toUpperCase()]||A.ListChanged.Track.TrackType.DEFAULT).value,r=i.list.filter(function(e){return e.type===a});return n({id:r.map(function(e){return e.id})})(e.dispatch,e.getState).then(function(e){return r.forEach(function(t,n){var a=t.context;Object.keys(t).forEach(function(e){return delete t[e]}),t.context=s[a],t.data=e[n],"up_next_artist"===t.context.TYPE&&i.recommended.push(t)})})}var i=r(t.payload,A.ListChanged);if(i&&i.id!==B.id){var s=i.contexts.map(function(e){return{CONTEXT_ID:e.context_id,ID:e.id,TYPE:e.type}});switch(i.recommended=[],i.list[0].ui){case A.ListChanged.PlayerUI.BLINDTEST.value:i.mode="blindtest";break;case A.ListChanged.PlayerUI.FLOW.value:i.mode="flow";break;case A.ListChanged.PlayerUI.MIX.value:i.mode="mix";break;default:i.mode="default"}F.add({name:"PlaybackQueueList",fn:function(){if(!F.prioritize({name:"PlaybackQueueList"}))return Promise.all([n("songs"),n("episodes"),n("lives")]).then(function(){if(!F.prioritize({name:"PlaybackQueueList"})){if(i.list=i.list.filter(function(e){return i.recommended.indexOf(e)<0}),i.original=[].concat(i.list),i.list=i.order.length?i.order.map(function(e){return i.list[e]}):i.list,delete i.contexts,delete i.order,!B.paused){var t=j.a.getContext(),n=t.CONTEXT_ID,r=t.ID,s=t.TYPE,l={CONTEXT_ID:n,ID:String(r),TYPE:s},c=j.a.getMediaId(),u=j.a.getCurrentSong(c),p=i.list.filter(function(e){return S()(e.context,l)}).filter(function(e){return e.data[c]===u});if(!p.length){var d=a(e.getState().player);return o("PlaybackQueueList",d,{defer:!0}),void o("PlaybackCurrentIndex",{id:d.id,index:j.a.getIndexSong()})}i.index=i.list.indexOf(p[0]),o("PlaybackCurrentIndex",{id:i.id,index:i.index})}return delete B.retries,B.id=i.id,T.a.isAllowed("triforce_queuelist_ui")&&j.a.setTriforceState(i)}})}}).run()}},PlaybackRepeatMode:function(e){var t=r(e.payload,A.RepeatChanged);return T.a.isAllowed("triforce_queuelist_ui")&&j.a.control.setRepeat(t?t.repeat:0,{sync:!1})}},v.a.singleton.on("connect",function(){return U.clear().resume()}),v.a.singleton.on("disconnect",function(){return U.pause()}),v.a.singleton.on("message",function(e){return B.enabled&&L[e.node](e)},{node:Object.keys(L)}),v.a.singleton.connect()),!1===n.sync||!B.enabled)return s;switch(n.type){case c.b:i.player.control.repeat!==u.player.control.repeat&&(delete B.retries,o("PlaybackRepeatMode",{repeat:u.player.control.repeat}));break;case l.c:if(!S()(i.player.music.list,u.player.music.list)||i.player.music.recommendations.length!==u.player.music.recommendations.length){var f=a(u.player);delete B.retries,B.id=f.id=N()(),o("PlaybackQueueList",f),o("PlaybackCurrentIndex",{id:B.id,index:u.player.music.index})}case l.b:S()(i.player.music.track,u.player.music.track)&&S()(i.player.music.context,u.player.music.context)||o("PlaybackCurrentIndex",{id:B.id,index:u.player.music.index})}return s}}});t.a=Object(i.combineReducers)({config:p.default,control:c.e,music:l.d,chromecast:u.a,lyrics:d.b})},"./js/_components/Root.js":function(e,t,n){"use strict";function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function be(e){var t=e.params,n=t.id,a=void 0===n?null:n,r=t.goBack;a&&(void 0!==r&&r?Oe.a.goBack():Oe.a.replace("/"),Te.a.play({type:Se.a.Livestream,id:parseInt(a,10),radio:!0,context:{TYPE:"livestream_page",ID:parseInt(a,10)}}))}var ge=n("./node_modules/react/index.js"),_e=n.n(ge),ve=n("./node_modules/react-redux/es/index.js"),Ee=n("./node_modules/react-router/es/index.js"),Oe=n("./js/_modules/navigation/history/index.js"),je=n("./js/_modules/www.js"),Te=n("./js/_modules/dzPlayer.js"),we=n("./js/_modules/config/index.js"),Se=n("./js/_modules/Type.js"),Pe=n("./js/_modules/gatekeeper.js"),Ce=n("./node_modules/jquery/dist/jquery.js"),ke=n.n(Ce),Ne=n("./node_modules/prop-types/index.js"),Ae=n.n(Ne),Ie=n("./node_modules/react-universal-component/dist/index.js"),Re=n.n(Ie),xe=n("./node_modules/lodash.size/index.js"),De=n.n(xe),Le=n("./js/_modules/modal.js"),Me=n("./js/_modules/Events.js"),Fe=n("./js/_modules/live/live.js"),Ue=n("./js/_modules/userData.js"),Be=n("./js/_modules/logger/client.js"),He=n("./js/_modules/Labs.js"),Ye=n("./js/_modules/redux/stores/user.js"),ze=n("./node_modules/react-smooth/es6/index.js"),Ge=n("./js/_modules/redux/stores/modal.js"),Ve=n("./node_modules/classnames/index.js"),qe=n.n(Ve),We=n("./js/_modules/i18n.js"),Ke=n("./js/_modules/api.js"),Qe=n("./js/_modules/redux/store.js"),Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=qe()("modal-header",this.props.className);return _e.a.createElement("div",{id:"modal_title",className:e},this.props.children)},t}(ge.Component);Xe.defaultProps={className:""};var $e=Xe,Je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return r(t,e),t.prototype.render=function(){var e,t=qe()("modal-body",(e={},e[this.props.className]=!0,e));return _e.a.createElement("div",{className:t},this.props.children)},t}(ge.Component);Je.defaultProps={className:""};var Ze=Je,et=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=qe()("modal-footer",this.props.className);return _e.a.createElement("div",{className:e},this.props.children)},t}(ge.Component);et.defaultProps={className:""};var tt=et;Qe.default.addReducers({modal:Ge.b});var nt={Header:$e,Body:Ze,Footer:tt},at=n("./js/_components/Icon/index.js"),rt=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),ot=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._actionsList={artist:["cover","duplicate_artist","explicit_content","other"],album:["wrong_artist","audio","explicit_content","other"],track:["wrong_artist","audio","explicit_content","other"]},a._onInputClick=a._onInputClick.bind(a),a._onClose=a._onClose.bind(a),a._onSubmit=a._onSubmit.bind(a),a._onClickOther=a._onClickOther.bind(a),a.state={inputOtherDisplay:!1,inputOtherError:!1,confirmMessage:!1},a}return i(t,e),t.prototype.componentWillUnmount=function(){Ke.a.cancel(this._feedbackApiRef)},t.prototype.render=function(){var e=this._getData();return e?_e.a.createElement("div",{className:"modal-feedback-catalog"},_e.a.createElement(nt.Header,null,Object(We.a)("Signaler un problème")),_e.a.createElement(nt.Body,{className:"feedback-catalog"},this._renderBody(e)),_e.a.createElement(nt.Footer,null,this._renderFooter())):null},t.prototype._renderBody=function(e){var t=this,n=this.state.confirmMessage;return!1!==n?_e.a.createElement("h4",{className:"heading-4"},n):_e.a.createElement("div",{className:"feedback-catalog-content"},_e.a.createElement("div",{className:"form-horizontal"},e.map(function(e){return _e.a.createElement("div",{className:"form-group",key:e.id},_e.a.createElement("span",{className:"checkbox",ref:"checkbox-"+e.id,onClick:t._onClick.bind(t,e.id)},_e.a.createElement("label",{className:"checkbox-label"},_e.a.createElement("input",{className:"checkbox-input",onChange:e.action?e.action:void 0,ref:e.id,type:"checkbox"}),e.label,rt)),t._renderInputText(e))})))},t.prototype._renderInputText=function(e){var t=this.state,n=t.inputOtherDisplay,a=t.inputOtherError;if(!n||"other"!==e.id)return null;var r=qe()({"form-group":!0,"has-error":a});return _e.a.createElement("div",{className:r},_e.a.createElement("input",{ref:"comment",className:"form-control",maxLength:140,placeholder:Object(We.a)("Écrire un commentaire"),type:"text",onClick:this._onInputClick}))},t.prototype._renderFooter=function(){return!1!==this.state.confirmMessage?_e.a.createElement("button",{className:"btn btn-default pull-right",type:"button",onClick:this._onClose},_e.a.createElement("span",{className:"label"},Object(We.a)("Fermer"))):_e.a.createElement("div",null,_e.a.createElement("button",{className:"btn btn-default pull-left",type:"button",onClick:this._onClose},_e.a.createElement("span",{className:"label"},Object(We.a)("Annuler"))),_e.a.createElement("button",{className:"btn pull-right btn-primary",type:"button",onClick:this._onSubmit},_e.a.createElement("span",{className:"label"},Object(We.a)("Valider"))))},t.prototype._onClick=function(e){var t=this.refs["checkbox-"+e],n=this.refs[e];t.className=qe()({checkbox:!0,checked:n.checked})},t.prototype._onInputClick=function(){this.state.inputOtherError&&this.setState({inputOtherError:!1})},t.prototype._onSubmit=function(){var e=this,t=this._getFormData();!1!==t&&(this._feedbackApiRef=Ke.a.call({method:"deezer.feedbackCatalog",data:{type:this.props.type,id:this.props.id,problem:t},success:function(t){t?e.setState({confirmMessage:Object(We.a)("Merci pour votre retour !")}):e._onClose()}}))},t.prototype._onClose=function(){this.props.closeModal()},t.prototype._onClickOther=function(){this.setState({inputOtherDisplay:!this.state.inputOtherDisplay})},t.prototype._getFormData=function(){var e=this,t=[];return this._getData().map(function(n){if(e.refs[n.id].checked){var a={type:n.id};if("other"===n.id){if(""===e.refs.comment.value)return t=[],e.setState({inputOtherError:!0}),!1;a.data=e.refs.comment.value}t.push(a)}return!0}),0!==t.length&&t},t.prototype._getData=function(){var e=this,t=this.props.type,n=[];return this._actionsList[t].forEach(function(a){return n.push({id:a,label:e._getWording(t,a),action:"other"===a?e._onClickOther:void 0})}),n},t.prototype._getWording=function(e,t){return{cover:Object(We.a)("La photo n'est pas bonne."),duplicate_artist:Object(We.a)("Cet artiste existe déjà."),wrong_artist:e===Se.a.Album?Object(We.a)("Cet album n'est pas de cet artiste."):Object(We.a)("Ce titre n'est pas de cet artiste."),audio:Object(We.a)("Il y a un problème audio."),explicit_content:Object(We.a)("Contenu indésirable."),other:Object(We.a)("Autre")}[t]||""},t}(ge.Component),it=Object(ve.b)(null,{closeModal:Ge.a})(ot),st=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.ERROR_MSG=Object(We.a)("Votre adresse email n'a pas été mise à jour."),a.ERROR_CONFIRM_EMAIL_MSG=Object(We.a)("Vos adresses email ne correspondent pas. Veuillez réessayer."),a.ERROR_ALREADY_EXIST_MSG=Object(We.a)("Cette adresse email est indisponible."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return s(t,e),t.prototype.componentWillUnmount=function(){Ke.a.cancel(this._apiRef)},t.prototype.render=function(){return _e.a.createElement("div",null,_e.a.createElement(nt.Header,null,Object(We.a)("Modification de votre email")),_e.a.createElement(nt.Body,{className:"wrapper"},_e.a.createElement("form",{className:"form-horizontal"},_e.a.createElement("div",{className:"form-wrapper"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(We.a)("Votre mot de passe")})),_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"email",className:"form-control",type:"text",placeholder:Object(We.a)("Votre nouvel email")})),_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"email_confirm",className:"form-control",type:"text",placeholder:Object(We.a)("Vérification du nouvel email")})),this.state.message?_e.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,_e.a.createElement("div",{className:"form-group"},_e.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},_e.a.createElement("span",{className:"label"},Object(We.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n="",a=this.refs,r=a.password,o=a.email,i=a.email_confirm;!o.value.length||!i.value.length||r.value.length<6?n=this.ERROR_MSG:o.value!==i.value&&(n=this.ERROR_CONFIRM_EMAIL_MSG),""===n?this._apiRef=Ke.a.call({method:"deezer.updateEmail",data:{password:r.value,email:o.value},success:function(e){e&&(Me.a.trigger(Me.a.user.updateEmail,{email:o.value}),t.props.closeModal()),t.setState({message:t.ERROR_MSG})},error:function(e){var n=t.ERROR_MSG;"Email already exists"===e.message&&(n=t.ERROR_ALREADY_EXIST_MSG),"Invalid email domain"===e.message&&(n=Object(We.a)("Le nom de domaine '%s' n'est pas autorisé.",{sprintf:[e.payload.domain]})),t.setState({message:n})}}):this.setState({message:n})},t}(ge.Component),lt=Object(ve.b)(null,{closeModal:Ge.a})(st),ct=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.ERROR_MSG=Object(We.a)("Votre mot de passe n'a pas été mis à jour."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return l(t,e),t.prototype.componentWillUnmount=function(){Ke.a.cancel(this._apiRef)},t.prototype.render=function(){return _e.a.createElement("div",null,_e.a.createElement(nt.Header,null,Object(We.a)("Modification du mot de passe")),_e.a.createElement(nt.Body,{className:"wrapper"},_e.a.createElement("form",{className:"form-horizontal"},_e.a.createElement("div",{className:"form-wrapper"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"old_password",className:"form-control",type:"password",placeholder:Object(We.a)("Votre mot de passe")})),_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(We.a)("Votre nouveau mot de passe")})),_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{ref:"password_confirm",className:"form-control",type:"password",placeholder:Object(We.a)("Vérification du mot de passe")})),this.state.message?_e.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,_e.a.createElement("div",{className:"form-group"},_e.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},_e.a.createElement("span",{className:"label"},Object(We.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n=this.refs,a=n.old_password,r=n.password,o=n.password_confirm;!a.value.length||r.value.length<6||r.value!==o.value?this.setState({message:this.ERROR_MSG}):this._apiRef=Ke.a.call({method:"deezer.updatePassword",data:{old_password:a.value,password:r.value},success:function(e){e?t.props.closeModal():t.setState({message:t.ERROR_MSG})}})},t}(ge.Component),ut=Object(ve.b)(null,{closeModal:Ge.a})(ct),pt=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state={selectedChronicle:n.selectedChronicle},a}return c(t,e),t.prototype.render=function(){var e=this.props.data[this.state.selectedChronicle];return _e.a.createElement("div",{id:"modal_album_chronicles"},_e.a.createElement(nt.Header,null,Object(We.a)("CHRONIQUE")),_e.a.createElement(nt.Body,null,_e.a.createElement("div",{className:"wrapper"},_e.a.createElement("div",{className:"chronicle-heading"},_e.a.createElement("div",{className:"chronicle-title heading-1"},e.ALB_TITLE),this._renderLogo()),this._renderChronicle(e.CHRONICLE),_e.a.createElement("div",{className:"chronicle-footer heading-4"},_e.a.createElement("p",null,e.AUTHOR_NAME),_e.a.createElement("p",null,Object(We.a)("Source :")," ",_e.a.createElement("a",{className:"link-primary link-animated",href:e.URL,target:"_blank"},e.PARTNER_NAME))))))},t.prototype._renderChronicle=function(e){return _e.a.createElement("div",{className:"chronicle-text",dangerouslySetInnerHTML:{__html:e}})},t.prototype._renderLogo=function(){var e=this,t=this.props.data,n=this.state.selectedChronicle;return t.map(function(t,a){var r=t.LOGO_BIG.split("."),o=r[0],i=r[1],s=qe()("chronicle-logo",{"is-active":n===a});return _e.a.createElement("button",{className:s,key:t.SOURCE,onClick:function(){return e._onSelect(a)},role:"button"},_e.a.createElement("img",{src:"https://"+we.a.get("host_static_ssl")+"/img/review/big/"+o+"-v"+we.a.get("STATIC_VERSION")+"."+i}))})},t.prototype._onSelect=function(e){this.setState({selectedChronicle:e})},t}(ge.Component);pt.defaultProps={selectedChronicle:0};var dt={CATALOG_FEEDBACK:it,UPDATE_EMAIL:lt,UPDATE_PASSWORD:ut,ALBUM_CHRONICLES:Object(ve.b)(null,{closeModal:Ge.a})(pt)},ft=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._open=a._open.bind(a),a._close=a._close.bind(a),a._onKeyDown=a._onKeyDown.bind(a),a._onOutsideMouseDown=a._onOutsideMouseDown.bind(a),a}return u(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.disableClosingAction,a=e.data,r=e.name;if(!t)return null;var o=function(e){return dt[e]||!1}(r);return o?_e.a.createElement("div",{className:"modal",role:"dialog","aria-hidden":!1,"aria-labelledby":"modal_title"},_e.a.createElement(ze.a,{from:{opacity:0},to:{opacity:.8},duration:150},_e.a.createElement("div",{className:"modal-backdrop",onClick:this._close})),_e.a.createElement("div",{className:"modal-wrapper"},_e.a.createElement(ze.a,{from:{opacity:0},to:{opacity:1},duration:150},_e.a.createElement("div",{className:"modal-dialog modal-large",ref:"content"},n?null:_e.a.createElement("button",{className:"modal-close icon icon-cancel",id:"modal-close",type:"button",onClick:this._close}),_e.a.createElement(o,a))))):null},t.prototype._onKeyDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&27===e.keyCode&&this._close()},t.prototype._onOutsideMouseDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&"HTML"!==e.target.tagName&&e.target.contains(this.refs.content)&&(e.stopPropagation(),this._close())},t.prototype._close=function(){this.props.closeModal()},t.prototype._open=function(){this.props.openModal()},t}(ge.Component),ht=Object(ve.b)(function(e){var t=e.modal;return{name:t.name,data:t.props,disableClosingAction:t.disableClosingAction,isOpen:""!==t.name}},{closeModal:Ge.a,openModal:Ge.c})(ft),mt=n("./js/_modules/redux/stores/labs.js"),yt=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return p(t,e),t.prototype.render=function(){var e=this.props,t=e.id;if(!e.active[t])return null;var n=this._getLabComponent(t);return n?_e.a.createElement(n,null):null},t.prototype._getLabComponent=function(e){var t=this.props.list.filter(function(t){return t.id===e});return t.length?t[0].component:null},t}(ge.Component);Qe.default.addReducers({labs:mt.a});var bt=Object(ve.b)(function(e){var t=e.labs,n=e.user.USER.SETTING.site.labs||{};return{list:Object(mt.e)(t),active:Object(mt.d)(t,n)}})(yt),gt=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onUserLoaded=a._onUserLoaded.bind(a),a._onNewInAppMessages=a._onNewInAppMessages.bind(a),a}return d(t,e),t.prototype.componentDidMount=function(){this.props.isAvailable&&Me.a.ready(Me.a.user.loaded,this._onUserLoaded)},t.prototype.componentWillReceiveProps=function(e){this._appboy&&this.props.userID!==e.userID&&this._appboy.changeUser(e.userID)},t.prototype.componentWillUnmount=function(){this._appboy&&this._appboy.destroy()},t.prototype.render=function(){return null},t.prototype._onUserLoaded=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("node-modules-appboy-web-sdk-appboy-min").then(n.bind(null,"./node_modules/appboy-web-sdk/appboy.min.js"));case 2:this._appboy=e.sent,this._appboy.initialize(this.props.apiKey),this._appboy.changeUser(this.props.userID),this._appboy.subscribeToNewInAppMessages(this._onNewInAppMessages),this._appboy.openSession();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.prototype._onNewInAppMessages=function(e){var t=this,n=e[0];return void 0===n.extras.OFFER_KEY?(this._appboy.display.showInAppMessage(n),e.slice(1)):(Ke.a.call({method:"appboy.getOfferDataByKey",data:{OFFER_KEY:n.extras.OFFER_KEY},success:function(e){if(""!==e.name){var a=e.amount_currency,r=e.duration,o=n.header,i=n.message;a&&o&&(n.header=o.replace(/<PRICE>/g,a)),a&&i&&(n.message=i.replace(/<PRICE>/g,a)),r&&o&&(n.header=o.replace(/<DURATION>/g,r)),r&&i&&(n.message=i.replace(/<DURATION>/g,r)),t._appboy.display.showInAppMessage(n)}}}),e.slice(1))},t}(ge.Component);Qe.default.addReducers({appboy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.__DZR_APPBOY_INIT__||{apiKey:"",isAvailable:!1};return arguments[1].type,e}});var _t=Object(ve.b)(function(e){var t=e.user,n=e.appboy;return{userID:t.id,apiKey:n.apiKey,isAvailable:n.isAvailable}})(gt),vt=n("./js/_components/App/components/LoadingBar.js"),Et=n("./js/_modules/EventDispatcher.js"),Ot=n("./js/_modules/BrowserDetect.js"),jt=n("./js/_modules/user.js"),Tt=n("./js/_modules/userSetting.js"),wt=n("./js/_modules/dom.js"),St=n("./js/_modules/link.js"),Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ct="components/Menu/SET_ACTIVE_PANEL",kt={activePanel:null},Nt=n("./js/_modules/SearchStore.js"),At=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._focused=!1,a._request_suggest_timeout=null,a._handleBlur=a._handleBlur.bind(a),a._handleKeys=a._handleKeys.bind(a),a._handleEnterKey=a._handleEnterKey.bind(a),a._handleClick=a._handleClick.bind(a),a._triggerSearch=a._triggerSearch.bind(a),a._searchStoreChanged=a._searchStoreChanged.bind(a),a}return f(t,e),t.prototype.componentDidMount=function(){Nt.a.onChange(this._searchStoreChanged)},t.prototype.componentWillUnmount=function(){clearTimeout(this._request_suggest_timeout),Nt.a.offChange(this._searchStoreChanged),Nt.a.cancel()},t.prototype.render=function(){var e=Object(We.a)("Rechercher"),t=qe()({search:!0,active:this.props.active});return _e.a.createElement("div",{className:t,role:"search"},_e.a.createElement("form",{onSubmit:this._triggerSearch,autoComplete:"off"},_e.a.createElement("div",{className:"search-form"},_e.a.createElement("label",{htmlFor:"menu_search",className:"sr-only"},e),_e.a.createElement("input",{id:"menu_search",ref:"query",className:"search-control",type:"search",placeholder:e,onBlur:this._handleBlur,onChange:this._handleKeys,onKeyUp:this._handleEnterKey,onClick:this._handleClick}),_e.a.createElement("button",{className:"search-submit",type:"submit"},_e.a.createElement(at.a,{name:"search",size:"16",srLabel:e})))))},t.prototype._searchStoreChanged=function(e){if("suggest"!==e)return!1;var t=Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod");""!==Nt.a.getQuery()&&this._focused?Me.a.trigger(Me.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuth&&Ue.a.isLoaded&&this._focused&&!t?Me.a.trigger(Me.a.menu.openPanel,{panel:"searchhistory"}):Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._handleKeys=function(){var e=this.refs.query.value;Nt.a.setQuery(e),this._triggerSuggest()},t.prototype._handleEnterKey=function(e){13===e.keyCode&&(this.refs.query.blur(),this._triggerSearch())},t.prototype._handleClick=function(){var e=Nt.a.getQuery(),t=Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod");e?Me.a.trigger(Me.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuth&&!t&&Me.a.trigger(Me.a.menu.openPanel,{panel:"searchhistory"}),this._focused||(this.refs.query.select(),this._focused=!0)},t.prototype._handleBlur=function(){this._focused=!1},t.prototype._triggerSuggest=function(){var e=Nt.a.getQuery();null!==this._request_suggest_timeout&&(clearTimeout(this._request_suggest_timeout),this._request_suggest_timeout=null),this._request_suggest_timeout=setTimeout(function(){Nt.a.search(e)},this.props.request_suggest_wait_value)},t.prototype._triggerSearch=function(e){e&&e.preventDefault();var t=Nt.a.getQuery();t&&(this.props.isAuth&&Ue.a.addSearchHistory(t),we.a.set("__SEARCH_TAB","all"),Me.a.trigger(Me.a.menu.closeAllPanels),0===t.lastIndexOf("#",0)?(t=t.replace(/#/g,""),je.c.navigate("/tags/"+encodeURIComponent(t),{force:!0})):je.c.navigate("/search/"+encodeURIComponent(t),{force:!0}))},t}(ge.PureComponent);At.defaultProps={request_suggest_wait_value:400};var It=Object(ve.b)(function(e){return{isAuth:e.user.isAuth}})(At),Rt=n("./js/_components/Badge.js"),xt=n("./js/_modules/notification.js"),Dt=n("./js/_modules/chromecast/index.js"),Lt=n("./js/_modules/player/PlayerMetrics.js"),Mt=n("./js/_modules/navigation/index.js"),Ft=n("./js/_components/Player/store/player.js"),Ut=n("./js/_components/Player/store/config.js"),Bt=n("./js/_components/Player/store/control.js"),Ht=n("./js/_components/Player/store/music.js"),Yt=n("./js/_components/Player/store/chromecast.js"),zt=n("./js/_components/Link.js"),Gt=_e.a.createElement("div",{className:"player-track-title heading-2"},"???"),Vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.track,r=e.isBusinessNonMod,o=e.isBlindTestMode,i=e.title;if("ads"===t&&void 0!==window.sasAudioConfig)return this._renderAd();if(o&&n!==Te.a.MEDIA_TYPE_TALK&&n!==Te.a.MEDIA_TYPE_EXTERNAL&&n!==Te.a.MEDIA_TYPE_LIVE_STREAM)return Gt;window.document.title=i;var s=_e.a.createElement("span",null,i);if(!r){var l=function(e,t){var n=null;return t===Te.a.MEDIA_TYPE_TALK?n="/show/"+e.SHOW_ID:Number(e.ALB_ID)>0&&(n="/album/"+e.ALB_ID),n}(a,n);s=_e.a.createElement(zt.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},i)}return _e.a.createElement("div",{className:"player-track-title heading-2"},s)},t.prototype._renderAd=function(){var e={title:window.sasAudioConfig.text,link:decodeURIComponent(window.sasAudioConfig.url)},t=void 0;return t="http"===e.link.substr(0,4)?_e.a.createElement("a",{className:"player-track-link",href:e.link,onClick:function(t){t.preventDefault(),Object(Mt.b)(e.link)}},e.title):_e.a.createElement(zt.a,{className:"player-track-link",to:e.link,onClick:function(e){return e.stopPropagation()}},e.title),_e.a.createElement("div",{className:"player-track-title heading-2 ads"},t)},t}(ge.Component),qt=_e.a.createElement("div",null),Wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.track,n=e.playerType,a=e.mediaType,r=e.isFingerprinted,o=e.isBusinessNonMod,i=e.isBlindTestMode,s=e.artists;if("ads"===n)return qt;if(a===Te.a.MEDIA_TYPE_TALK)return _e.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},_e.a.createElement(zt.a,{className:"player-track-link",to:"/show/"+t.SHOW_ID,onClick:function(e){return e.stopPropagation()}},t.SHOW_NAME));if(a===Te.a.MEDIA_TYPE_EXTERNAL||a===Te.a.MEDIA_TYPE_LIVE_STREAM){var l=r?"/artist/"+t.ART_ID:null;return _e.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},l?_e.a.createElement(zt.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},t.ART_NAME):_e.a.createElement("span",null,t.ART_NAME))}return _e.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},Object(We.a)("par")," ",s.map(function(e,t){if(i)return"???";window.document.title+=" - "+e.ART_NAME+" - Deezer";var n="artist_"+e.ART_ID+t,a=_e.a.createElement("span",{key:n},e.ART_NAME);if(!o){var r=0!==Number(e.ART_ID)?"/artist/"+e.ART_ID:null;a=_e.a.createElement(zt.a,{className:"player-track-link",key:n,to:r,onClick:function(e){return e.stopPropagation()}},e.ART_NAME)}return[t>0?", ":"",a]}))},t}(ge.Component),Kt=n("./js/_modules/displayNotification.js"),Qt=n("./js/_components/Tooltip/index.js"),Xt=n("./js/_components/Dislike.js"),$t=n("./js/_components/Favorite.js"),Jt=n("./js/_components/ContextMenu/Track.js"),Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},en=_e.a.createElement("span",{className:"icon icon-playlist-add"}),tn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onDislikeClick=a._onDislikeClick.bind(a),a._onFavoriteClick=a._onFavoriteClick.bind(a),a._toggleLyrics=a._toggleLyrics.bind(a),a}return y(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this._nextSongTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isSponsored,r=e.isFingerprinted,o=e.isRadio,i=e.seek,s=[];return"ads"!==t&&(n===Te.a.MEDIA_TYPE_SONG?(s.push(this._renderFavorite()),o&&s.unshift(this._renderDislike()),this.props.hasLyrics&&s.push(this._renderLyrics()),o||s.push(this._renderAddToPlaylist()),a&&s.push(this._renderOptions())):n===Te.a.MEDIA_TYPE_LIVE_STREAM&&r&&s.push(this._renderFavorite(),this._renderAddToPlaylist())),_e.a.createElement("div",{className:"player-actions clearfix",onClick:i},s.map(function(e,t){return[e,t===s.length-1]}))},t.prototype._renderFavorite=function(){var e=this.props,t=e.isSponsored,n=e.track,a=String(n.SNG_ID_ORIGIN||n.SNG_ID);return _e.a.createElement("span",{key:"favorite",className:"action"},_e.a.createElement($t.a,{className:t?null:"icon-stack icon-stack-circle icon-32",type:"song",context:"player",tooltip:!0,tooltipPosition:"top-right",id:a,onClickCallback:this._onFavoriteClick}))},t.prototype._renderDislike=function(){var e=this.props,t=e.isSponsored,n=e.id;return _e.a.createElement("span",{key:"dislike",className:"action"},_e.a.createElement(Xt.a,{className:t?null:"icon-stack icon-stack-circle icon-32",tooltip:!0,tooltipPosition:"top-right",id:n,onClickCallback:this._onDislikeClick}))},t.prototype._renderAddToPlaylist=function(){var e=this.props,t=e.track,n=e.isSponsored,a=e.id,r=e.context,o=qe()({"icon-32 icon-stack icon-stack-circle":!n}),i=_e.a.createElement("button",{className:"action-item-btn",type:"button"},_e.a.createElement("span",{className:o},en)),s=Object(We.a)("Ajouter à une playlist"),l={position:"right",type:"track",forceShowPlaylists:!0,anchor:i,data:{SONG:t,PLAYLIST_ID:r.ID},id:Number(a),context:"player",srLabel:s};return _e.a.createElement(Qt.a,{text:s,position:"top-right",key:"add_playlist_"+a},_e.a.createElement("span",{className:"action"},_e.a.createElement(Jt.a,l)))},t.prototype._renderLyrics=function(){var e=this.props,t=e.id,n=e.lyricsOpened,a=e.isSponsored,r=qe()({"icon icon-lyrics":!0,disabled:Number(t)<0,active:n}),o=n?Object(We.a)("Masquer les paroles"):Object(We.a)("Afficher les paroles"),i=qe()({"icon-32 icon-stack icon-stack-circle":!a});return _e.a.createElement(Qt.a,{text:o,position:"top-right",key:"lyrics_"+t},_e.a.createElement("button",{className:"action",type:"button","aria-label":o,onClick:this._toggleLyrics},_e.a.createElement("span",{className:i,id:"player-lyrics"},_e.a.createElement("span",{className:r}))))},t.prototype._renderOptions=function(){var e=this.props,t=e.track,n=e.id,a=e.isFavorite,r=e.isRadio,o=e.context,i={position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:o.ID},context:"player",isFavorite:a,isRadio:r};return _e.a.createElement(Jt.a,Zt({key:"contextMenu"},i))},t.prototype._onDislikeClick=function(){var e=this.props,t=e.skipRadioAllowed,n=e.next;if(!t){if(this._notifyAlreadyDisplayed)return;return this._notifyAlreadyDisplayed=!0,void xt.b.display("flow_skip_push",{})}Object(Kt.a)("dislike"),this._nextSongTimeoutRef=setTimeout(n,300)},t.prototype._onFavoriteClick=function(e,t,n){n&&Object(Kt.a)("like")},t.prototype._toggleLyrics=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.isChromecastLoading,a=t.lyricsOpened;n&&!a||Me.a.trigger(Me.a.menu.openLyricsPanel,{context:"player",toggle:!0})},t}(ge.Component),nn=Object(ve.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,skipRadioAllowed:e.player.control.skipRadioAllowed,isChromecastLoading:e.player.chromecast.loading,lyricsOpened:"lyrics"===e.menu.activePanel,hasLyrics:Object(Ht.l)(e)}})(tn),an=n("./js/_modules/utils.js"),rn=_e.a.createElement("div",{className:"progress progress-background"}),on=_e.a.createElement("div",{className:"progress-seek-overlay"}),sn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._dragging=!1,a._seekOnKeyDown=a._seekOnKeyDown.bind(a),a}return b(t,e),t.prototype.componentDidMount=function(){var e=this;ke()(this.refs.seek).draggable({axis:"x",containment:"parent",start:function(){e._dragging=!0},stop:function(t,n){var a=e.props,r=a.playing,o=a.seek,i=a.cursorPosition;e._dragging=!1,r?o(null,n.position.left/t.target.parentNode.offsetWidth):ke()(this).css("left",i)}})},t.prototype.componentDidUpdate=function(){ke()(this.refs.seek).draggable(this.props.canSeek?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.buffer,n=e.position,a=e.trackDuration,r=e.cursorPosition,o=e.seek,i=e.canSeek,s={};this._dragging||(s.left=r);var l=qe()({"player-progress":!0,"player-seek-disabled":!i});return _e.a.createElement("div",{className:l},rn,_e.a.createElement("div",{className:"progress progress-buffer",style:{width:t+"%"},onClick:o}),_e.a.createElement("div",{className:"progress progress-seek",style:{width:r},onClick:o},on),_e.a.createElement("div",{className:"progress-handler",style:s,ref:"seek",role:"slider",tabIndex:i&&a?0:-1,"aria-live":"polite","aria-valuenow":n.toFixed(2),"aria-valuemin":"0","aria-valuemax":a,"aria-valuetext":Object(We.a)("%s sur %s",{sprintf:[Object(an.E)(n),Object(an.E)(a)]}),"aria-disabled":!i||!a,"aria-label":Object(We.a)("Aller à la position"),onKeyDown:this._seekOnKeyDown}),_e.a.createElement("div",{className:"progress-time"},Object(an.E)(n)),_e.a.createElement("div",{className:"progress-length"},Object(an.E)(a)))},t.prototype._seekOnKeyDown=function(e){var t=this.props,n=t.trackDuration,a=t.position,r=33,o=34,i=35,s=36,l=37,c=38,u=39,p=40;if(-1!==[r,o,i,s,l,c,u,p].indexOf(e.keyCode)){e.preventDefault();var d=a/n;e.keyCode!==l&&e.keyCode!==p||(d-=.01),e.keyCode===o&&(d-=.1),e.keyCode===s&&(d=0),e.keyCode!==u&&e.keyCode!==c||(d+=.01),e.keyCode===r&&(d+=.1),e.keyCode===i&&(d=.98),Te.a.control.seek(Math.min(Math.max(d,0),1))}},t}(ge.Component),ln=Object(ve.b)(function(e){return{playing:e.player.control.playing,buffer:e.player.control.buffer,position:e.player.control.position,trackDuration:e.player.music.trackDuration,cursorPosition:Object(Bt.f)(e)}})(sn),cn=(n("./node_modules/isomorphic-fetch/fetch-npm-browserify.js"),function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onSponsoredClick=a._onSponsoredClick.bind(a),a}return g(t,e),t.prototype.render=function(){var e=this.props.sponsoredData;return e.CTA_URL?_e.a.createElement("a",{className:"thumbnail-sponsored",href:e.CTA_URL,onClick:this._onSponsoredClick,rel:"noopener",target:"_blank"},_e.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-live":"assertive"},Object(We.a)("SPONSORISÉ")),_e.a.createElement("span",{className:"thumbnail-sponsored-link"},_e.a.createElement("span",{className:"btn btn-sponsored btn-small btn-block link-animated"},_e.a.createElement("span",{className:"label"},e.CTA_TEXT)))):_e.a.createElement("div",{className:"thumbnail-sponsored"},_e.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-assertive":"true"},Object(We.a)("SPONSORISÉ")))},t.prototype._onSponsoredClick=function(e){var t=this.props.sponsoredData,n=we.a.get("host_website_ssl");t.CTA_TRACKING_URL&&fetch(t.CTA_TRACKING_URL+Te.a.getPosition().toFixed(0));var a=t.CTA_URL;-1!==a.indexOf(n)&&(e.preventDefault(),0===(a=a.replace(/^(https?):\/\//,"").replace(n,"")).length&&(a="/"),window.reactRouter.push(a))},t}(ge.Component)),un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return _(t,e),t.prototype.render=function(){var e=this.props,t=e.cover,n=e.isBusinessNonMod,a=e.isSponsored,r=e.sponsoredData,o=e.canSeek,i=this.props,s=i.seek,l=i.next;return _e.a.createElement("div",{className:"player-cover",id:"player-cover"},_e.a.createElement("img",{src:t,height:"220",width:"220",alt:""}),a?null:this._renderTitle(),this._renderOptions(),a||n?null:_e.a.createElement(nn,{seek:s,next:l}),_e.a.createElement(ln,{seek:s,canSeek:o}),a?_e.a.createElement(cn,{sponsoredData:r}):null,_e.a.createElement("div",{className:"player-overlay",onClick:s}))},t.prototype._renderTitle=function(){var e=this.props,t=e.seek,n=e.trackTitle,a=e.trackArtists,r=a.map(function(e){return e.ART_NAME}).join(", ");return _e.a.createElement("div",{className:"player-track",onClick:t},_e.a.createElement("div",{"aria-hidden":"true"},_e.a.createElement(Vt,un({},this.props,{title:n})),_e.a.createElement(Wt,un({},this.props,{artists:a}))),_e.a.createElement("span",{className:"sr-only",id:"player-track-info"},Object(We.a)("Player")," - ",_e.a.createElement("span",{"aria-live":"assertive"},n," ",Object(We.a)("par")," ",r)))},t.prototype._renderOptions=function(){if(!this._hasOptions())return null;var e=this.props,t=e.track,n=e.id,a=e.context,r=e.isFavorite,o=e.isRadio,i={className:"player-options",position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:a.ID},context:"player",isFavorite:r,isRadio:o};return _e.a.createElement(Jt.a,i)},t.prototype._hasOptions=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isFingerprinted,r=e.isSponsored;return!(e.isBusinessNonMod||"ads"===t||r||n!==Te.a.MEDIA_TYPE_SONG&&!a)},t}(ge.Component),dn=Object(ve.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,sponsoredData:e.player.music.sponsoredData,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playing:e.player.control.playing,cover:Object(Ht.e)(e),trackTitle:Object(Ht.k)(e),trackArtists:Object(Ht.j)(e)}})(pn),fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.available,n=e.connecting,a=e.casting,r=qe()({"chromecast-icon":!0,hidden:!t}),o=qe()({"is-connecting":n,active:a});return _e.a.createElement("button",{className:r,type:"button",title:"Chromecast","aria-label":"Chromecast",onClick:this._onClick},_e.a.createElement(at.a,{className:o,name:"chromecast",size:"20"}))},t.prototype._onClick=function(){Dt.a.requestSession()},t}(ge.Component),mn=Object(ve.b)(function(e){var t=e.player;return fn({},t.chromecast)})(hn),yn=_e.a.createElement(at.a,{className:"is-volume-default",name:"volume",size:"18"}),bn=_e.a.createElement(at.a,{className:"is-volume-min",name:"volume-min",size:"18"}),gn=_e.a.createElement(at.a,{className:"is-volume-off",name:"volume-off",size:"18"}),_n=_e.a.createElement("div",{className:"control control-volume-max disabled"},_e.a.createElement(at.a,{className:"is-volume-max",name:"volume",size:"18"})),vn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._setVolume=a._setVolume.bind(a),a._setVolumeOnKeyDown=a._setVolumeOnKeyDown.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a}return E(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.isChromecastLoading;ke()(this.refs.volume).draggable({axis:"x",containment:"parent",drag:function(n,a){t?n.preventDefault():ke()(this).is(":visible")&&e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4))},stop:function(n,a){t?n.preventDefault():ke()(this).is(":visible")?e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4)):ke()(this).css("left",100*e.props.volume+"%")}})},t.prototype.componentDidUpdate=function(){ke()(this.refs.volume).draggable("ads"!==this.props.playerType?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.volume,n=e.isBusinessNonMod,a=e.mute,r=a?0:100*t,o=qe()({volume:!0,"volume-extended":n}),i=qe()({control:!0,"control-volume":!a,"control-volume-mute":a}),s=a?Object(We.a)("Remettre le son"):Object(We.a)("Couper le son");return _e.a.createElement("li",{className:o},_e.a.createElement("button",{className:i,type:"button",title:s,"aria-label":s,onClick:this._toggleMute},yn,bn,gn),_e.a.createElement("span",{className:"volume-progress",onClick:this._onVolumeChange,ref:"volume_bar"},_e.a.createElement("span",{className:"volume-progress-bar"},_e.a.createElement("span",{className:"volume-bar",style:{width:r+"%"},onClick:this._onVolumeChange}),_e.a.createElement("span",{className:"volume-handler",ref:"volume",role:"slider","aria-label":Object(We.a)("Volume"),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":r.toFixed(2),"aria-valuetext":Object(We.a)("Volume")+" - "+r.toFixed(2)+"%",onKeyDown:this._setVolumeOnKeyDown,style:{left:r+"%"}}))),_n)},t.prototype._onVolumeChange=function(e){e.preventDefault(),e.stopPropagation();var t=(e.pageX-e.currentTarget.getBoundingClientRect().left)/this.refs.volume_bar.offsetWidth;this._setVolume(t)},t.prototype._setVolume=function(e){e=Math.max(Math.min(e,1),0),Te.a.control.setVolume(e,!0)},t.prototype._setVolumeOnKeyDown=function(e){var t=33,n=34,a=35,r=36,o=37,i=38,s=39,l=40;if(-1!==[t,n,a,r,o,i,s,l].indexOf(e.keyCode)){e.preventDefault();var c=this.props.volume;e.keyCode!==o&&e.keyCode!==l||(c-=.01),e.keyCode===n&&(c-=.1),e.keyCode===r&&(c=0),e.keyCode!==s&&e.keyCode!==i||(c+=.01),e.keyCode===t&&(c+=.1),e.keyCode===a&&(c=1),c=Math.max(Math.min(c,1),0),Te.a.control.setVolume(c,!0)}},t.prototype._toggleMute=function(){Te.a.control.mute(!Te.a.isMuted())},t}(ge.Component),En=n("./js/_components/hocs/TrackingComponent.js"),On=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._cycleRepeat=a._cycleRepeat.bind(a),a}return O(t,e),t.prototype.render=function(){var e=this.props.repeat,t=qe()({active:e>0}),n=Object(We.a)("Répéter");switch(e){case 0:n=Object(We.a)("Réécouter tous les titres");break;case 1:n=Object(We.a)("Réécouter ce titre");break;case 2:n=Object(We.a)("Désactiver la fonction Répéter")}return _e.a.createElement("li",null,_e.a.createElement("button",{className:"control control-repeat",type:"button",title:n,"aria-label":n,onClick:this._cycleRepeat},_e.a.createElement(at.a,{className:t,name:2===e?"repeat-one":"repeat",size:"18"})))},t.prototype._cycleRepeat=function(e){this.tracking("player_click",e.currentTarget);var t=2===this.props.repeat?0:this.props.repeat+1;this.tracking("player_click",e.currentTarget),Te.a.control.setRepeat(t)},t}(ge.Component),jn=Object(En.a)(On),Tn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._toggleShuffle=a._toggleShuffle.bind(a),a}return j(t,e),t.prototype.render=function(){var e=this.props.shuffle,t=qe()({active:e}),n=e?Object(We.a)("Désactiver le mode aléatoire"):Object(We.a)("Activer le mode aléatoire");return _e.a.createElement("li",null,_e.a.createElement("button",{className:"control control-shuffle",type:"button",title:n,"aria-label":n,onClick:this._toggleShuffle},_e.a.createElement(at.a,{className:t,name:"shuffle",size:"18"})))},t.prototype._toggleShuffle=function(e){this.tracking("player_click",e.currentTarget),Te.a.control.setShuffle(!this.props.shuffle)},t}(ge.Component),wn=Object(En.a)(Tn),Sn=_e.a.createElement("li",{className:"chromecast"},_e.a.createElement(mn,null)),Pn=_e.a.createElement("li",{className:"invisible"}),Cn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._toggleQueuelist=a._toggleQueuelist.bind(a),a}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.isBusinessNonMod,n=e.isChromecastLoading,a=e.playerType,r=e.volume,o=e.mute,i=[];return t||(-1!==["mod","planning","campaign"].indexOf(a)?i=this._renderModControls():"radio"===a?i=this._renderRadioControls():"ads"===a&&(i=_e.a.createElement("li",{className:"tag","aria-live":"assertive"},_e.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(We.a)("PUBLICITÉ"))))),_e.a.createElement("ul",{className:"controls controls-options clearfix"},_e.a.createElement(vn,{playerType:a,volume:r,mute:o,isBusinessNonMod:t,isChromecastLoading:n}),i,this._renderQueuelist())},t.prototype._renderModControls=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.repeat,r=e.shuffle,o=e.isChromecastActive,i=-1!==["planning","campaign"].indexOf(t);if(!(n!==Te.a.MEDIA_TYPE_SONG&&n!==Te.a.MEDIA_TYPE_EXTERNAL||i)){var s=[_e.a.createElement(jn,{key:"repeat-control",repeat:a})];return o||s.push(_e.a.createElement(wn,{key:"shuffle-control",shuffle:r})),s}return n!==Te.a.MEDIA_TYPE_TALK||i?Pn:Sn},t.prototype._renderRadioControls=function(){var e=this.props,t=e.mediaType,n=e.isFlow,a=e.isRadio,r=e.context,o=void 0;return t===Te.a.MEDIA_TYPE_LIVE_STREAM?_e.a.createElement("li",{className:"tag","aria-live":"assertive"},_e.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(We.a)("EN DIRECT"))):("up_next_artist"===r.TYPE?o=Object(We.a)("RECOMMANDÉ"):a&&(o=n?Object(We.a)("FLOW"):Object(We.a)("MIX")),_e.a.createElement("li",{className:"tag","aria-live":"assertive"},_e.a.createElement("span",{className:"sticker sticker-small sticker-flow"},o)))},t.prototype._renderQueuelist=function(){var e=this.props,t=e.mediaType,n=e.queuelistOpened,a=e.isChromecastLoading,r=Object(We.a)("File d'attente"),o=a||t===Te.a.MEDIA_TYPE_LIVE_STREAM,i=qe()("control control-qlist",{disabled:o}),s=qe()({active:n});return _e.a.createElement("li",null,_e.a.createElement("button",{className:i,type:"button",disabled:o,title:r,"aria-label":r,onClick:this._toggleQueuelist},_e.a.createElement(at.a,{className:s,name:"qlist",size:"18"})))},t.prototype._toggleQueuelist=function(e){this.tracking("player_click",e.currentTarget),Me.a.trigger(Me.a.menu.togglePanel,{panel:"queuelist",currentTarget:e.currentTarget})},t}(ge.Component),kn=Object(ve.b)(function(e){var t=e.player,n=e.menu;return{playerType:t.config.playerType,isBusinessNonMod:t.config.isBusinessNonMod,isFlow:t.config.isFlow,isRadio:t.config.isRadio,mediaType:t.music.mediaType,context:t.music.context,volume:t.control.volume,shuffle:t.control.shuffle,repeat:t.control.repeat,mute:t.control.mute,isChromecastActive:t.chromecast.active,isChromecastLoading:t.chromecast.loading,queuelistOpened:"queuelist"===n.activePanel}})(Object(En.a)(Cn)),Nn=_e.a.createElement(at.a,{name:"play",size:"32"}),An=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._play=a._play.bind(a),a}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.mediaType,n=e.playing,a=e.paused,r=e.loading,o=e.canPause,i=e.isChromecastCasting,s=t===Te.a.MEDIA_TYPE_LIVE_STREAM,l=s?Object(We.a)("Stop"):Object(We.a)("Pause"),c=n?l:Object(We.a)("Play");if(a&&!n||!a&&!n)return _e.a.createElement("button",{className:"control control-play",type:"button",disabled:!o||r,"aria-label":c,title:c,onClick:this._play},i?_e.a.createElement("span",{className:qe()({icon:!0,"icon-play":!r,"icon-loader":r,"icon-spin":r,"icon-32":r})}):Nn);var u=s?Te.a.control.stop:Te.a.control.pause,p=s?"stop":"pause";return _e.a.createElement("button",{type:"button",className:"control control-play",disabled:!o,"aria-label":c,title:l,onClick:function(){Lt.a.intent("pause"),u()}},_e.a.createElement(at.a,{name:p,size:"32"}))},t.prototype._play=function(){we.a.get("OFFLINE")||(Lt.a.intent("play"),Te.a.control.play())},t}(ge.Component),In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.trackTitle,n=e.trackArtists,a=e.next;return _e.a.createElement("div",{className:"player-sponsored-heading"},_e.a.createElement("div",{className:"player-track"},_e.a.createElement(Vt,In({},this.props,{title:t})),_e.a.createElement(Wt,In({},this.props,{artists:n}))),_e.a.createElement(nn,{seek:function(){},next:a}))},t}(ge.Component),xn=Object(ve.b)(function(e){return{track:e.player.music.track,mediaType:e.player.music.mediaType,isFingerprinted:e.player.music.isFingerprinted,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playerType:e.player.config.playerType,trackTitle:Object(Ht.k)(e),trackArtists:Object(Ht.j)(e)}})(Rn),Dn=_e.a.createElement(kn,null),Ln=_e.a.createElement(mn,null),Mn=_e.a.createElement(at.a,{name:"prev",size:"20"}),Fn=_e.a.createElement(at.a,{name:"prev-30",size:"20"}),Un=_e.a.createElement(at.a,{name:"next-30",size:"20"}),Bn=_e.a.createElement(at.a,{name:"next",size:"20"}),Hn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._skipForwards=a._skipForwards.bind(a),a._skipBackwards=a._skipBackwards.bind(a),a}return P(t,e),t.prototype.render=function(){var e=this.props,t=e.isSponsored,n=e.isBusinessNonMod,a=e.mediaType,r=e.next;return _e.a.createElement("div",{className:"player-controls"},t?_e.a.createElement(xn,{next:r}):null,_e.a.createElement("ul",{className:"controls controls-main clearfix"},this._renderPrevious(),_e.a.createElement("li",null,_e.a.createElement(An,this.props)),this._renderNext()),Dn,a===Te.a.MEDIA_TYPE_SONG&&!n&&Ln)},t.prototype._renderPrevious=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=Object(We.a)("Précédent"),r=[];return t||r.push(_e.a.createElement("li",{key:"prev"},_e.a.createElement("button",{className:"control control-prev",type:"button",disabled:!this.props.hasPrev,title:a,"aria-label":a,onClick:this._prev},Mn))),n===Te.a.MEDIA_TYPE_TALK&&r.push(_e.a.createElement("li",{key:"skip-backwards"},_e.a.createElement("button",{className:"control control-prev-30",type:"button",title:Object(We.a)("Retour rapide de 30 secondes"),"aria-label":Object(We.a)("Retour rapide de 30 secondes"),onClick:this._skipBackwards},Fn))),r},t.prototype._renderNext=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=e.next,r=Object(We.a)("Suivant"),o=[];return n===Te.a.MEDIA_TYPE_TALK&&o.push(_e.a.createElement("li",{key:"skip-forwards"},_e.a.createElement("button",{className:"control control-next-30",type:"button",title:Object(We.a)("Avance rapide de 30 secondes"),"aria-label":Object(We.a)("Avance rapide de 30 secondes"),onClick:this._skipForwards},Un))),t||o.push(_e.a.createElement("li",{key:"next"},_e.a.createElement("button",{className:"control control-next",type:"button",disabled:!this.props.hasNext,title:r,"aria-label":r,onClick:a},Bn))),o},t.prototype._prev=function(){Lt.a.intent("previous"),Te.a.control.prevSong()},t.prototype._skipForwards=function(){var e=this.props,t=e.position,n=e.trackDuration,a=e.next,r=(t+30)/n;r>=1?a():Te.a.control.seek(r)},t.prototype._skipBackwards=function(){var e=this.props,t=(e.position-30)/e.trackDuration;Te.a.control.seek(t)},t}(ge.Component),Yn=Object(ve.b)(function(e){return{isSponsored:e.player.music.isSponsored,mediaType:e.player.music.mediaType,trackDuration:e.player.music.trackDuration,position:e.player.control.position,playing:e.player.control.playing,paused:e.player.control.paused,loading:e.player.control.loading,isBusinessNonMod:e.player.config.isBusinessNonMod,isChromecastCasting:e.player.chromecast.casting,hasNext:Object(Bt.g)(e),hasPrev:Object(Bt.h)(e),canPause:Object(Bt.c)(e)}})(Hn),zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gn=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state={fading:!1},a._next=a._next.bind(a),a._seek=a._seek.bind(a),a._onFading=a._onFading.bind(a),a._onFinish=a._onFinish.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onTrackRecognized=a._onTrackRecognized.bind(a),a._onChangePlayerType=a._onChangePlayerType.bind(a),a._onTracklistChange=a._onTracklistChange.bind(a),a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onPlayingChange=a._onPlayingChange.bind(a),a._onPauseChange=a._onPauseChange.bind(a),a._onTracklistFinish=a._onTracklistFinish.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onLoaded=a._onLoaded.bind(a),a._onTrackDurationChange=a._onTrackDurationChange.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a._onRepeatChange=a._onRepeatChange.bind(a),a._onSimultaneousAccess=a._onSimultaneousAccess.bind(a),a._onShuffleChange=a._onShuffleChange.bind(a),a._setAvailableStatus=a._setAvailableStatus.bind(a),a._setConnectingStatus=a._setConnectingStatus.bind(a),a._setCastingStatus=a._setCastingStatus.bind(a),a._setChromecastActiveState=a._setChromecastActiveState.bind(a),a}return C(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.initPlayer(),Me.a.ready(Me.a.user.userReady,this._onToggleFavorite),Me.a.subscribe(Me.a.player.displayCurrentSong,this._onTrackChange,"player"),Me.a.subscribe(Me.a.player.displayRecognizedTrack,this._onTrackRecognized,"player"),Me.a.subscribe(Me.a.player.changePlayerType,this._onChangePlayerType,"player"),Me.a.subscribe(Me.a.player.tracklist_changed,this._onTracklistChange,"player"),Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"player"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"player"),Me.a.subscribe(Me.a.player.playing,this._onPlayingChange,"player"),Me.a.subscribe(Me.a.player.paused,this._onPauseChange,"player"),Me.a.subscribe(Me.a.player.finishTrackList,this._onTracklistFinish,"player"),Me.a.subscribe(Me.a.player.position,this._onPositionChange,"player"),Me.a.subscribe(Me.a.player.pourcentLoaded,this._onLoaded,"player"),Me.a.subscribe(Me.a.player.duration,this._onTrackDurationChange,"player"),Me.a.subscribe(Me.a.player.volume_changed,this._onVolumeChange,"player"),Me.a.subscribe(Me.a.player.mute_changed,this._onToggleMute,"player"),Me.a.subscribe(Me.a.player.repeat_changed,this._onRepeatChange,"player"),Me.a.subscribe(Me.a.player.shuffle_changed,this._onShuffleChange,"player"),Me.a.subscribeOnce(Me.a.player.playerLoaded,function(){Te.a.initRestriction(),Te.a.restoreSetting(e.props.userSetting)}),Me.a.subscribe(Me.a.player.fading,this._onFading,"player"),Me.a.subscribe(Me.a.player.finish,this._onFinish,"player"),Me.a.subscribe(Me.a.live.simultaneousAccess,this._onSimultaneousAccess,"player"),Me.a.subscribe(Me.a.chromecast.available,this._setAvailableStatus,"player"),Me.a.subscribe(Me.a.chromecast.connecting,this._setConnectingStatus,"player"),Me.a.subscribe(Me.a.chromecast.casting,this._setCastingStatus,"player"),Me.a.subscribe(Me.a.chromecast.loading,this._setChromecastActiveState,"player"),Me.a.subscribe(Me.a.user.settingChanged,function(e,t){t.data&&t.data.site&&t.data.site.labs&&void 0!==t.data.site.labs.FirefoxHTML5&&Mt.a.reload()})},t.prototype.componentWillUpdate=function(e){this.props.id!==e.id&&Me.a.trigger(Me.a.menu.contextMenuClose)},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("player")},t.prototype.render=function(){var e=this.props,t=e.track,n=e.showUpNextNotification,a=e.playerType;if(0===De()(t)&&"ads"!==a)return null;var r=qe()({player:!0,"has-up-next":n});return _e.a.createElement("article",{className:r,id:"player",role:"application","aria-labelledby":"player-track-info"},_e.a.createElement(bt,{id:He.a.Notification}),_e.a.createElement(dn,{seek:this._seek,next:this._next,canSeek:this.props.canSeek}),_e.a.createElement(Yn,{next:this._next}))},t.prototype._onFading=function(){this.props.hasAudioAds&&null!==Te.a.getAudioAds()||(this.setState({fading:!0}),Te.a.control.nextSong(!0))},t.prototype._onFinish=function(){this.state.fading||Te.a.control.nextSong(!0),this.setState({fading:!1})},t.prototype._onTrackChange=function(e,t,n){this.props.updateTrack(n)},t.prototype._onTrackRecognized=function(e,t){t?this.props.updateRecognizedTrack({track:t}):this._onTrackChange()},t.prototype._onChangePlayerType=function(){this.props.updatePlayerType()},t.prototype._onTracklistChange=function(e,t){this.props.updateTracklist(t),Me.a.trigger(Me.a.list.deselectAll)},t.prototype._onToggleFavorite=function(e,t){(!t||"song"===t.type&&String(t.id)===this.props.id)&&this.props.updateFavorite()},t.prototype._onPlayingChange=function(e,t){this.props.setPlaying({playing:t})},t.prototype._onPauseChange=function(e,t){this.props.setPaused({paused:t})},t.prototype._onTracklistFinish=function(){this.props.setTracklistFinished()},t.prototype._onPositionChange=function(e,t){this.props.setPosition({position:t})},t.prototype._onLoaded=function(e,t){this.props.setBuffer({buffer:t})},t.prototype._onTrackDurationChange=function(e,t){this.props.setTrackDuration({trackDuration:t})},t.prototype._onVolumeChange=function(e,t){this.props.setVolume({volume:t/100})},t.prototype._onToggleMute=function(e,t){this.props.setMute({mute:t})},t.prototype._onRepeatChange=function(e,t,n){this.props.setRepeat(zn({repeat:t},n))},t.prototype._onSimultaneousAccess=function(){var e=this.props,t=e.playing,n=e.playerType;t&&"ads"!==n&&(Te.a.control.pause(),Le.default.open("/lightbox/limitation.php"))},t.prototype._onShuffleChange=function(e,t){this.props.setShuffle({shuffle:t}),Me.a.trigger(Me.a.list.deselectAll)},t.prototype._setChromecastActiveState=function(e,t){this.props.setLoading({loading:t}),this.props.setChromecastActiveState({loading:t,active:Dt.a.isActive(),chunksInfo:Dt.a.getChunksInfo()})},t.prototype._setAvailableStatus=function(e,t){this.props.setChromecastAvailableStatus({status:t,active:Dt.a.isActive(),chunksInfo:Dt.a.getChunksInfo()})},t.prototype._setConnectingStatus=function(e,t){this.props.setChromecastConnectingStatus({status:t,chunksInfo:Dt.a.getChunksInfo()})},t.prototype._setCastingStatus=function(e,t){this.props.setChromecastCastingStatus({status:t,active:Dt.a.isActive(),chunksInfo:Dt.a.getChunksInfo()})},t.prototype._seek=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.props.canSeek&&("number"!=typeof t&&(t=e.pageX/e.currentTarget.parentNode.offsetWidth),Te.a.control.seek(Math.min(Math.max(t,0),1)))},t.prototype._next=function(){Lt.a.intent("next"),this.props.skipRadioAllowed?Te.a.control.nextSong():xt.b.display("flow_skip_push",{})},t}(ge.Component);Gn.defaultProps={playerType:"",showUpNextNotification:!1},Qe.default.addReducers({player:Ft.a});var Vn=Object(ve.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,skipRadioAllowed:e.player.control.skipRadioAllowed,playing:e.player.control.playing,playerType:e.player.config.playerType,userSetting:e.user.USER.SETTING,hasAudioAds:e.user.USER.OPTIONS.ads_audio,canSeek:Object(Bt.d)(e)}},{initPlayer:Ht.m,setPlaying:Bt.m,setPaused:Bt.l,setLoading:Bt.j,setTracklistFinished:Bt.q,setPosition:Bt.n,setBuffer:Bt.i,setTrackDuration:Ht.n,setVolume:Bt.r,setRepeat:Bt.o,setShuffle:Bt.p,setMute:Bt.k,updateFavorite:Ht.o,updateTrack:Ht.q,updateRecognizedTrack:Ht.p,updatePlayerType:Ut.updatePlayerType,updateTracklist:Ht.r,setChromecastActiveState:Yt.b,setChromecastAvailableStatus:Yt.c,setChromecastConnectingStatus:Yt.e,setChromecastCastingStatus:Yt.d})(Gn),qn=n("./js/_components/Thumbnail/utils.js"),Wn=n("./node_modules/reselect/es/index.js"),Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qn="components/Menu/queuelist/TOGGLED_SELECTED_ITEM",Xn="components/Menu/queuelist/UPDATED_SELECTED_FAVORITE",$n={selectedItems:{},hasSelectedFavorite:!1},Jn=function(e){return e.queuelist.selectedItems},Zn=Object(Wn.a)([Jn],function(e){return De()(e)}),ea=Object(Wn.a)([Jn],function(e){return Object.keys(e).reverse()}),ta=Object(Wn.a)([Jn],function(e){return Object.keys(e).map(function(t){return e[t]})}),na=Object(Wn.a)([Jn],function(e){return Object.keys(e).map(function(t){var n=e[t],a=Te.a.getMediaId(n);return e[t][a]})}),aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa=_e.a.createElement("span",{className:"sr-only"},"Deezer"),ia=_e.a.createElement("div",{className:"nav-divider"}),sa=_e.a.createElement("div",{className:"nav-divider"}),la=_e.a.createElement(at.a,{name:"love",size:"16"}),ca=_e.a.createElement(at.a,{name:"playlist",size:"16"}),ua=_e.a.createElement(at.a,{name:"playlist",size:"16"}),pa=_e.a.createElement(at.a,{name:"playlist",size:"16"}),da=_e.a.createElement(at.a,{name:"playlist",size:"16"}),fa=_e.a.createElement(at.a,{name:"album",size:"16"}),ha=_e.a.createElement(at.a,{name:"podcast",size:"16"}),ma=_e.a.createElement(at.a,{name:"audiobook",size:"16"}),ya=_e.a.createElement(at.a,{name:"time",size:"16"}),ba=_e.a.createElement(at.a,{name:"app",size:"16"}),ga=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right",size:"auto"}),_a=_e.a.createElement("div",{className:"nav-expand"},_e.a.createElement(at.a,{name:"chevron-down"})),va=_e.a.createElement(at.a,{name:"add"}),Ea=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));a._pages={home:{pattern:/^\/[a-z]{2}\/?$/i,selected:!1},businessRadioHome:{pattern:new RegExp("^/$|/planning","i"),selected:!1},plannings:{pattern:new RegExp("^/planning","i"),selected:!1},boxes:{pattern:new RegExp("^/boxes","i"),selected:!1},campaigns:{pattern:/^\/campaigns/i,selected:!1},feed:{pattern:/^\/feed?$/i,selected:!1},loved:{pattern:new RegExp("^/profile/"+a.props.userID+"/loved","i"),selected:!1},profile:{pattern:new RegExp("^/profile/"+a.props.userID+"[^0-9]*(/.*)?$","i"),pattern_not:new RegExp("^/profile/"+a.props.userID+"/loved","i"),selected:!1},explore:{pattern:/^\/explore/i,selected:!1},charts:{pattern:/^\/charts/i,selected:!1},mixes:{pattern:/^\/mixes\/?$/i,selected:!1},exclus:{pattern:/^\/exclus/i,selected:!1},pro:{pattern:/^\/pro\/?$/i,selected:!1},audiobooks:{pattern:/^\/app\/audiobooks/i,selected:!1},moods:{pattern:/^\/(moods)/i,selected:!1}},a._custo={active:!1,large:!1},a._updateNanoScroller=a._updateNanoScroller.bind(a),a._updateUnseenPlaylists=a._updateUnseenPlaylists.bind(a),a._updateUnseenNotifications=a._updateUnseenNotifications.bind(a),a._updatePicture=a._updatePicture.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onClosePanelsByEsc=a._onClosePanelsByEsc.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a._onTogglePanel=a._onTogglePanel.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onBugReportClick=a._onBugReportClick.bind(a),a._openLyricsPanel=a._openLyricsPanel.bind(a),a._pageDisplayed=a._pageDisplayed.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._onOpenPanelClick=a._onOpenPanelClick.bind(a),a._onOpenModalClick=a._onOpenModalClick.bind(a);var r=Te.a.getContext("TYPE");return a.state={pages:a._getPagesState(),panels:a._getPanelsState(),unseenPlaylistCount:0,unseenNotificationCount:0,userPicture:n.userPicture,showUpNextNotification:"up_next_artist"===r&&n.userHasUpNextTips,playerContextType:r},a}return k(t,e),t.prototype.componentWillMount=function(){var e=this.props.userCusto;this._custo.active="object"===(void 0===e?"undefined":ra(e))&&"object"===ra(e.logos)&&"string"==typeof e.logos.logo_position&&""!==e.logos.header.trim(),this._custo.active&&(this._custo.position=e.logos.logo_position)},t.prototype.componentDidMount=function(){var e=this;this._onPageChanged(je.c.getCurrentPath()),ke()(this.refs.navigation).nanoScroller({tabIndex:-1,preventPageScrolling:!0}),ke()(this.refs.navigation).on("transitionend",this._updateNanoScroller),document.addEventListener("keydown",this._onClosePanelsByEsc),Me.a.subscribe(Me.a.navigation.page_displayed,this._pageDisplayed,"menu"),Me.a.subscribe(Me.a.menu.closeAllPanels,this._onClosePanels,"menu"),Me.a.subscribe(Me.a.menu.openPanel,this._onOpenPanel,"menu"),Me.a.subscribe(Me.a.menu.togglePanel,this._onTogglePanel,"menu"),Me.a.subscribe(Me.a.menu.openLyricsPanel,this._openLyricsPanel,"menu"),Me.a.subscribe(Me.a.playlist.seen,this._updateUnseenPlaylists,"menu"),Me.a.subscribe(Me.a.user.updatePicture,this._updatePicture,"menu"),Me.a.subscribe(Me.a.player.changePlayerType,this._onPlayerTypeChange,"menu"),Me.a.subscribe(Me.a.live.notificationNew,this._updateUnseenNotifications,"menu"),Me.a.subscribe(Me.a.live.notificationRead,this._updateUnseenNotifications,"menu"),Me.a.subscribe(Me.a.live.messageNew,this._updateUnseenNotifications,"menu"),Me.a.subscribe(Me.a.live.messageRead,this._updateUnseenNotifications,"menu"),Me.a.ready(Me.a.user.userReady,function(){e._updateUnseenNotifications(),e._updateUnseenPlaylists()}),window.PLAYER_INIT.show_lyrics&&Me.a.trigger(Me.a.menu.openPanel,{panel:"lyrics"})},t.prototype.shouldComponentUpdate=function(e,t){var n=this;if(t.unseenPlaylistCount!==this.state.unseenPlaylistCount||t.unseenNotificationCount!==this.state.unseenNotificationCount||t.playerContextType!==this.state.playerContextType||t.userPicture!==this.state.userPicture)return!0;var a=void 0,r=void 0;return r=Object.keys(t.pages).some(function(e){return t.pages[e]!==n.state.pages[e]}),a=Object.keys(t.panels).some(function(e){return t.panels[e]!==n.state.panels[e]}),r||a},t.prototype.componentWillUnmount=function(){clearTimeout(this._updateUnseenPlaylistRef),ke()(this.refs.navigation).off("transitionend",this._updateNanoScroller),Me.a.unsubscribeAll("menu"),document.removeEventListener("keydown",this._onClosePanelsByEsc)},t.isPanelOpen=function(e){return!!e&&(!!t._panels[e]&&t._panels[e].active)},t.prototype.render=function(){var e=Pe.a.isAllowed("employee_feature"),t=Pe.a.isAllowed("business"),n=Pe.a.isAllowed("business_mod"),a=Pe.a.isAllowed("business_box_owner"),r=Pe.a.isAllowed("business_box_manager"),o=t&&!n,i=this.state,s=i.panels,l=i.pages,c=i.unseenPlaylistCount,u=i.unseenNotificationCount,p=i.userPicture,d=i.showUpNextNotification,f=qe()({"sidebar-container":!0,"has-partner":this._custo.active&&"right"===this._custo.position,"has-partner-large":this._custo.active&&"bottom"===this._custo.position,"business-sidebar":t,"business-mod-sidebar":n}),h=this.props,m=h.userCusto,y=h.userID,b=h.userLang,g=h.userCanSubscribe,_=h.userCanDownloadApplication,v=qe()({"nav nav-main":!0,"panel-opened":this._hasOpenPanel()}),E=qe()({nav:!0,"panel-opened":this._hasOpenPanel()}),O=qe()({logo:!0,"logo-deezer":!Pe.a.isAllowed("logo_uk"),"logo-deezer-uk":Pe.a.isAllowed("logo_uk")});return _e.a.createElement("div",{className:f},_e.a.createElement("header",{role:"banner",className:"brand"},_e.a.createElement("h1",null,_e.a.createElement(zt.a,{to:"/"+b+"/",lang:"en","data-type":"home",onClick:y>0?this._onLinkClick:function(){}},_e.a.createElement("span",{className:O}),oa),this._custo.active?_e.a.createElement("a",{className:"logo-partner",href:m.logos.logo_link,target:"_blank"},_e.a.createElement("img",{className:"logo-partner-img",src:m.logos.header,alt:""})):"")),_e.a.createElement("a",{className:"sr-only",href:"#main"},Object(We.a)("Accès direct au contenu principal")),_e.a.createElement("a",{className:"sr-only",href:"#player"},Object(We.a)("Accès direct au player")),_e.a.createElement(It,{active:"active-panel"===s.search}),_e.a.createElement("nav",{className:"navigation nano",id:"menu_navigation",ref:"navigation",role:"navigation","aria-label":Object(We.a)("Menu principal")},_e.a.createElement("div",{className:"nano-content"},_e.a.createElement("ul",{className:v},o>0&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.businessRadioHome,to:"/"+b+"/","data-type":"plannings",onClick:this._onLinkClick},Object(We.a)("PLANNINGS"))),y>0&&!o&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.home,to:"/"+b+"/","data-type":"home",onClick:this._onLinkClick},Object(We.a)("ACCUEIL"))),!!n&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.plannings,to:"/plannings","data-type":"plannings",onClick:this._onLinkClick},Object(We.a)("PLANNINGS"))),!!t&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.campaigns,to:"/campaigns","data-type":"campaigns",onClick:this._onLinkClick},Object(We.a)("CAMPAGNES"))),!(!a&&!r)&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.boxes,to:"/boxes","data-type":"boxes",onClick:this._onLinkClick},Object(We.a)("BOXES"))),y>0&&!jt.a.isKid()&&!o&&_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.feed,to:"/feed","data-type":"feed",onClick:this._onLinkClick},Object(We.a)("À ÉCOUTER"))),!!e&&_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link ellipsis",type:"button",onClick:this._onBugReportClick},"REPORT A BUG")),_?_e.a.createElement("li",{className:"download-app"},_e.a.createElement(zt.a,{className:"btn btn-primary btn-block link-animated",to:"/download?utm_source=web_link",target:"_blank"},_e.a.createElement("span",{className:"label"},"Mac"===Ot.a.OS?Object(We.a)("Essayez l'app Mac"):Object(We.a)("Essayez l'app PC")))):""),this._custo.active&&""!==m.tab_header.name?_e.a.createElement("div",null,ia,_e.a.createElement("ul",{className:"nav"},_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.exclus,to:"/"+m.tab_header.url,onClick:this._onLinkClick},m.tab_header.name)))):"",sa,y>0?_e.a.createElement("ul",{className:E},_e.a.createElement("li",{className:"profile"},_e.a.createElement(zt.a,{className:"nav-link "+l.profile,"data-type":"profile",to:"/profile/"+y,onClick:this._onLinkClick},_e.a.createElement("span",{className:"profile-picture"},_e.a.createElement("img",{alt:"",id:"naboo_menu_collection_avatar",src:qn.a.getImageSrc("user",p,24,24)})),jt.a.getMultiAccountOptions().ENABLED&&jt.a.getMultiAccountOptions().PARENT?_e.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},jt.a.getDisplayName(!0)):_e.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},Object(We.a)("Ma musique"))),_e.a.createElement("button",{className:"profile-settings "+s.settings,type:"button","data-type":"settings",onClick:this._onOpenPanelClick},_e.a.createElement(at.a,{name:"settings",size:"16",srLabel:Object(We.a)("Paramètres")}))),g?_e.a.createElement("li",{className:"subscribe"},this._renderABTestPushMobile()):"",o?"":_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nav-link "+l.loved,"data-type":"loved",to:"/profile/"+y+"/loved",onClick:this._onLinkClick},la,Object(We.a)("Coups de cœur"))),t?_e.a.createElement("li",{id:"business-mixes-toggle"},_e.a.createElement("button",{type:"button",className:"business-playlists-tips-highlight nav-link "+s.business_mixes,"data-type":"business_mixes",onClick:this._onOpenPanelClick},ca,Object(We.c)("Mix","Mix",{count:2}))):"",t?_e.a.createElement("li",{id:"business-curated-panel-toggle"},_e.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_curated_playlists,"data-type":"business_curated_playlists",type:"button",onClick:this._onOpenPanelClick},ua,Object(We.a)("Business Playlists"))):"",t?_e.a.createElement("li",null,_e.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_regular_playlists,"data-type":"business_regular_playlists",type:"button",onClick:this._onOpenPanelClick},pa,Object(We.a)("Sélection éditos"))):"",_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.playlists,"data-type":"playlists",type:"button",onClick:this._onOpenPanelClick},da,Object(We.a)("Playlists"),_e.a.createElement(Rt.a,{counter:c}))),_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.albums,"data-type":"albums",type:"button",onClick:this._onOpenPanelClick},fa,Object(We.a)("Albums"))),!o&&Pe.a.isAllowed("talk")?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.shows,"data-type":"shows",type:"button",onClick:this._onOpenPanelClick},ha,Object(We.a)("Podcasts"))):"",!o&&Pe.a.isAllowed("audiobook")?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.audiobooks,"data-type":"audiobooks",type:"button",onClick:this._onOpenPanelClick},ma,Object(We.a)("Livres audio"))):"",o?null:_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.notifications,"data-type":"notifications",type:"button",onClick:this._onOpenPanelClick},ya,Object(We.a)("Activité"),_e.a.createElement(Rt.a,{counter:u}))),t?"":_e.a.createElement("li",null,_e.a.createElement("button",{className:"nav-link "+s.apps,"data-type":"apps",type:"button",onClick:this._onOpenPanelClick},ba,Object(We.a)("Applications")))):_e.a.createElement("div",{className:"unlogged"},_e.a.createElement("button",{className:"btn btn-primary btn-block evt-click","data-register":"1",type:"button"},_e.a.createElement("span",{className:"label"},Object(We.a)("Inscription"))),_e.a.createElement("button",{className:"btn btn-inverse btn-block evt-click","data-login":"1",type:"button"},_e.a.createElement("span",{className:"label"},Object(We.a)("Connexion"))),_e.a.createElement("div",{className:"divider"},_e.a.createElement("span",{className:"or"},Object(We.a)("ou"))),_e.a.createElement("a",{className:"btn btn-discover btn-block animate-wobble","data-type":"discovery",href:"/company",target:"_blank",onClick:this._onLinkClick},_e.a.createElement("span",{className:"label"},Object(We.a)("Découvrir Deezer")),ga))),_a),_e.a.createElement(Vn,{showUpNextNotification:d}),d?this._renderUpNextNotification():null)},t.prototype._renderUpNextNotification=function(){return _e.a.createElement("div",{className:"popover player-upnext-notification"},Object(We.a)("Recommandations activées"))},t.prototype._renderABTestPushMobile=function(){var e=this.props,t=e.userUpgrade,n=e.userSentToMobile,a=e.userTryAndBuyDaysLeftMob,r=e.userConversionBannerFree,o=e.userConversionBannerTrial,i=void 0!==t.offer?t.offer.duration:0,s=void 0!==n.option?n.option:"default",l=Pe.a.isAllowed("winter_2017_logged"),c=void 0!==r.option?r.option:"default",u=void 0!==o.option?o.option:"default";if(i>0&&"A"===s)return _e.a.createElement("button",{className:"btn btn-primary btn-block","data-modal":"/lightbox/push_mobile?context=button_menu",type:"button",onClick:this._onOpenModalClick},_e.a.createElement("span",{className:"label"},Object(We.c)("%s JOUR OFFERT","%s JOURS OFFERTS",{count:i,sprintf:[i]})));var p="/offers";l&&(p="/offer-2017?origin=desktop_subscribe_landing");var d=_e.a.createElement(zt.a,{className:"btn btn-primary btn-small","data-type":"offers_subscribe",to:p,target:"_blank",onClick:this._onLinkClick},_e.a.createElement("span",{className:"label"},Object(We.a)("S'ABONNER")));if("A"===u||"A"===c){var f=void 0;return f="A"===u&&a>0?Object(We.c)("Plus qu'un jour d'essai Premium+ gratuit.","Plus que %s jours d'essai Premium+ gratuit.",{count:a,sprintf:[a]}):Object(We.a)("Vous êtes sur la version gratuite de Deezer."),_e.a.createElement("div",{className:"subscribe-ctn subscribe-ctn-light"},_e.a.createElement("span",{className:"subscribe-label"},f),d)}return _e.a.createElement("div",{className:"subscribe-ctn"},_e.a.createElement(zt.a,{className:"btn btn-primary btn-block","data-type":"offers_subscribe",to:p,target:"_blank",onClick:this._onLinkClick},va,_e.a.createElement("span",{className:"label"},Object(We.a)("S'ABONNER"))))},t.prototype._onLinkClick=function(e){this.tracking("menu_click",e.currentTarget),Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._onOpenPanelClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=wt.a.dataset(e.currentTarget,"type");void 0!==t&&Me.a.trigger(Me.a.menu.togglePanel,{panel:t,currentTarget:e.currentTarget})},t.prototype._onOpenModalClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=wt.a.dataset(e.currentTarget,"modal");void 0!==t&&Le.default.open(t)},t.prototype._onBugReportClick=function(e){e.preventDefault();var t=we.a.get("ATL_JQ_SHOW_DIALOG");"function"==typeof t&&t()},t.prototype._onClosePanelsByEsc=function(e){void 0!==e.keyCode&&27!==e.keyCode||Me.a.trigger(Me.a.menu.closeAllPanels,!0)},t.prototype._onClosePanels=function(){for(var e in t._panels)t._panels.hasOwnProperty(e)&&(t._panels[e].active=!1);var n=this.state.showUpNextNotification;n&&(Tt.a.set({tips:{up_next:!1}}),n=!1),this.props.setActivePanel({panel:null}),this.setState({panels:this._getPanelsState(),showUpNextNotification:n})},t.prototype._onOpenPanel=function(e,n){var a=n.panel;if(!t.isPanelOpen(a)){for(var r in t._panels)t._panels.hasOwnProperty(r)&&(t._panels[r].active=a===r);var o=this.state.showUpNextNotification;o&&(Tt.a.set({tips:{up_next:!1}}),o=!1),this.props.setActivePanel({panel:a}),this.setState({panels:this._getPanelsState(),showUpNextNotification:o})}},t.prototype._onTogglePanel=function(e,n){t.isPanelOpen(n.panel)?Me.a.trigger(Me.a.menu.closeAllPanels):Me.a.trigger(Me.a.menu.openPanel,n)},t.prototype._onPageChanged=function(e){var t=void 0;for(var n in this._pages)this._pages.hasOwnProperty(n)&&(t=(t=!0)&&this._pages[n].pattern.test(e),void 0!==this._pages[n].pattern_not&&(t=t&&!this._pages[n].pattern_not.test(e)),this._pages[n].selected=t);this.setState({pages:this._getPagesState()})},t.prototype._onPlayerTypeChange=function(){var e=Te.a.getContext("TYPE");this.setState({playerContextType:e,showUpNextNotification:"up_next_artist"===e&&this.props.userHasUpNextTips})},t.prototype._openLyricsPanel=function(e,t){if("ads"!==Te.a.getPlayerType()){var n=t;if(t.data&&!t.data.SONG&&(n=aa({},t,{data:{SONG:t.data}})),"player"===t.context)t.toggle?Me.a.trigger(Me.a.menu.togglePanel,{panel:"lyrics",currentTarget:e.currentTarget}):Me.a.trigger(Me.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget});else if(Te.a.isRadio())Ee.f.push(Object(St.a)("/track/"+n.data.SONG.SNG_ID)),Me.a.trigger(Me.a.menu.closeAllPanels);else{var a=Te.a.getTrackList().findIndex(function(e){return e.SNG_ID_ORIGIN?e.SNG_ID_ORIGIN===n.data.SONG.SNG_ID_ORIGIN:e.SNG_ID===n.data.SONG.SNG_ID});a>-1?Te.a.getIndexSong()===a?Me.a.trigger(Me.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget}):(Me.a.subscribeOnce(Me.a.player.displayCurrentSong,function(){Me.a.trigger(Me.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),Te.a.playTrackAtIndex(a)):(Me.a.subscribeOnce(Me.a.player.tracklist_changed,function(){Te.a.control.nextSong(),Me.a.trigger(Me.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),Te.a.play({id:n.id,context:n.listenContext,type:"track",radio:!1,addNext:!0}))}Me.a.trigger(Me.a.menu.contextMenuClose)}},t.prototype._updateUnseenPlaylists=function(){var e=this;this._updateUnseenPlaylistRef=setTimeout(function(){e.setState({unseenPlaylistCount:Ue.a.getUnseenPlaylistCount()})},0)},t.prototype._updateUnseenNotifications=function(){this.setState({unseenNotificationCount:Ue.a.getNotificationCount()+Ue.a.getMessageCount()})},t.prototype._updateNanoScroller=function(){ke()(this.refs.navigation).nanoScroller()},t.prototype._updatePicture=function(e,t){this.setState({userPicture:t.md5})},t.prototype._hasOpenPanel=function(){for(var e in t._panels)if(t._panels.hasOwnProperty(e)&&!0===t._panels[e].active)return!0;return!1},t.prototype._getPagesState=function(){var e={};for(var t in this._pages)this._pages.hasOwnProperty(t)&&(e[t]=!0===this._pages[t].selected?"active-link":"");return e},t.prototype._getPanelsState=function(){var e={};for(var n in t._panels)t._panels.hasOwnProperty(n)&&(e[n]=!0===t._panels[n].active?"active-panel":"");return e},t.prototype._pageDisplayed=function(e,t){this._onPageChanged(t?t.path:je.c.getCurrentPath()),this._hasOpenPanel()&&Me.a.trigger(Me.a.menu.closeAllPanels)},t}(ge.Component);Ea.defaultProps={userHasUpNextTips:!1,userUpgrade:{},userSentToMobile:{},userConversionBannerFree:{},userConversionBannerTrial:{}},Ea._panels={searchhistory:{active:!1},searchsuggest:{active:!1},playlists:{active:!1},business_regular_playlists:{active:!1},business_curated_playlists:{active:!1},business_mixes:{active:!1},albums:{active:!1},shows:{active:!1},audiobooks:{active:!1},loved:{active:!1},apps:{active:!1},queuelist:{active:!1},settings:{active:!1},lyrics:{active:!1},notifications:{active:!1}},Qe.default.addReducers({menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ct:return t.activePanel!==e.activePanel?Pt({},e,{activePanel:t.activePanel}):e;default:return e}},queuelist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;switch(t.type){case Qn:if(e.selectedItems[t.index])delete(n=Object.assign({},e.selectedItems))[t.index];else{var a;n=Kn({},e.selectedItems,(a={},a[t.index]=t.data,a))}return Kn({},e,{selectedItems:n});case Xn:return t.hasSelectedFavorite!==e.hasSelectedFavorite?Kn({},e,{hasSelectedFavorite:t.hasSelectedFavorite}):e;case Ht.c:return $n;default:return e}}});var Oa=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,userPicture:t.USER.USER_PICTURE,userHasUpNextTips:t.USER.SETTING.tips&&t.USER.SETTING.tips.up_next,userCusto:t.CUSTO,userLang:t.SETTING_LANG,userCanSubscribe:t.USER.OPTIONS.can_subscribe,userCanDownloadApplication:t.USER.OPTIONS.web_offline&&Pe.a.isAllowed("electron_application")&&"Linux"!==Ot.a.OS,userUpgrade:t.USER.OPTIONS.upgrade,userSentToMobile:t.USER.ABTEST.abtest_senttomobile_oldreg,userTryAndBuyDaysLeftMob:t.USER.TRY_AND_BUY.DAYS_LEFT_MOB,userConversionBannerFree:t.USER.ABTEST.swat_conversion_banner_free,userConversionBannerTrial:t.USER.ABTEST.swat_conversion_banner_trial}},{setActivePanel:function(e){return{type:Ct,activePanel:e.panel}}})(Object(En.a)(Ea)),ja=n("./js/_components/TagList.js"),Ta=n("./js/_components/List/index.js"),wa=_e.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Sa=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a.state={history:n.history},a}return N(t,e),t.prototype.render=function(){var e=this;if(this._isHistoryEmpty())return null;var t=[];return this.state.history.map(function(n,a){var r=[],o=null,i="query_"+n.query+"_"+a;null!==n.result&&(n.result.type&&n.result.type===Se.a.Channel&&(n.result.type="channelCard"),r.push(n.result),o=_e.a.createElement(Ta.a,{data:r,displayAdd:!0,context:"history_"+r[0].__TYPE__})),t.push(_e.a.createElement("li",{key:i},_e.a.createElement("a",{className:"nano-card-link heading-4 ellipsis",onClick:e._onViewAll,"data-type":"query","data-query":n.query,"data-index":a},wa,e._getQueryTitle(n.query)),o))}),_e.a.createElement("ul",{className:"nano-card-list search-history"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");Me.a.trigger(Me.a.menu.closeAllPanels),je.c.navigate("/search/"+encodeURIComponent(t))},t.prototype._isHistoryEmpty=function(){return!(this.state.history&&this.state.history.length)},t.prototype._getQueryTitle=function(e){return e?0===e.indexOf("+")&&e.length>1?e.substr(1,e.length):e:null},t}(ge.Component),Pa=Object(En.a)(Sa),Ca=n("./js/_components/hocs/PanelComponent.js"),ka=n("./js/_components/hocs/PanelScrollComponent.js"),Na=_e.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Aa=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return A(t,e),t.prototype.render=function(){var e=this;if(this._isSuggestionEmpty())return null;var t=this.props.suggestion.map(function(t,n){var a=t.REVISED_QUERY;return _e.a.createElement("li",{key:"query_"+a},_e.a.createElement(zt.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(a),onClick:e._onViewAll,"data-type":"query","data-query":a,"data-index":n},Na,a))});return _e.a.createElement("ul",{className:"nano-card-list search-suggestion"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");Me.a.trigger(Me.a.menu.closeAllPanels),0!==this.props.userID&&Ue.a.addSearchHistory(t)},t.prototype._isSuggestionEmpty=function(){return!(this.props.suggestion&&this.props.suggestion.length)},t}(ge.Component);Aa.defaultProps={suggestion:[]};var Ia=Object(ve.b)(function(e){return{userID:e.user.id}})(Object(En.a)(Aa)),Ra=_e.a.createElement("div",{className:"placeholders-img nocontent"}),xa=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="searchsuggest",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.suggest!==a.state.suggest}},a._onSearchStoreChange=a._onSearchStoreChange.bind(a),a._onHistoryChange=a._onHistoryChange.bind(a),a._onSuggestionClick=a._onSuggestionClick.bind(a),a._onSearchWithoutRevision=a._onSearchWithoutRevision.bind(a),a.state={suggest:Nt.a.getResults(),history:Ue.a.data.SEARCH_HISTORY?Ue.a.data.SEARCH_HISTORY.data:[]},a}return I(t,e),t.prototype.componentDidMount=function(){Nt.a.onChange(this._onSearchStoreChange),Me.a.subscribe(Me.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){Nt.a.offChange(this._onSearchStoreChange),Nt.a.cancel(),Me.a.unsubscribe(Me.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod"),t=qe()({"heading-2":!0,"link-animated icon-right":!this._isSuggestEmpty()&&!e}),n=qe()({"panel-header":!0,"panel-header-link":!e});return this.renderPanel(_e.a.createElement("div",{className:"panel-search-suggest"},_e.a.createElement("div",{className:n,onClick:this._onViewAllClick.bind(this,"all")},_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:t},Object(We.a)("Résultats")))),this.renderScrollbar({"panel-body":!0},_e.a.createElement("div",null,this._renderContent()))))},t.prototype._renderPlaceholder=function(){return _e.a.createElement("div",{key:"no-result-placeholder"},Ra,_e.a.createElement("div",{className:"placeholders-title"},Object(We.a)("Aucun résultat.")))},t.prototype._renderContent=function(){var e=[],t=this.state,n=t.history,a=t.suggest,r=Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod");if(this._isSuggestEmpty()){e.push(this._renderPlaceholder());var o=a&&a.ALTERNATIVE_QUERIES&&a.ALTERNATIVE_QUERIES.length,i=a&&a.RELATED_CONTENT&&a.RELATED_CONTENT.length;if(o||i){if(e.push(_e.a.createElement("h2",{key:"suggestion-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Recommandé"))),o&&e.push(_e.a.createElement(Ia,{key:"suggestion-list",suggestion:a.ALTERNATIVE_QUERIES})),i){var s=a.RELATED_CONTENT[0].__TYPE__,l=Pe.a.isAllowed("business")&&("playlist"===s||"album"===s||"radio"===s);e.push(_e.a.createElement(Ta.a,{key:"suggest_list_RELATED_CONTENT",data:a.RELATED_CONTENT,displayAdd:!0,displayFavorite:!0,displayType:Object(Se.b)(s),draggable:l,thumbnailRounded:"artist"===s||"user"===s,onClick:this._onSuggestionClick.bind(this,a.QUERY,"","alternative"),type:s,context:"suggest_"+s}))}}else{var c=Ue.a.data.USER_TAGS?Ue.a.data.USER_TAGS.data:null;c&&c.length&&!r&&(e.push(_e.a.createElement("h2",{key:"user-tag-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Tags"))),e.push(_e.a.createElement(ja.a,{key:"user-tag-list",tags:c,overflowHidden:!1}))),n.length&&(e.push(_e.a.createElement("h2",{key:"history-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Dernières recherches"))),e.push(_e.a.createElement(Pa,{key:"history-list",history:n})))}return e}if(r||e.push(_e.a.createElement(ja.a,{key:"tag-list",max:5,tags:a.TAG,overflowHidden:!1})),a.REVISED_QUERY&&a.QUERY!==a.REVISED_QUERY){var u="true"===a.AUTOCORRECT?a.REVISED_QUERY:a.QUERY,p="true"===a.AUTOCORRECT?a.QUERY:a.REVISED_QUERY,d="true"===a.AUTOCORRECT?Object(We.a)("Essayez quand même avec"):Object(We.a)("Afficher les résultats pour :");e.push(_e.a.createElement("div",{key:"panel-search-revised-query"},_e.a.createElement("h2",{className:"panel-heading heading-3-sub"},_e.a.createElement("p",null,Object(We.a)("Résultats de recherche pour %s",{sprintf:[u]})),_e.a.createElement("p",{className:"heading-sub-search"},d+" ",_e.a.createElement("a",{className:"link-primary",onClick:this._onSearchWithoutRevision.bind(this,u,p)},p)))))}var f=a.TOP_RESULT,h=r?{}:{TOP_RESULT:f&&f.length>0?{title:Object(We.a)("Meilleur résultat"),context:"best_result",data:f,type:f[0].__TYPE__}:null};h=Object.assign(h,{ARTIST:{title:Object(We.a)("Artistes"),view_more_wording:Object(We.a)("Afficher tous les artistes"),data:a.ARTIST,type:"artist"},ALBUM:{title:Object(We.a)("Albums"),view_more_wording:Object(We.a)("Afficher tous les albums"),data:a.ALBUM,type:"album"},TRACK:{title:Object(We.a)("Titres"),view_more_wording:Object(We.a)("Afficher tous les titres"),data:a.TRACK,type:"track"},PLAYLIST:{title:Object(We.a)("Playlists"),view_more_wording:Object(We.a)("Afficher toutes les playlists"),data:a.PLAYLIST,type:"playlist"},RADIO:{title:Object(We.a)("Mix"),view_more_wording:Object(We.a)("Afficher tous les mix"),data:a.RADIO,type:"radio"},CHANNEL:Pe.a.isAllowed("search_channel")?{title:Object(We.a)("Univers"),view_more_wording:Object(We.a)("Afficher tous les Univers"),data:a.CHANNEL,type:"channelCard"}:null,SHOW:{title:Object(We.a)("Podcasts"),view_more_wording:Object(We.a)("Afficher tous les podcasts"),data:a.SHOW,type:"show"},LIVESTREAM:Pe.a.isAllowed("search_livestream")?{title:Object(We.a)("Radios"),view_more_wording:Object(We.a)("Afficher toutes les radios"),data:a.LIVESTREAM,type:"livestream"}:null,USER:Pe.a.isAllowed("search_users")?{title:Object(We.a)("Profils"),view_more_wording:Object(We.a)("Afficher tous les profils"),data:a.USER,type:"user"}:null});for(var m in h)if(h.hasOwnProperty(m)&&null!==h[m]){var y=h[m].data;if(y&&y.length){e.push(_e.a.createElement("h2",{className:"panel-heading-sub heading-4",key:"suggest_title_"+m},h[m].title));var b=y.length>2&&!r?y.slice(0,2):y,g="TOP_RESULT"===m?Object(Se.b)(h[m].type):"",_=Pe.a.isAllowed("business")&&("PLAYLIST"===m||"ALBUM"===m||"RADIO"===m),v=h[m].context||"default",E=a.AUTOCORRECT?a.REVISED_QUERY:a.QUERY,O=a.AUTOCORRECT?a.QUERY:a.REVISED_QUERY;e.push(_e.a.createElement(Ta.a,{key:"suggest_list_"+m,data:b,displayAdd:!0,displayFavorite:!0,displayType:g,draggable:_,options:["label","name"],thumbnailRounded:"artist"===h[m].type||"user"===h[m].type,onClick:this._onSuggestionClick.bind(this,E,O,v),type:h[m].type,context:"suggest_"+h[m].type})),y.length>2&&!r&&e.push(_e.a.createElement("button",{key:"viewmore_"+m,onClick:this._onViewAllClick.bind(this,m),className:"btn btn-block btn-view-more",type:"button","data-type":"view_all"},_e.a.createElement("span",{className:"label"},h[m].view_more_wording)))}}return e},t.prototype._onSearchStoreChange=function(e){if("suggest"===e){var t=Nt.a.getResults();t&&this.setState({suggest:t})}},t.prototype._onSuggestionClick=function(e,t,n,a,r,o){this.props.isAuth&&Ue.a.addSearchHistory(e,t,n,r,o)},t.prototype._onViewAllClick=function(e,t){if(Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod"))return!1;this.tracking("panel_click",t.currentTarget);var n=Nt.a.getQuery(),a=window.reactRouter;if(this.props.isAuth&&Ue.a.addSearchHistory(n),Me.a.trigger(Me.a.menu.closeAllPanels),we.a.set("__SEARCH_TAB",e&&"TRACK"!==e?e.toLowerCase():"all"),0===n.lastIndexOf("#",0))return a.push("/tags/"+encodeURIComponent(n.replace(/#/g,"")));var r="/search/"+encodeURIComponent(n),o=we.a.get("__SEARCH_TAB");return"all"!==o&&(r+="/"+o),a.push(r)},t.prototype._onHistoryChange=function(){this.setState({history:Ue.a.data.SEARCH_HISTORY})},t.prototype._onSearchWithoutRevision=function(e,t){var n="+"+t;this.props.isAuth&&Ue.a.addSearchHistory(e,t,"force_no_correction"),je.c.navigate("/search/"+encodeURIComponent(n),{force:!0})},t.prototype._isSuggestEmpty=function(){var e=this.state.suggest;return!(null!==e&&(e.TOP_RESULT&&0!==e.TOP_RESULT.length||e.ARTIST&&0!==e.ARTIST.length||e.ALBUM&&0!==e.ALBUM.length||e.TRACK&&0!==e.TRACK.length||e.PLAYLIST&&0!==e.PLAYLIST.length||e.CHANNEL&&0!==e.CHANNEL.length||e.RADIO&&0!==e.RADIO.length||e.SHOW&&0!==e.SHOW.length||e.LIVESTREAM&&0!==e.LIVESTREAM.length||e.USER&&0!==e.USER.length))},t}(ge.Component),Da=Object(ve.b)(function(e){return{isAuth:e.user.isAuth}},null,null,{withRef:!0})(Object(En.a)(Object(Ca.a)(Object(ka.a)(xa)))),La=_e.a.createElement("span",{className:"icon icon-top-playlist pull-left"}),Ma=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return R(t,e),t.prototype.render=function(){var e=this;if(!this.props.queries.length)return null;var t=this.props.queries.map(function(t,n){return _e.a.createElement("li",{key:"query_"+t.QUERY},_e.a.createElement(zt.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(t.QUERY),onClick:e._onViewAll.bind(e,t.QUERY),"data-type":"query","data-index":n},La,t.QUERY))});return _e.a.createElement("ul",{className:"nano-card-list"},t)},t.prototype._onViewAll=function(e,t){this.props.isAuth&&Ue.a.addSearchHistory(e,"trending"),this.tracking("panel_click",t.currentTarget),Me.a.trigger(Me.a.menu.closeAllPanels)},t}(ge.Component);Ma.defaultProps={queries:[]};var Fa=Object(ve.b)(function(e){return{isAuth:e.user.isAuth}})(Object(En.a)(Ma)),Ua=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="searchhistory",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.historyLength!==a.state.historyLength}},a._onHistoryChange=a._onHistoryChange.bind(a),a._clearSearchHistory=a._clearSearchHistory.bind(a),a.state={userTags:Ue.a.data.USER_TAGS?Ue.a.data.USER_TAGS.data:[],history:Ue.a.data.SEARCH_HISTORY?Ue.a.data.SEARCH_HISTORY.data:[],historyLength:Ue.a.data.SEARCH_HISTORY?Ue.a.data.SEARCH_HISTORY.total:0,trendingQueries:Ue.a.data.TRENDING_QUERIES?Ue.a.data.TRENDING_QUERIES.data:[]},a}return x(t,e),t.prototype.componentDidMount=function(){Me.a.subscribe(Me.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){Me.a.unsubscribe(Me.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=[],t=this.state,n=t.userTags,a=t.history,r=t.trendingQueries;return Pe.a.isAllowed("trending_queries")&&r.length?(e.push(_e.a.createElement("h2",{key:"trending-queries-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Les plus recherchés"))),e.push(_e.a.createElement(Fa,{key:"trending-queries-list",queries:r}))):n.length&&(e.push(_e.a.createElement("h2",{key:"user-tag-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Tags"))),e.push(_e.a.createElement(ja.a,{key:"user-tag-list",tags:n,overflowHidden:!1}))),a.length&&(e.push(_e.a.createElement("h2",{key:"history-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Dernières recherches"))),e.push(_e.a.createElement(Pa,{key:"history-list",history:a})),e.push(_e.a.createElement("button",{key:"history-clear-button",className:"btn btn-block btn-view-more btn-clear",type:"button",onClick:this._clearSearchHistory},_e.a.createElement("span",{className:"label"},Object(We.a)("Effacer"))))),this.renderPanel(_e.a.createElement("div",{className:"panel-search-history"},this.renderScrollbar({"panel-body":!0},_e.a.createElement("div",null,e))))},t.prototype._onHistoryChange=function(){this.setState({historyLength:Ue.a.data.SEARCH_HISTORY.total})},t.prototype._clearSearchHistory=function(){Ue.a.clearSearchHistory(),Me.a.trigger(Me.a.menu.closeAllPanels)},t}(ge.Component),Ba=Object(Ca.a)(Object(ka.a)(Ua)),Ha=n("./node_modules/lodash.debounce/index.js"),Ya=n.n(Ha),za=n("./js/_components/Selectbox.js"),Ga=n("./js/_components/Sort.js"),Va=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._onToggleFavorite=Ya()(a._onToggleFavorite.bind(a),0),a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._onOpenPlaylistAssistant=a._onOpenPlaylistAssistant.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:[],playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return D(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"panel_playlist"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"panel_playlist"),Me.a.subscribe(Me.a.playlist.created,this._updatePlaylists,"panel_playlist"),Me.a.subscribe(Me.a.playlist.removed,this._updatePlaylists,"panel_playlist"),Me.a.subscribe(Me.a.playlist.updated,this._updatePlaylists,"panel_playlist"),Me.a.subscribe(Me.a.playlist.addSong,this._updatePlaylists,"panel_playlist"),Me.a.subscribe(Me.a.playlist.removeSong,this._updatePlaylists,"panel_playlist"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({list:e._getPlaylistList(),playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-playlists");Object(an.j)(e)})})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-playlists"},_e.a.createElement("div",{className:"panel-header",id:"panel-playlists",tabIndex:"0","aria-label":Object(We.a)("Playlists")},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return 0===e?_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t)):_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},_e.a.createElement(zt.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/playlists"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length>0?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Pe.a.isAllowed("business"),t=e&&!Pe.a.isAllowed("business_mod");return _e.a.createElement(Ta.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:Pe.a.isAllowed("business"),displayAdd:!0,draggable:e,helper:t?null:this._onOpenPlaylistAssistant,context:"menu_panel_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onOpenPlaylistAssistant=function(e){this.tracking("panel_click",e.currentTarget),Le.default.open("/lightbox/playlist_assistant?type=create"),Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._onToggleFavorite=function(e,t){"playlist"===t.type&&this._updatePlaylists()},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Ga.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){return ke.a.merge(ke.a.merge([],Ue.a.data.PLAYLISTS.data),Ue.a.data.FAVORITES_PLAYLISTS.data)},t}(ge.Component);Va.defaultProps={sortType:"PLAYLIST_TITLE"};var qa=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(En.a)(Object(Ca.a)(Object(ka.a)(Va)))),Wa=n("./js/_modules/business/stores/ContentsStore.js"),Ka=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="business_regular_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return L(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),Me.a.subscribe(Me.a.business_content.loaded,this._updatePlaylists,"panel_business_regular_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-regular-playlists");Object(an.j)(e)})})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_business_regular_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-playlists"},_e.a.createElement("div",{className:"panel-header",id:"panel-regular-playlists","aria-label":Object(We.a)("Sélection éditos"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return _e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length>0?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return _e.a.createElement(Ta.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:Pe.a.isAllowed("business"),context:"menu_panel_business_regular_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.filter,a=e.sortType,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Ga.a.data(t,a),l=n.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Wa.a.getRegularPlaylists();return e&&void 0!==e.data?e.data:[]},t}(ge.Component);Ka.defaultProps={sortType:"PLAYLIST_TITLE"};var Qa=Object(ve.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(Ka))),Xa=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="business_curated_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return M(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),Me.a.subscribe(Me.a.business_content.loaded,this._updatePlaylists,"panel_business_curated_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-curated-playlists");Object(an.j)(e)})})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_business_curated_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-playlists"},_e.a.createElement("div",{className:"panel-header",id:"panel-curated-playlists","aria-label":Object(We.a)("Business Playlists"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return _e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length>0?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return _e.a.createElement(Ta.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:Pe.a.isAllowed("business"),context:"menu_panel_business_curated_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Ga.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Wa.a.getCuratedPlaylists();return e&&void 0!==e.data?e.data:[]},t}(ge.Component);Xa.defaultProps={sortType:"PLAYLIST_TITLE"};var $a=Object(ve.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(Xa))),Ja=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="business_mixes",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return F(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),Me.a.subscribe(Me.a.business_content.loaded,this._updatePlaylists,"panel_business_mixes"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-business-mixes");Object(an.j)(e)})})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_business_mixes")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-playlists"},_e.a.createElement("div",{className:"panel-header",id:"panel-business-mixes","aria-label":Object(We.c)("Mix","Mix",{count:2}),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s mix","%s mix",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return _e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length>0?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return _e.a.createElement(Ta.a,{key:"playlist-list",data:this._current_list,type:"radio",displayFavorite:!0,draggable:Pe.a.isAllowed("business"),context:"menu_panel_business_mixes"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Ga.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Wa.a.getAllRadios();return e&&void 0!==e.data?e.data:[]},t}(ge.Component);Ja.defaultProps={sortType:"PLAYLIST_TITLE"};var Za=Object(ve.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(Ja))),er=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="albums",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=Ya()(a._onToggleFavorite.bind(a),0),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPageAllAlbums=a._openPageAllAlbums.bind(a),a.state={list:Ue.a.data.FAVORITES_ALBUMS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return U(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"panel_album"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"panel_album"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-albums");Object(an.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_album")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-albums"},_e.a.createElement("div",{className:"panel-header",id:"panel-albums","aria-label":Object(We.a)("Albums"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s album","%s albums",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return 0===e?_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t)):_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},_e.a.createElement(zt.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/albums"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"album",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Pe.a.isAllowed("business");return _e.a.createElement(Ta.a,{key:"album-list",data:this._currentList,type:Se.a.Album,displayFavorite:e,displayAdd:!0,helper:e?null:this._openPageAllAlbums,draggable:Pe.a.isAllowed("business"),context:"menu_panel_album"})},t.prototype._onToggleFavorite=function(e,t){"album"===t.type&&this.setState({list:Ue.a.data.FAVORITES_ALBUMS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPageAllAlbums=function(e){e.preventDefault(),this.context.router.push(Object(St.a)("/profile/"+this.props.userID+"/albums"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Ga.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.ALB_TITLE.toLowerCase().indexOf(a.toLowerCase())>-1||e.ART_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(ge.Component);er.contextTypes={router:Ae.a.object},er.defaultProps={selected:void 0,sortType:"ART_NAME"};var tr=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_album}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(er))),nr=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="shows",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPagePodcasts=a._openPagePodcasts.bind(a),a.state={list:Ue.a.data.FAVORITES_SHOWS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return B(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"panel_show"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"panel_show"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-shows");Object(an.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_show")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-shows"},_e.a.createElement("div",{className:"panel-header",id:"panel-shows","aria-label":Object(We.a)("Podcasts"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s podcast","%s podcasts",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return 0===e?_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t)):_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},_e.a.createElement(zt.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/shows"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:"show",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Pe.a.isAllowed("business"),t=e&&!Pe.a.isAllowed("business_mod");return _e.a.createElement(Ta.a,{key:"show-list",data:this._currentList,type:Se.a.Show,displayFavorite:e,displayAdd:!0,draggable:e,helper:t?null:this._openPagePodcasts,context:"menu_panel_show"})},t.prototype._onToggleFavorite=function(e,t){"show"===t.type&&this.setState({list:Ue.a.data.FAVORITES_SHOWS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPagePodcasts=function(e){e.preventDefault(),je.c.navigate(Object(St.a)("/channels/podcasts"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Ga.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.SHOW_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(ge.Component);nr.defaultProps={selected:!1,sortType:"SHOW_NAME"};var ar=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_show}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(nr))),rr=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="audiobooks",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPageAudiobooks=a._openPageAudiobooks.bind(a),a.state={list:Ue.a.data.FAVORITES_AUDIOBOOKS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return H(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"panel_audiobook"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"panel_audiobook"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-audiobooks");Object(an.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_audiobook")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(_e.a.createElement("div",{className:"panel-audiobooks"},_e.a.createElement("div",{className:"panel-header",id:"panel-audiobooks","aria-label":Object(We.a)("Livres audio"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=_e.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(We.c)("%s livre audio","%s livres audio",{sprintf:['<span class="color-primary">'+Object(an.f)(e)+"</span>"],count:e})}});return 0===e?_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},t)):_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2"},_e.a.createElement(zt.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/audiobooks"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return _e.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},_e.a.createElement("div",{className:"form-group"},_e.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(We.a)("Filtrer"),value:t})),n.length?_e.a.createElement("div",{className:"form-group"},_e.a.createElement(za.a,{type:Se.a.Audiobook,onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Pe.a.isAllowed("business"),t=e&&!Pe.a.isAllowed("business_mod");return _e.a.createElement(Ta.a,{key:"audiobook-list",data:this._currentList,type:Se.a.Audiobook,displayFavorite:e,displayAdd:!0,draggable:e,helper:t?null:this._openPageAudiobooks,context:"menu_panel_audiobook"})},t.prototype._onToggleFavorite=function(e,t){t.type===Se.a.Audiobook&&this.setState({list:Ue.a.data.FAVORITES_AUDIOBOOKS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPageAudiobooks=function(e){e.preventDefault(),je.c.navigate(Object(St.a)("/channels/audiobooks"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Ga.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.title.toLowerCase().indexOf(a)>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(ge.Component);rr.defaultProps={selected:!1,sortType:"AUDIOBOOK_TITLE"};var or=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_audiobook}},null,null,{withRef:!0})(Object(Ca.a)(Object(ka.a)(rr))),ir=n("./js/_components/Thumbnail/index.js"),sr=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="apps",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onAppClick=a._onAppClick.bind(a),a._onHelperClick=a._onHelperClick.bind(a),a.state={list:Ue.a.data.FAVORITES_APPLICATIONS?Ue.a.data.FAVORITES_APPLICATIONS.data.slice(0):[],suggest:Ue.a.data.DEFAULT_APPLICATIONS?Ue.a.data.DEFAULT_APPLICATIONS.data.slice(0):[]},a}return Y(t,e),t.prototype.componentDidMount=function(){Me.a.subscribe(Me.a.user.addFavorite,this._onToggleFavorite,"panel_application"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onToggleFavorite,"panel_application"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-apps");Object(an.j)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.suggest!==this.state.suggest||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_application")},t.prototype.render=function(){var e=this.state,t=e.list,n=e.suggest,a=Ga.a.data(t,"APP_NAME"),r=Object(We.c)("%s application","%s applications",{sprintf:['<span class="color-primary">'+Object(an.f)(a.length)+"</span>"],count:a.length});return this.renderPanel(_e.a.createElement("div",{className:"panel-apps"},_e.a.createElement("div",{className:"panel-header",id:"panel-apps","aria-label":Object(We.a)("Applications"),tabIndex:"0"},_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2",dangerouslySetInnerHTML:{__html:r}}))),this.renderScrollbar({"panel-body":!0},[this._renderSuggest(n),this._renderContent(a)])))},t.prototype._renderContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _e.a.createElement(Ta.a,{key:"apps-list",data:e,type:"app",helper:this._onHelperClick})},t.prototype._renderSuggest=function(e){return 0===e.length?null:(e=e[0],_e.a.createElement("aside",{role:"complementary",key:"suggest",className:"app-suggest",onClick:this._onAppClick,"data-type":"suggested_apps","data-url":this._getSuggestUrl(),"data-id":e.APP_ID},_e.a.createElement("div",{className:"panel-heading-sub heading-4"},Object(We.a)("Deezer vous recommande :")),_e.a.createElement(ir.a,{type:"app",data:e,alt:e.NAME,height:120,width:320}),_e.a.createElement("ul",{className:"nano-card-list"},_e.a.createElement("li",{className:"nano-card-item"},_e.a.createElement("div",{className:"nano-card-options"},_e.a.createElement("span",{className:"option"},_e.a.createElement($t.a,{type:"application",context:"appsuggest",id:e.APP_ID}))),_e.a.createElement("div",{className:"nano-card-infos"},_e.a.createElement("div",{className:"heading-4 ellipsis"},_e.a.createElement("a",{href:this._getSuggestUrl()},e.NAME)),_e.a.createElement("div",{className:"heading-4-sub ellipsis"},_e.a.createElement("a",{href:this._getSuggestUrl()},e.DESCRIPTION)))))))},t.prototype._onToggleFavorite=function(e,t){"application"===t.type&&this.setState({list:Ue.a.data.FAVORITES_APPLICATIONS.data.slice(0)})},t.prototype._onAppClick=function(e){e.preventDefault(),e.stopPropagation(),je.c.navigate(this._getSuggestUrl()),this.tracking("panel_click",e.currentTarget)},t.prototype._onHelperClick=function(e){e.preventDefault(),e.stopPropagation(),je.c.navigate("/appstudio"),this.tracking("panel_click",e.currentTarget)},t.prototype._getSuggestUrl=function(){var e=this.state.suggest[0];return"/app/"+(""!==e.INAPP_ALIAS?e.INAPP_ALIAS:e.APP_ID)},t}(ge.Component),lr=Object(En.a)(Object(Ca.a)(Object(ka.a)(sr))),cr=(n("./node_modules/react-dom/index.js"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),ur=50,pr=_e.a.createElement("span",{className:"icon icon-trash"}),dr=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),fr=_e.a.createElement("button",{className:"action-item-btn",id:"naboo_queuelist_add",type:"button"},_e.a.createElement("span",{className:"icon icon-add"})),hr=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="queuelist",a.scrollbar={ref:"nano",shouldUpdate:function(e){return a.props.list.length!==e.list.length}},a._displayMoreEnabled=!0,a.state={nbDisplay:ur},a._onSelect=a._onSelect.bind(a),a._checkTrackList=a._checkTrackList.bind(a),a._onAdd=a._onAdd.bind(a),a._onRemove=a._onRemove.bind(a),a._onQueueListChange=a._onQueueListChange.bind(a),a._onUpNextToggle=a._onUpNextToggle.bind(a),a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._activateScroll=a._activateScroll.bind(a),a}return z(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.list.select,this._onSelect,"panel_queue"),Me.a.subscribe(Me.a.user.addFavorite,this._onFavoriteToggle,"panel_queue"),Me.a.subscribe(Me.a.user.deleteFavorite,this._onFavoriteToggle,"panel_queue"),Me.a.subscribe(Me.a.player.tracklist_changed,this._onQueueListChange,"panel_queue"),this.scrollbar_onEnd(this._activateScroll),this.subscribeOnOpen(function(){e._checkTrackList();var t=document.getElementById("panel-queuelist");Object(an.j)(t)}),ke()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentDidUpdate=function(e){this.props.selected===this.panel_name&&e.selected!==this.panel_name&&ke()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentWillUnmount=function(){Me.a.unsubscribeAll("panel_queue")},t.prototype.render=function(){var e=this.props,t=e.isRadio,n=e.isAuth,a=e.isFlow,r=e.isMyFlow,o=e.context,i=e.mediaType;if(!e.list.length)return null;var s=n&&!a&&!r&&(!t||"up_next_artist"===o.TYPE)&&"artist_smartradio"!==o.TYPE&&i!==Te.a.MEDIA_TYPE_LIVE_STREAM&&i!==Te.a.MEDIA_TYPE_TALK,l=qe()({"panel-qlist":!0,"has-up-next":s}),c=qe()({"panel-header":!0,"is-radio":i!==Te.a.MEDIA_TYPE_LIVE_STREAM&&t&&"up_next_artist"!==o.TYPE});return this.renderPanel(_e.a.createElement("div",{className:l},_e.a.createElement("div",{className:c,id:"panel-queuelist","aria-label":Object(We.a)("File d'attente"),tabIndex:"0"},this._renderActionBar(),this._renderTitle(),s?this._renderUpNextToggle():null),this.renderScrollbar({"panel-body":!0},this._renderContent())))},t.prototype._renderContent=function(){var e=this,t=this.props,n=t.list,a=t.recommendations,r=t.context,o=t.mediaType,i=t.isRadio,s=t.isFlow,l=t.isMyFlow,c=t.isAuth,u=t.index,p=t.hasUpNext,d=o!==Te.a.MEDIA_TYPE_TALK,f=c&&p&&!s&&!l&&"up_next_artist"===r.TYPE&&a.length,h=n.slice(0,this.state.nbDisplay),m={isRadio:i,shareContext:s?"flow":"",playIndex:u,playData:i?[]:h,data:h,context:"queue_list",displayPlay:i&&"up_next_artist"!==r.TYPE?"off":"on"};return _e.a.createElement("div",{ref:function(t){return e.listNode=t}},_e.a.createElement(Ta.a,cr({},m,{displayAdd:d,selectable:!0})),f?this._renderRecommendations():null)},t.prototype._renderRecommendations=function(){var e=this.props,t=e.list,n={data:e.recommendations,isRadio:!0,shareContext:"up_next_artist",playIndex:e.index-t.length,playData:[],context:"up_next_artist",displayPlay:"off"};return _e.a.createElement("div",null,_e.a.createElement("h2",{className:"panel-heading-sub heading-4"},Object(We.a)("Recommandé")),_e.a.createElement(Ta.a,cr({},n,{displayAdd:!1,selectable:!1})))},t.prototype._renderTitle=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.tracklistDuration,r=e.context,o=e.mediaType,i=e.isRadio,s=e.isFlow,l=n.length,c=Object(We.c)("%s titre","%s titres",{count:l,sprintf:[Object(an.f)(l)]}),u=Object(We.a)("File d'attente");return o!==Te.a.MEDIA_TYPE_LIVE_STREAM&&(i&&"up_next_artist"!==r.TYPE?i&&(c="",u=s?Object(We.a)("Derniers titres écoutés sur Flow"):Object(We.a)("Derniers titres écoutés dans le mix")):0===t?c+=" "+String.fromCharCode(183)+" "+Object(an.l)(a,!0):c=Object(We.c)("%s titre sélectionné","%s titres sélectionnés",{count:t,sprintf:[Object(an.f)(t)]})),_e.a.createElement("div",{className:"panel-headings"},_e.a.createElement("h2",{className:"heading-2 ellipsis"},u),_e.a.createElement("h3",{className:"heading-3-sub ellipsis"},c))},t.prototype._renderActionBar=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.mediaType;return 0!==t&&_e.a.createElement("div",{className:"panel-actions"},a!==Te.a.MEDIA_TYPE_TALK?_e.a.createElement("a",{className:"btn btn-default btn-mini",role:"button",onClick:this._onAdd},this._renderAdd()):"",n.length>1&&!Dt.a.isActive()?_e.a.createElement("button",{className:"btn btn-default btn-mini",type:"button",onClick:this._onRemove,"data-type":"edit_delete"},pr):"")},t.prototype._renderUpNextToggle=function(){var e=this.props.hasUpNext,t=qe()({checkbox:!0,checked:e}),n=e?Object(We.a)("Désactiver les recommandations automatiques"):Object(We.a)("Activer les recommandations automatiques");return _e.a.createElement("button",{type:"button","aria-label":n,onClick:this._onUpNextToggle},_e.a.createElement("span",{className:t},dr,_e.a.createElement("span",{className:"checkbox-label heading-3-sub","aria-hidden":"true"},Object(We.a)("Recommandations automatiques"))))},t.prototype._renderAdd=function(){var e=fr,t=this.props,n=t.nbSelected,a=t.selectedItemIds,r=t.selectedItemIndexes,o=t.selectedItemData,i=t.hasSelectedFavorite,s=t.isRadio,l={type:"track",id:a,context:this.panel_name,data:{SONG:1===n?o[0]:{},INDEX:r},position:"bottom",anchor:e,isRadio:s,isFavorite:i};return _e.a.createElement(Jt.a,l)},t.prototype._onSelect=function(e,t){var n=this.props,a=n.onItemSelect,r=n.mediaType,o=n.nbSelected,i=n.onFavoriteToggle;if(a(t),"song"===r&&0===o){var s=Te.a.getMediaId(t.data),l=t.data[s];i({hasSelectedFavorite:Ue.a.isFavorite("song",l)})}},t.prototype._onAdd=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onRemove=function(e){var t=this.props.selectedItemIndexes;if(this.tracking("panel_click",e.currentTarget),t.length)for(var n=0,a=t.length;n<a;n++)Te.a.removeTracks(t[n])},t.prototype._onQueueListChange=function(){Me.a.trigger(Me.a.list.deselectAll)},t.prototype._onUpNextToggle=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.hasUpNext,a=t.context,r=t.list,o=t.recommendations,i=t.index;if(n=!n,this.props.updateSettings({global:{has_up_next:n}}),!n&&"up_next_artist"===a.TYPE){var s=r.length+o.length,l=i+1;s-l>0&&(Te.a.removeTracks(l,s-l),this.props.updateTracklist())}},t.prototype._onFavoriteToggle=function(e,t){var n=this.props.selectedItemIds[0];(!t||"song"===t.type&&String(t.id)===n)&&this.props.onFavoriteToggle({hasSelectedFavorite:Ue.a.isFavorite("song",n)})},t.prototype._activateScroll=function(){this.state.nbDisplay>this.props.list.length||(this._displayMoreEnabled=!0,this._displayMore())},t.prototype._displayMore=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,n=this.state.nbDisplay;this.setState({nbDisplay:n+t},function(){!1===e._displayMoreEnabled||n>e.props.list.length||(e._displayMoreEnabled=!0,e._checkTrackList())})},t.prototype._checkTrackList=function(){var e=this.props.index;return e>this.state.nbDisplay?(this._displayMoreEnabled=!0,this._displayMore(Math.ceil(e/ur)*ur-ur),!1):(this._displayMoreEnabled=!1,!0)},t.prototype._getScrollPosition=function(){var e=this.refs.nano_content;if(this.listNode.offsetHeight<e.offsetHeight)return 0;var t=this.props,n=t.list,a=t.index,r=Math.min(this.state.nbDisplay,n.length);return Math.ceil(this.listNode.offsetHeight/r)*a},t}(ge.Component),mr=Object(En.a)(Object(Ca.a)(Object(ka.a)(hr))),yr=Object(ve.b)(function(e){return{list:e.player.music.list,recommendations:e.player.music.recommendations,index:e.player.music.index,tracklistDuration:e.player.music.tracklistDuration,context:e.player.music.context,mediaType:e.player.music.mediaType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,isMyFlow:e.player.config.isMyFlow,selectedItems:e.queuelist.selectedItems,hasSelectedFavorite:e.queuelist.hasSelectedFavorite,isAuth:e.user.isAuth,hasUpNext:e.user.hasUpNext,nbSelected:Zn(e),selectedItemIndexes:ea(e),selectedItemData:ta(e),selectedItemIds:na(e)}},{onItemSelect:function(e){return{type:Qn,index:e.index,data:e.data}},onFavoriteToggle:function(e){return{type:Xn,hasSelectedFavorite:e.hasSelectedFavorite}},updateTracklist:Ht.r,updateSettings:Ye.j},null,{withRef:!0})(mr),br=n("./js/_modules/player/constants.js"),gr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),_r=_e.a.createElement("span",{className:"rounded-icon rounded-icon-user"},_e.a.createElement(at.a,{name:"user",size:"16"})),vr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),Er=_e.a.createElement("span",{className:"rounded-icon rounded-icon-family"},_e.a.createElement(at.a,{name:"family",size:"16"})),Or=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),jr=_e.a.createElement("span",{className:"rounded-icon rounded-icon-help"},_e.a.createElement(at.a,{name:"help",size:"16"})),Tr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),wr=_e.a.createElement("span",{className:"rounded-icon rounded-icon-code"},_e.a.createElement(at.a,{name:"barcode",size:"16"})),Sr=_e.a.createElement("input",{className:"checkbox-input",type:"checkbox"}),Pr=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),Cr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),kr=_e.a.createElement("span",{className:"rounded-icon rounded-icon-labs"},_e.a.createElement(at.a,{name:"labs",size:"16"})),Nr=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),Ar=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),Ir=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),Rr=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),xr=_e.a.createElement("span",{className:"heading-4","aria-hidden":"true"},"Electron UI"),Dr=_e.a.createElement(at.a,{className:"checkbox-tick",name:"check"}),Lr=_e.a.createElement("span",{className:"heading-4","aria-hidden":"true"},"Triforce"),Mr=_e.a.createElement("span",{className:"slider-label"},"10"),Fr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),Ur=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),Br=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),Hr=_e.a.createElement(at.a,{className:"animate-wobble-target",name:"chevron-right"}),Yr=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="settings",a.scrollbar={ref:"nano",shouldUpdate:function(){}},a._onFadeChange=a._onFadeChange.bind(a),a._onModalOpenClick=a._onModalOpenClick.bind(a),a._onSetHq=a._onSetHq.bind(a),a._onSetHTML5Player=a._onSetHTML5Player.bind(a),a._setFade=a._setFade.bind(a),a._toggleNormalize=a._toggleNormalize.bind(a),a._toggleUi=a._toggleUi.bind(a),a._toggleTriforce=a._toggleTriforce.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._setFadeOnKeyDown=a._setFadeOnKeyDown.bind(a),a.state={hq:Te.a.isHq(),fade:Te.a.fade,normalize:Te.a.normalize,electronUI:a.props.UI.current===a.props.UI.electron},a}return G(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.user.settingChanged,this._onSettingChange,"player"),Me.a.subscribe(Me.a.player.fade,this._onFadeChange,"player"),ke()(this.refs.fade).draggable({axis:"x",containment:"parent",drag:function(t,n){e.setState({fade:e._getCursorFade(t,n)})},stop:function(t,n){Te.a.control.changeFadeValue(e._getCursorFade(t,n))}}),this.subscribeOnOpen(function(){var e=document.getElementById("panel-settings");Object(an.j)(e)})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribe(Me.a.user.settingChanged,this._onSettingChange),Me.a.unsubscribe(Me.a.player.fade,this._onFadeChange)},t.prototype.render=function(){return this.renderPanel(_e.a.createElement("div",{className:"panel-settings",id:"panel-settings",tabIndex:"0","aria-label":Object(We.a)("Paramètres")},this.renderScrollbar({"panel-body":!0},_e.a.createElement("div",null,_e.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Compte")),this._renderAccountSettings(),_e.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Audio")),this._renderAudioSettings(),_e.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(We.a)("Découvrir Deezer")),this._renderDiscoveryLinks(),_e.a.createElement("div",{className:"btn-logout"},_e.a.createElement("button",{className:"btn btn-danger btn-block","data-type":"log_out",type:"button",onClick:function(){return jt.a.logout()}},_e.a.createElement("span",{className:"label"},Object(We.a)("Déconnexion"))))))))},t.prototype._renderAccountSettings=function(){var e=jt.a.getMultiAccountOptions(),t=qe()({"checkbox checkbox-settings":!0,checked:e.IS_KID});return _e.a.createElement("ul",{className:"nano-card-list"},_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account",onClick:this._onLinkClick},gr,_r,Object(We.a)("Paramètres du compte"))),e.ENABLED||e.CHILD_COUNT?_e.a.createElement("li",null,_e.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"family_switch","data-modal":"/lightbox/multi_account/switch",href:"/lightbox/multi_account/switch",onClick:this._onModalOpenClick},vr,Er,e.CHILD_COUNT?Object(We.a)("Changer de profil"):Object(We.a)("Nouveau profil"))):null,_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"support",to:"/support",target:"_blank",onClick:this._onLinkClick},Or,jr,Object(We.a)("Assistance"))),e.PARENT?null:_e.a.createElement("li",null,_e.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"gift_code",href:"/gift",target:"_blank",onClick:this._onLinkClick},Tr,wr,Object(We.a)("Activer un code"))),e.PARENT?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nano-card-link","data-type":"is_kid",type:"button",onClick:function(e){return jt.a.setKidStatus(e)}},_e.a.createElement("span",{className:t},Sr,Pr),_e.a.createElement("span",{className:"heading-4"},Object(We.a)("Activer Deezer Kids")))):null,Pe.a.isAllowed("web_labs")?_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account/labs",onClick:this._onLinkClick},Cr,kr,"Deezer Labs")):null)},t.prototype._renderAudioSettings=function(){var e=this.state,t=e.fade,n=e.normalize,a=e.electronUI,r=this.props.currentAudioQuality,o=qe()({"checkbox checkbox-settings":!0,checked:this.props.hasHTML5Player}),i=qe()({"checkbox checkbox-settings":!0,checked:r===br.b}),s=qe()({"checkbox checkbox-settings":!0,checked:n}),l=qe()({"checkbox checkbox-settings":!0,checked:a}),c=qe()({"checkbox checkbox-settings":!0,checked:this.props.isTriforceEnabled}),u=Math.round(10*t),p=100*t+"%";return _e.a.createElement("ul",{className:"nano-card-list"},Te.a.html5.supported&&"Firefox"!==Ot.a.browser?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._onSetHTML5Player},_e.a.createElement("span",{className:o},Nr),_e.a.createElement("span",{className:"heading-4"},Object(We.a)("Player HTML5")))):null,_e.a.createElement("li",{"data-type":"audio_hq"},_e.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":r?Object(We.a)("Désactiver le son Haute Qualité"):Object(We.a)("Activer le son Haute Qualité"),onClick:this._onSetHq},_e.a.createElement("span",{className:i},Ar),_e.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(We.a)("Haute Qualité")))),Te.a.html5.active&&(Pe.a.isAllowed("employee_feature")||Pe.a.isAllowed("business"))?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":Object(We.a)("Normaliser le volume"),onClick:this._toggleNormalize},_e.a.createElement("span",{className:s},Ir),_e.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(We.a)("Normaliser le volume")))):null,Pe.a.isAllowed("electron_ui")?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._toggleUi},_e.a.createElement("span",{className:l},Rr),xr)):null,Pe.a.isAllowed("triforce_queuelist_ui")&&this.props.isPremium?_e.a.createElement("li",null,_e.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._toggleTriforce},_e.a.createElement("span",{className:c},Dr),Lr)):null,Te.a.html5.active?null:_e.a.createElement("li",{className:"nano-card-link"},_e.a.createElement("span",{className:"heading-4"},_e.a.createElement("span",{className:"slider-container pull-right"},_e.a.createElement("span",{className:"slider-label","aria-live":"assertive"},u),_e.a.createElement("span",{className:"slider-bar",ref:"fade_bar",onClick:this._setFade},_e.a.createElement("span",{className:"slider-bar-active",style:{width:p}}),_e.a.createElement("span",{className:"slider-bar-handler",ref:"fade",tabIndex:"0",role:"slider","aria-label":Object(We.a)("Fondu sonore"),"aria-valuemin":"0","aria-valuemax":"10","aria-valuetext":Object(We.a)("Fondu sonore - Niveau %s",{sprintf:[u]}),"aria-valuenow":u,onKeyDown:this._setFadeOnKeyDown,style:{left:p}})),Mr),Object(We.a)("Fondu sonore"))))},t.prototype._renderDiscoveryLinks=function(){return _e.a.createElement("ul",{className:"nano-card-list"},_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"offers",to:"/offers",target:"_blank",onClick:this._onLinkClick},Fr,Object(We.a)("Offres"))),_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"company",to:"/company",target:"_blank",onClick:this._onLinkClick},Ur,Object(We.a)("À propos"))),_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"features",to:"/features",target:"_blank",onClick:this._onLinkClick},Br,Object(We.a)("Fonctionnalités"))),_e.a.createElement("li",null,_e.a.createElement(zt.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"jobs",to:"/jobs",target:"_blank",onClick:this._onLinkClick},Hr,Object(We.a)("Jobs"))))},t.prototype._onSettingChange=function(e,t){t.data&&t.data.site&&(void 0!==t.data.site.player_html5||void 0!==t.data.site.version)&&Mt.a.reload()},t.prototype._onFadeChange=function(e,t){this.setState({fade:t})},t.prototype._onLinkClick=function(e){this.tracking("panel_click",e.currentTarget),Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._onModalOpenClick=function(e){if(void 0===e.keyCode||13===e.keyCode){e.preventDefault(),e.stopPropagation();var t=wt.a.dataset(e.currentTarget,"modal");"string"==typeof t&&(this.tracking("panel_click",e.currentTarget),Me.a.trigger(Me.a.menu.closeAllPanels),Le.default.open(t))}},t.prototype._onSetHq=function(e){e.preventDefault(),this.props.hasHqAudioRight?Te.a.control.setHq(!(this.props.currentAudioQuality===br.b)):(Object(Mt.b)("/offers"),Me.a.trigger(Me.a.menu.closeAllPanels))},t.prototype._onSetHTML5Player=function(e){e.preventDefault(),Tt.a.set({site:{player_html5:!this.props.hasHTML5Player}})},t.prototype._getCursorFade=function(e,t){var n=t.position.left/(e.target.parentNode.offsetWidth-5);return n=Math.min(n,1),n=Math.max(n,0)},t.prototype._setFade=function(e){var t=(e.pageX-ke()(e.target).offset().left)/this.refs.fade_bar.offsetWidth;Te.a.control.changeFadeValue(Math.min(Math.max(t,0),1))},t.prototype._toggleNormalize=function(){var e=!this.state.normalize;Tt.a.set({site:{player_normalize:e}}),this.setState({normalize:e}),Te.a.control.setNormalize(e)},t.prototype._toggleUi=function(){var e=!this.state.electronUI;Tt.a.set({site:{version:e?this.props.UI.electron:this.props.UI.web}}),this.setState({electronUI:e})},t.prototype._toggleTriforce=function(){var e=!this.props.isTriforceEnabled;Tt.a.set({site:{triforce:e}})},t.prototype._setFadeOnKeyDown=function(e){var t=33,n=34,a=35,r=36,o=37,i=38,s=39,l=40;if(-1!==[t,n,a,r,o,i,s,l].indexOf(e.keyCode)){e.preventDefault();var c=this.state.fade;e.keyCode!==o&&e.keyCode!==l||(c-=.01),e.keyCode===n&&(c-=.1),e.keyCode===r&&(c=0),e.keyCode!==s&&e.keyCode!==i||(c+=.01),e.keyCode===t&&(c+=.1),e.keyCode===a&&(c=10),Te.a.control.changeFadeValue(Math.min(Math.max(c,0),1))}},t}(ge.PureComponent);Yr.defaultProps={hasHTML5Player:Te.a.html5.supported};var zr=Object(En.a)(Object(Ca.a)(Object(ka.a)(Yr))),Gr=Object(ve.b)(function(e){var t=e.user;return{userLang:t.SETTING_LANG,hasHqAudioRight:t.hasHqAudioRight,currentAudioQuality:t.currentAudioQuality,hasHTML5Player:t.USER.SETTING.site.player_html5,UI:Object(Ye.c)(t),isPremium:Object(Ye.e)(t),isTriforceEnabled:Object(Ye.f)(t)}},null,null,{withRef:!0})(zr),Vr=n("./js/core/Blurred.js"),qr=n.n(Vr),Wr=n("./js/_modules/lyrics.js"),Kr=_e.a.createElement("g",{fill:"none",stroke:"rgba(255,255,255,0.3)"},_e.a.createElement("circle",{cx:"50",cy:"50",r:"45"})),Qr=_e.a.createElement("circle",{cx:"50",cy:"50",r:"45"}),Xr=_e.a.createElement("span",{className:"icon icon-32 icon-lyrics"}),$r=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state=a._getState(),a}return V(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this._animTimeoutRef=setTimeout(function(){t.setState(t._getState(e))},0)},t.prototype.shouldComponentUpdate=function(e,t){return-1===e.max||t.strokeDashoffset>=0&&0!==this.state.strokeDashoffset},t.prototype.componentWillUnmount=function(){clearTimeout(this._animTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.max,a=e.now,r=e.strokeDasharray,o=this.state,i=o.strokeDashoffset,s=o.transition;if(!t)return null;var l={strokeDashoffset:i},c=qe()({"starter-svg":!0,"svg-animate":s}),u=void 0,p=void 0,d=void 0,f=void 0,h=void 0;return n>0&&(u=0,d=a<(p=n)?a:p,f=Math.floor(p-d),h=Object(We.c)("%s seconde","%s secondes",{sprintf:[f],count:f})),_e.a.createElement("div",{className:"lyrics-starter"},_e.a.createElement("div",{className:"starter-anim"},_e.a.createElement("svg",{className:c,height:"100",width:"100",x:"0px",y:"0px"},Kr,_e.a.createElement("g",{className:"spinner",fill:"none",stroke:"#FFFFFF",role:"timer","aria-describedby":"starter-message",strokeDasharray:r,style:l,"aria-valuemin":u,"aria-valuemax":p,"aria-valuenow":d,"aria-valuetext":h},Qr)),Xr))},t.prototype._getState=function(e){var t=(e=e||this.props).max>=0?e.strokeDasharray:0,n=this.state?this.state.strokeDashoffset:null,a=void 0,r=void 0;return e.max>0&&e.now<=e.max&&(t=e.now>0?e.strokeDasharray/(e.max/e.now):0),r=e.strokeDasharray-t,a=!(0===r||r===e.strokeDasharray||null!==n&&r>=n),{strokeDashoffset:e.strokeDasharray-t,transition:a}},t}(ge.Component);$r.defaultProps={now:0,max:-1,strokeDasharray:300,show:!1};var Jr=$r,Zr=n("./js/_components/Image/index.js"),eo=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.state=a._getState(n.track,n.show),a}return q(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState(this._getState(e.track,e.show),function(){t._fadeTimeoutRef=setTimeout(function(){t.setState({fadeIn:e.show})},0)})},t.prototype.componentWillUnmount=function(){clearTimeout(this._fadeTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.placeholders,a=e.explanations,r=this.state,o=r.placeholderIndex,i=r.explanationIndex,s=r.fadeIn;if(!t)return null;var l=n[o],c=a[i],u=Object(We.a)("(Mal) entendu dans %1$s <em>de %2$s</em>",{sprintf:[l.title,l.artist]}),p=qe()({"lyrics-placeholder":!0,"lyrics-placeholder-active":s});return _e.a.createElement("div",{className:p,role:"alert"},_e.a.createElement("div",{className:"lyrics-placeholder-image"},_e.a.createElement(Zr.a,{src:"naboo/layouts/panels/lyrics/placeholder_"+(o+1)+".png",width:"64",height:"64"})),_e.a.createElement("div",{className:"lyrics-placeholder-quote"},l.quote),_e.a.createElement("div",{className:"lyrics-placeholder-track",dangerouslySetInnerHTML:{__html:u}}),_e.a.createElement("div",{className:"lyrics-placeholder-message"},c))},t.prototype._getState=function(e,t){if(!t)return{};var n=this.props,a=n.placeholders,r=n.explanations,o=a.length,i=this.state?this.state.placeholderIndex:null,s=this.state?this.state.explanationIndex:null,l="fr"===we.a.get("SETTING_LANG")?o:o-1;return{placeholderIndex:this._getRandom(0,l,i),explanationIndex:this._getRandom(0,r.length,s),fadeIn:!1}},t.prototype._getRandom=function(e,t,n){if(t<=1)return 0;var a=Math.floor(Math.random()*(t-e))+e;return void 0!==n&&a===n?a===t-1?--a:++a:a},t}(ge.PureComponent);eo.defaultProps={placeholders:[{title:"You Oughta Know",artist:"Alanis Morissette",quote:"It's not fair, to deny me of the cross-eyed bear that you gave to me"},{title:"Rock the Casbah",artist:"The Clash",quote:"Shareef don't like it. Rock the cat box, rock the cat box"},{title:"Sweet Dreams",artist:"Eurythmics",quote:"Sweet dreams are made of cheese"},{title:"Bad Moon Rising",artist:"Creedence Clearwater Revival",quote:"Don't go around tonight, it's bound to take your life, there's a bathroom on the right"},{title:"Smells Like Teen Spirit",artist:"Nirvana",quote:"Here we are now, in containers"},{title:"Message in a Bottle",artist:"The Police",quote:"Mon opinel a dû mal couper !"}],explanations:[Object(We.a)("OK... Nous n'avons pas les paroles de cette chanson."),Object(We.a)("Pas tout à fait... On donne tout pour trouver les paroles de cette chanson."),Object(We.a)("Presque... On se dépêche de vous trouver les paroles de cette chanson.")]};var to=eo,no=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onClick=a._onClick.bind(a),a}return W(t,e),t.prototype.render=function(){var e=this.props,t=e.milliseconds,n=e.line,a=e.active,r=e.oneLine,o=void 0!==t;n=n?n.trim():"";var i=qe()({"lyrics-line":!0,"lyrics-line-empty":!n,"lyrics-line-active":o&&a,ellipsis:r});return o?_e.a.createElement("a",{ref:this.props.lyricRef,className:i,onClick:this._onClick},n):_e.a.createElement("p",{ref:this.props.lyricRef,className:i},n)},t.prototype._onClick=function(){var e=this.props,t=e.milliseconds,n=e.index,a=e.seek;Me.a.trigger(Me.a.lyrics.seek,{milliseconds:t,index:n,seek:a})},t}(ge.PureComponent);no.defaultProps={seek:!0,oneLine:!1,lyricRef:void 0};var ao=no,ro=_e.a.createElement("span",{className:"icon icon-cancel"}),oo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return K(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.track,a=t.lyric;return e.track.SNG_ID!==n.SNG_ID||void 0!==e.lyric&&void 0===a||void 0===e.lyric&&void 0!==a||void 0!==e.lyric&&void 0!==a&&(e.lyric.milliseconds!==a.milliseconds||e.lyric.line!==a.line)},t.prototype.render=function(){var e=this.props,t=e.lyric,n=e.track,a=void 0!==t,r="https://"+we.a.get("host_img_url_ssl")+"/cover/"+n.ALB_PICTURE+"/65x65-000000-80-0-0.jpg",o=qe()({"lyrics-track-infos":!0,hide:a}),i=qe()({"lyrics-active":!0,hide:!a});return _e.a.createElement("div",{className:"panel-header"},_e.a.createElement("div",{className:"panel-header-container clearfix"},_e.a.createElement(zt.a,{to:"/album/"+n.ALB_ID,className:"evt-click"},_e.a.createElement("figure",{className:"lyrics-thumbnail"},_e.a.createElement("img",{width:"65",height:"65",src:r,alt:n.ALB_TITLE,title:n.ALB_TITLE}))),_e.a.createElement("div",{className:"lyrics-infos"},_e.a.createElement("p",{className:"sticker sticker-small sticker-flow"},Object(We.a)("PAROLES")),_e.a.createElement("div",{className:o,"aria-hidden":a},_e.a.createElement("h2",{className:"heading-4 heading-inverse",itemProp:"name"},n.SNG_TITLE),_e.a.createElement("h3",{className:"heading-4-sub heading-inverse"},Object(We.a)("par")+" "," ",_e.a.createElement(zt.a,{to:"/artist/"+n.ART_ID,className:"lyrics-artist-link evt-click"},n.ART_NAME))),_e.a.createElement("p",{className:i,"aria-hidden":!a},a?_e.a.createElement(ao,{line:t.line,milliseconds:t.milliseconds,active:!0,seek:!1,oneLine:!0}):""))),_e.a.createElement("button",{className:"btn btn-link panel-close",type:"button","aria-label":Object(We.a)("Masquer les paroles"),onClick:this._closePanels},ro))},t.prototype._closePanels=function(){Me.a.trigger(Me.a.menu.closeAllPanels)},t}(ge.Component),io=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return Q(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.activeIndex,a=t.synchro,r=t.lyrics;return e.activeIndex!==n||e.synchro!==a||e.lyrics.length!==r.length},t.prototype.getLyric=function(e){return this["lyric"+e+"Node"]},t.prototype.render=function(){var e=this,t=this.props,n=t.lyrics,a=t.activeIndex,r=t.synchro,o=void 0,i=void 0,s=void 0,l=void 0;return"snippet"===this.props.lyricsBehaviour&&n.splice(0,n.length-5),_e.a.createElement("ol",{className:"lyrics-content",itemProp:"text"},n.map(function(t,n){return o=n===a,i="lyric_"+n,s=t,r&&(s=t.line,l=t.milliseconds),_e.a.createElement("li",{key:i},_e.a.createElement(ao,{lyricRef:function(t){return e["lyric"+n+"Node"]=t},index:n,line:s,milliseconds:l,active:o}))}))},t}(ge.Component);io.defaultProps={lyrics:[],activeIndex:void 0,synchro:!1,lyricsBehaviour:void 0};var so=Object(ve.b)(function(e){return{lyricsBehaviour:(e.user.USER.ABTEST.lyrics||{}).behaviour}},null,null,{withRef:!0})(io),lo=_e.a.createElement("div",{className:"panel-lyrics-overlay"}),co=_e.a.createElement("div",{className:"lyrics-blurred"}),uo=_e.a.createElement("div",{className:"ads ads-bottom"},_e.a.createElement("div",{id:"lyrics_ads_banner_bottom"})),po=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));a.panel_name="lyrics",a.scrollbar={ref:"nano",disableScrollTopOnUpdate:!0,shouldUpdate:function(e,t){return a.state.lyrics.length!==t.lyrics.length}},a._onFocus=a._onFocus.bind(a),a._onBlur=a._onBlur.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onPlayerSeek=a._onPlayerSeek.bind(a),a._onLyricsLoad=a._onLyricsLoad.bind(a),a._onLyricsSeek=a._onLyricsSeek.bind(a),a._onPanelScroll=a._onPanelScroll.bind(a),a._scrollToTop=a._scrollToTop.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a);var r=a._getStateFromStore();return r.position=Te.a.getPosition(),r.isActivePanel=!0,r.firstOpen=!0,a.state=r,a}return X(t,e),t.prototype.componentDidMount=function(){var e=this;Me.a.subscribe(Me.a.player.displayCurrentSong,this._onTrackChange,"lyrics_panel"),Me.a.subscribe(Me.a.player.changePlayerType,this._onPlayerTypeChange,"lyrics_panel"),Me.a.subscribe(Me.a.player.position,this._onPositionChange,"lyrics_panel"),Me.a.subscribe(Me.a.player.seek,this._onPlayerSeek,"lyrics_panel"),Me.a.subscribe(Me.a.lyrics.load,this._onLyricsLoad,"lyrics_panel"),Me.a.subscribe(Me.a.lyrics.seek,this._onLyricsSeek,"lyrics_panel"),window.addEventListener("focus",this._onFocus),window.addEventListener("blur",this._onBlur),this.subscribeOnOpen(function(){var t=e.state,n=t.track,a=t.activeLyricIndex;if(n.SNG_ID===Te.a.getCurrentSong("SNG_ID")&&e._scrollToActiveLyric(a,!0),!e.state.autoScroll){var r=document.getElementById("panel-lyrics");Object(an.j)(r)}}),ke()(this.refs.nano_content).on("scroll",this._onPanelScroll),this._setCoverBackground(this.state.track.ALB_PICTURE),Te.a.control.loadLyrics()},t.prototype.componentWillReceiveProps=function(e){this.setState({isActivePanel:"lyrics"===e.selected&&!0===e.displayed})},t.prototype.shouldComponentUpdate=function(){return!0===this.state.isActivePanel},t.prototype.componentWillUpdate=function(e,t){t.isActivePanel&&(this._scrollTopWhenActive?(this._scrollTopWhenActive=!1,this._scrollTopTimeoutRef=setTimeout(this._scrollToTop,0)):t.autoScroll&&t.hasLyrics&&this._scrollToActiveLyric(t.activeLyricIndex))},t.prototype.componentWillUnmount=function(){clearTimeout(this._scrollTopTimeoutRef),clearTimeout(this._scrollLyricTimeoutRef),clearTimeout(this._scrollTopAnimateRef),clearTimeout(this._coverTimeoutRef),clearTimeout(this._animTimeoutRef),Me.a.unsubscribeAll("lyrics_panel"),ke()(this.refs.nano_content).off("scroll",this._onPanelScroll)},t.prototype.getTrackingParams=function(){return{action:{type:"display"},container:"panel",sng:this.state.track.SNG_ID,type:Te.a.hasSyncLyrics()?"synchro":"full_text"}},t.prototype.render=function(){var e=this.state,t=e.hasLyrics,n=e.synchro,a=e.ready,r=e.autoScroll,o=e.activeLyricIndex,i=e.lyrics,s=e.track,l=e.timeToFirstLyric,c=e.position,u=qe()("panel-lyrics",{"has-lyrics":t,"has-synchro":n}),p=qe()({"lyrics-container":!0,"lyrics-container-active":a}),d=void 0;n&&!r&&-1!==o&&(d=i[o]);var f=a&&t,h=f&&n?"marquee":null,m=void 0;f&&n&&(m=r?"assertive":"polite");var y=this.props.lyricsBehaviour;return this.renderPanel(_e.a.createElement("div",{className:u,ref:"panel_lyrics",itemScope:!0,itemType:"http://data-vocabulary.org/MusicRecording",id:"panel-lyrics","aria-label":Object(We.a)("PAROLES"),tabIndex:"0"},lo,_e.a.createElement(oo,{track:s,lyric:d}),this.renderScrollbar({"panel-body lyrics-panel-body":!0},_e.a.createElement("article",{className:p,role:h,"aria-live":m},"static"===y&&t?this._renderSubscription():"",_e.a.createElement(to,{show:a&&!t,track:s}),_e.a.createElement(Jr,{show:f,max:l,now:c}),"noLyrics"===y&&t?co:_e.a.createElement(so,{ref:"lyriclist",synchro:n,lyrics:i,activeIndex:o}),this._renderFooter())),this.props.hasAds?uo:"",_e.a.createElement("div",{className:"panel-footer"},t&&"full"===this.props.lyricsBehaviour?_e.a.createElement("a",{className:"evt-click btn btn-link link-animated",onClick:this._closePanels,href:"/track/"+s.SNG_ID},_e.a.createElement("span",{className:"label"},Object(We.a)("TOUTES LES PAROLES"))):"")))},t.prototype._renderFooter=function(){var e=this.state,t=e.hasLyrics,n=e.metadata;if(!t)return null;var a=this.props.lyricsBehaviour;return"noLyrics"===a||"snippet"===a?this._renderSubscription():_e.a.createElement("div",{className:"lyrics-legal",role:"complementary"},_e.a.createElement("p",null,Object(We.a)("Licence et autorisation données par LyricFind")),_e.a.createElement("p",null,"© ",n.copyrights),_e.a.createElement("p",null,n.writers))},t.prototype._renderSubscription=function(){var e=this.props.lyricsBehaviour,t=qe()("lyrics-subscription",{"is-top":"static"===e,"is-bottom":"noLyrics"===e||"snippet"===e});return _e.a.createElement("div",{className:t},_e.a.createElement("h2",{className:"heading-2 heading-inverse"},Object(Wr.a)()),_e.a.createElement("button",{className:"btn btn-primary btn-xlarge",type:"button",onClick:this._onSubscribe},_e.a.createElement("span",{className:"label"},Object(We.a)("S'ABONNER"))))},t.prototype._onTrackChange=function(e,t){var n=this,a=this.state.track;this._scrollTopWhenActive=!0,a.ALB_ID!==t.ALB_ID&&(this._coverTimeoutRef=setTimeout(function(){n._setCoverBackground(t.ALB_PICTURE)},0)),this.setState(this._getStateFromStore(),Te.a.control.loadLyrics)},t.prototype._onSubscribe=function(){Object(Mt.b)("https://"+we.a.get("host_website_ssl")+"/payment/go.php?origin=lyrics_"+this.props.lyricsOption.toLocaleLowerCase())},t.prototype._onBlur=function(){this._hidden=!0},t.prototype._onFocus=function(){this._hidden=!1},t.prototype._onLyricsLoad=function(){var e=this,t=Te.a.hasSyncLyrics(),n=Te.a.getLyrics(),a={lyrics:n,metadata:Te.a.getLyricsMetadata(),hasLyrics:n&&0!==n.length,ready:!0,synchro:!1,autoScroll:!1,autoSeek:!1},r=void 0;if(this.tracking("lyrics"),t){r=[];for(var o=0,i=n.length;o<i;o++){var s=n[o];s&&s.line&&s.milliseconds&&(s.originalIndex=o,r.push(s))}a=r.length>0?Object.assign({},a,{lyricIndex:r,synchro:!0,autoScroll:!0,autoSeek:!0,timeToFirstLyric:parseInt(r[0].milliseconds,10)/1e3}):Object.assign({},a,{hasLyrics:!1,lyrics:[]})}this._animTimeoutRef=setTimeout(function(){e.setState(a)},0)},t.prototype._onPositionChange=function(e,t){var n=this.state,a=n.isActivePanel,r=n.hasLyrics,o=n.synchro,i=n.canSeek,s=n.autoSeek,l=n.activeLyricIndex,c=this.props,u=c.isAuth,p=c.unloggedClipLength;if(!this._hidden&&a&&r&&o){!u&&i&&(t+=p);var d=this._findLyric(t);s?(-1===d&&-1!==l&&(this._scrollTopWhenActive=!0),this.setState({position:t,activeLyricIndex:d})):this.setState({position:t,autoSeek:d===l})}},t.prototype._onLyricsSeek=function(e,t){var n=this.state,a=n.activeLyricIndex,r=n.canSeek,o=n.track,i=this.props,s=i.isAuth,l=i.unloggedClipLength,c=void 0,u=void 0,p=void 0;if(!t.seek||r){if(void 0!==t.index){if(t.index===a&&Te.a.playing)return;a=t.index}if(t.seek){if(p=parseInt(t.milliseconds,10)/1e3,u=parseInt(o.DURATION,10),s||(u=l,p-=l),(c=p/u)>1||!s&&p<0)return;Te.a.control.seek(c)}else this._scrollToActiveLyric(a),Te.a.isPaused()&&Te.a.control.togglePause();this.setState({activeLyricIndex:a,autoSeek:!t.seek,autoScroll:!0})}},t.prototype._onPlayerSeek=function(e,t){var n=this.state,a=n.synchro,r=n.autoScroll;a&&!r&&this.setState({activeLyricIndex:this._findLyric(t),autoScroll:!0})},t.prototype._onPanelScroll=function(){this.state.synchro&&!this._blockUserScroll&&this.setState({autoScroll:!1})},t.prototype._onPlayerTypeChange=function(){this.state.isActivePanel&&"ads"===Te.a.getPlayerType()&&Me.a.trigger(Me.a.menu.togglePanel,{panel:"lyrics"})},t.prototype._getStateFromStore=function(){var e=Te.a.hasLyrics();return{track:Te.a.getCurrentSong(),hasLyrics:e,lyrics:[],metadata:{},position:0,synchro:!1,autoScroll:!1,autoSeek:!1,timeToFirstLyric:-1,activeLyricIndex:-1,ready:!e,canSeek:Te.a.control.canSeek(),firstOpen:!1}},t.prototype._closePanels=function(){Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._scrollToActiveLyric=function(e,t){var n=this,a=this.state,r=a.autoScroll,o=a.activeLyricIndex;if(!r||t||o!==e){var i=this.refs.lyriclist.getWrappedInstance().getLyric(e);if(i){this._blockUserScroll=!0;var s=this.refs.nano_content,l=ke()(s).scrollTop(),c=s.offsetHeight||0,u=ke()(i).position().top,p=this.props,d=p.autoScrollDuration,f=p.autoScrollEasing,h=p.scrollWaitTimeout,m=i.getBoundingClientRect();(t||m.bottom<=0||m.bottom>c)&&(d/=3),ke()(s).animate({scrollTop:l+u-c/2},d,f,function(){n._scrollLyricTimeoutRef=setTimeout(function(){n._blockUserScroll=0!==ke()(s).queue("fx").length},h)})}}},t.prototype._scrollToTop=function(){var e=this;this._blockUserScroll=!0,this.refs.nano_content.scrollTop=0,this._scrollTopAnimateRef=setTimeout(function(){e._blockUserScroll=!1},this.props.scrollWaitTimeout)},t.prototype._setCoverBackground=function(e){var t=this.refs.panel_lyrics,n="http://cdn-images.deezer.com/images/cover/"+e+"/500x500-000000-80-0-0.jpg";new qr.a(t).setUrl(n).setBlurStrength(3).render()},t.prototype._findLyric=function(e){var t=this.state,n=t.lyricIndex,a=t.timeToFirstLyric,r=Math.round(1e3*e),o=1e3*a,i=0,s=n.length,l=void 0,c=void 0,u=void 0;if(r<o)return-1;var p=n[s-1];if(r>parseInt(p.milliseconds,10))return n[s-1].originalIndex;for(;i!==s&&(l=Math.floor((i+s)/2),(c=parseInt(n[l].milliseconds,10))!==r);)c<r?i=l+1:s=l;return u=0===i?i:i-1,n[u].originalIndex},t}(ge.Component);po.defaultProps={tolerance:0,autoScrollDuration:500,scrollWaitTimeout:900,unloggedClipLength:30,autoScrollEasing:"swing",lyricsBehaviour:void 0,lyricsOption:void 0};var fo=Object(ve.b)(function(e){var t=e.user;return{isAuth:t.isAuth,hasAds:t.USER.OPTIONS.ads_display,lyricsBehaviour:(t.USER.ABTEST.lyrics||{}).behaviour,lyricsOption:(t.USER.ABTEST.lyrics||{}).option}},null,null,{withRef:!0})(Object(En.a)(Object(Ca.a)(Object(ka.a)(po)))),ho=n("./js/_modules/facebook/index.js"),mo=n("./js/_modules/googleplus/index.js"),yo=n("./js/_modules/twitter.js"),bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},go=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._markAsRead=a._markAsRead.bind(a),a._onItemClick=a._onItemClick.bind(a),a.state={data:n.data},a}return $(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t.data.NOTIFICATION_ID!==this.state.data.NOTIFICATION_ID||t.data.READ!==this.state.data.READ},t.prototype.getTrackingParams=function(){return{type:"notification",id:this.state.data.NOTIFICATION_ID,index:this.props.index}},t.prototype.render=function(){var e=!this.state.data.READ,t={className:qe()({"notifications-item":!0,"is-unread":e}),onClick:this._onItemClick};return e&&(t.onMouseOver=this._markAsRead),_e.a.createElement("li",t,_e.a.createElement("div",{className:"notifications-item-container"},_e.a.createElement("div",{className:"notifications-item-heading"},this._renderPicture(),this._renderMessage()),this._renderContent()))},t.prototype._renderPicture=function(){var e=this.state.data;return _e.a.createElement("div",{className:"notifications-item-picture"},_e.a.createElement(ir.a,{type:"user",height:32,width:32,rounded:!0,data:e.DATA}))},t.prototype._renderMessage=function(){var e=this.state.data,t=this._getMessage("SHARE"===e.TYPE?"SHARE_"+e.DATA.TYPE:e.TYPE);return _e.a.createElement("div",{className:"notifications-item-message"},_e.a.createElement("div",{className:"heading-4-sub"},_e.a.createElement(zt.a,{className:"link-username",to:"/profile/"+e.DATA.USER_ID},e.DATA.USER_NAME)," ",_e.a.createElement("span",null,t)))},t.prototype._renderContent=function(){var e=this.state.data;if("FRIEND_FOLLOW"===e.TYPE)return _e.a.createElement("div",{className:"notifications-item-content"},this._renderDate());var t=this._getMediaType(e);return _e.a.createElement("div",{className:"notifications-item-content"},_e.a.createElement("div",{className:"notifications-item-media"},_e.a.createElement("div",{className:"notifications-item-media-picture"},_e.a.createElement(ir.a,{type:t,height:56,width:56,play:"on",context:"menu_panel_notification_"+t,data:e.DATA})),this._renderMediaTitle(t)),this._renderComment(),this._renderDate())},t.prototype._renderMediaTitle=function(e){var t=this.state.data.DATA;switch(e){case"album":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/album/"+t.ALB_ID,title:t.ALB_TITLE},t.ALB_TITLE)),_e.a.createElement("div",{className:"heading-4-sub"},_e.a.createElement("span",null,Object(We.a)("par"))," ",_e.a.createElement(zt.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"artist":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"episode":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/episode/"+t.EPISODE_ID,title:t.EPISODE_TITLE},t.EPISODE_TITLE)),_e.a.createElement("div",{className:"heading-4-sub"},_e.a.createElement("span",null,Object(We.a)("par"))," ",_e.a.createElement(zt.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"playlist":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/playlist/"+t.PLAYLIST_ID,title:t.PLAYLIST_TITLE},t.PLAYLIST_TITLE)));case"radio":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/mixes/genre/"+t.RADIO_ID,title:t.RADIO_TITLE},t.RADIO_TITLE)));case"show":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"track":return _e.a.createElement("div",{className:"notifications-item-media-title"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/track/"+t.SNG_ID,title:t.SNG_TITLE},t.SNG_TITLE)),_e.a.createElement("div",{className:"heading-4-sub"},_e.a.createElement("span",null,Object(We.a)("par"))," ",_e.a.createElement(zt.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));default:return null}},t.prototype._renderComment=function(){var e=this.state.data;return e.DATA.hasOwnProperty("COMMENT")&&""!==e.DATA.COMMENT?_e.a.createElement("div",{className:"notifications-item-comment"},e.DATA.COMMENT):null},t.prototype._renderDate=function(){var e=this.state.data;return e.hasOwnProperty("DATE")?_e.a.createElement("div",{className:"notifications-item-date"},Object(an.m)(this.props.currentTimestamp-e.DATE)):null},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._markAsRead=function(){var e=bo({},this.state.data);e.READ||(e.READ=1,this.setState({data:e},function(){Ue.a.markNotificationAsRead(e.NOTIFICATION_ID)}))},t.prototype._getMediaType=function(e){if("SHARE"===e.TYPE)return"SONG"===e.DATA.TYPE?"track":e.DATA.TYPE.toLowerCase();switch(e.TYPE){case"ALBUM_COMMENT":case"ALBUM_FAN":return"album";case"ARTIST_COMMENT":case"ARTIST_FAN":return"artist";case"PLAYLIST_COMMENT":case"PLAYLIST_CREATION":case"PLAYLIST_FAN":return"playlist";case"RADIO_COMMENT":case"RADIO_FAN":return"radio";default:return""}},t.prototype._getMessage=function(e){var t={ALBUM_COMMENT:Object(We.a)("a commenté cet album."),ALBUM_FAN:Object(We.a)("a ajouté cet album à sa musique préférée."),ARTIST_COMMENT:Object(We.a)("a commenté cet artiste."),ARTIST_FAN:Object(We.a)("a ajouté cet artiste à sa musique préférée."),FRIEND_FOLLOW:Object(We.a)("suit désormais votre activité musicale."),PLAYLIST_COMMENT:Object(We.a)("a commenté votre playlist."),PLAYLIST_CREATION:Object(We.a)("vient de créer cette playlist."),PLAYLIST_FAN:Object(We.a)("a ajouté cette playlist à sa musique préférée."),RADIO_COMMENT:Object(We.a)("a commenté ce mix."),RADIO_FAN:Object(We.a)("a ajouté ce mix à sa musique préférée."),SHARE_ALBUM:Object(We.a)("vous recommande cet album."),SHARE_ARTIST:Object(We.a)("vous recommande cet artiste."),SHARE_EPISODE:Object(We.a)("vous recommande cet épisode."),SHARE_PLAYLIST:Object(We.a)("vous recommande cette playlist."),SHARE_RADIO:Object(We.a)("vous recommande ce mix."),SHARE_SHOW:Object(We.a)("vous recommande ce podcast."),SHARE_SONG:Object(We.a)("vous recommande ce titre.")};return t.hasOwnProperty(e)?t[e]:""},t}(ge.Component),_o=Object(ve.b)(function(e){var t=e.user;return{currentTimestamp:Object(Ye.b)(t.SERVER_TIMESTAMP)}})(Object(En.a)(go)),vo=_e.a.createElement(at.a,{name:"mail",size:"18"}),Eo=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._onItemClick=a._onItemClick.bind(a),a._onMessageClick=a._onMessageClick.bind(a),a._onMessageNew=a._onMessageNew.bind(a),a.state={messageCount:a._getMessageCount()},a}return J(t,e),t.prototype.componentDidMount=function(){Me.a.subscribe(Me.a.live.messageNew,this._onMessageNew)},t.prototype.shouldComponentUpdate=function(e,t){return e.data.USER_ID!==this.props.data.USER_ID||t.messageCount!==this.state.messageCount},t.prototype.componentWillUnmount=function(){Me.a.unsubscribe(Me.a.live.messageNew,this._onMessageNew)},t.prototype.getTrackingParams=function(){return{type:"user",id:Number(this.props.data.USER_ID),index:this.props.index}},t.prototype.render=function(){var e=this.props.data,t={className:qe()({"notifications-item":!0,"is-friend":!0}),onClick:this._onItemClick};return _e.a.createElement("li",t,_e.a.createElement("div",{className:"notifications-item-container"},_e.a.createElement("div",{className:"notifications-item-heading"},_e.a.createElement("div",{className:"notifications-item-picture"},_e.a.createElement(ir.a,{type:"user",height:32,width:32,rounded:!0,data:e})),_e.a.createElement("div",{className:"notifications-item-message"},_e.a.createElement("div",{className:"heading-4"},_e.a.createElement(zt.a,{to:"/profile/"+e.USER_ID},e.DISPLAY_NAME))),this._renderIcon())))},t.prototype._renderIcon=function(){var e=this.state.messageCount;return 0===e?null:_e.a.createElement("a",{className:"notifications-item-icon active",tabIndex:"0",onClick:this._onMessageClick,onKeyDown:this._onMessageClick},_e.a.createElement(Qt.a,{text:Object(We.c)("Vous avez reçu %s nouveau message.","Vous avez reçu %s nouveaux messages.",{sprintf:[e],count:e})},vo))},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onMessageClick=function(e){void 0!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),Le.default.open("/lightbox/instant_messenger.php?friend_id="+this.props.data.USER_ID),this.state.messageCount>0&&this.setState({messageCount:0}))},t.prototype._onMessageNew=function(e,t){if(Number(t.USER_ID)===Number(this.props.data.USER_ID)){var n=this.state.messageCount;this.setState({messageCount:n+1})}},t.prototype._getMessageCount=function(){var e=this.props.data,t=Ue.a.data.MESSAGE_UNREAD;if(!Ue.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID))return 0;for(var n in t.data)if(Number(t.data[n].AUTHOR)===Number(e.USER_ID))return Number(t.data[n].TOTAL);return 0},t}(ge.Component);Eo.contextTypes={router:Ae.a.object.isRequired};var Oo=Object(En.a)(Eo),jo=_e.a.createElement("div",{className:"notifications-placeholder-image"},_e.a.createElement(Zr.a,{className:"animate-spin",src:"common/placeholders/loader.png",width:"56",height:"56",retina:!0})),To=_e.a.createElement("div",{className:"notifications-placeholder-image"},_e.a.createElement(Zr.a,{src:"common/placeholders/friends.png",width:"56",height:"56",retina:!0})),wo=_e.a.createElement("span",{className:"label"},"Facebook"),So=_e.a.createElement("span",{className:"label"},"Twitter"),Po=_e.a.createElement("button",{className:"btn btn-googleplus",id:"btn_notification_googleplus",type:"button"},_e.a.createElement("span",{className:"label"},"Google")),Co=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return Z(t,e),t.prototype.componentDidMount=function(){Me.a.ready(Me.a.googleplus.ready,function(){mo.a.renderGGPlus("btn_notification_googleplus")})},t.prototype.render=function(){var e=this.props,t=e.data;return e.isLoading?this._renderLoading():t.length>0?this._renderList():this._renderPlaceholder()},t.prototype._renderList=function(){var e=this.props,t=e.data,n=e.type;return _e.a.createElement("ul",{className:"notifications-list"},t.map(function(e,t){switch(n){case"notification":return _e.a.createElement(_o,{key:"notification_"+e.NOTIFICATION_ID,data:e,index:t});case"following":return _e.a.createElement(Oo,{key:"following_"+e.USER_ID,data:e,index:t});default:return null}}))},t.prototype._renderLoading=function(){return _e.a.createElement("div",{className:"notifications-placeholder"},jo,_e.a.createElement("div",{className:"notifications-placeholder-title"},Object(We.a)("Chargement en cours")))},t.prototype._renderPlaceholder=function(){return _e.a.createElement("div",{className:"notifications-placeholder"},To,_e.a.createElement("div",{className:"notifications-placeholder-title"},Object(We.a)("Ne restez pas dans votre coin.")),_e.a.createElement("div",{className:"notifications-placeholder-social"},_e.a.createElement("div",{className:"notifications-placeholder-text"},Object(We.a)("Connectez-vous sur les réseaux sociaux pour retrouver vos amis.")),_e.a.createElement("div",{className:"notifications-placeholder-buttons"},_e.a.createElement("button",{className:"btn btn-facebook",onClick:this._onSocialClick.bind(this,"facebook"),type:"button"},wo),_e.a.createElement("button",{className:"btn btn-twitter",onClick:this._onSocialClick.bind(this,"twitter"),type:"button"},So),Po)))},t.prototype._onSocialClick=function(e,t){void 0!==t.keyCode&&13!==t.keyCode||("twitter"===e?yo.a.link():"facebook"===e&&ho.a.login({scopes_mandatory:!0}))},t}(ge.Component);Co.defaultProps={isLoading:!1};var ko=Co,No=_e.a.createElement(at.a,{name:"cancel"}),Ao=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a.panel_name="notifications",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.data.length!==t.data.length||a.state.nbDisplay!==t.nbDisplay}},a._fetchFeedApiRef=null,a._displayMoreEnabled=!0,a._currentList=[],a._nbDisplay=20,a._defaultTab="feed",a._displayMore=a._displayMore.bind(a),a._updateNotifications=a._updateNotifications.bind(a),a._updateFeed=a._updateFeed.bind(a),a._updateFollowing=a._updateFollowing.bind(a),a._updateMessageCount=a._updateMessageCount.bind(a),a._filterFollowing=a._filterFollowing.bind(a),a._onFilterEmpty=a._onFilterEmpty.bind(a),a.state={tab:a._defaultTab,data:a._getTabData(a._defaultTab),notificationCount:Ue.a.getNotificationCount(),messageCount:Ue.a.getMessageCount(),nbDisplay:a._nbDisplay,feedLoaded:!1,filter:""},a}return ee(t,e),t.prototype.componentDidMount=function(){this.scrollbar_onEnd(this._displayMore),Me.a.subscribe(Me.a.live.notificationNew,this._updateNotifications,"panel_notifications"),Me.a.subscribe(Me.a.live.notificationRead,this._updateNotifications,"panel_notifications"),Me.a.subscribe(Me.a.live.tickerNew,this._updateFeed,"panel_notifications"),Me.a.subscribe(Me.a.live.messageNew,this._updateMessageCount,"panel_notifications"),Me.a.subscribe(Me.a.live.messageRead,this._updateMessageCount,"panel_notifications"),Me.a.subscribe(Me.a.user.addFavorite,this._updateFollowing,"panel_notifications"),Me.a.subscribe(Me.a.user.deleteFavorite,this._updateFollowing,"panel_notifications"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-notifications");Object(an.j)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.tab!==this.state.tab||t.notificationCount!==this.state.notificationCount||t.messageCount!==this.state.messageCount||t.data.length!==this.state.data.length||t.feedLoaded!==this.state.feedLoaded||t.nbDisplay!==this.state.nbDisplay||t.filter!==this.state.filter},t.prototype.componentWillUnmount=function(){Ke.a.cancel(this._fetchFeedApiRef),Me.a.unsubscribeAll("panel_notifications")},t.prototype.render=function(){return this.renderPanel(_e.a.createElement("div",{className:"panel-notifications"},_e.a.createElement("div",{className:"panel-header",id:"panel-notifications","aria-label":Object(We.a)("Activité"),tabIndex:"0"},this._renderNavbar(),this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderNavbar=function(){var e=this,t=this.state.tab,n=this._getTabList();return _e.a.createElement("ul",{className:"panel-navbar",role:"tablist"},n.map(function(n){var a=qe()({"panel-navbar-link":!0,active:t===n.id});return _e.a.createElement("li",{className:"panel-navbar-item",key:n.id},_e.a.createElement(Qt.a,{position:"bottom",text:n.label},_e.a.createElement("a",{className:a,onClick:function(t){return e._onTabClick(t,n.id)},onKeyDown:function(t){return e._onTabClick(t,n.id)},role:"tab",tabIndex:"0","aria-label":n.label,"aria-selected":t===n.id,"aria-controls":"activity-"+n.id},_e.a.createElement(at.a,{name:n.icon,size:"18"}),_e.a.createElement("span",{className:"sr-only"},n.label),e._renderCounter(n.counter))))}))},t.prototype._renderTitle=function(){var e=this.state,t=e.tab,n=e.filter,a=this._getTabList().find(function(e){return e.id===t}),r=null,o=null;return""!==n&&(o=_e.a.createElement("button",{className:"filter-empty",onClick:this._onFilterEmpty,type:"button"},No)),a.filter&&(r=_e.a.createElement("span",{className:"filter"},_e.a.createElement("input",{className:"filter-control form-control input-small",onChange:this._onFilterChange.bind(this,a.filter),placeholder:Object(We.a)("Rechercher"),ref:"filter",type:"text",value:n}),o)),_e.a.createElement("div",{className:"panel-headings"},r,_e.a.createElement("h2",{className:"heading-2"},a.label))},t.prototype._renderCounter=function(e){return 0===e?null:_e.a.createElement("span",{className:"panel-navbar-counter"},e)},t.prototype._renderContent=function(){var e=this.state,t=e.tab,n=e.nbDisplay,a=e.feedLoaded,r=this.state.data.slice(0,n);switch(t){case"notifications":return _e.a.createElement(ko,{data:r,type:"notification",key:"notifications-list"});case"feed":return _e.a.createElement(ko,{data:r,isLoading:!a,type:"notification",key:"feed-list"});case"following":return _e.a.createElement(ko,{data:r,type:"following",key:"following-list"});default:return null}},t.prototype._onTabClick=function(e,t){var n=this;if((void 0===e.keyCode||13===e.keyCode)&&(e.preventDefault(),t!==this.state.tab)){var a=this.state.feedLoaded,r=this._nbDisplay,o=this._getTabData(t,a);this.setState({tab:t,data:o,nbDisplay:r,filter:""},function(){n.refreshScrollbar({scroll:"top"})})}},t.prototype._onFilterChange=function(){var e=this.state.tab,t=this._getTabList().find(function(t){return t.id===e});if("function"==typeof t.filter){var n=this.refs.filter.value.toLowerCase().trim();this.setState({data:t.filter(n),filter:n})}},t.prototype._onFilterEmpty=function(){var e=this.refs.filter;e.value="",e.focus(),this._onFilterChange()},t.prototype._filterFollowing=function(e){var t=Ue.a.data.FRIENDS.data.filter(function(t){var n=t.DISPLAY_NAME.toLowerCase(),a=Ue.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(t.USER_ID);return-1!==n.indexOf(e)||a});return t.length>0&&(t=this._sortFollowing(t)),t},t.prototype._sortFollowing=function(e){if(0===e.length)return e;var t=function(e,t){var n=e.DISPLAY_NAME.toLowerCase().trim(),a=t.DISPLAY_NAME.toLowerCase().trim();return n>a?1:n<a?-1:0},n=[],a=[];return e.forEach(function(e){Ue.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID)?n.push(e):a.push(e)}),n.sort(t),a.sort(t),n.concat(a)},t.prototype._updateNotifications=function(){var e=this.state.tab,t={notificationCount:Ue.a.getNotificationCount()};"notifications"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._updateFeed=function(){var e=this.state,t=e.tab,n=e.feedLoaded;"feed"===t&&n&&this.setState({data:this._getTabData(t,n)})},t.prototype._updateFollowing=function(e,t){var n=this.state.tab;"user"===t.type&&"following"===n&&this.setState({data:this._getTabData(n)})},t.prototype._updateMessageCount=function(){var e=this.state.tab,t={messageCount:Ue.a.getMessageCount()};"following"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._getTabList=function(){var e=this.state,t=e.notificationCount,n=e.messageCount;return[{id:"feed",label:Object(We.a)("Activité"),icon:"time",filter:!1,counter:0},{id:"notifications",label:Object(We.a)("Notifications"),icon:"notification",filter:!1,counter:t},{id:"following",label:Object(We.a)("Following"),icon:"friends",filter:this._filterFollowing,counter:n}]},t.prototype._getTabData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"notifications":return[].concat(Ue.a.data.NOTIFICATIONS);case"feed":return t?[].concat(Ue.a.ticker):(this._fetchFeed(),[]);case"following":return this._sortFollowing([].concat(Ue.a.data.FRIENDS.data));default:return[]}},t.prototype._fetchFeed=function(){var e=this;this._fetchFeedApiRef=Ke.a.call({method:"user.getFeed",data:{limit:20},success:function(t){Ue.a.ticker=[],t.count>0&&t.data.reverse().forEach(Ue.a.addTicker),e.setState({data:e._getTabData("feed",!0),feedLoaded:!0})},error:function(){}})},t.prototype._displayMore=function(){var e=this;if(!1===this._displayMoreEnabled||this.state.nbDisplay>=this.state.data.length)return!1;this._displayMoreEnabled=!1;var t=this.state.nbDisplay+this._nbDisplay;return this.setState({nbDisplay:t},function(){e._displayMoreEnabled=!0}),!0},t}(ge.Component);Ao.defaultProps={selected:null};var Io=Object(Ca.a)(Object(ka.a)(Ao)),Ro=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._panels_initialized={},a._onPanelMounted=a._onPanelMounted.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a),a.state={openPanelName:null,currentTarget:null,opened:!1},a}return te(t,e),t.prototype.getChildContext=function(){return{getTrackingParams:this.getTrackingParams}},t.prototype.componentDidMount=function(){Me.a.subscribe(Me.a.menu.panel_mounted,this._onPanelMounted),Me.a.subscribe(Me.a.menu.closeAllPanels,this._onClosePanels),Me.a.subscribe(Me.a.menu.openPanel,this._onOpenPanel)},t.prototype.componentWillUnmount=function(){clearTimeout(this._closePanelTimeoutRef),clearTimeout(this._openPanelTimeoutRef),Me.a.unsubscribe(Me.a.menu.closeAllPanels,this._onClosePanels),Me.a.unsubscribe(Me.a.menu.openPanel,this._onOpenPanel),Me.a.unsubscribe(Me.a.menu.panel_mounted,this._onPanelMounted)},t.prototype.getTrackingParams=function(){return{panel:this.state.openPanelName}},t.isPanelMounted=function(e){return void 0!==t._panels_mounted[e]},t.prototype.render=function(){var e=this.state,t=e.openPanelName,n=e.opened,a=e.displayed;this._initPanel(t);var r={"panel-wrapper":!0};t&&(r["panel-wrapper-"+t]=!0);var o=qe()(r),i=qe()({"panel-container":!0,opened:n});return _e.a.createElement("div",{className:i,"aria-hidden":!a,style:a?{display:"block"}:{}},_e.a.createElement("div",{className:o},this._isPanelInitialized("searchhistory")?_e.a.createElement(Ba,{ref:"searchhistory",selected:t}):null,this._isPanelInitialized("searchsuggest")?_e.a.createElement(Da,{ref:"searchsuggest",selected:t}):null,this._isPanelInitialized("playlists")?_e.a.createElement(qa,{ref:"playlists",selected:t}):null,this._isPanelInitialized("business_regular_playlists")?_e.a.createElement(Qa,{ref:"business_regular_playlists",selected:t}):null,this._isPanelInitialized("business_curated_playlists")?_e.a.createElement($a,{ref:"business_curated_playlists",selected:t}):null,this._isPanelInitialized("business_mixes")?_e.a.createElement(Za,{ref:"business_mixes",selected:t}):null,this._isPanelInitialized("albums")?_e.a.createElement(tr,{ref:"albums",selected:t}):null,this._isPanelInitialized("shows")?_e.a.createElement(ar,{ref:"shows",selected:t}):null,this._isPanelInitialized("audiobooks")?_e.a.createElement(or,{ref:"audiobooks",selected:t}):null,this._isPanelInitialized("apps")?_e.a.createElement(lr,{ref:"apps",selected:t}):null,this._isPanelInitialized("queuelist")?_e.a.createElement(yr,{ref:"queuelist",selected:t}):null,this._isPanelInitialized("settings")?_e.a.createElement(Gr,{ref:"settings",selected:t}):null,this._isPanelInitialized("lyrics")?_e.a.createElement(fo,{ref:"lyrics",selected:t,displayed:a}):null,this._isPanelInitialized("notifications")?_e.a.createElement(Io,{ref:"notifications",selected:t}):null),_e.a.createElement("div",{className:"panel-overlay",onClick:this._onOverlayClick}))},t.prototype._onPanelMounted=function(e,n){t._panels_mounted[n]=!0},t.prototype._onOverlayClick=function(){Me.a.trigger(Me.a.menu.closeAllPanels)},t.prototype._onClosePanels=function(e,t){var n=this,a=this.state.currentTarget;this.setState({opened:!1},function(){n._closePanelTimeoutRef=setTimeout(function(){n.setState({displayed:!1,openPanelName:null,currentTarget:null},function(){a&&t&&Object(an.j)(a)})},150)})},t.prototype._onOpenPanel=function(e,t){var n=this,a=t.panel;this._needUserData(a)&&!1===Ue.a.isLoaded||this.setState({openPanelName:a,currentTarget:t.currentTarget,displayed:!0},function(){"lyrics"===a&&Te.a.control.play(),n._openPanelTimeoutRef=setTimeout(function(){n.setState({opened:!0},function(){for(var e=n.refs[a];e.getWrappedInstance;)e=e.getWrappedInstance();e.openPanel()})},0)})},t.prototype._initPanel=function(e){void 0===this._panels_initialized[e]&&(this._panels_initialized[e]=!0)},t.prototype._isPanelInitialized=function(e){return void 0!==this._panels_initialized[e]},t.prototype._needUserData=function(e){return{playlists:!0,albums:!0,shows:!0,audiobooks:!0,apps:!0,searchhistory:!0,notifications:!0,business_regular_playlists:!0,business_curated_playlists:!0,business_mixes:!0}[e]||!1},t}(ge.Component);Ro.childContextTypes={getTrackingParams:Ae.a.func},Ro._panels_mounted={};var xo=Ro,Do=_e.a.createElement("div",{className:"page-sidebar",id:"page_sidebar"},_e.a.createElement(Oa,null)),Lo=function(e){function t(){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=ne(this,e.call.apply(e,[this].concat(i))),a._authorized_actions={openCreatePlaylist:!0},r=n,ne(a,r)}return ae(t,e),t.prototype.componentDidMount=function(){this._dispatchActionEvent=new Et.a,this._subscribeActions(this._onAction)},t.prototype.render=function(){return Do},t.prototype._onAction=function(e){var t=this;switch(e.action){case"openCreatePlaylist":xo.isPanelMounted("playlists")||Me.a.subscribe(Me.a.menu.panel_mounted,function(e,n){"playlists"===n&&t._dispatchAction("openCreatePlaylist")}),Me.a.trigger(Me.a.menu.openPanel,{panel:"playlists"})}},t.prototype._dispatchAction=function(e,t){void 0!==this._authorized_actions[e]&&this._dispatchActionEvent.trigger({action:e,params:t})},t.prototype._subscribeActions=function(e){this._dispatchActionEvent.subscribe(e)},t}(ge.Component),Mo=_e.a.createElement("div",{className:"page-panels",id:"page_panels"},_e.a.createElement(xo,null)),Fo=_e.a.createElement("div",{id:"page_context_menu"}),Uo=_e.a.createElement("aside",{id:"notification",className:"page-notifications",role:"alert","aria-hidden":"true"},_e.a.createElement("div",{className:"notification"},_e.a.createElement("h2",null))),Bo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return re(t,e),t.prototype.render=function(){return Uo},t}(ge.Component),Ho=_e.a.createElement("div",{className:"modal-backdrop"}),Yo=_e.a.createElement("div",{className:"modal-wrapper"}),zo=_e.a.createElement("div",{className:"overlay"}),Go=_e.a.createElement("span",{className:"icon icon-cancel"}),Vo=_e.a.createElement("a",{id:"interstitial_ads"}),qo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return oe(t,e),t.prototype.render=function(){return _e.a.createElement("div",{id:"interstitial",style:{display:"none"}},zo,_e.a.createElement("div",{className:"interstitial-container"},_e.a.createElement("span",{className:"interstitial-wrapper"},_e.a.createElement("a",{className:"close",href:"#",onClick:this._onClose},Object(We.a)("Fermer"),Go),Vo)))},t.prototype._onClose=function(e){e.preventDefault()},t}(ge.Component),Wo=_e.a.createElement("a",{className:"message",href:"#"}),Ko=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return ie(t,e),t.prototype.render=function(){return _e.a.createElement("div",{id:"notify"},_e.a.createElement("a",{className:"close",href:"#",onClick:this._onClose}),Wo)},t.prototype._onClose=function(e){e.preventDefault(),xt.b.hide()},t}(ge.Component),Qo=_e.a.createElement(Bo,null),Xo=_e.a.createElement(function(){return Fo},null),$o=_e.a.createElement(function(){return _e.a.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},Ho,Yo)},null),Jo=_e.a.createElement(qo,null),Zo=_e.a.createElement(Ko,null),ei=_e.a.createElement("div",{id:"hotkeys_container"}),ti=_e.a.createElement("div",{className:"core-player",id:"core_player"}),ni=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ai={loading:function(){return null},error:function(){return null}},ri=Re()(function(){return n.e("electron-ui").then(n.bind(null,"./js/_components/Topbar/index.js"))},ai),oi=Re()(function(){return n.e("electron-ui").then(n.bind(null,"./js/_components/Statusbar/index.js"))},ai),ii=Re()(function(){return n.e("electron-ui").then(n.bind(null,"./js/_components/Sidebar/index.js"))},ai),si=Re()(function(){return n.e("electron-ui").then(n.bind(null,"./js/_components/Player/index.js"))},ai),li=_e.a.createElement(vt.a,{key:"loadingbar"}),ci=_e.a.createElement(ri,{key:"topbar"}),ui=_e.a.createElement(oi,{key:"statusbar"}),pi=_e.a.createElement(ii,{key:"sidebar"}),di=_e.a.createElement(Lo,{key:"sidebar"}),fi=_e.a.createElement(function(){return Mo},{key:"panels"}),hi=_e.a.createElement(si,{key:"player"}),mi=_e.a.createElement(function(){return _e.a.createElement("div",{className:"page-shadow"},Qo,Xo,$o,Jo,Zo,_e.a.createElement("input",{id:"checkForm",name:"checkForm",type:"hidden",value:we.a.get("checkForm")}),ei,ti)},{key:"shadow"}),yi=_e.a.createElement(ht,{key:"modalController"}),bi=_e.a.createElement(_t,{key:"appboy"}),gi=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._onLiveFeed=a._onLiveFeed.bind(a),a.state={error:!1,statusbar:!1},a}return se(t,e),t.prototype.getChildContext=function(){var e=t.useAppState?this.props.route.appState:void 0;return t.useAppState=!1,{appState:e,location:this.props.location,reduxStore:this.props.route.store}},t.prototype.componentWillMount=function(){t.currentPage=this.props.children.type,window.reactRouter=this.context.router},t.prototype.componentDidMount=function(){Fe.a.addInternalChannel("-1_"+this.props.userID+"_USERFEED_"+this.props.userID),Fe.a.init(),Me.a.subscribe(Me.a.live.feed,this._onLiveFeed),Me.a.trigger(Me.a.navigation.page_displayed,{path:this.props.location.pathname}),Me.a.resolve(Me.a.navigation.page_initialized),this._openModal(),this.props.hasOnBoardingModal&&Le.default.open("/lightbox/onboarding",!1,{},!0),Be.a.install()},t.prototype.shouldComponentUpdate=function(e,t){return this.props.location.pathname!==e.location.pathname||this.state.error!==t.error||this.state.statusbar!==t.statusbar},t.prototype.componentWillUpdate=function(e){document.body.scrollTop=0,Me.a.trigger(Me.a.navigation.page_changed,{path:e.location.pathname})},t.prototype.componentDidUpdate=function(){t.currentPage=this.props.children.type,Me.a.trigger(Me.a.navigation.page_displayed,{path:this.props.location.pathname})},t.prototype.componentWillUnmount=function(){Me.a.unsubscribe(Me.a.live.feed,this._onLiveFeed)},t.prototype.componentDidCatch=function(e,t){this.setState({error:!0}),Be.a.error(e,t)},t.prototype.render=function(){return[this._renderLoadingbar(),this._renderTopbar(),this._renderStatusbar(),this._renderSidebar(),this._renderPanels(),this._renderMain(),this._renderPlayer(),this._renderShadow(),this._renderLabs(),this._renderModalController(),this._renderAppboy()]},t.prototype._renderLoadingbar=function(){return li},t.prototype._renderTopbar=function(){return this.props.UI.current===this.props.UI.electron?ci:null},t.prototype._renderStatusbar=function(){return this.props.UI.current===this.props.UI.electron?ui:null},t.prototype._renderSidebar=function(){return this.props.UI.current===this.props.UI.electron?pi:di},t.prototype._renderPanels=function(){return this.props.UI.current===this.props.UI.electron?null:fi},t.prototype._renderMain=function(){return _e.a.createElement("main",{className:"page-main",id:"page_content",key:"main",role:"main"},this.props.children)},t.prototype._renderPlayer=function(){return this.props.UI.current===this.props.UI.electron?hi:null},t.prototype._renderShadow=function(){return mi},t.prototype._renderLabs=function(){return _e.a.createElement(bt,{id:He.a.HotKeys,key:"labs"})},t.prototype._renderModalController=function(){return yi},t.prototype._renderAppboy=function(){return bi},t.prototype._onLiveFeed=function(e,t){if(t.length){var n=t[0];switch(n.ACTION){case"NEW_MESSAGE":Ue.a.addMessage(n);break;case"FRIEND_FOLLOW":case"PLAYLIST_COMMENT":case"SHARE":Ue.a.addNotification(n);break;default:Ue.a.addTicker(n,!0)}}},t.prototype._openModal=function(){2===De()(this.props.route.modalPath)&&("modal"===this.props.route.modalPath.type?Le.default.open(decodeURIComponent(this.props.route.modalPath.page)):ke.a.facebox({ajax:decodeURIComponent(this.props.route.modalPath.page)}))},ni(t,null,[{key:"currentPage",set:function(e){var t=(e=e.WrappedComponent||e).displayName;t||(Be.a.error("Current page main component is missing display name, this can prevent some components (like ads) to know on which page the user is and can affect their behavior."),t=""),"profile"===t&&document.location.pathname.indexOf("/loved")&&(t="loved"),"page"!==t||"/"!==document.location.pathname&&!/^\/[a-z]{2}\/$/.test(document.location.pathname)?"page"===t&&-1!==document.location.pathname.indexOf("/channels")&&(t=-1!==document.location.pathname.indexOf("/explore")?"channels_explore":"channels"):t="home",this._currentPage=t},get:function(){return this._currentPage}}]),t}(ge.Component);gi.contextTypes={router:Ae.a.object},gi.childContextTypes={appState:Ae.a.object,location:Ae.a.object,reduxStore:Ae.a.object},gi.useAppState=!0,window.getCurrentPage=function(){return gi.currentPage};var _i=Object(ve.b)(function(e){var t=e.user;return{userID:t.USER.USER_ID,hasOnBoardingModal:t.USER.ONBOARDING_MODAL,UI:Object(Ye.c)(t)}})(gi),vi=void 0,Ei=_e.a.createElement("div",{className:"abp-banner-visual"}),Oi=_e.a.createElement("a",{className:"abp-banner-close-icon"},_e.a.createElement("span",{className:"icon icon-cancel"})),ji=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._sendTracking=a._sendTracking.bind(a),a._isEligible=a._isEligible.bind(a),a._updateTimer=a._updateTimer.bind(a),a._adblockDetected=a._adblockDetected.bind(a),a._removeBanner=a._removeBanner.bind(a),a.state={timer:n.timer,display:!1},a}return le(t,e),t.prototype.componentDidMount=function(){this._checkAdBlock()},t.prototype.componentWillUnmount=function(){clearInterval(vi)},t.prototype.getTrackingParams=function(){return{group:this._getGroup()}},t.prototype.render=function(){return this.state.display?_e.a.createElement("div",{className:"abp-banner-container"},_e.a.createElement("div",{className:"abp-banner"},_e.a.createElement("div",{className:"abp-banner-close"},this._renderCloseButton()),Ei,_e.a.createElement("h2",{className:"heading-2"},this._getTitle()),_e.a.createElement("h3",{className:"heading-3"},Object(We.a)("La publicité nous permet de vous proposer Deezer gratuitement. C’est grâce à elle que nous pouvons soutenir tous les artistes que vous écoutez.")),_e.a.createElement("div",{className:"abp-banner-cta"},_e.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this._sendTracking,"data-link":"howto","data-group":this._getGroup()},_e.a.createElement("a",{className:"label",href:this._getHowToUrl(),target:"_blank"},Object(We.a)("Comment désactiver Adblock"))),_e.a.createElement("a",{className:"abp-banner-link",href:this._getPollUrl(),target:"_blank",onClick:this._sendTracking,"data-link":"poll","data-group":this._getGroup()},Object(We.a)("Pas envie. Pourquoi ?"))))):null},t.prototype._renderCloseButton=function(){return this.state.timer>0?_e.a.createElement("span",null,Object(We.c)("Vous pourrez fermer dans %s seconde","Vous pourrez fermer dans %s secondes",{sprintf:[this.state.timer],count:this.state.timer})):_e.a.createElement("span",{"data-link":"close",onClick:this._removeBanner},Oi)},t.prototype._checkAdBlock=function(){void 0===window.blockAdBlock?this._adblockDetected():window.blockAdBlock.onDetected(this._adblockDetected)},t.prototype._adblockDetected=function(){0!==this.props.userID&&!0===this.props.adsDisplay&&(Fe.a.log.send("adblock",{event:"onDisplay",properties:{adsClass:"page"===window.getCurrentPage()?"home":window.getCurrentPage()}}),this._isEligible()&&(vi=setInterval(this._updateTimer,1e3),this.tracking("adblock_banner"),this.setState({display:!0})))},t.prototype._updateTimer=function(){var e=this.state.timer-1;e<=0&&clearInterval(vi),this.setState({timer:e})},t.prototype._getTitle=function(){switch(this._getGroup()){case"V2":return Object(We.a)("Notre petit doigt nous dit que vous utilisez AdBlock pour Deezer !");case"V3":return Object(We.a)("Bonjour %s, on dirait que vous utilisez AdBlock pour Deezer !",{sprintf:[this.props.userBlogName]});case"V4":return Object(We.a)("Si vous voyez ce robot super mignon, c'est que vous utilisez Adblock.");default:return Object(We.a)("On n'utiliserait pas AdBlock pour Deezer par hasard ?")}},t.prototype._getHowToUrl=function(){var e=Ot.a.browser,t=void 0,n=we.a.get("SETTING_LANG");switch("fr"!==n&&"de"!==n&&"es"!==n&&"pt-br"!==n&&"en-gb"!==n&&(n="en-gb"),e){case"Safari":t=207780015;break;case"Firefox":t=207075879;break;default:t=207075869}return"http://support.deezer.com/hc/"+n+"/articles/"+t},t.prototype._getPollUrl=function(){var e=void 0;switch(we.a.get("SETTING_LANG")){case"fr":e="nxfmss";break;case"es":e="WhnVvS";break;case"de":e="ZTpnj0";break;case"pt-br":e="F7XnI1";break;default:e="bSi3Wt"}var t=Ot.a.browser;switch(t){case"Safari":t="SF";break;case"Firefox":t="FX";break;default:t="CH"}return"https://deezer.typeform.com/to/"+e+"?un="+this.props.userBlogName+"&uid="+this.props.userID+"&br="+t},t.prototype._sendTracking=function(e){"button"===e.target.type&&Object(Mt.b)(this._getHowToUrl(),"_blank"),this.tracking("adblock_banner",e.currentTarget)},t.prototype._getGroup=function(){return this.props.adsAdblockBanner.options},t.prototype._removeBanner=function(e){this.tracking("adblock_banner",e.currentTarget),this.setState({display:!1},function(){Me.a.trigger(Me.a.ads.hideAdBlockBanner)})},t.prototype._isEligible=function(){if("undefined"==typeof localStorage)return!1;var e=(new Date).getDate();return Number(localStorage.getItem("adbBanner"))!==e&&(void 0!==we.a.get("SPONSORED_TRACK_CONFIG")&&(localStorage.setItem("adbBanner",e),!0))},t}(ge.Component);ji.defaultProps={userBlogName:"",adsAdblockBanner:{option:"default"}};var Ti=Object(ve.b)(function(e){var t=e.user;return{userID:t.id,userBlogName:t.USER.BLOG_NAME,adsDisplay:t.USER.OPTIONS.ads_display,adsAdblockBanner:t.USER.ABTEST.ad_adblock_banner}})(Object(En.a)(ji)),wi=function(e){function t(){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=ce(this,e.call.apply(e,[this].concat(i))),a._onPageChange=function(){a.props.fetchAds(window.getCurrentPage(),"navigation")},r=n,ce(a,r)}return ue(t,e),t.prototype.componentDidMount=function(){this.props.fetchAds(window.getCurrentPage(),"initial"),Me.a.subscribe(Me.a.navigation.page_displayed,this._onPageChange)},t.prototype.componentWillUnmount=function(){Me.a.unsubscribe(Me.a.navigation.page_displayed,this._onPageChange)},t.prototype.render=function(){return null},t}(ge.Component),Si=36e4,Pi=function(e){function t(){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=pe(this,e.call.apply(e,[this].concat(i))),a._onPlayerPlaying=function(e,t){a._startTimer()},a._onPlayerPaused=function(e,t){a._startTimer()},a._onTimeout=function(){a._clearTimer(),a.props.fetchAds(window.getCurrentPage(),"inactivity"),a._startTimer()},a._startTimer=function(){a._isActive||(a._isActive=!0,a._timer=setTimeout(a._onTimeout,Si))},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._resetTimer=function(){a._clearTimer(),a._startTimer()},a._isActive=!1,r=n,pe(a,r)}return de(t,e),t.prototype.componentDidMount=function(){Te.a.playing||this._resetTimer(),Me.a.subscribe(Me.a.ads.refreshDisplay,this._resetTimer),Me.a.subscribe(Me.a.navigation.page_displayed,this._resetTimer),Me.a.subscribe(Me.a.player.playing,this._onPlayerPlaying),Me.a.subscribe(Me.a.player.paused,this._onPlayerPaused),Me.a.subscribe(Me.a.player.finishTrackList,this._resetTimer)},t.prototype.componentWillUnmount=function(){this._clearTimer(),Me.a.unsubscribe(Me.a.ads.refreshDisplay,this._resetTimer),Me.a.unsubscribe(Me.a.navigation.page_displayed,this._resetTimer),Me.a.unsubscribe(Me.a.player.playing,this._onPlayerPlaying),Me.a.unsubscribe(Me.a.player.paused,this._onPlayerPaused),Me.a.unsubscribe(Me.a.player.finishTrackList,this._resetTimer)},t.prototype.render=function(){return null},t}(ge.Component),Ci="has-sponsored-track",ki=6e4,Ni=54e4,Ai=function(e){function t(){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=fe(this,e.call.apply(e,[this].concat(i))),a._onPlay=function(){var e=Te.a.helper.isSponsoredTrack(),t=Te.a.helper.isSponsoredTrack(Te.a.getNextSong());document.body.className=e?document.body.className+" "+Ci:document.body.className.replace(Ci,"").trim(),t||e||a._isActive||a._startTimer(),e&&a._clearTimer()},a._onAudioRequest=function(){a.props.fetchAds(window.getCurrentPage(),"audio"),window.addEventListener(Me.a.ads.adEnd,a._onEnd),window.addEventListener(Me.a.ads.adError,a._onEnd)},a._onEnd=function(){window.removeEventListener(Me.a.ads.adEnd,a._onEnd),window.removeEventListener(Me.a.ads.adError,a._onEnd),a.props.fetchAds(window.getCurrentPage(),"afterAudio"),a._delay=Ni,a._startTimer()},a._onReady=function(){Te.a.onAudioAdsReady()},a._startTimer=function(){a._isActive=!0,a._timer=setTimeout(a._onReady,a._delay)},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._isActive=!1,a._delay=ki,r=n,fe(a,r)}return he(t,e),t.prototype.componentDidMount=function(){this.props.hasAudioAds&&(Me.a.subscribe(Me.a.ads.callAudio,this._onAudioRequest),Me.a.subscribe(Me.a.player.play,this._onPlay),Me.a.subscribe(Me.a.ads.sponsoredTrackLoaded,this._clearTimer))},t.prototype.componentWillUnmount=function(){this._clearTimer(),Me.a.unsubscribe(Me.a.ads.callAudio,this._onAudioRequest),Me.a.unsubscribe(Me.a.player.play,this._onPlay),Me.a.unsubscribe(Me.a.ads.sponsoredTrackLoaded,this._clearTimer),window.removeEventListener(Me.a.ads.adEnd,this._onEnd),window.removeEventListener(Me.a.ads.adError,this._onEnd),!0===Te.a.hasAudioAds&&Me.a.trigger(Me.a.ads.adEnd)},t.prototype.render=function(){return null},t}(ge.Component),Ii=Object(ve.b)(function(e){return{hasAudioAds:e.user.USER.OPTIONS.ads_audio}})(Ai),Ri=function(e){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return a._onBlur=function(){a.hasFocus=!1},a._onFocus=function(){a.hasFocus=!0},a._onError=function(){window.sas.clean(),a.setState({isReady:!1})},a._onBlockFormat=function(e,t){a._blockedFormats[Number(t)]=!0},a._updateView=function(e,t,n,r,o,i){if(a._sasCallRef===e){var s=Number(i.formatId);if(a._pendingFormatIds=a._pendingFormatIds.filter(function(e){return e!==s}),a._displayedFormatIds=a._displayedFormatIds.filter(function(e){return e!==s||t}),a._blockedFormats.hasOwnProperty(s)&&(a._displayedFormatIds=a._displayedFormatIds.filter(function(e){return e!==s}),delete a._blockedFormats[s]),0===a._pendingFormatIds.length){if(o){var l=document.body.className.replace(/has-ads[^ ]*/g,"").trim();a._displayedFormatIds.forEach(function(e){l=qe()(l,{"has-ads-top":e===we.a.get("smartAds.formatId.northBanner"),"has-ads-bottom":e===we.a.get("smartAds.formatId.southBanner")||e===we.a.get("smartAds.formatId.audio"),"has-ads-full":e===we.a.get("smartAds.formatId.hpto")})}),1===a._displayedFormatIds.length&&a._displayedFormatIds[0]===we.a.get("smartAds.formatId.audio")&&(l=qe()(l,{"has-ads-audio":!0})),document.body.className=l}var c=we.a.get("smartAds.formatId"),u=c.audio,p=c.interstitial;-1!==a._requestedFormatIds.indexOf(u)&&-1===a._displayedFormatIds.indexOf(u)&&(Te.a.noAudioAds(),a.fetchAds(window.getCurrentPage(),"navigation")),-1!==a._displayedFormatIds.indexOf(p)&&Te.a.onInterstitialAdsReady(),Me.a.trigger(Me.a.ads.refreshDisplay,a._displayedFormatIds);var d=a._displayedFormatIds.filter(function(e){return e===we.a.get("smartAds.formatId.hpto")}).length>0;Me.a.trigger(Me.a.layout.adsBackground,{display:d})}}},a.fetchAds=a.fetchAds.bind(a),a.nbStyleSheetsInitial=document.styleSheets.length,a.state={isReady:!1},function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._checkFirefoxPrivacyMode();case 2:if(e.sent){e.next=4;break}a._initAds();case 4:case"end":return e.stop()}},e,n)}))(),a}return me(t,e),t.prototype.componentWillUnmount=function(){this._script&&(this._script.parentNode.removeChild(this._script),delete this._script,Me.a.unsubscribe(Me.a.ads.blockFormat,this._onBlockFormat),window.removeEventListener(Me.a.ads.blur,this._onBlur),window.removeEventListener(Me.a.ads.focus,this._onFocus))},t.Native=function(){return _e.a.createElement("div",{id:"sas_"+we.a.get("smartAds.formatId.native")})},t.Audio=function(){return _e.a.createElement("div",{id:"sas_"+we.a.get("smartAds.formatId.audio")})},t.Interstitial=function(){return _e.a.createElement("div",{id:"sas_"+we.a.get("smartAds.formatId.interstitial")})},t.Top=function(){return _e.a.createElement("div",{className:"ads ads-top"},_e.a.createElement("div",{id:"sas_"+we.a.get("smartAds.formatId.northBanner")}))},t.Bottom=function(){return _e.a.createElement("div",{className:"ads ads-bottom"},_e.a.createElement("div",{id:"sas_"+we.a.get("smartAds.formatId.southBanner")}))},t.Wallpaper=function(){return _e.a.createElement("div",{className:"page-ads",id:"sas_"+we.a.get("smartAds.formatId.hpto")})},t.prototype.fetchAds=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==window.sas&&void 0!==window.sas.call){var a=we.a.get("smartAds.formatId").interstitial,r=we.a.get("smartAds.pageId"),o=this._getFormats(e,t),i=-1!==o.indexOf(a);n&&(window.sas.clean(),this.cleanUnecessaryStyleSheets()),o.length&&(window.sas_manager=null,this._sasCallRef=Math.ceil(1e9*Math.random()),this._requestedFormatIds=[].concat(o),this._pendingFormatIds=[].concat(o),this._displayedFormatIds=[].concat(o),window.sas.call("onecall",{siteId:we.a.get("smartAds.siteId"),pageId:r[e],formatId:o.join(","),target:this._getTargetKeywords(i)},{resetTimestamp:!0,onNoad:this._updateView.bind(this,this._sasCallRef,!1,e,t,n),onLoad:this._updateView.bind(this,this._sasCallRef,!0,e,t,n),onError:this._onError}),o.forEach(window.sas.render))}},t.prototype.cleanUnecessaryStyleSheets=function(){var e=/sas_[0-9]{0,}/,t=document.styleSheets.length;if(t!==this.nbStyleSheetsInitial&&t>0){var n=t-1,a=document.styleSheets[n];if(null!==e.test(a.innerHTML)){var r=a.ownerNode;r.parentNode.removeChild(r)}}},t.prototype.render=function(){return this.state.isReady?_e.a.createElement("div",null,_e.a.createElement(wi,{fetchAds:this.fetchAds}),_e.a.createElement(Pi,{fetchAds:this.fetchAds}),_e.a.createElement(Ii,{fetchAds:this.fetchAds})):null},t.prototype._initAds=function(){var e=this;this.hasFocus=!0,this._blockedFormats={},this._script=document.createElement("script"),this._script.async=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(this._script,t),this._script.src="//ak-ns.sascdn.com/diff/js/smart.js",window.sas=window.sas||{},window.sas.cmd=window.sas.cmd?window.sas.cmd:[],window.sas.cmd.push(function(){window.sas.setup({domain:"//ww400.smartadserver.com",async:!0,renderMode:1})}),window.sas.cmd.push(function(){e._script&&e.setState({isReady:!0})}),void 0!==window.blockAdBlock&&window.blockAdBlock.onDetected(function(){e._script&&e.setState({isReady:!0})}),Me.a.subscribe(Me.a.ads.blockFormat,this._onBlockFormat),window.addEventListener(Me.a.ads.blur,this._onBlur),window.addEventListener(Me.a.ads.focus,this._onFocus)},t.prototype._checkFirefoxPrivacyMode=function(){return new Promise(function(e){if("Firefox"===Ot.a.browser){var t=window.indexedDB.open("testIndexedDB");t.addEventListener("success",function(){window.indexedDB.deleteDatabase("testIndexedDB"),e(!1)}),t.addEventListener("error",function(t){t.preventDefault(),e(!0)})}else e(!1)})},t.prototype._getFormats=function(e,t){var n=we.a.get("smartAds.pageId"),a=we.a.get("smartAds.formatId"),r=a.northBanner,o=a.southBanner,i=a.hpto,s=a.interstitial,l=a.native,c=a.audio,u=[];if(void 0===n[e])return Be.a.error("Ads",new Error('Unknown advertising for page name "'+e+'"')),u;switch(t){case"audio":return u.push(o,c),u;case"comeback":return u.push(s),u}switch(e){case"home":u.push(r,o,i,l),"initial"===t&&u.push(s);break;case"page":case"legacy":case"app":case"appstudio":case"offline":case"account":case"episodes":case"episode":break;default:u.push(r,o,i)}return u},t.prototype._getTargetKeywords=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Te.a.getMediaType(),n=this.props.adsArgs,a=we.a.get("smartAds.target");if(a+=";element_type="+(n.hasOwnProperty("element_type")?n.element_type:""),a+=";element_id="+(n.hasOwnProperty("element_id")?n.element_id:""),a+=";element_data="+(n.hasOwnProperty("element_data")?n.element_data:""),"channels"===window.getCurrentPage()){var r=document.location.pathname.replace("/channels/","");a+=";channel_id="+this._normalizeParam(r)}a+=";username="+encodeURIComponent(Object(an.v)(this.props.userBlogName)),a+=";firstname="+encodeURIComponent(Object(an.v)(this.props.userFirstName)),a+=";lastname="+encodeURIComponent(Object(an.v)(this.props.userLastName)),a+=";partners="+encodeURIComponent(this.props.userPartners),a+=";favorite_tag="+this.props.userFavoriteTag,a+=";lang="+this.props.userLang;var o="UNKNOWN";switch(we.a.get("env")){case"preproduction":o="PREPROD";break;case"development":o="DEV";break;case"production":default:o="PROD"}return a+=";env="+o,a+=";focus="+this.hasFocus,a+=";billboard="+e,a+=";site="+we.a.get("smartAds.smartSite"),a+=";mt="+this.props.userAdsOffer,a+=";user_age="+(0===this.props.userAge?"unknown":this.props.userAge),a+=";user_sexe="+this.props.userGender,t===Te.a.MEDIA_TYPE_SONG?(a+=";player_art_name="+this._normalizeParam(Te.a.getCurrentSong("ART_NAME")),a+=";player_alb_title="+this._normalizeParam(Te.a.getCurrentSong("ALB_TITLE")),a+=";player_sng_title="+this._normalizeParam(Te.a.getCurrentSong("SNG_TITLE"))):t===Te.a.MEDIA_TYPE_TALK&&(a+=";talk_show_name="+this._normalizeParam(Te.a.getCurrentSong("SHOW_NAME"))),a+=";pr="+("boolean"==typeof we.a.get("DZPS")&&!0===we.a.get("DZPS")?"1":"0"),a+=";user_id="+this.props.userID,a+=";offer_id="+this.props.userOfferID,a+=";user_fc="+(this.props.userFacebookUID?"1":"0"),a+=";player_play="+(Te.a.playing?"1":"0"),a+=";newsletter="+(this._checkNewsletterStatus()?"1":"0"),a+=";notif_mail="+(this._checkNotificationStatus(this.props.userNotificationMail)?"1":"0"),a+=";notif_mobile="+(this._checkNotificationStatus(this.props.userNotificationMobile)?"1":"0"),t===Te.a.MEDIA_TYPE_SONG?(a+=";player_provider_id="+Te.a.getCurrentSong("PROVIDER_ID"),a+=";player_art_id="+Te.a.getCurrentSong("ART_ID"),a+=";player_alb_id="+Te.a.getCurrentSong("ALB_ID"),a+=";player_sng_id="+Te.a.getCurrentSong("SNG_ID"),a+=";player_rank_sng="+Te.a.getCurrentSong("RANK_SNG"),a+=";player_duration="+Te.a.getCurrentSong("DURATION"),a+=";player_plist_id="+Te.a.getContext("ID")):t===Te.a.MEDIA_TYPE_TALK&&(a+=";talk_duration="+Te.a.getCurrentSong("DURATION")),a},t.prototype._checkNewsletterStatus=function(){for(var e=!1,t=["editor","event","game","panel","special_offer","talk"],n=this.props.userNewsletter,a=t,r=Array.isArray(a),o=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(o>=a.length)break;i=a[o++]}else{if((o=a.next()).done)break;i=o.value}var s=i;if(n.hasOwnProperty(s)&&n[s]){e=!0;break}}return e},t.prototype._checkNotificationStatus=function(e){for(var t=!1,n=["artist_new_release","artist_status","friend_follow","new_message","playlist_comment","playlist_follow","share"],a=Array.isArray(n),r=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o;if(e.hasOwnProperty(i)&&e[i]){t=!0;break}}return t},t.prototype._normalizeParam=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().replace(/[^\w]/g,"")},t}(ge.Component);Ri.defaultProps={adsArgs:{},userBlogName:"",userFirstName:"",userLastName:"",userAdsOffer:"0",userFacebookUID:"",userAge:void 0,userGender:void 0};var xi=Object(ve.b)(function(e){var t=e.user;return{userBlogName:t.USER.BLOG_NAME,userFirstName:t.USER.FIRSTNAME,userLastName:t.USER.LASTNAME,userPartners:t.USER.PARTNERS,userFavoriteTag:t.USER.FAVORITE_TAG,userNewsletter:t.USER.SETTING.newsletter,userAdsOffer:t.USER.ADS_OFFER,userAge:t.USER.USER_AGE,userGender:t.USER.USER_GENDER,userID:t.USER.USER_ID,userFacebookUID:t.USER.FACEBOOK.UID,userOfferID:t.OFFER_ID,userNotificationMail:t.USER.SETTING.notification_mail,userNotificationMobile:t.USER.SETTING.notification_mobile,userLang:t.SETTING_LANG}})(Ri),Di=_e.a.createElement(xi.Interstitial,null),Li=_e.a.createElement(xi.Audio,null),Mi=_e.a.createElement(xi.Native,null),Fi=_e.a.createElement(xi.Bottom,null),Ui=_e.a.createElement(xi.Top,null),Bi=_e.a.createElement(Ti,{timer:15}),Hi=_e.a.createElement(xi.Wallpaper,null),Yi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return ye(t,e),t.prototype._renderMain=function(){var e=(this.props.children.type.WrappedComponent||this.props.children.type).displayName,t={element_type:e,element_id:this.props.params.id?this.props.params.id:"",element_data:""};return"search"===e&&(t={element_type:"result",element_id:"ALL",element_data:this.props.params.query||this.props.params.tags||""}),_e.a.createElement("main",{className:"page-main",id:"page_content",key:"main",role:"main"},_e.a.createElement(xi,{adsArgs:t}),Di,Li,Mi,Fi,_e.a.createElement("div",{className:"page-wrapper"},_e.a.createElement("div",{className:"page-content"},Ui,Bi,this.props.children),Hi))},t}(gi),zi=Object(ve.b)(function(e){var t=e.user;return{userID:t.USER.USER_ID,hasOnBoardingModal:t.USER.ONBOARDING_MODAL,UI:Object(Ye.c)(t)}})(Yi),Gi=function(e){return function(t){return e(null,t.default)}},Vi=function(e){throw e},qi=_e.a.createElement(Ee.c,{from:"*",to:"/"}),Wi=_e.a.createElement(Ee.c,{from:"tops",to:"channels/charts"}),Ki=_e.a.createElement(Ee.c,{from:"charts",to:"channels/charts"}),Qi=_e.a.createElement(Ee.c,{from:"tour",to:"channels/charts"}),Xi=_e.a.createElement(Ee.c,{from:"moods",to:"channels/moods"}),$i=_e.a.createElement(Ee.c,{from:"explore",to:"channels/explore"}),Ji=_e.a.createElement(Ee.c,{from:"mixes",to:"channels/mixes"});t.a=function(e){var t=e.store,a=e.appState,r=e.modalPath,o={history:Oe.a,routes:function(e,t,a){function r(){return a.getState().user.USER.OPTIONS.ads_display&&Te.a.isAdvertisingAllowed()}function o(){0===a.getState().user.id&&je.c.goToConnection()}var i=a.getState().user.SETTING_LANG||"en";return Pe.a.isAllowed("business")&&!Pe.a.isAllowed("business_mod")?_e.a.createElement(Ee.d,{path:"/",component:r()?zi:_i,appState:e,modalPath:t,store:a},_e.a.createElement(Ee.a,{getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),qi):_e.a.createElement(Ee.d,{path:"/",component:r()?zi:_i,appState:e,modalPath:t,store:a},_e.a.createElement(Ee.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,null,_e.a.createElement(Ee.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)}}),we.a.get("AVAILABLE_LANGUAGES").map(function(e){return _e.a.createElement(Ee.d,{key:e,path:e+"/"},_e.a.createElement(Ee.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,null,_e.a.createElement(Ee.d,{path:"channels/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)}}),Wi,Ki,Qi,Xi,$i),_e.a.createElement(Ee.d,{path:"artist/:id(/:tab)",getComponent:function(e,t){return n.e("artist-index").then(n.bind(null,"./js/Artist/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"album/:id",getComponent:function(e,t){return n.e("album-index").then(n.bind(null,"./js/Album/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"audiobook/:id",getComponent:function(e,t){return n.e("audiobook-index").then(n.bind(null,"./js/Audiobook/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"playlist/:id",getComponent:function(e,t){return n.e("playlist-index").then(n.bind(null,"./js/Playlist/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"track/:id(/:tab)",getComponent:function(e,t){return n.e("track-index").then(n.bind(null,"./js/Track/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"show/:id",getComponent:function(e,t){return n.e("show-index").then(n.bind(null,"./js/Show/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"profile/:id(/:tab)",getComponent:function(e,t){return n.e("profile-index").then(n.bind(null,"./js/Profile/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"episodes",getComponent:function(e,t){return n.e("episodes-index").then(n.bind(null,"./js/Episodes/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"episode/:id",getComponent:function(e,t){return n.e("episode-index").then(n.bind(null,"./js/Episode/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"feed",getComponent:function(e,t){return n.e("feed-index").then(n.bind(null,"./js/Feed/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}))})),_e.a.createElement(Ee.d,{path:"flow",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"mixes/genre/:id",getComponent:function(e,t){return n.e("mix-index").then(n.bind(null,"./js/Mix/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,null,_e.a.createElement(Ee.d,{path:"mixes/:type/:id",getComponent:function(e,t){return n.e("mixes-index").then(n.bind(null,"./js/Mixes/index.js")).then(Gi(t)).catch(Vi)}}),Ji),_e.a.createElement(Ee.d,null,_e.a.createElement(Ee.c,{from:"artist/:id(/:tab)",to:i+"/artist/:id(/:tab)"}),_e.a.createElement(Ee.c,{from:"album/:id",to:i+"/album/:id"}),_e.a.createElement(Ee.c,{from:"audiobook/:id",to:i+"/audiobook/:id"}),_e.a.createElement(Ee.c,{from:"playlist/:id",to:i+"/playlist/:id"}),_e.a.createElement(Ee.c,{from:"track/:id(/:tab)",to:i+"/track/:id(/:tab)"}),_e.a.createElement(Ee.c,{from:"show/:id",to:i+"/show/:id"}),_e.a.createElement(Ee.c,{from:"profile/:id(/:tab)",to:i+"/profile/:id(/:tab)"}),_e.a.createElement(Ee.c,{from:"episodes",to:i+"/episodes"}),_e.a.createElement(Ee.c,{from:"episode/:id",to:i+"/episode/:id"}),_e.a.createElement(Ee.c,{from:"feed",to:i+"/feed"})),_e.a.createElement(Ee.d,{path:"shows(/:tab(/:id))",getComponent:function(e,t){return n.e("shows-index").then(n.bind(null,"./js/Shows/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"appstudio",getComponent:function(e,t){return n.e("appstudio-index").then(n.bind(null,"./js/AppStudio/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"app/login",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"app/:app_id(/)*",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"search/:query(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"tags/:tags(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"offline",getComponent:function(e,t){return n.e("offline-index").then(n.bind(null,"./js/Offline/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"plannings",getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(Gi(t)).catch(Vi)},onEnter:o}),_e.a.createElement(Ee.d,{path:"account(/:tab)",getComponent:function(e,t){return n.e("account-index").then(n.bind(null,"./js/Account/index.js")).then(Gi(t)).catch(Vi)}}),_e.a.createElement(Ee.d,{path:"/livestream/:id(/:goBack)",onEnter:be,getComponent:function(){return[]}}),_e.a.createElement(Ee.d,{path:"*",getComponent:function(e,t){return n.e("legacy-index").then(n.bind(null,"./js/Legacy/index.js")).then(Gi(t)).catch(Vi)}}))}(a,r,t)};return _e.a.createElement(ve.a,{store:t},_e.a.createElement(Ee.e,o))}},"./js/_components/Sort.js":function(e,t,n){"use strict";var a=n("./js/_modules/userData.js"),r=n("./js/_modules/redux/store.js"),o={data:function(e,t){e=e.slice(0);var n={ART_NAME:"_sortByArtName",ALB_TITLE:"_sortByAlbTitle",DATE_UPDATE:"_sortByUpdateDate",DATE_CREATE:"_sortByCreateDate",PLAYLIST_TITLE:"_sortByPlaylistTitle",PLAYLIST_TYPE:"_sortByPlaylistType",APP_NAME:"_sortByAppName",TOP_ALBUM:"_sortByTopAlbum",TOP_PLAYLIST:"_sortByTopPlaylist",SHOW_NAME:"_sortByShowName",AUDIOBOOK_TITLE:"_sortByAudiobookTitle",DATE_FAVORITE:"_sortByCreateDate",RELEASE_DATE:"_sortByReleaseDate",ALB_RANK:"_sortByAlbRank",ALB_TYPE:"_sortByAlbType"};return"function"==typeof this[n[t]]?e.sort(this[n[t]]):e},_sortByUpdateDate:function(e,t){var n=e.DATE_ADD||"0000-00-00 00:00:00",a=t.DATE_ADD||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByCreateDate:function(e,t){var n=e.DATE_FAVORITE||e.DATE_CREATE||"0000-00-00 00:00:00",a=t.DATE_FAVORITE||t.DATE_CREATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByReleaseDate:function(e,t){var n=e.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00",a=t.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByAlbId:function(e,t){return Number(e.ALB_ID)<Number(t.ALB_ID)?1:-1},_sortByCopyrightDate:function(e,t,n){var a=0,r=0,i=/([12][0-9][0-9][0-9])[^0-9]/;return e.COPYRIGHT&&e.COPYRIGHT.match(i)?a=e.COPYRIGHT.match(i)[1]:e.PHYSICAL_RELEASE_DATE&&(a=e.PHYSICAL_RELEASE_DATE.substring(0,4)),t.COPYRIGHT&&t.COPYRIGHT.match(i)?r=t.COPYRIGHT.match(i)[1]:t.PHYSICAL_RELEASE_DATE&&(r=t.PHYSICAL_RELEASE_DATE.substring(0,4)),a===r?n?0:o._sortByAlbId(e,t):a<r?1:-1},_sortByArtName:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ART_NAME||"").toLowerCase().trim(),r=(t.ART_NAME||"").toLowerCase().trim();return a===r?n?0:o._sortByAlbTitle(e,t,!0):a>r?1:-1},_sortByAlbTitle:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ALB_TITLE||"").toLowerCase().trim(),r=(t.ALB_TITLE||"").toLowerCase().trim();return a===r?n?0:o._sortByArtName(e,t,!0):a>r?1:-1},_sortByAppName:function(e,t){var n=(e.NAME||"").toLowerCase().trim(),a=(t.NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistTitle:function(e,t){var n=(e.TITLE||"").toLowerCase().trim(),a=(t.TITLE||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistType:function(e,t){var n=String(r.default.getState().user.id),a=String(e.PARENT_USER_ID)===n?0:parseInt(e.STATUS,10)+1,o=String(t.PARENT_USER_ID)===n?0:parseInt(t.STATUS,10)+1,i=(e.TITLE||"").toLowerCase(),s=(t.TITLE||"").toLowerCase();return a===o?i===s?0:i>s?1:-1:a>o?1:-1},_sortByAlbRank:function(e,t){var n=Number(e.RANK),a=Number(t.RANK);return n===a?o._sortByAlbTitle(e,t):a>n?1:-1},_sortByAlbType:function(e,t){var n=Number(e.ROLE_ID),a=Number(t.ROLE_ID);if(n===a){var r=o._getOrderAlbumType(e.TYPE),i=o._getOrderAlbumType(t.TYPE);if(r===i){var s=Number(e.HIGHLIGHT),l=Number(t.HIGHLIGHT);return s===l?o._sortByCopyrightDate(e,t):l>s?1:-1}return i<r?1:-1}return a<n?1:-1},_sortByTopAlbum:function(e,t){var n=a.a.data.TOP_ALBUMS_HASH||{},r=void 0!==n[e.ALB_ID]?1/(n[e.ALB_ID]+1):0,i=void 0!==n[t.ALB_ID]?1/(n[t.ALB_ID]+1):0;return r===i?o._sortByAlbTitle(e,t):i>r?1:-1},_sortByTopPlaylist:function(e,t){var n=a.a.data.TOP_PLAYLISTS_HASH||{},r=void 0!==n[e.PLAYLIST_ID]?1/(n[e.PLAYLIST_ID]+1):0,i=void 0!==n[t.PLAYLIST_ID]?1/(n[t.PLAYLIST_ID]+1):0;return r===i?o._sortByPlaylistTitle(e,t):i>r?1:-1},_sortByShowName:function(e,t){var n=(e.SHOW_NAME||"").toLowerCase().trim(),a=(t.SHOW_NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByAudiobookTitle:function(e,t){var n=(e.title||"").toLowerCase().trim(),a=(t.title||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_getOrderAlbumType:function(e){return{1:0,0:2,3:1,2:3}[Number(e)]}};t.a=o},"./js/_modules/Labs.js":function(e,t,n){"use strict";function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}var o=n("./js/_modules/i18n.js"),i=n("./node_modules/react/index.js"),s=n.n(i),l=n("./node_modules/classnames/index.js"),c=n.n(l),u=n("./node_modules/mousetrap/mousetrap.js"),p=n.n(u),d=n("./js/_modules/favorite.js"),f=n("./js/_modules/Events.js"),h=n("./js/_modules/dzPlayer.js"),m=n("./js/_modules/userData.js"),y=n("./js/_modules/BrowserDetect.js"),b=n("./js/_modules/player/PlayerMetrics.js"),g=s.a.createElement("div",{className:"topbar"}),_=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._keysCache=[],a._seekToPosition=a._seekToPosition.bind(a),a._togglePlayerPause=a._togglePlayerPause.bind(a),a._togglePlayAll=a._togglePlayAll.bind(a),a._focusSearchField=a._focusSearchField.bind(a),a._seekBack=a._seekBack.bind(a),a._seekForward=a._seekForward.bind(a),a._restartTrack=a._restartTrack.bind(a),a._mute=a._mute.bind(a),a._increaseVolume=a._increaseVolume.bind(a),a._decreaseVolume=a._decreaseVolume.bind(a),a._addToFavorites=a._addToFavorites.bind(a),a._toggleRepeat=a._toggleRepeat.bind(a),a._toggleHotKeysPanel=a._toggleHotKeysPanel.bind(a),a._konami=a._konami.bind(a),a.state={opened:!1},a}return a(t,e),t.prototype.componentDidMount=function(){this._bindKeys(["0","1","2","3","4","5","6","7","8","9"],this._seekToPosition,{label:Object(o.a)("Aller à la position"),shortcut:"0...9",display_size:"wide"}),this._bindKeys("space",this._togglePlayerPause,{label:Object(o.a)("Lecture/Pause"),shortcut:Object(o.a)("Espace"),display_size:"wide"}),this._bindKeys("shift+enter",this._togglePlayAll,{label:Object(o.a)("Lire les titres présents sur la page"),shortcut:"⇧ ⏎",display_size:"wide"}),this._bindKeys(["s","shift+s"],this._focusSearchField,{label:Object(o.a)("Rechercher"),shortcut:"S"});var e="Mac"===y.a.OS?"alt":"ctrl";this._bindKeys(e+"+left",this._seekBack,{label:Object(o.a)("Reculer"),shortcut:e+",←"}),this._bindKeys(e+"+right",this._seekForward,{label:Object(o.a)("Avancer"),shortcut:e+",→"}),this._bindKeys("r",this._restartTrack,{label:Object(o.a)("Rejouer le titre"),shortcut:"R"}),this._bindKeys("shift+left",h.a.control.prevSong,{label:Object(o.a)("Lire le titre précédent"),shortcut:"⇧,←"}),this._bindKeys("shift+right",h.a.control.nextSong,{label:Object(o.a)("Lire le titre suivant"),shortcut:"⇧,→"}),this._bindKeys(["m","shift+m"],this._mute,{label:Object(o.a)("Silence"),shortcut:"M"}),this._bindKeys("shift+up",this._increaseVolume,{label:Object(o.a)("Augmenter le volume"),shortcut:"⇧,↑"}),this._bindKeys("shift+down",this._decreaseVolume,{label:Object(o.a)("Baisser le volume"),shortcut:"⇧,↓"}),this._bindKeys(["l","shift+l"],this._addToFavorites,{label:Object(o.a)("Ajouter le titre aux Coups de cœur"),shortcut:"L"}),this._bindKeys("shift+r",this._toggleRepeat,{label:Object(o.a)("Mode de répétition"),shortcut:"⇧,R"}),this._bindKeys(["h","shift+h"],this._toggleHotKeysPanel,{label:Object(o.a)("Afficher les raccourcis clavier"),shortcut:"H"}),this._bindKeys("up up down down left right left right b a enter",this._konami)},t.prototype.componentWillUnmount=function(){this._keysCache.forEach(function(e){p.a.unbind(e.keys)}),clearTimeout(this._removeKonamiRef)},t.prototype.render=function(){var e=this,t=this.state.opened,n=c()({hotkeys:!0,opened:t});return s.a.createElement("div",{className:n,"aria-hidden":!t},g,s.a.createElement("div",{className:"mapping"},this._keysCache.map(function(t){return e._renderKeys(t)})))},t.prototype._renderKeys=function(e){if(!e.label)return null;var t="wide"!==e.display_size?e.shortcut.split(","):[e.shortcut],n=c()({"hotkey-icon":!0,wide:"wide"===e.display_size,single:"wide"!==e.display_size&&1===t.length});return s.a.createElement("div",{className:"hotkey",key:t.join("-")},t.map(function(e,t){return e?s.a.createElement("div",{className:n,key:"shortcut"+t},e):null}),s.a.createElement("div",{className:"hotkey-label"},e.label))},t.prototype._bindKeys=function(e,t,n){n=n||{},p.a.bind(e,t),this._keysCache.push({keys:e,label:n.label,shortcut:n.shortcut||"",display_size:n.display_size||"small"})},t.prototype._toggleHotKeysPanel=function(){this.setState({opened:!this.state.opened})},t.prototype._togglePlayerPause=function(e){e.preventDefault(),b.a.intent("toggle"),h.a.control.togglePause()},t.prototype._togglePlayAll=function(e){e.preventDefault(),b.a.intent("play"),f.a.trigger("EVENT.DATAGRID.togglePlayAll")},t.prototype._focusSearchField=function(e){e.preventDefault(),document.getElementById("menu_search").focus()},t.prototype._seekBack=function(){h.a.isPlaying()||h.a.control.play();var e=(h.a.getPosition()/h.a.getDuration()-.05).toFixed(3);this._handleSeekPosition(e)},t.prototype._seekForward=function(){h.a.isPlaying()||h.a.control.play();var e=(h.a.getPosition()/h.a.getDuration()+.05).toFixed(3);this._handleSeekPosition(e)},t.prototype._seekToPosition=function(e,t){var n=parseFloat(t)/10;return 0===n&&(n=1e-5),this._handleSeekPosition(n)},t.prototype._restartTrack=function(){this._handleSeekPosition(1e-4)},t.prototype._mute=function(){h.a.control.mute(!h.a.isMuted())},t.prototype._addToFavorites=function(){f.a.ready(f.a.user.initialized,function(){if(-1===["ads","jingle","livestream"].indexOf(h.a.getPlayerType())&&h.a.getMediaType()===h.a.MEDIA_TYPE_SONG){var e=h.a.getCurrentSong("SNG_ID"),t=m.a.isFavorite("song",e)?"remove":"add";d.a[t]({type:"song",id:e})}})},t.prototype._increaseVolume=function(){var e=(parseFloat(h.a.getVolume())+.1).toFixed(2);e=Math.min(1,e),h.a.control.setVolume(e)},t.prototype._decreaseVolume=function(){var e=(parseFloat(h.a.getVolume())-.1).toFixed(2);0!==(e=Math.max(0,e))||h.a.isMuted()||h.a.control.mute(),h.a.control.setVolume(e)},t.prototype._handleSeekPosition=function(e){e>0&&e<1&&h.a.control.seek(e)},t.prototype._toggleRepeat=function(){var e=h.a.getRepeat();h.a.control.setRepeat(2===e?0:e+1)},t.prototype._konami=function(){document.body.classList&&(document.body.classList.add("konami"),this._removeKonamiRef=setTimeout(function(){document.body.classList.remove("konami")},1e4))},t}(i.Component),v=(n("./node_modules/prop-types/index.js"),n("./node_modules/react-redux/es/index.js")),E=n("./js/_modules/config/index.js"),O=n("./js/_components/Player/store/music.js"),j=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._notification=null,a._timer=null,a._lastTrackId="",a}return r(t,e),t.prototype.componentWillMount=function(){"default"===Notification.permission&&Notification.requestPermission()},t.prototype.render=function(){var e=this.props,t=e.playing,n=e.playerType,a=e.trackId;return t&&a!==this._lastTrackId&&"ads"!==n&&this._displayNotification(),null},t.prototype._displayNotification=function(){var e=this,t=this.props,n=t.cover,a=t.trackId,r=t.trackTitle,o=t.trackArtists;this._notification&&(clearTimeout(this._timer),this._notification.close()),this._lastTrackId=a,this._notification=new Notification(r,{icon:n,body:o.map(function(e){return e.ART_NAME}),dir:E.a.get("DIRECTION")}),this._timer=setTimeout(function(){return e._notification.close()},4e3)},t}(i.Component),T=Object(v.b)(function(e){return{trackId:e.player.music.id,playerType:e.player.config.playerType,playing:e.player.control.playing,cover:Object(O.e)(e),trackTitle:Object(O.k)(e),trackArtists:Object(O.j)(e)}})(j);n.d(t,"a",function(){return w}),n.d(t,"b",function(){return S});var w={FirefoxHTML5:"FirefoxHTML5",HotKeys:"HotKeys",Notification:"Notification"},S=function(){return[{id:w.Notification,component:T,name:Object(o.a)("Notifications de bureau"),description:Object(o.a)("Afficher une notification sur le bureau lorsqu'un nouveau titre commence."),picture:"notifs.png",browser:["Chrome","Edge","Firefox","Safari"],active:!0},{id:w.HotKeys,component:_,name:Object(o.a)("Raccourcis clavier"),description:Object(o.a)("Contôlez Deezer depuis votre clavier. Activez-le et appuyez sur H pour voir les commandes disponibles."),picture:"hotkeys.png",force:!0},{id:w.FirefoxHTML5,name:Object(o.a)("Nouveau player audio Firefox"),description:Object(o.a)("Activez-le pour utiliser le lecteur HTML5 pour le son dans Firefox plutôt que Flash."),picture:"firefox-html5.png",browser:["Firefox"],active:!0}]}},"./js/_modules/SearchStore.js":function(e,t,n){"use strict";var a=n("./js/_modules/api.js"),r=n("./js/_modules/Store.js"),o=n("./js/_modules/gatekeeper.js"),i=null,s="",l={},c=void 0,u=new r.a({getQuery:function(){return s},setQuery:function(e){return s!==e&&(s=e,this.emitChange("input")),this},getResults:function(){return i},search:function(e){var t=this;return this.setQuery(e),""===s||"#"===s?(i=null,void this.emitChange("suggest")):void 0!==l[s]?(i=l[s],void this.emitChange("suggest")):void function(e){var t=s,n={ARTIST:!0,ALBUM:!0,TRACK:!0,PLAYLIST:!0,RADIO:!0,SHOW:!0,TAG:!0,USER:!0,CHANNEL:!0,LIVESTREAM:!0},r=3;o.a.isAllowed("business")&&!o.a.isAllowed("business_mod")&&(n={PLAYLIST:!0,ALBUM:!0},r=30),c=a.a.call({method:"deezer.suggest",data:{QUERY:t.trim(),TYPES:n,NB:r},success:function(n){l[t]=n,t===s&&e(n)}})}(function(e){i=e,t.emitChange("suggest")})},cancel:function(){a.a.cancel(c)}});t.a=u},"./js/_modules/Store.js":function(e,t,n){"use strict";var a=n("./node_modules/uuid-v4/index.js"),r=n.n(a),o=n("./js/_modules/EventDispatcher.js");t.a=function(e){var t=this;this.uniq_id=r()(),this.parent={},this.callbacks={},this.eventDispatcher=new o.a,this.emitChange=function(e){t.eventDispatcher.trigger(e)},this.onChange=function(e){t.eventDispatcher.subscribe(e)},this.offChange=function(e){t.eventDispatcher.unSubscribe(e)};for(var n in e)e.hasOwnProperty(n)&&(this.hasOwnProperty(n)&&(this.parent[n]=this[n]),this[n]=e[n])}},"./js/_modules/XMPPWebSocket.js":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}function i(e){var t={from:e.getAttribute("from"),to:e.getAttribute("to")},n=e.getElementsByTagName("items")[0];t.node=n?n.getAttribute("node"):void 0;var a=e.getElementsByTagName("payload")[0]||e.getElementsByTagName("item")[0];t.payload=a.childNodes.length?a.childNodes[0].textContent:void 0;try{t.payload=JSON.parse(t.payload)}catch(e){}return t}var s=n("./node_modules/es6-error/lib/index.jsnext.js"),l=n("./js/_modules/config/index.js"),c=n("./js/_modules/gatekeeper.js"),u=n("./js/_modules/internals.js"),p=n("./js/_modules/redux/store.js"),d=n("./node_modules/uuid-v4/index.js"),f=n.n(d),h=n("./node_modules/strophe.js/strophe.js"),m=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),y={},b=void 0;h.Strophe.Builder.prototype.cdata||(h.Strophe.Builder.prototype.cdata=function(e){return this.node.appendChild(h.Strophe.xmlGenerator().createCDATASection(e)),this});var g=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t}(s.a),_=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t}(s.a),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.endpoint,r=void 0===n?"":n,o=t.id,i=void 0===o?f()():o,s=t.jid,l=t.password;a(this,e),this.id=i,Object.defineProperty(this,"endpoint",{value:r}),Object.defineProperty(this,"jid",{value:s}),Object.defineProperty(this,"password",{value:l}),Object.defineProperty(this,"socket",{value:new h.Strophe.Connection(r)});var c=Object(u.a)(this);c.listeners={},c.retries=0}return m(e,null,[{key:"singleton",get:function(){return b||(b=new e({endpoint:"wss://"+l.a.get("SETTING_HOST_MESSAGING")+"/websocket",jid:p.default.getState().user.id+"@"+l.a.get("SETTING_HOST_MESSAGING"),password:p.default.getState().user.USER_TOKEN}))}}]),e.prototype.connect=function(){function e(n,a){var r=this;switch(n){case h.Strophe.Status.ERROR:this.emit("error",new Error(a));break;case h.Strophe.Status.CONNFAIL:case h.Strophe.Status.CONNTIMEOUT:this.emit("error",new _(a||"Timeout"));break;case h.Strophe.Status.AUTHFAIL:a=new g,this.emit("error",a),t.connected(a),t.retries=0,delete t.connecting,delete t.connected;break;case h.Strophe.Status.CONNECTED:this.socket.addHandler(function(e){var t=this,n=i(e);return(Object(u.a)(this).listeners.message||[]).filter(function(e){return Object.keys(e.options||{}).reduce(function(t,a){return t&&(Array.isArray(e.options[a])?e.options[a]:[e.options[a]]).indexOf(n[a])>-1},!0)}).forEach(function(e){try{e.fn(n)}catch(e){t.emit("error",e)}}),!0}.bind(this),null,"message"),this.socket.addHandler(function(e){var t={client:e.getAttribute("from"),type:e.getAttribute("type")};return t.client!==this.socket.jid&&this.emit("presence",t),!0}.bind(this),null,"presence"),this.emit("connect"),t.connected(),t.retries=0,delete t.connecting,delete t.connected,c.a.isAllowed("triforce_queuelist_messages")&&this.presence();break;case h.Strophe.Status.DISCONNECTED:this.emit("disconnect"),t.disconnecting?(t.disconnected(),delete t.disconnecting,delete t.disconnected,delete this.socket.connect_callback):self.setTimeout(function(){return t.connecting?r.socket.connect(r.jid,r.password,e.bind(r)):r.connect()},1e3*(Math.random()*(Math.pow(2,++t.retries)-Math.pow(2,t.retries-1))+Math.pow(2,t.retries-1)));break;case h.Strophe.Status.CONNECTING:case h.Strophe.Status.AUTHENTICATING:case h.Strophe.Status.DISCONNECTING:case h.Strophe.Status.ATTACHED:case h.Strophe.Status.REDIRECT:}}var t=Object(u.a)(this);if(t.connecting)return t.connecting;if(this.socket.connected)return Promise.resolve();var n=t.connecting=new Promise(function(e,n){t.connected=function(t,a){return t?n(t):e(a)}});return this.socket.connect(this.jid,this.password,e.bind(this)),n},e.prototype.disconnect=function(){var e=Object(u.a)(this);if(this===b)return Promise.reject(new Error("Cannot disconnect the singleton since the socket might be used somewhere else."));if(e.disconnecting)return e.disconnecting;if(!this.socket.connected)return Promise.resolve();var t=e.disconnecting=new Promise(function(t,n){e.disconnected=function(e,a){return e?n(e):t(a)}});return this.socket.disconnect(),t},e.prototype.emit=function(e){for(var t=this,n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(Object(u.a)(this).listeners[e]||[]).forEach(function(e){try{e.fn.apply(e,a)}catch(e){t.emit("error",e)}})},e.prototype.get=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new h.Strophe.Builder("iq",{from:this.jid,type:"get"}).c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("items",{node:e});return this.connect().then(function(){return new Promise(function(e,r){return t.socket.sendIQ(a,function(t){return e(i(t))},r,n.timeout)})})},e.prototype.off=function(e,t){for(var n=Object(u.a)(this),a=n.listeners[e]||[],r=a.length;r--;)t&&a[r]!==t||a.splice(r,1);a.length||delete n.listeners[e]},e.prototype.on=function(e,t,n){var a=Object(u.a)(this);a.listeners[e]=a.listeners[e]||[],a.listeners[e].push({fn:t,options:n})},e.prototype.post=function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new h.Strophe.Builder("iq",{from:this.jid,type:"set"}).c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("publish",{node:e}).c("item").cdata("string"==typeof t?t:JSON.stringify(t));return this.connect().then(function(){return new Promise(function e(t){var n=Math.floor(Date.now()/1e3);return Object.keys(y).filter(function(e){return e<n}).forEach(function(e){return delete y[e]}),y[n]>=10?self.setTimeout(function(){return e(t)},1e3):(y[n]=(y[n]||0)+1,t())})}).then(function(){return new Promise(function(e,t){return n.socket.sendIQ(r,e,t,a.timeout)})})},e.prototype.presence=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.connect().then(function(){return new Promise(function(a,r){return t.socket.sendPresence(new h.Strophe.Builder("presence",e),a,r,n.timeout)})})},e}();v.AuthenticationError=g,v.ConnectionError=_,t.a=v},"./js/_modules/displayNotification.js":function(e,t,n){"use strict";var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/userSetting.js"),o=n("./js/_modules/notification.js"),i=n("./js/_modules/redux/store.js"),s={like:!0,dislike:!0},l=void 0;t.a=function(e){if(!s[e])return!1;l||(l={dislike_first:Object(a.a)("Flow ne vous proposera plus ce titre, promis."),dislike:Object(a.a)("Non merci Flow."),like_first:Object(a.a)("Ajouté aux Coups de cœur. Allez-y, continuez à ajouter, Flow apprend à vous connaître."),like:Object(a.a)("Ajouté aux Coups de cœur")});var t=i.default.getState().user.USER.SETTING,n="number"==typeof t.site["nb_flowplayer_"+e+"_notification"]?t.site["nb_flowplayer_"+e+"_notification"]:0;if(n<3){var c=l[e+(0===n?"_first":"")];o.a.display(null,{message:c});var u={};u["nb_flowplayer_"+e+"_notification"]=n+1,r.a.set({site:u})}}},"./js/_modules/flash_detect.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/dzPlayer.js"),o=n("./js/core/util.js"),i=n("./js/_modules/modal.js"),s=n("./js/_modules/BrowserDetect.js"),l=this,c=function e(){if(!(r.a.getNbSongs()<r.a.getNbSongsTotal())){a.a.unsubscribe(a.a.player.play,e),a.a.unsubscribe(a.a.player.seek,e);var t=document.getElementById("audioPlayerSWF");Object(o.a)(t,function(t){if(!r.a.html5.active&&t){var n=i.default.open("/lightbox/flash_detect?type="+encodeURIComponent(t)+"&browser="+encodeURIComponent(s.a.browser)+"&os="+encodeURIComponent(s.a.OS),!0);a.a.subscribeOnce(a.a.modal.close,function t(n,r,o){n===o?(a.a.subscribe(a.a.player.play,e),a.a.subscribe(a.a.player.seek,e)):a.a.subscribeOnce(a.a.modal.close,t.bind(l,n))}.bind(l,n)),a.a.subscribeOnce(a.a.player.playerLoaded,i.default.close)}})}};a.a.subscribe(a.a.player.play,c),a.a.subscribe(a.a.player.seek,c)},"./js/_modules/lyrics.js":function(e,t,n){"use strict";t.a=function(){var e=r.default.getState().user.USER.ABTEST.lyrics&&r.default.getState().user.USER.ABTEST.lyrics.behaviour;return"noLyrics"===e?Object(a.a)("Passez à Premium+ pour afficher les paroles et les faire défiler"):"snippet"===e?Object(a.a)("Passez à Premium+ pour afficher la suite des paroles"):"static"===e?Object(a.a)("Passez à Premium+ pour faire défiler les paroles"):""};var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/redux/store.js")},"./js/_modules/monitoring/jiraIssueCollector.js":function(e,t,n){"use strict";var a=n("./js/_modules/gatekeeper.js");t.a=function(){a.a.isAllowed("employee_feature")&&(window.ATL_JQ_PAGE_PROPS={triggerFunction:function(e){window.ATL_JQ_SHOW_DIALOG=e}})}},"./js/_modules/monitoring/reportSlowResources.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/live/live.js"),o=n("./js/_modules/gatekeeper.js"),i=/^https?:\/\/[^/]+\.deezer(dev)?\.com\/(?!ajax)/;t.a=function e(){var t=o.a.isAllowed("performance_monitoring"),n="performance"in window&&"getEntriesByType"in window.performance&&"clearResourceTimings"in window.performance&&window.performance.getEntriesByType("resource")instanceof Array;if(t&&n){var s=window.performance.getEntriesByType("resource");s=s.filter(function(e){var t=i.test(e.name),n=e.duration>2e3;return t&&n}),window.performance.clearResourceTimings(),s.length&&(s=s.map(function(e){return{name:e.name,duration:e.duration}}),r.a.log.send("app_perf_resources",{resources:s}))}else a.a.unsubscribe(a.a.navigation.page_displayed,e)}},"./js/_modules/publicPath.js":function(e,t,n){"use strict";var a=n("./js/_modules/config/index.js");n.p="https://"+a.a.get("host_static_ssl")+"/cache/"},"./js/_modules/redux/middlewares/player/limitation.js":function(e,t,n){"use strict";function a(e){e.payload&&e.payload.VALUE&&!Number(e.payload.VALUE.USER_ID)||i.a.trigger(i.a.live.simultaneousAccess)}function r(e){return s.a.singleton.post("SingleInstancePlayback",{APP:"LIMITATION",ACTION:"PLAY",VALUE:{USER_ID:e,UNIQID:f,SNG_ID:l.a.getCurrentSong(l.a.getMediaId())}})}function o(){return s.a.singleton.on("message",a,{node:"SingleInstancePlayback"}),s.a.singleton.connect()}t.a=r,t.c=o;var i=n("./js/_modules/Events.js"),s=n("./js/_modules/XMPPWebSocket.js"),l=n("./js/_modules/dzPlayer.js"),c=n("./node_modules/uuid-v4/index.js"),u=n.n(c),p=n("./js/_components/Player/store/control.js"),d=n("./js/_components/Player/store/music.js"),f=u()();t.b=function(e){return function(t){return function(n){var a=e.getState().player.control.playing,i=t(n),s=e.getState().player.control.playing,l=e.getState().user.isAuth,c=e.getState().user.id;if(!l)return i;switch(n.type){case d.a:o();break;case p.a:s&&!a&&r(c)}return i}}}},"./js/_modules/redux/stores/entities/episodes.js":function(e,t,n){"use strict";function a(e){return h({},e.DATA,e)}n.d(t,"d",function(){return g}),n.d(t,"e",function(){return _}),t.a=function(){b.forEach(u.a.cancel),y=!1},n.d(t,"c",function(){return E});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/utils.js"),d=n("./js/_modules/userData.js"),f=n("./js/_modules/redux/stores/entities/schemas.js"),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.EPISODES?s()({},e,t.data.entities.EPISODES):e};var y=!1,b=[],g=function(e){return function(t,n){return n().entities.EPISODES[e.id]?t({type:"entities/episodes/FETCHED_EPISODE_FROM_CACHE",id:e.id}):e.rehydrateData?t(function(e){return{type:"entities/episodes/REHYDRATED_EPISODE",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),f.e)}}(e)):y?Promise.resolve():t(function(e){return function(t){y=!0;var n=u.a.call({method:"episode.getData",data:{episode_id:e.id},success:function(n){t({type:"entities/episodes/FETCHED_EPISODE",id:e.id,data:Object(r.normalize)(a(n),f.e)}),y=!1},error:function(){y=!1}});b.push(n)}}(e))}},_=function(e){return function(t,n){var o=n().entities.EPISODES,i=e.id.map(function(e){return!o[e]&&e}).filter(function(e){return e}).filter(function(e,t,n){return n.indexOf(e)===t});return new Promise(function(l,c){if(!i.length)return l(e.id.map(function(e){return o[e]}));t({id:i,type:"entities/episodes/FETCH_EPISODES"}),u.a.call({method:"episode.getListData",data:{episode_ids:i},success:function(o){t({type:"entities/episodes/FETCH_EPISODES_SUCCESS",id:i,data:s.a.apply(void 0,[{}].concat(o.data.map(function(e){return Object(r.normalize)(a(e),f.e)})))}),l(e.id.map(function(e){return n().entities.EPISODES[e]}))},error:function(e){t({type:"entities/episodes/FETCH_EPISODES_FAILURE",id:i,error:e}),c(e)}})})}},v=function(e,t){return e.EPISODES[t.id]},E=m([v,function(e,t){var n=v(e,t);return n?d.a.getEpisodeBookmark(t.id,n.DURATION):{}},function(e,t){var n=v(e,t);if(n)return Object(p.E)(n.DURATION)},function(e,t){var n=v(e,t);if(n&&n.EPISODE_PUBLISHED_TIMESTAMP){var a=n.EPISODE_PUBLISHED_TIMESTAMP.split(" ")[0];return Object(p.k)(a)}}],function(e,t,n,a){return h({},e,{IS_HEARD:t.IS_HEARD,FORMATTED_DURATION:n,FORMATTED_PUBLISHED_TIMESTAMP:a})})},"./js/_modules/redux/stores/entities/lives.js":function(e,t,n){"use strict";n.d(t,"b",function(){return l});var a=n("./js/_modules/api.js"),r=n("./node_modules/lodash.merge/index.js"),o=n.n(r),i=n("./js/_modules/redux/stores/entities/schemas.js"),s=n("./node_modules/normalizr/lib/index.js");n.n(s);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.LIVES?o()({},e,t.data.entities.LIVES):e};var l=function(e){return function(t,n){var r=n().entities.LIVES,l=e.id.map(function(e){return!r[e]&&e}).filter(function(e){return e}).filter(function(e,t,n){return n.indexOf(e)===t});return new Promise(function(c,u){if(!l.length)return c(e.id.map(function(e){return r[e]}));t({id:l,type:"entities/lives/FETCH_LIVES"}),Promise.all(l.map(function(e){return new Promise(function(t,n){return a.a.call({method:"livestream.getData",data:{livestream_id:e,supported_codecs:["mp3"]},error:n,success:t})})})).then(function(a){t({type:"entities/lives/FETCH_LIVES_SUCCESS",id:l,data:o.a.apply(void 0,[{}].concat(a.map(function(e){return Object(s.normalize)(e,i.f)})))}),c(e.id.map(function(e){return n().entities.LIVES[e]}))}).catch(function(e){t({type:"entities/lives/FETCH_LIVES_FAILURE",id:l,error:e}),u(e)})})}}},"./js/_modules/redux/stores/entities/schemas.js":function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"i",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return h});var a=n("./node_modules/normalizr/lib/index.js"),r=(n.n(a),new a.Schema("SONGS",{idAttribute:"SNG_ID"})),o=new a.Schema("ARTISTS",{idAttribute:"ART_ID"}),i=new a.Schema("PLAYLISTS",{idAttribute:"PLAYLIST_ID"}),s=new a.Schema("ALBUMS",{idAttribute:"ALB_ID"}),l=new a.Schema("CHRONICLES",{idAttribute:"ORIG_UID"}),c=new a.Schema("COMMENTS",{idAttribute:"COMMENT_ID"}),u=new a.Schema("EPISODES",{idAttribute:"EPISODE_ID"}),p=new a.Schema("SHOWS",{idAttribute:"SHOW_ID"}),d=new a.Schema("AUDIOBOOKS",{idAttribute:"id"}),f=new a.Schema("RADIOS",{idAttribute:"RADIO_ID"}),h=(new a.Schema("USERS",{idAttribute:"USER_ID"}),new a.Schema("LIVES",{idAttribute:"LIVESTREAM_ID"})),m=new a.Schema("RELATED_ARTISTS",{idAttribute:"ART_ID"}),y=new a.Schema("RELATED_ALBUMS",{idAttribute:"ALB_ID"}),b=new a.Schema("RELATED_SONGS",{idAttribute:"SNG_ID"});o.define({RELATED_ARTISTS:{data:Object(a.arrayOf)(m)},RELATED_PLAYLIST:{data:Object(a.arrayOf)(i)},SELECTED_PLAYLIST:{data:Object(a.arrayOf)(i)},TOP:{data:Object(a.arrayOf)(b)},LAST_ALBUM:{data:Object(a.arrayOf)(y)},ALBUMS:{data:Object(a.arrayOf)(y)}}),s.define({ARTISTS:Object(a.arrayOf)(m),CHRONICLES:{data:Object(a.arrayOf)(l)},COMMENTS:{data:Object(a.arrayOf)(c)},SONGS:{data:Object(a.arrayOf)(b)}})},"./js/_modules/redux/stores/entities/songs.js":function(e,t,n){"use strict";function a(e){return h({},e.DATA,e)}n.d(t,"e",function(){return g}),n.d(t,"d",function(){return _}),t.a=function(){b.forEach(u.a.cancel),y=!1},n.d(t,"c",function(){return E});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/right.js"),d=n("./js/_modules/utils.js"),f=n("./js/_modules/redux/stores/entities/schemas.js"),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.SONGS?s()({},e,t.data.entities.SONGS):e};var y=!1,b=[],g=function(e){return function(t,n){return n().entities.SONGS[e.id]?t({type:"entities/songs/FETCHED_TRACK_FROM_CACHE",id:e.id}):e.rehydrateData?t(function(e){return{type:"entities/songs/REHYDRATED_TRACK",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),f.j)}}(e)):y?Promise.resolve():t(function(e){return function(t){y=!0;var n=u.a.call({method:"deezer.pageTrack",data:{sng_id:e.id},success:function(n){t({type:"entities/songs/FETCHED_TRACK",id:e.id,data:Object(r.normalize)(a(n),f.j)}),y=!1},error:function(){y=!1}});b.push(n)}}(e))}},_=function(e){return function(t,n){var o=n().entities.SONGS,i=e.id.map(function(e){return!o[e]&&e}).filter(function(e){return e}).filter(function(e,t,n){return n.indexOf(e)===t});return new Promise(function(l,c){if(!i.length)return l(e.id.map(function(e){return o[e]}));t({id:i,type:"entities/songs/FETCH_TRACKS"}),u.a.call({method:"song.getListData",data:{sng_ids:i},success:function(o){t({type:"entities/songs/FETCH_TRACKS_SUCCESS",id:i,data:s.a.apply(void 0,[{}].concat(o.data.map(function(e){return Object(r.normalize)(a(e),f.j)})))}),l(e.id.map(function(e){return n().entities.SONGS[e]}))},error:function(e){t({type:"entities/songs/FETCH_TRACKS_FAILURE",id:i,error:e}),c(e)}})})}},v=function(e,t){return e.SONGS[t.id]},E=m([v,function(e,t){var n=v(e,t),a={};return n?n.ARTISTS.filter(function(e){return!a[e.ART_ID]&&(a[e.ART_ID]=!0,!0)}):[]},function(e,t){var n=v(e,t);if(n&&n.LYRICS_ID&&0!==n.LYRICS_ID)return h({},n.LYRICS,{HAS_SYNC_LYRICS:n.LYRICS.LYRICS_SYNC_JSON&&n.LYRICS.LYRICS_SYNC_JSON.length,LYRICS_TEXT:n.LYRICS.LYRICS_TEXT.split(/\r\n|\r|\n/g)})},function(e,t){var n=v(e,t);if(n)return n.ISRC.data.filter(function(e){return p.a.checkSongAvailable(e)===p.a.READABLE})}],function(e,t,n,a){return h({},e,{FORMATTED_DURATION:Object(d.E)(e?e.DURATION:0),ARTISTS:t,LYRICS:n,RELATED_ALBUMS:a})})},"./js/_modules/redux/stores/labs.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,e},n.d(t,"e",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u});var a=n("./node_modules/reselect/es/index.js"),r=n("./js/_modules/BrowserDetect.js"),o=n("./js/_modules/Labs.js"),i=function(){return{list:Object(o.b)()}},s=function(e){return e.list.filter(function(e){return!1!==e.active})},l=Object(a.a)([function(e,t){return Object.keys(t).filter(function(e){return t[e]}).reduce(function(e,t){return e[t]=!0,e},{})},function(e,t){return e.list.filter(function(e){return e.force&&!1!==t[e.id]}).reduce(function(e,t){return e[t.id]=!0,e},{})},function(e){return e.list.filter(function(e){return e.browser&&e.browser.length>=0&&-1===e.browser.indexOf(r.a.browser)}).reduce(function(e,t){return e[t.id]=!1,e},{})},function(e){return e.list.filter(function(e){return!1===e.active}).reduce(function(e,t){return e[t.id]=!1,e},{})}],function(e,t,n,a){return Object.assign({},e,t,n,a)}),c=Object(a.a)([s,l],function(e,t){return e.filter(function(e){var n=e.id;return t[n]})}),u=Object(a.a)([s,l],function(e,t){return e.filter(function(e){var n=e.id;return!t[n]})})},"./js/_modules/tips.js":function(e,t,n){"use strict";function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}}(e,t))}var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-dom/index.js"),s=n.n(i),l=n("./js/_modules/i18n.js"),c=n("./js/_modules/config/index.js"),u=n("./js/_modules/Events.js"),p=n("./js/_modules/error.js"),d=n("./js/_modules/userData.js"),f=n("./js/_modules/dzPlayer.js"),h=n("./js/_modules/tracking.js"),m=n("./js/_modules/api.js"),y=n("./js/_modules/userSetting.js"),b=n("./js/_modules/redux/store.js"),g=(n("./node_modules/prop-types/index.js"),o.a.createElement("span",{className:"icon icon-cancel"})),_=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return a._close=a._close.bind(a),a}return a(t,e),t.prototype.componentDidMount=function(){this.props.play&&u.a.subscribeOnce(u.a.player.play,this._close)},t.prototype.componentWillUnmount=function(){this.props.play&&u.a.unsubscribe(u.a.player.play)},t.prototype.render=function(){var e=this.props,t=e.body,n=e.closeBtn,a=e.direction,r=e.title,i=e.play;return t=Array.isArray(t)?t:[t],o.a.createElement("div",{className:"popover popover-"+a,role:"alertdialog","aria-labelledby":"tipTitle","aria-describedby":"tipBody"},n?o.a.createElement("button",{className:"popover-close",type:"button","aria-label":Object(l.a)("Fermer"),onClick:this._close},g):null,o.a.createElement("div",{className:"popover-body"},""!==r?o.a.createElement("div",{className:"popover-header",id:"tipTitle"},r):null,o.a.createElement("div",{className:"highlight",id:"tipBody"},t.map(function(e){return o.a.createElement("p",{key:"tip_text"+e},e)})),o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:i?this._play:this._close},o.a.createElement("span",{className:"label"},i?Object(l.a)("Écouter maintenant"):Object(l.a)("J'ai compris")))))},t.prototype._close=function(){u.a.trigger(u.a.tips.close,this.props.name)},t.prototype._play=function(){f.a.control.play()},t}(r.Component);_.defaultProps={name:void 0,title:"",play:!1,closeBtn:!1,direction:"right-top"};var v=_,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=null,j={tipsOnLoad:{playerfocus:!0},init:function(){try{var e=null;for(var t in j.tipsOnLoad)if(j.tipsOnLoad.hasOwnProperty(t)&&!0===j.tipsOnLoad[t]){if(e=j.load(t),j.check(e))break;e=null}u.a.subscribe(u.a.tips.close,function(e,t){j.close(t)}),u.a.subscribe(u.a.tips.draw,function(e,t){"string"==typeof t?j.draw(t):"object"===(void 0===t?"undefined":E(t))&&j.draw(t.name,t.check)}),u.a.ready(u.a.player.playerReady,function(){u.a.subscribeOnce(u.a.player.displayCurrentSong,function(){setTimeout(function(){null!==e&&e.hasOwnProperty("active")&&!0===e.active&&T.draw(e)},500)},"tips")},"tips"),w.init()}catch(e){p.a.log(e)}},load:function(e){return(e=T.element[e]||function(){return{}})()},check:function(e){return e.hasOwnProperty("active")&&!0===e.active&&"function"==typeof e.trigger&&!0===e.trigger()},draw:function(e,t){t=t||!1,e=j.load(e),!0===t&&!j.check(e)||null!==O||T.draw(e)},close:function(e){try{O=null;var t=document.getElementById(T.overlayName);null!==t&&document.body.removeChild(t);var n=j.load(e);if(n.hasOwnProperty("name")){var a=document.getElementById("tips_"+n.name);null!==a&&document.body.removeChild(a)}u.a.unsubscribeAll("tips"),n.hasOwnProperty("overlay")&&n.overlay.hasOwnProperty("className")&&(document.body.classList.remove("has-focus"),document.body.classList.remove(n.overlay.className))}catch(e){p.a.log(e)}}},T={overlayName:"tips-overlay",draw:function(e){try{var t,n=e.name;if(O=n,void 0===T.element[n])return!1;"function"==typeof e.callback&&e.callback(),"object"===E(e.overlay)&&((t=document.createElement("div")).id=T.overlayName,t.className=T.overlayName,t.style.display="none",document.body.appendChild(t).addEventListener("click",function(){j.close(n)}),document.body.classList.add("has-focus"),document.body.classList.add(e.overlay.className));var a=document.createElement("div");a.id="tips_"+n,a.className="tips",a.style.visibility="hidden",document.body.appendChild(a),s.a.render(o.a.createElement(v,e),document.getElementById("tips_"+n),function(){if(e.hasOwnProperty("user_settings")){var n={};Object.keys(e.user_settings).map(function(t){n[t]=e.user_settings[t]}),y.a.set({tips:n})}e.hasOwnProperty("tracking")&&h.a.track(e.tracking.key,{context:e.tracking.context}),this.setPosition(e,a),void 0!==t&&(t.style.display="block"),a.style.visibility="visible"}.bind(this))}catch(e){p.a.log(e)}},setPosition:function(e,t){if("function"==typeof e.style){var n=e.style();for(var a in n)n.hasOwnProperty(a)&&(t.style[a]=n[a]);b.default.getState().user.USER.OPTIONS.ads_display&&u.a.subscribeOnce(u.a.layout.adsBanner,function(){this.setPosition(e,t)}.bind(this),"tips")}},element:{business_planning_panel:function(){return{active:!0,name:"business_planning_panel",body:Object(l.a)("Retrouvez ici vos plannings. Créez et gérez vos programmations à tout moment en allant dans “Mes plannings”."),closeBtn:!0,direction:"left-bottom",user_settings:{business_planning_panel:!1},overlay:{className:"has-focus-business-panel"},trigger:function(){return Boolean(b.default.getState().user.USER.SETTING.tips.business_planning_panel)},style:function(){var e=document.getElementById("business-menu"),t={top:e.getBoundingClientRect().top+5+"px",right:e.getBoundingClientRect().width+10+"px"};return t}}},business_playlists_panel:function(){return{active:!0,name:"business_playlists_panel",title:Object(l.a)("Des contenus créés pour vous"),body:Object(l.a)("Retrouvez nos playlists Business et la sélection de nos éditos Deezer. À tout moment, faites glisser une playlist pour la déposer directement dans un de vos plannings."),closeBtn:!0,direction:"right-bottom",user_settings:{business_playlists_panel:!1},overlay:{className:"has-focus-business-playlists"},trigger:function(){return Boolean(b.default.getState().user.USER.SETTING.tips.business_playlists_panel)},style:function(){var e=document.getElementById("business-curated-panel-toggle"),t={top:e.getBoundingClientRect().top-10+"px",left:e.getBoundingClientRect().width-10+"px"};return t}}},playlist_assistant:function(){return{active:!0,name:"playlist_assistant",title:Object(l.a)("Rajoutez des titres à votre playlist !"),body:Object(l.a)("Besoin d'inspiration ? On vous recommande des titres à ajouter à votre playlist."),closeBtn:!0,direction:"right-bottom",user_settings:{playlist_assistant:!1},overlay:{className:"has-focus-playlist-assistant"},trigger:function(){return Boolean(b.default.getState().user.USER.SETTING.tips.playlist_assistant)},style:function(){var e=document.getElementById("naboo_datagrid_add_track"),t={top:e.getBoundingClientRect().top-e.getBoundingClientRect().height/2+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+6+"px"};return t}}},playlist_assistant_suggest:function(){return{active:!0,name:"playlist_assistant_suggest",title:Object(l.a)("Vous avez compris le principe ?"),body:Object(l.a)('Vous pouvez stopper à tout moment. Il suffit de cliquer sur "Terminé !".'),closeBtn:!0,user_settings:{playlist_assistant_suggest:!1},trigger:function(){return Boolean(b.default.getState().user.USER.SETTING.tips.playlist_assistant_suggest)},style:function(){var e=document.getElementById("modal_playlist_assistant_submit"),t=document.getElementById("tips_playlist_assistant_suggest"),n={"z-index":8e3,top:e.getBoundingClientRect().top+1.5*e.getBoundingClientRect().height-t.getBoundingClientRect().height+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+10+"px"};return n}}},playerfocus:function(){return{active:!0,name:"playerfocus",play:!0,body:Object(l.a)("Écoutez vite la musique que vous avez choisie !"),closeBtn:!0,direction:"right",tracking:{key:"onboarding_feed_display",context:"onboarding"},overlay:{className:"has-focus-player"},user_settings:{player:!1},callback:function(){u.a.ready(u.a.user.userReady,function(){var e=d.a.data;void 0!==e.FAVORITES_ARTISTS.data[0]?f.a.play({type:"artist",id:e.FAVORITES_ARTISTS.data[0].ART_ID,autoplay:!1,context:{TYPE:f.a.getContext("TYPE"),ID:e.FAVORITES_ARTISTS.data[0].ART_ID}}):d.a.loadData("genre")}),u.a.subscribeOnce(u.a.user.userLoadData,function(e,t){if("genre"===t.type){var n=d.a.data.FAVORITES_GENRES.data;void 0!==n[0]&&m.a.call({method:"deezer.pageTops",data:{nb:1,type:"track",genre_id:n[0].GENRE_ID},success:function(e){void 0!==e.ITEMS.data[0]&&f.a.play({type:"track",id:[e.ITEMS.data[0].SNG_ID],autoplay:!1,context:{TYPE:f.a.getContext("TYPE"),ID:e.ITEMS.data[0].SNG_ID}})}})}})},trigger:function(){return Boolean(b.default.getState().user.USER.SETTING.tips.player)},style:function(){var e=document.getElementById("player-cover"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return j.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+a.height/2-8+"px"};return"rtl"===c.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},flow:function(){return{active:!0,name:"flow",title:Object(l.a)("Toute la musique que vous avez envie d'écouter"),body:Object(l.a)("Votre Flow : un mix basé sur vos goûts, qui s'adapte continuellement à vous. "),direction:"bottom-right",overlay:{className:"has-focus-flow"},user_settings:{flow:!1},trigger:function(){var e=document.getElementsByClassName("flow-content").length;return Boolean(b.default.getState().user.USER.SETTING.tips.flow&&e)},style:function(){var e=document.getElementById("flow-love");if(null===e)return j.close(this.name),{};var t=e.childNodes[0].getBoundingClientRect(),n={top:t.top+t.height+20+"px",left:t.left-3+"px"};return n}}},lyrics:function(){return{active:!0,name:"lyrics",title:Object(l.a)("Vous avez repéré le micro ?"),body:Object(l.a)("Les paroles sont disponibles, cliquez et commencez à chanter."),direction:"right-top",overlay:{className:"has-focus-lyrics"},user_settings:{lyrics:0},trigger:function(){return!(b.default.getState().user.USER.SETTING.tips.lyrics<=0)&&(0!==f.a.getCurrentSong("LYRICS_ID")&&(!(b.default.getState().user.USER.SETTING.tips.lyrics>1)||(y.a.set({tips:{lyrics:Math.round(b.default.getState().user.USER.SETTING.tips.lyrics-1)}}),!1)))},style:function(){var e=document.getElementById("player-lyrics"),t=document.getElementById("tips_lyrics");if(null===e||null===t)return j.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top-a.height+42+"px"};return"rtl"===c.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},add_to_library:function(){return{active:!0,name:"add_to_library",title:"",body:"",direction:"bottom",overlay:{className:"has-focus-add-library"},user_settings:{add_to_library:!1},callback:function(){var e=window.getCurrentPage(),t=window[e].data;"playlist"===e?(this.title=Object(l.a)("Vous avez envie de retrouver cette playlist ?"),this.body=Object(l.a)("Ajoutez-la à votre musique préférée, vous pouvez la réécouter à tout moment.")):"album"===e?(this.title=Object(l.a)("%1$s vous a plu ?",{sprintf:[t.ALB_TITLE]}),this.body=Object(l.a)("Vous aimez, vous nous le dites, il est directement ajouté à vos favoris.")):"artist"===e&&(this.title=Object(l.a)("Envie d'écouter %1$s plus tard ?",{sprintf:[t.DATA.ART_NAME]}),this.body=Object(l.a)("Retrouvez vos artistes préférés rapidement en les ajoutant à vos favoris."))},trigger:function(){var e=window.getCurrentPage();if("object"!==E(window[e]))return!1;var t=window[e].id;if(0===t||!e.match(/^(playlist|album|artist)$/i))return!1;if(d.a.isFavorite(e,t))return!1;return!(!document.getElementById("add_to_library")||!1===b.default.getState().user.USER.SETTING.tips.add_to_library)},style:function(){var e=document.getElementById("add_to_library"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return j.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+n.height+15+"px",left:n.left-a.width/2+42+"px"};return r}}}}},w={init:function(){!0===b.default.getState().user.USER.SETTING.tips.flow&&u.a.ready(u.a.flow.playerDisplay,function(){setTimeout(function(){j.draw("flow",!0)},1e3)}),b.default.getState().user.USER.SETTING.tips.lyrics>0&&u.a.subscribe(u.a.player.play,function(){setTimeout(function(){j.draw("lyrics",!0)},1e3)},"tips"),!0===b.default.getState().user.USER.SETTING.tips.add_to_library&&u.a.subscribe(u.a.navigation.page_displayed,function(){setTimeout(function(){j.draw("add_to_library",!0)},1e3)})}};t.a=j},"./node_modules/lodash.throttle/index.js":function(e,t,n){(function(t){function n(e,t,n){function r(t){var n=p,a=d;return p=d=void 0,b=t,h=e.apply(a,n)}function i(e){var n=e-y;return void 0===y||n>=t||n<0||O&&e-b>=f}function l(){var e=E();if(i(e))return c(e);m=setTimeout(l,function(e){var n=t-(e-y);return O?v(n,f-(e-b)):n}(e))}function c(e){return m=void 0,j&&p?r(e):(p=d=void 0,h)}function u(){var e=E(),n=i(e);if(p=arguments,d=this,y=e,n){if(void 0===m)return function(e){return b=e,m=setTimeout(l,t),g?r(e):h}(y);if(O)return m=setTimeout(l,t),r(y)}return void 0===m&&(m=setTimeout(l,t)),h}var p,d,f,h,m,y,b=0,g=!1,O=!1,j=!0;if("function"!=typeof e)throw new TypeError(s);return t=o(t)||0,a(n)&&(g=!!n.leading,f=(O="maxWait"in n)?_(o(n.maxWait)||0,t):f,j="trailing"in n?!!n.trailing:j),u.cancel=function(){void 0!==m&&clearTimeout(m),b=0,p=y=d=m=void 0},u.flush=function(){return void 0===m?h:c(E())},u}function a(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function r(e){return"symbol"==(void 0===e?"undefined":i(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}(e)&&g.call(e)==c}function o(e){if("number"==typeof e)return e;if(r(e))return l;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=d.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):p.test(e)?l:+e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,c="[object Symbol]",u=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt,m="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,b=m||y||Function("return this")(),g=Object.prototype.toString,_=Math.max,v=Math.min,E=function(){return b.Date.now()};e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(s);return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./sass/bootstrap.scss":function(e,t){},"./sass/naboo.scss":function(e,t){}},["./js/_bundles/app-web.js"]);
//# sourceMappingURL=https://files.deezer.com/cache/js/app-web.13f60cbaa58834e327f6.js.map.json