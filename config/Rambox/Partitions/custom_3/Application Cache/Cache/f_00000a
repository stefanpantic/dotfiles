webpackJsonp(["app-web","components-player-store-config"],{"../front/files/css/sass/deezer.scss":function(e,t){},"./js/Feed/store/index.js":function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=void 0;switch(t.type){case U.a:return n=[t.id].concat(e.COMMENTS.data).slice(0,B),F({},e,{COMMENTS:F({},e.COMMENTS,{count:Math.min(e.COMMENTS.count+1,B),data:n,total:e.COMMENTS.total+1})});case U.b:return n=e.COMMENTS.data.filter(function(e){return e!==t.data.id}),F({},e,{COMMENTS:F({},e.COMMENTS,{count:e.COMMENTS.count-1,data:n,total:e.COMMENTS.total-1})});default:return e}}var r=n("./node_modules/normalizr/lib/index.js"),o=n("./js/_modules/api.js"),i=n("./js/_modules/Type.js"),s=n("./js/_modules/redux/stores/entities/schemas.js"),l=new r.Schema("EPISODE_CARD",{idAttribute:"CARD_ID"}),c=new r.Schema("PROMO_CARD",{idAttribute:"CARD_ID"}),u=new r.Schema("RADIO_CARD",{idAttribute:"CARD_ID"}),p=new r.Schema("SHOW_CARD",{idAttribute:"CARD_ID"}),d=new r.Schema("SONG_CARD",{idAttribute:"CARD_ID"}),f=new r.Schema("ALBUM_CARD",{idAttribute:"CARD_ID"});f.define({COMMENTS:{data:Object(r.arrayOf)(s.d)}});var h=new r.Schema("ARTIST_CARD",{idAttribute:"CARD_ID"});h.define({COMMENTS:{data:Object(r.arrayOf)(s.d)}});var m=new r.Schema("PLAYLIST_CARD",{idAttribute:"CARD_ID"});m.define({COMMENTS:{data:Object(r.arrayOf)(s.d)}});var y={ALBUM:f,ARTIST:h,EPISODE:l,PLAYLIST:m,PROMO:c,RADIO:u,SHOW:p,SONG:d},b=new r.Schema("FEED",{idAttribute:function(){return"current"}});b.define({data:Object(r.valuesOf)(y,{schemaAttribute:"TYPE"})});var _=b,g=n("./node_modules/reselect/es/index.js"),v=n("./node_modules/lodash.isequal/index.js"),E=n.n(v),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T=Object(g.b)(g.c,E.a),j=function(e,t,n){return e.cards[t.toLowerCase()][n]},S=function(e,t,n){var a=j(e,t,n);return a&&a[t+"_SONGS"]?a[t+"_SONGS"].data:[]},w=function(e,t,n){var a=j(e,t,n);if(a&&a.CURATOR)return a.CURATOR},A=function(e,t,n){var a=j(e,t,n);return a&&a.COMMENTS?a.COMMENTS.total:0},P=function(e,t,n,a){var r=j(t,n,a);return r&&r.COMMENTS?r.COMMENTS.data.map(function(t){return e.COMMENTS[t]}):[]},C=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA){var r=a.DATA,o=r.ARTISTS||[];return O({},r,{ARTISTS:o})}},w,function(e,t,n){var a=j(e,t,n);if(a&&a.CONTEXT_ARTIST)return a.CONTEXT_ARTIST},function(e,t,n){var a=j(e,t,n);return a&&a.SIMILAR_ARTISTS?a.SIMILAR_ARTISTS.data:[]},S,function(e,t,n){var a=j(e,t,n);return a&&a.DISCOGRAPHY?a.DISCOGRAPHY.data:[]},function(e,t,n){var a=j(e,t,n);return a&&a.DISCOGRAPHY?a.DISCOGRAPHY.total:0},A],function(e,t,n,a,r,o,i,s,l){return O({},e,{DATA:t,CURATOR:n,CONTEXT_ARTIST:a,SIMILAR_ARTISTS:r,ALBUM_SONGS:o,DISCOGRAPHY:i,TOTAL_DISCOGRAPHY:s,TOTAL_COMMENTS:l})}),N=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w],function(e,t,n){return O({},e,{DATA:t,CURATOR:n})}),k=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w],function(e,t,n){return O({},e,{DATA:t,CURATOR:n})}),R=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w,S,function(e,t,n){var a=j(e,t,n);return a&&a.PLAYLIST_ARTISTS?a.PLAYLIST_ARTISTS.data:[]},A],function(e,t,n,a,r,o){return O({},e,{DATA:t,CURATOR:n,PLAYLIST_SONGS:a,PLAYLIST_ARTISTS:r,TOTAL_COMMENTS:o})}),D=j,I=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w],function(e,t,n){return O({},e,{DATA:t,CURATOR:n})}),x=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w,function(e,t,n){var a=j(e,t,n);return a&&a.FRIENDS_LIST?a.FRIENDS_LIST.data:[]}],function(e,t,n,a){return O({},e,{DATA:t,CURATOR:n,FRIENDS_LIST:a})}),L=T([j,function(e,t,n){var a=j(e,t,n);if(a&&a.DATA)return a.DATA},w],function(e,t,n){return O({},e,{DATA:t,CURATOR:n})}),M=T([function(e){return e&&e.data?e.data.map(function(t){var n=t.id,a=t.schema;return j(e,a,n)}):[]},function(e){return e&&e.data.length?Number(e.data[e.data.length-1].id):0}],function(e,t){return{cards:e,lastId:t}}),U=n("./js/_modules/redux/stores/entities/comments.js");n.d(t,"l",function(){return Y}),n.d(t,"b",function(){return C}),n.d(t,"c",function(){return N}),n.d(t,"d",function(){return k}),n.d(t,"e",function(){return R}),n.d(t,"f",function(){return D}),n.d(t,"g",function(){return L}),n.d(t,"h",function(){return I}),n.d(t,"i",function(){return x}),n.d(t,"k",function(){return M}),n.d(t,"j",function(){return P});var F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},B=4,H=!1,G={data:[],cards:{album:{},artist:{},episode:{},playlist:{},promo:{},radio:{},show:{},song:{}},count:0,total:0},z=(t.a=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,r=arguments[1],o=void 0,s=void 0,l=void 0;switch(r.type){case"pages/Feed/FETCHED_FEED_SUCCESS":return F({},n,{data:[].concat(n.data,r.data.entities.FEED.current.data),cards:{album:F({},n.cards.album,r.data.entities.ALBUM_CARD),artist:F({},n.cards.artist,r.data.entities.ARTIST_CARD),episode:F({},n.cards.episode,r.data.entities.EPISODE_CARD),playlist:F({},n.cards.playlist,r.data.entities.PLAYLIST_CARD),promo:F({},n.cards.promo,r.data.entities.PROMO_CARD),radio:F({},n.cards.radio,r.data.entities.RADIO_CARD),show:F({},n.cards.show,r.data.entities.SHOW_CARD),song:F({},n.cards.song,r.data.entities.SONG_CARD)},count:n.count+r.data.entities.FEED.current.count,total:r.data.entities.FEED.current.total});case U.a:case U.b:return o=r.data.type===i.a.Playlist?"PLAYLIST_ID":"ALB_ID",s=Object.keys(n.cards[r.data.type]),l=s.find(function(e){return Number(n.cards[r.data.type][e].DATA[o])===r.data.elementId}),F({},n,{cards:F({},n.cards,(t={},t[r.data.type]=F({},n.cards[r.data.type],(e={},e[l]=a(n.cards[r.data.type][l],r),e)),t))});default:return n}},function(e){return function(t){return H=!0,o.a.call({method:"musicfeed.getList",data:{last_card_id:e.lastId,nb:e.nb,filter_types:e.filterTypes},success:function(e){var n=Object(r.normalize)(e,_);t({type:"pages/Feed/FETCHED_FEED_SUCCESS",data:n}),H=!1},error:function(){t({type:"pages/Feed/FETCHED_FEED_ERROR"}),H=!1}})}}),Y=function(e){return function(t,n){var a=n().feed,r=a.data.findIndex(function(t){return Number(t.id)===e.lastId})+1,o=a.data.slice(r,r+e.nb);return a&&o.length===e.nb?t({type:"pages/Feed/FETCHED_FEED_FROM_CACHE"}):(e.lastId=o.length?o[o.length-1].id:e.lastId,H?Promise.resolve():t(z(e)))}}},"./js/Search/store/index.js":function(e,t,n){"use strict";n.d(t,"d",function(){return d}),n.d(t,"c",function(){return f}),t.a=function(){u.forEach(i.a.cancel)},n.d(t,"e",function(){return y});var a=n("./node_modules/reselect/es/index.js"),r=n("./node_modules/lodash.isequal/index.js"),o=n.n(r),i=n("./js/_modules/api.js"),s=n("./js/_modules/gatekeeper.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=Object(a.b)(a.c,o.a),u=[],p={count:0,data:[],total:0};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"pages/Search/FETCHED_SEARCH_RESULTS":return l({},t.data);case"pages/Search/FETCHED_NO_RESULT_DATA":return l({},e,{NO_RESULT_DATA:t.data});default:return e}};var d=function(e){return function(t){var n=i.a.call({method:e.isTagQuery?"deezer.tagSearch":"deezer.pageSearch",data:{query:e.query,start:0,nb:40,suggest:!0,artist_suggest:!0,top_tracks:!0},success:function(e){t({type:"pages/Search/FETCHED_SEARCH_RESULTS",data:e})}});u.push(n)}},f=function(){return function(e){var t=i.a.call({method:"deezer.pageTops",data:{genre_id:0,type:"all",nb:7},success:function(t){e({type:"pages/Search/FETCHED_NO_RESULT_DATA",data:{artists:t.ITEMS.artist.data,albums:t.ITEMS.album.data,tracks:t.ITEMS.track.data}})}});u.push(t)}},h=function(e){var t=e.QUERY||"",n=e.REVISED_QUERY||"";return"true"===(e.AUTOCORRECT||"false")&&""!==n?n:t},m=function(e){var t=e.QUERY||"",n=e.REVISED_QUERY||"";return"true"===(e.AUTOCORRECT||"false")?t:n},y=c([function(e){var t=h(e);return{QUERY:t,REVISED_QUERY:m(e),ALTERNATIVE_QUERIES:e.ALTERNATIVE_QUERIES||[],TAG:e.TAG||[],FILTER:e.FILTER||"all",IS_FORCED_QUERY:"+"===t.charAt(0)&&t.length>1,AUTOCORRECT:"true"===e.AUTOCORRECT||!1}},function(e){return e.ALBUM||Object.assign({},p)},function(e){return e.ARTIST||Object.assign({},p)},function(e){return e.CHANNEL||Object.assign({},p)},function(e){return e.LIVESTREAM||Object.assign({},p)},function(e){return e.PLAYLIST||Object.assign({},p)},function(e){return e.RADIO||Object.assign({},p)},function(e){return e.SHOW||Object.assign({},p)},function(e){return e.TRACK||Object.assign({},p)},function(e){return e.USER||Object.assign({},p)},function(e){return e.RELATED_CONTENT||Object.assign({},p)},function(e){return e.NO_RESULT_DATA||void 0}],function(e,t,n,a,r,o,i,c,u,p,d,f){var h=[u.total,n.total,t.total,o.total,i.total];return s.a.isAllowed("search_channel")&&h.push(a.total),s.a.isAllowed("search_users")&&h.push(p.total),s.a.isAllowed("talk")&&h.push(c.total),s.a.isAllowed("search_livestream")&&h.push(r.total),l({},e,{HAS_RESULTS:h.some(function(e){return e>0}),ALBUM:t,ARTIST:n,CHANNEL:a,LIVESTREAM:r,PLAYLIST:o,RADIO:i,SHOW:c,TRACK:u,USER:p,RELATED_CONTENT:d,NO_RESULT_DATA:f})})},"./js/_bundles/app-web.js":function(e,t,n){"use strict";function a(){Object(b.b)(),Object(b.a)(),E.b.init(),Object(O.i)(),j.a.init(),T.a.init(),S.a.init(),A.a.init(),E.a.init(),w.a.init(),y.a.init(),Object(f.a)(),p.a.trigger(p.a.navigation.page_changed,{path:b.c.getCurrentPath()});var e=document.querySelector("[data-layout=onboarding]"),t=document.getElementById("dzr-app");if(!e&&t&&"web"===d.a.get("PLATFORM")){"classList"in document.body&&document.body.classList.add("os-"+P.a.OS.toLowerCase(),"platform-"+(C.a.current===C.a.electron?"electron":"web"));var n=window.__DZR_APP_STATE__||{},a=window.__DZR_MODAL_PATH__||{};n.legacyContent=t.querySelector("#naboo_content").innerHTML;var r=Object(N.a)(n);s.a.render(o.a.createElement(k.a,{store:r,appState:n,modalPath:a}),t)}}Object.defineProperty(t,"__esModule",{value:!0});n("./js/_modules/publicPath.js");var r=n("./node_modules/react/react.js"),o=n.n(r),i=n("./node_modules/react-dom/index.js"),s=n.n(i),l=n("./sass/bootstrap.scss"),c=(n.n(l),n("../front/files/css/sass/deezer.scss")),u=(n.n(c),n("./sass/naboo.scss")),p=(n.n(u),n("./js/_modules/flash_detect.js"),n("./js/_modules/Events.js")),d=n("./js/_modules/config/index.js"),f=n("./js/_modules/monitoring/jiraIssueCollector.js"),h=n("./js/_modules/logger/browser.js"),m=n("./js/_modules/monitoring/reportSlowResources.js"),y=n("./js/_modules/tips.js"),b=n("./js/_modules/www.js"),_=n("./js/_modules/infinite_scroll.js"),g=n("./node_modules/lodash.throttle/index.js"),v=n.n(g),E=n("./js/_modules/notification.js"),O=n("./js/_modules/utils.js"),T=n("./js/_modules/userData.js"),j=n("./js/_modules/dzoffline.js"),S=n("./js/_modules/tracking.js"),w=n("./js/_modules/storage.js"),A=n("./js/_modules/favorite.js"),P=(n("./js/_modules/api.js"),n("./js/_modules/BrowserDetect.js")),C=n("./js/_modules/ui.js"),N=n("./js/_modules/redux/createStore.js"),k=n("./js/_components/Root.js");window.onunhandledrejection=function(e){e.reason&&"Readable side canceled"!==e.reason.message&&h.a.error(e.reason)},document.addEventListener("DOMContentLoaded",function(){a()}),p.a.subscribe(p.a.navigation.page_displayed,m.a),window.addEventListener("scroll",v()(function(){_.a.checkPosition(),p.a.trigger(p.a.layout.scroll,{height:window.innerHeight,yscroll:window.pageYOffset})},100),{passive:!0}),d.a.get("USER.USER_ID")&&p.a.resolve(p.a.user.loaded)},"./js/_components/App/components/LoadingBar.js":function(e,t,n){"use strict";(function(e){function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/react/react.js"),l=n.n(s),c=n("./node_modules/classnames/index.js"),u=n.n(c),p=n("./js/_modules/Events.js"),d=void 0,f=void 0,h=void 0,m=function(t){function n(){r(this,n);var e=o(this,t.call(this));return e._onPageChanged=e._onPageChanged.bind(e),e._onPageDisplayed=e._onPageDisplayed.bind(e),e._updateWidth=e._updateWidth.bind(e),e._onTransitionEnd=e._onTransitionEnd.bind(e),e.state={isLoading:!1,width:0},e}return i(n,t),n.prototype.componentDidMount=function(){p.a.subscribe(p.a.navigation.page_changed,this._onPageChanged),p.a.subscribe(p.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.componentWillUnmount=function(){clearTimeout(d),clearTimeout(h),clearInterval(f),p.a.unsubscribe(p.a.navigation.page_changed,this._onPageChanged),p.a.unsubscribe(p.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.render=function(){var e=u()({"page-loader":!0,opened:this.state.isLoading}),t=u()({"page-loader-bar":!0,"has-transition":this.state.hasTransition});return l.a.createElement("div",{className:e,id:"page_loader",ref:"content"},l.a.createElement("div",{className:t,style:{width:this.state.width+"%"}}))},n.prototype._onPageChanged=function(){var e=this;this.state.isLoading||(this.setState({isLoading:!0,hasTransition:!0,width:20+55*Math.random()}),d=setTimeout(function(){e._updateWidth(),f=setInterval(e._updateWidth,1e3)},1e3))},n.prototype._onPageDisplayed=function(){var t=this;e.nextTick(function(){t.state.isLoading&&(clearTimeout(d),clearInterval(f),t.setState({hasTransition:!1,width:100}),h=setTimeout(function(){t.refs.content.addEventListener("transitionend",t._onTransitionEnd,!1),t.setState({isLoading:!1})},500))})},n.prototype._onTransitionEnd=function(){this.setState({width:0}),this.refs.content.removeEventListener("transitionend",this._onTransitionEnd)},n.prototype._updateWidth=function(){this.state.width>=90&&clearInterval(f),this.setState({width:this.state.width+5})},n}(s.Component);t.a=m}).call(t,n("./node_modules/process/browser.js"))},"./js/_components/DataGrid/DataGrid.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}function p(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):p(e,t))}function m(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):m(e,t))}function g(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):g(e,t))}function T(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):T(e,t))}function A(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):A(e,t))}function k(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):k(e,t))}function x(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):x(e,t))}function F(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):F(e,t))}function z(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):z(e,t))}function W(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):W(e,t))}function $(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$(e,t))}function te(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):te(e,t))}function oe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):oe(e,t))}function ce(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ce(e,t))}function fe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):fe(e,t))}function be(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):be(e,t))}function Ee(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ee(e,t))}function Se(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Se(e,t))}function Ce(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ce(e,t))}function De(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):De(e,t))}function Me(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Me(e,t))}function He(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):He(e,t))}function qe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):qe(e,t))}function Qe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Qe(e,t))}function Ze(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ze(e,t))}function at(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):at(e,t))}function st(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ut(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):st(e,t))}function pt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):pt(e,t))}function mt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):mt(e,t))}function gt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):gt(e,t))}function Tt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Tt(e,t))}function At(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):At(e,t))}function kt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):kt(e,t))}function xt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ut(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):xt(e,t))}function Ft(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ft(e,t))}function zt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):zt(e,t))}function Wt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Wt(e,t))}function $t(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function en(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$t(e,t))}var tn=n("./node_modules/prop-types/index.js"),nn=n.n(tn),an=n("./node_modules/react/react.js"),rn=n.n(an),on=n("./node_modules/react-dom/index.js"),sn=n.n(on),ln=n("./js/_modules/Events.js"),cn=n("./js/_modules/api.js"),un=n("./js/_modules/i18n.js"),pn=n("./js/_modules/modal.js"),dn=n("./js/_modules/models/Track.js"),fn=n("./js/_modules/config/index.js"),hn=n("./js/_modules/gatekeeper.js"),mn=n("./js/_modules/Store.js"),yn=function(){return new mn.a({items:{},defaultSelection:!1,fill:function(e){for(var t=[],n=0,a=e.length;n<a;n++)t[e[n]]=this.items[e[n]]||{selected:this.defaultSelection,displayContributors:!1};return this.items=t,this.emitChange(),this},reset:function(){return this.defaultSelection=!1,this.items={},this.emitChange(),this},setDefaultSelection:function(e){return this.defaultSelection=e,this},selectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!0);return this.emitChange("selection"),this},unselectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!1);return this.emitChange("selection"),this},toggleSelection:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!this.items[e].selected,this.emitChange("selection"),this)},select:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!0,this.emitChange("selection"),this)},unselect:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!1,this.emitChange("selection"),this)},isSelected:function(e){return this.items[e]&&this.items[e].selected},hasOneSelected:function(){for(var e in this.items)if(this.items.hasOwnProperty(e)&&!0===this.items[e].selected)return!0;return!1},toggleContributors:function(e){if(void 0===this.items[e])return this;var t=this.items[e].displayContributors;return this.hideAllContributors(),!1===t&&(this.items[e].displayContributors=!0),this.emitChange("contributors"),this},displayContributors:function(e){return void 0===this.items[e]?this:(this.items[e].displayContributors=!0,this.emitChange("contributors"),this)},hideContributors:function(e){return void 0===this.items[e]?this:(this.items[e].displayContributors=!1,this.emitChange("contributors"),this)},hasDisplayedContributors:function(e){return this.items[e]&&this.items[e].displayContributors},getDisplayedContributors:function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&this.items[t].displayContributors&&e.push(Number(t));return e},hideAllContributors:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].displayContributors=!1);return this.emitChange("contributors"),this}})},bn=n("./js/_modules/dzPlayer.js"),_n=n("./js/_components/DataGrid/utils.js"),gn=n("./js/_components/DataGrid/presets/index.js"),vn=n.n(gn),En=n("./node_modules/classnames/index.js"),On=n.n(En),Tn=n("./js/_modules/portalPositioning.js"),jn=n("./js/_modules/userData.js"),Sn=n("./js/_components/Portal/index.js"),wn=n("./js/_components/ContextMenu/elements/TrackMenu.js"),An=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onRightClick=a._onRightClick.bind(a),a._reset=a._reset.bind(a),a.state={style:{},show:!1,animate:!1,trackProps:!1},a}return i(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.menu.contextMenuRightClickOpen,this._onRightClick),ln.a.subscribe(ln.a.menu.contextMenuClose,this._reset),ln.a.subscribe(ln.a.navigation.page_displayed,this._reset)},t.prototype.componentWillUnmount=function(){clearTimeout(this._openTimeoutRef),ln.a.unsubscribe(ln.a.menu.contextMenuRightClickOpen,this._onRightClick),ln.a.unsubscribe(ln.a.menu.contextMenuClose,this._reset),ln.a.unsubscribe(ln.a.navigation.page_displayed,this._reset)},t.prototype.render=function(){var e=this.state,t=e.animate,n=e.show,a=e.trackProps,r=Object.assign({},this.state.style),o=On()({"page-contextmenu":!0,opened:t});return n&&(r.display="block"),rn.a.createElement(Sn.a,{id:"grid-context-menu-portal",show:n,onOutsideClose:this._reset},rn.a.createElement("div",{className:o,style:r,ref:"content"},rn.a.createElement("div",{className:"popover"},a?rn.a.createElement(wn.a,a):null)))},t.prototype._onRightClick=function(e,t){var n=this;ln.a.trigger(ln.a.menu.contextMenuClose,this.props.id),this._openTimeoutRef=setTimeout(function(){n._open(t)},0)},t.prototype._open=function(e){var t=this;this.setState({show:!0},function(){var n=Array.isArray(e.id)?e.id:[e.id],a=1===n.length&&jn.a.isFavorite("song",n[0]),r={data:e.data,id:n,context:e.context,listenContext:e.listenContext,type:"track",isFavorite:a,isRadio:bn.a.isRadio()};t.setState({animate:!0,trackProps:r},function(){t._position(e)})})},t.prototype._reset=function(e,t){this.state.show&&(t&&this.props.id===t||this.setState({show:!1,animate:!1}))},t.prototype._position=function(e){var t=this.refs.content.getBoundingClientRect(),n={height:0,width:0,left:e.style.left,top:e.style.top},a=Tn.a.getClipping(n,t,"right"),r=a.isOverTop,o=a.isOverBottom,i=a.isOverRight,s=e.style.left,l=e.style.top-t.height/2;r?l=e.style.top-30:o&&(l=e.style.top-t.height),i&&(s=e.style.left-t.width),this.setState({style:{left:s,top:l}})},t}(an.Component),Pn=function(e){function t(n){l(this,t);var a=c(this,e.call(this,n));return a._onScroll=a._onScroll.bind(a),a._updateOffset=a._updateOffset.bind(a),a._updateStateFinal=a._updateStateFinal.bind(a),a.state={start:0,end:Math.ceil(window.innerHeight/n.elementHeight),numberOfChildren:n.children.length,isScrolling:!1},a}return u(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.layout.scroll,this._onScroll),ln.a.subscribe(ln.a.ads.hideAdBlockBanner,this._updateOffset),this._updateOffset()},t.prototype.componentWillReceiveProps=function(e){this.setState({numberOfChildren:e.children.length})},t.prototype.shouldComponentUpdate=function(e,t){var n=this.state,a=n.start,r=n.end,o=n.numberOfChildren,i=n.isScrolling;return a!==t.start||r!==t.end||o!==t.numberOfChildren||i!==t.isScrolling||o>0&&this.props.children[o-1].key!==e.children[o-1].key},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.layout.scroll,this._onScroll),ln.a.unsubscribe(ln.a.ads.hideAdBlockBanner,this._updateOffset),clearTimeout(this._scrollingTimeout)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.containerClassName,a=e.containerType,r=this.state,o=r.start,i=r.end,s=r.isScrolling,l=this._getDividers(t),c=t.slice(o,i+l.length);return rn.a.createElement(a,{style:{pointerEvents:s?"none":"auto"},className:n},this._renderTopSpacer(),c,this._renderBottomSpacer())},t.prototype._renderTopSpacer=function(){return rn.a.createElement(this.props.spacerType,{key:"topSpacer",style:{height:this.state.start*this.props.elementHeight}})},t.prototype._renderBottomSpacer=function(){var e=this.props,t=e.children,n=e.spacerType,a=e.elementHeight,r=this.state,o=r.numberOfChildren,i=r.end,s=this._getDividers(t);return rn.a.createElement(n,{key:"bottomSpacer",style:{height:Math.max(0,(o-i-s.length)*a)}})},t.prototype._onScroll=function(e,t){var n=t.height,a=t.yscroll;this._scrollingTimeout&&clearTimeout(this._scrollingTimeout),this._updateState(!0,n,a),this._scrollingTimeout=setTimeout(this._updateStateFinal,this.props.stateTTL)},t.prototype._updateState=function(e,t,n){e=Boolean(e);var a=this.props.elementHeight,r=this.state.numberOfChildren,o=t/2,i=t,s=o*Math.floor((n-this._offsetTop)/o),l=s+o,c=Math.floor(Math.max(0,s-i)/a),u=Math.ceil(Math.min(a*r,l+i)/a);this.state.start===c&&this.state.end===u&&this.state.isScrolling===e||c>u||this.setState({start:c,end:u,isScrolling:e})},t.prototype._updateStateFinal=function(){this.setState({isScrolling:!1})},t.prototype._updateOffset=function(){this._offsetTop=sn.a.findDOMNode(this).getBoundingClientRect().top},t.prototype._getDividers=function(e){return e.filter(function(e){return"divider"===e.key})},t}(an.Component);Pn.defaultProps={containerType:"div",spacerType:"div",stateTTL:150};var Cn=Pn,Nn=n("./js/_modules/sharebox.js"),kn=n("./js/_modules/player/PlayerMetrics.js"),Rn=n("./js/_components/StatesButton/index.js"),Dn=function(e){function t(n){d(this,t);var a=f(this,e.call(this,n));return a._onTogglePlayAll=a._onTogglePlayAll.bind(a),a}return h(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe("EVENT.DATAGRID.togglePlayAll",this._onTogglePlayAll)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe("EVENT.DATAGRID.togglePlayAll",this._onTogglePlayAll)},t.prototype.render=function(){return rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Rn.a,{id:Number(this.context.id),type:this._getType(),items:this.props.items,action:"play",color:"primary",wording_type:"full",play_context:this.context.name}))},t.prototype._onTogglePlayAll=function(){if(this._hasSameContext())return kn.a.intent("toggle"),void bn.a.control.togglePause();kn.a.intent("play"),bn.a.play({type:this._getType(),id:Number(this.context.id),data:this.props.items,radio:"artist_smartradio"===this.context.name||"profile_user_radio"===this.context.name,context:{TYPE:this.context.name,ID:Number(this.context.id)}})},t.prototype._hasSameContext=function(){var e=bn.a.getContext();return null!==e&&(fn.a.get("LOG_CONTEXT")[Object(_n.b)(e.TYPE)]===fn.a.get("LOG_CONTEXT")[this.context.name]&&e.ID===this.context.id)},t.prototype._getType=function(){var e=this.props.type;return-1!==["chartsPlaylist","personalPlaylist","curatorPlaylist","collaborativePlaylist"].indexOf(e)?"playlist":"personalLoved"===e?"loved":"personalSong"===e?"personal_song":e},t}(an.Component);Dn.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string.isRequired};var In=Dn,xn=n("./node_modules/react-addons-pure-render-mixin/index.js"),Ln=n.n(xn),Mn=n("./js/_components/Tooltip/index.js"),Un=rn.a.createElement("span",{className:"icon icon-add"}),Fn=rn.a.createElement("span",{className:"icon icon-add"}),Bn=function(e){function t(n){y(this,t);var a=b(this,e.call(this,n));return a.shouldComponentUpdate=Ln.a.shouldComponentUpdate.bind(Ln.a),a._onResize=a._onResize.bind(a),a._initAds=a._initAds.bind(a),a._onPlaylistAssistantClick=a._onPlaylistAssistantClick.bind(a),a.state={displayLabel:window.innerWidth>1080,hasAdsFull:!1},a}return _(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.layout.resize,this._onResize),ln.a.subscribe(ln.a.layout.adsBackground,this._initAds)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.layout.resize,this._onResize),ln.a.unsubscribe(ln.a.layout.adsBackground,this._initAds)},t.prototype.render=function(){var e=rn.a.createElement("button",{onClick:this._onPlaylistAssistantClick,className:"btn btn-primary",id:"naboo_datagrid_add_track",type:"button"},Un,rn.a.createElement("span",{className:"label"},Object(un.a)("Me suggérer des titres"))),t=rn.a.createElement(Mn.a,{text:Object(un.a)("Me suggérer des titres")},rn.a.createElement("button",{onClick:this._onPlaylistAssistantClick,className:"btn btn-primary",id:"naboo_datagrid_add_track",type:"button"},Fn));return rn.a.createElement("div",{className:"toolbar-item"},this.state.displayLabel?e:t)},t.prototype._onPlaylistAssistantClick=function(){pn.a.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)},t.prototype._onResize=function(e,t){this.setState({displayLabel:t.client_width>1080&&!this.state.hasAdsFull})},t.prototype._initAds=function(e,t){this.setState({hasAdsFull:"show"===t.display,displayLabel:"show"!==t.display})},t}(an.Component);Bn.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired};var Hn=Bn,Gn=n("./js/_components/Icon/index.js"),zn=n("./js/_components/ContextMenu/Track.js"),Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn=rn.a.createElement(Gn.a,{name:"trash",size:"12"}),Vn=rn.a.createElement(Gn.a,{name:"download",size:"12"}),Wn=function(e){function t(n,a){v(this,t);var r=E(this,e.call(this,n,a));return r._apiCalls=[],r._onPlayerTypeChange=r._onPlayerTypeChange.bind(r),r._onFavoriteChange=r._onFavoriteChange.bind(r),r._updateSelection=r._updateSelection.bind(r),r._onDownloadClick=r._onDownloadClick.bind(r),r._onRemoveClick=r._onRemoveClick.bind(r),r._onRemoved=r._onRemoved.bind(r),r.state={isRadio:bn.a.isRadio(),hasOneSelected:a.store.hasOneSelected()},r}return O(t,e),t.prototype.componentDidMount=function(){this.context.store.onChange(this._updateSelection),ln.a.subscribe(ln.a.player.changePlayerType,this._onPlayerTypeChange),ln.a.ready(ln.a.user.userReady,this._onFavoriteChange),ln.a.subscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.subscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.componentWillReceiveProps=function(){this.setState({isRadio:bn.a.isRadio(),hasOneSelected:this.context.store.hasOneSelected()})},t.prototype.componentWillUnmount=function(){this._apiCalls.forEach(cn.a.cancel),this.context.store.offChange(this._updateSelection),ln.a.unsubscribe(ln.a.player.changePlayerType,this._onPlayerTypeChange),ln.a.unsubscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.unsubscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){var e=this.props.options.header;if(!1===this.state.hasOneSelected)return null;var t=[];return e.remove&&t.push(rn.a.createElement("button",{key:"remove",className:"btn btn-default",type:"button","aria-label":Object(un.a)("Supprimer"),onClick:this._onRemoveClick},qn,rn.a.createElement("span",{className:"label"},Object(un.a)("Supprimer")))),e.add&&t.push(this._renderAddContextMenu("add",Object(un.a)("Ajouter à une playlist"))),e.download&&t.push(rn.a.createElement(Mn.a,{key:"download",text:Object(un.a)("Télécharger"),position:"left"},rn.a.createElement("a",{className:"btn btn-default",role:"button",tabIndex:"0","aria-label":Object(un.a)("Télécharger"),onClick:this._onDownloadClick},Vn))),e.contextMenu&&t.push(rn.a.createElement(Mn.a,{key:"contextMenu",text:Object(un.a)("Ajouter"),position:"left"},this._renderAddContextMenu("options",Object(un.a)("Ajouter")))),0===t.length?null:rn.a.createElement("div",{className:"datagrid-cell header-actions"},t)},t.prototype._renderAddContextMenu=function(e,t){var n=void 0,a=this.props.type;switch(a){case"discography":case"topArtist":n="artist";break;case"personalPlaylist":n="playlist";break;default:n=a}for(var r=[],o=[],i=this._getSelected(),s=void 0,l=0,c=i.length;l<c;l++)s=i[l],o.push(s),r.push(Object(_n.e)(s));var u=rn.a.createElement("button",{className:"btn btn-default",role:"button",tabIndex:"0","aria-label":t},rn.a.createElement(Gn.a,{name:e,size:"12"}),"add"===e?rn.a.createElement("span",{className:"label"},t):null),p=this.state.isFavorite;void 0===p&&1===r.length&&(p=jn.a.isFavorite("song",r[0]));var d={position:"left",type:"track",forceShowPlaylists:"add"===e,data:{SONG:1===o.length?o[0]:{},PLAYLIST_ID:"playlist"===a||"personalPlaylist"===a?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===a},id:r,context:n,listenContext:{TYPE:Object(_n.b)(a),ID:this.context.id},anchor:u,containerClassname:"btn btn-default",key:"add",isFavorite:p,isRadio:this.state.isRadio};return rn.a.createElement(zn.a,d)},t.prototype._onDownloadClick=function(){var e=this,t=this.props.items.filter(function(t){return e.context.store.isSelected(Object(_n.e)(t))});if((t=t.map(function(e){return Object(_n.e)(e)})).length){var n=Object(_n.a)(t);this._apiCalls.push(n)}},t.prototype._onRemoveClick=function(){var e=this,t=this.props.items.filter(function(t){return e.context.store.isSelected(Object(_n.e)(t))});if((t=t.map(function(e){var t=Object(_n.e)(e);return[t,t>0?0:1]})).length&&confirm(Object(un.c)("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:t.length}))){var n=void 0,a=void 0,r=void 0,o=[];switch(this.props.type){case"personalLoved":for(n=0;n<t.length;n++)o.push(t[n][0]);r=cn.a.call({method:"favorite_song.removeMulti",data:{SNG_IDS:o},success:this._onRemoved,callback_parameters:{sng_list:t}}),this._apiCalls.push(r);break;case"personalPlaylist":case"collaborativePlaylist":a={playlist_id:this.context.id,songs:t},r=cn.a.call({method:"playlist.deleteSongs",data:a,success:this._onRemoved,callback_parameters:{sng_list:t}}),this._apiCalls.push(r);break;case"personalSong":for(n=0;n<t.length;n++)a={upload_id:t[n][0]},r=cn.a.call({method:"personal_song.delete",data:a,success:this._onRemoved,callback_parameters:{sng_list:[t[n][0]]}}),this._apiCalls.push(r)}}},t.prototype._onRemoved=function(e,t){if(!0===e){jn.a.removePlaylistSong(this.context.id,t.sng_list);for(var n=0,a=t.sng_list.length;n<a;n++){var r="object"===Yn(t.sng_list[n])?t.sng_list[n][0]:t.sng_list[n];this.context.store.unselect(r),"loved"===this.props.type&&"personalLoved"===this.props.type&&jn.a.isFavorite("song",r)&&jn.a.deleteFavorite({type:"song",id:r})}}},t.prototype._onPlayerTypeChange=function(){this.setState({isRadio:bn.a.isRadio()})},t.prototype._onFavoriteChange=function(e,t){var n=this._getSelected();1!==n.length||t&&("song"!==t.type||Number(t.id)!==Number(Object(_n.e)(n[0])))||this.setState({isFavorite:jn.a.isFavorite("song",Object(_n.e)(n[0]))})},t.prototype._updateSelection=function(e){"selection"===e&&this.setState({hasOneSelected:this.context.store.hasOneSelected()})},t.prototype._getSelected=function(){for(var e=[],t=0,n=this.props.items.length;t<n;t++)this.context.store.isSelected(Object(_n.e)(this.props.items[t]))&&e.push(this.props.items[t]);return e},t}(an.Component);Wn.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),store:nn.a.object.isRequired};for(var Kn=Wn,Qn=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Xn={},$n=/[^\u0000-\u007E]/g,Jn=/[^a-z0-9\u0400-\u04FF]/gi,Zn=0;Zn<Qn.length;Zn++)for(var ea=Qn[Zn].letters,ta=0;ta<ea.length;ta++)Xn[ea[ta]]=Qn[Zn].base;var na=function(e){return"string"!=typeof e?"":e.replace($n,function(e){return Xn[e]||e}).replace(Jn,"-")},aa=rn.a.createElement("span",{className:"icon icon-cancel"}),ra=function(e){function t(n){j(this,t);var a=S(this,e.call(this,n));return a._onFilterChange=a._onFilterChange.bind(a),a._onFilterClear=a._onFilterClear.bind(a),a.state={filter:""},a}return w(t,e),t.prototype.render=function(){var e=this.state.filter,t={downloads:Object(un.a)("Rechercher dans mes achats"),playlist:Object(un.a)("Rechercher dans la playlist"),personalPlaylist:Object(un.a)("Rechercher dans la playlist"),personalSong:Object(un.a)("Rechercher dans mes MP3"),folder:Object(un.a)("Rechercher dans le dossier"),favorite:Object(un.a)("Rechercher parmi les titres"),loved:Object(un.a)("Rechercher parmi les titres"),personalLoved:Object(un.a)("Rechercher parmi les titres"),history:Object(un.a)("Rechercher dans l'historique")}[this.props.type]||Object(un.a)("Rechercher dans les résultats"),n=On()({"form-control":!0,clear:""!==e});return rn.a.createElement("div",{className:"toolbar-item pull-right",role:"search","aria-label":t},rn.a.createElement("form",{className:"toolbar-search form-inline",method:"post",autoComplete:"off",onSubmit:this._onFilterSubmit},rn.a.createElement("input",{ref:"filter",className:n,id:"naboo_datagrid_filter_text",placeholder:t,onChange:this._onFilterChange,value:e,type:"search"}),rn.a.createElement("a",{className:"reset",onClick:this._onFilterClear,id:"naboo_datagrid_filter_clear",href:"#"},aa)))},t.prototype._onFilterSubmit=function(e){e.preventDefault()},t.prototype._onFilterChange=function(e){var t=na(e.target.value.toLowerCase());this.setState({filter:e.target.value}),this.props.onFilter(t)},t.prototype._onFilterClear=function(e){var t=this;e.preventDefault(),this.setState({filter:""},function(){t.refs.filter.focus()}),this.props.onFilter("")},t}(an.Component),oa=n("./js/_components/DropDown/index.js"),ia=function(e){function t(n){P(this,t);var a=C(this,e.call(this,n));return a._items=[{label:Object(un.a)("Ajoutés récemment"),cell:"AddDate",order:"desc"},{label:Object(un.a)("A - Z (titre)"),cell:"Title",order:"asc"},{label:Object(un.a)("A - Z (artiste)"),cell:"Artist",order:"asc"},{label:Object(un.a)("A - Z (album)"),cell:"Album",order:"asc"},{label:Object(un.a)("Manuel"),cell:null,order:"asc"}],a._default=4,a._onResize=a._onResize.bind(a),a._initAds=a._initAds.bind(a),a.state={displayLabel:window.innerWidth>1080,hasAdsFull:!1},a}return N(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.layout.resize,this._onResize),ln.a.subscribe(ln.a.layout.adsBackground,this._initAds)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.layout.resize,this._onResize),ln.a.unsubscribe(ln.a.layout.adsBackground,this._initAds)},t.prototype.render=function(){var e=this,t=this._items.map(function(t){var n=!!e.state.displayLabel&&t.label;return rn.a.createElement(oa.a.Item,{key:t.cell+"_"+t.order,label:n},rn.a.createElement("a",{onClick:e._onSort.bind(e,t.cell,t.order),href:"#"},t.label))});return rn.a.createElement("div",{className:"toolbar-item pull-right"},rn.a.createElement(oa.a,{selected:this._getSelected()},t))},t.prototype._onSort=function(e,t,n){n.preventDefault(),this.props.onSort(e,t)},t.prototype._onResize=function(e,t){this.setState({displayLabel:t.client_width>1080&&!this.state.hasAdsFull})},t.prototype._initAds=function(e,t){this.setState({hasAdsFull:t.display,displayLabel:!t.display})},t.prototype._getSelected=function(){if("function"==typeof this._items.findIndex){var e=this._items.findIndex(this._predicate,this);return-1===e?this._default:e}for(var t=0,n=this._items.length;t<n;t++)if(this._predicate(this._items[t]))return t;return this._default},t.prototype._predicate=function(e){return this.props.sortOrder===e.order&&this.props.sortCell===e.cell},t}(an.Component),sa=n("./js/_components/FileUploader.js"),la=n("./js/_components/ContextMenu/Playlist.js"),ca=n("./js/_components/ContextMenu/Album.js"),ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pa=rn.a.createElement("span",{className:"icon icon-edit"}),da=rn.a.createElement("button",{className:"btn btn-default btn-icon",type:"button"},rn.a.createElement("span",{className:"icon icon-options"})),fa=rn.a.createElement("span",{className:"icon icon-share"}),ha=function(e){function t(n){R(this,t);var a=D(this,e.call(this,n));return a._onFavoriteChange=a._onFavoriteChange.bind(a),a._onEditPlaylist=a._onEditPlaylist.bind(a),a._onShare=a._onShare.bind(a),a.state={isFavorite:jn.a.isFavorite(a._getType(),a.props.id)},a}return I(t,e),t.prototype.componentDidMount=function(){ln.a.ready(ln.a.user.userReady,this._onFavoriteChange),ln.a.subscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.subscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.unsubscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-toolbar clearfix"},this._renderPlay(),this._renderFavorite(),this._renderUpload(),this._renderEditPlaylist(),this._renderShare(),this._renderContextMenu(),this._renderFilter(),this._renderSorter())},t.prototype._renderPlay=function(){var e=this.props,t=e.options,n=e.type,a=e.filter,r=e.sortCell,o=e.items;return!1===t.toolbar.playAll?null:rn.a.createElement(In,{type:n,items:""!==a||null!==r?o:void 0})},t.prototype._renderFavorite=function(){var e=this.props,t=e.options,n=e.id;return!1===t.toolbar.favorite?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Rn.a,{id:Number(n),type:this._getType()}))},t.prototype._renderEditPlaylist=function(){return!1===this.props.options.toolbar.edit?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onEditPlaylist},pa,rn.a.createElement("span",{className:"label"},Object(un.a)("Editer"))))},t.prototype._renderContextMenu=function(){return!1===this.props.options.toolbar.contextMenu?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Mn.a,{text:Object(un.a)("Ajouter")},this._renderAddContextMenu()))},t.prototype._renderAddContextMenu=function(){var e=this.props,t=e.id,n=e.type,a=e.data,r=Object(_n.b)(n),o={anchor:da,id:Number(t),type:this._getType(n),data:a,position:"right",hasHeader:!1,context:Object(_n.b)(n),isFavorite:this.state.isFavorite,listenContext:{TYPE:r,ID:t}};switch(this.props.type){case"album":return rn.a.createElement(ca.a,ua({isRadio:bn.a.isRadio()},o));case"playlist":case"chartsPlaylist":case"curatorPlaylist":case"collaborativePlaylist":case"personalPlaylist":return rn.a.createElement(la.a,ua({isRadio:bn.a.isRadio()},o));default:return null}},t.prototype._renderUpload=function(){return!1===this.props.options.toolbar.upload?null:rn.a.createElement("div",{className:"toolbar-item",onClick:this.props.onUpload},rn.a.createElement(sa.a,{element_id:this.props.id,accept:"audio/mp3",type:"audio",directory:"user",action:"sendPersonalSong",multiFile:!0},rn.a.createElement("button",{className:"btn btn-default",role:"button",tabIndex:"0"},rn.a.createElement("span",{className:"label"},Object(un.a)("Envoyer vos mp3")))))},t.prototype._renderPlaylistAssistant=function(){return!1===hn.a.isAllowed("playlist_assistant")?null:!1===this.props.options.toolbar.playlistAssistant||0===fn.a.get("USER.USER_ID")?null:rn.a.createElement(Hn,{type:this.props.type,items:this.props.items})},t.prototype._renderActions=function(){var e=this.props,t=e.type,n=e.items,a=e.options;return rn.a.createElement(Kn,{type:t,items:n,add:a.add,download:a.download,remove:a.remove})},t.prototype._renderFilter=function(){var e=this.props,t=e.options,n=e.type,a=e.filter,r=e.onFilter;return!1===t.toolbar.filter?null:rn.a.createElement(ra,{type:n,filter:a,onFilter:r})},t.prototype._renderSorter=function(){return!1===this.props.options.toolbar.sorter?null:rn.a.createElement(ia,{onSort:this.props.onSort,sortOrder:this.props.sortOrder,sortCell:this.props.sortCell})},t.prototype._renderShare=function(){var e=this.props,t=e.options,n=e.type,a=e.data;return!t.toolbar.shareType||"personalPlaylist"===n&&a.IS_PRIVATE?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onShare},fa,rn.a.createElement("span",{className:"label"},Object(un.a)("Partager"))))},t.prototype._onShare=function(){Nn.a.load(this.props.options.toolbar.shareType,this.props.id)},t.prototype._onEditPlaylist=function(){pn.a.open("/lightbox/playlist_assistant?type=create&playlist_id="+this.props.id)},t.prototype._onFavoriteChange=function(e,t){var n=Number(this.props.id);(!t||t.type===this._getType()&&Number(t.id)===n)&&this.setState({isFavorite:jn.a.isFavorite(this._getType(),n)})},t.prototype._getType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.type;switch(e){case"chartsPlaylist":case"curatorPlaylist":case"collaborativePlaylist":case"personalPlaylist":return"playlist";case"track":return"song";case"talkShow":return"show";default:return e}},t}(an.Component);ha.contextTypes={type:nn.a.string},ha.defaultProps={data:{},onUpload:function(){}};var ma=ha,ya=rn.a.createElement(Gn.a,{className:"checkbox-tick",name:"check",size:"10"}),ba=function(e){function t(n,a){L(this,t);var r=M(this,e.call(this,n));return r._onSelect=r._onSelect.bind(r),r._updateSelected=r._updateSelected.bind(r),r.state={selected:a.store.hasOneSelected()},r}return U(t,e),t.prototype.componentDidMount=function(){this.context.store.onChange(this._updateSelected)},t.prototype.componentWillUnmount=function(){this.context.store.offChange(this._updateSelected)},t.prototype.render=function(){var e=this.state.selected,t=On()({checkbox:!0,checked:e});return rn.a.createElement("div",{className:"datagrid-cell cell-checkbox"},rn.a.createElement("label",{className:t},rn.a.createElement("input",{className:"checkbox-input",type:"checkbox","data-target":"checkall",checked:e,onChange:this._onSelect}),ya))},t.prototype._onSelect=function(){var e=!this.state.selected;this.context.store.setDefaultSelection(e),this.context.store[e?"selectAll":"unselectAll"](),!0===e&&ln.a.trigger(ln.a.datagrid.allTracksSelected)},t.prototype._updateSelected=function(){this.setState({selected:this.context.store.hasOneSelected()})},t}(an.Component);ba.contextTypes={store:nn.a.object.isRequired};var _a=ba,ga=rn.a.createElement(_a,null),va=function(e){function t(){B(this,t);var n=H(this,e.call(this));return n._onTrackSelection=n._onTrackSelection.bind(n),n.state={selectedTracks:0},n}return G(t,e),t.prototype.componentDidMount=function(){this.context.store.onChange(this._onTrackSelection)},t.prototype.componentWillUnmount=function(){this.context.store.offChange(this._onTrackSelection)},t.prototype.render=function(){var e=this,t=this.props.options.cells,n=this.state.selectedTracks;if(!t.length)return null;var a=t.map(function(t){return e._renderHeader(t)}),r=On()({"datagrid-header":!0,"is-selected":n>0});return rn.a.createElement("div",{className:r},n>0?this._renderSelectedHeader():rn.a.createElement("div",{className:"datagrid-row"},a))},t.prototype._renderHeader=function(e){var t=this.props,n=t.cells,a=t.sortCell,r=t.onSort,o=t.options;if(void 0===n[e])return null;var i=n[e],s={"datagrid-cell":!0,"is-sortable":"function"==typeof i.sort,"sort-active":i.name===a,sortable:o.header.sorter&&"function"==typeof i.sort};s[i.className||""]=!0,s=On()(s);var l=o.header.sorter&&r&&n[e].sort?this._onSort.bind(this,e):void 0;return rn.a.createElement("div",{key:e,className:s,onClick:l,scope:"col"},this._renderLabel(e))},t.prototype._renderSelectedHeader=function(){var e=this.props,t=e.items,n=e.options,a=e.type,r=this.state.selectedTracks,o=r===t.length?Object(un.a)("Tous les titres"):Object(un.c)("%s titre sélectionné","%s titres sélectionnés",{count:r,sprintf:[r]}),i={items:t,options:n,type:a};return rn.a.createElement("div",{className:"datagrid-row"},rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("span",{className:"datagrid-label color-primary ellipsis"},o)),rn.a.createElement(Kn,i),n.cells.indexOf("Checkbox")>-1?ga:null)},t.prototype._renderLabel=function(e){var t=this.props.cells;return t[e].getLabel?rn.a.createElement("span",{className:"datagrid-label ellipsis"},t[e].getLabel(this.props.options),this._renderSortIcon(e)):null},t.prototype._renderSortIcon=function(e){var t=this.props,n=t.cells,a=t.sortCell,r=t.sortOrder;if(!t.options.header.sorter||"function"!=typeof n[e].sort)return null;var o={asc:"sort-asc",desc:"sort-desc"},i=a===e?o[r]:"sort";return rn.a.createElement(Gn.a,{name:i,size:"12"})},t.prototype._onSort=function(e){this.props.options.header.sorter&&this.props.onSort(e)},t.prototype._onTrackSelection=function(){var e=this.context.store.items;this.setState({selectedTracks:Object.keys(e).filter(function(t){return e[t].selected}).length})},t}(an.Component);va.contextTypes={store:nn.a.object.isRequired};var Ea=va,Oa=n("./js/_modules/chromecast/index.js"),Ta=n("./js/_modules/Type.js"),ja=rn.a.createElement("span",{className:"icon icon-add context-menu-anchor"}),Sa=function(e){function t(n){Y(this,t);var a=q(this,e.call(this,n));return a.state={isRadio:bn.a.isRadio(),isFavorite:jn.a.isFavorite("song",Object(_n.e)(n.item))},a}return V(t,e),t.prototype.render=function(){var e=void 0,t=this.props,n=t.type,a=t.item,r=this.state,o=r.isFavorite,i=r.isRadio;if(!Object(_n.p)(a))return null;switch(n){case"discography":case"topArtist":e=Ta.a.Artist;break;case"personalPlaylist":e=Ta.a.Playlist;break;default:e=n}var s=rn.a.createElement("button",{className:"context-menu-anchor action-item-btn datagrid-action","aria-label":Object(un.a)("Ajouter à une playlist"),type:"button"},ja),l={className:"datagrid-action",position:"left",type:Ta.a.Track,anchor:s,forceShowPlaylists:!0,data:{SONG:a,PLAYLIST_ID:"playlist"===n||"personalPlaylist"===n?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n},id:Object(_n.e)(a),context:e,listenContext:{TYPE:Object(_n.b)(n),ID:this.context.id},isFavorite:o,isRadio:i};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("span",{className:"sr-only"},Object(un.a)("Ajouter à une playlist")),rn.a.createElement(Mn.a,{text:Object(un.a)("Ajouter à une playlist")},rn.a.createElement(zn.a,l)))},t}(an.Component);Sa.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,store:nn.a.object.isRequired};var wa=Sa,Aa=n("./js/_modules/utils.js"),Pa=function(e){function t(n){K(this,t);var a=Q(this,e.call(this,n));return a.updateInterval=null,a._updateTime=a._updateTime.bind(a),a.state={time:a._formatDate(n.item.DATE_ADD)},a}return X(t,e),t.prototype.componentDidMount=function(){this.updateInterval=setInterval(this._updateTime,1e3)},t.prototype.componentWillReceiveProps=function(e){this.setState({time:this._formatDate(e.item.DATE_ADD)})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.time!==t.time},t.prototype.componentWillUnmount=function(){clearInterval(this.updateInterval)},t.prototype.render=function(){var e=this.state.time;return rn.a.createElement("div",{className:"datagrid-cell cell-date"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis",title:e},e))},t.prototype._formatDate=function(e){return 0===e?"-":Object(Aa.K)(e,!1,"-")},t.prototype._updateTime=function(){fn.a.get("SESSION_DURATION")%30==0&&this.setState({time:this._formatDate(this.props.item.DATE_ADD)})},t}(an.Component);Pa.getLabel=function(){return Object(un.a)("Ajouté")},Pa.className="cell-date",Pa.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var Ca=Pa,Na=n("./js/_components/Link.js"),ka=function(e){function t(){return J(this,t),Z(this,e.apply(this,arguments))}return ee(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return t.ALB_ID!==e.item.ALB_ID||t.ALB_TITLE!==e.item.ALB_TITLE},t.prototype.render=function(){var e=void 0,t=this.props.item,n=t.ALB_TITLE;return e=void 0===t.ALB_ID||0===t.ALB_ID?rn.a.createElement("span",{className:"datagrid-label"},n||"-"):rn.a.createElement(Na.a,{className:"datagrid-label datagrid-label-main",to:"/album/"+t.ALB_ID},t.ALB_TITLE),rn.a.createElement("div",{className:"datagrid-cell cell-album"},rn.a.createElement("div",{className:"ellipsis"},e))},t}(an.Component);ka.getLabel=function(){return Object(un.a)("Album")},ka.className="cell-album",ka.sort=function(e,t){return e.ALB_TITLE.toLowerCase()<t.ALB_TITLE.toLowerCase()?-1:1},ka.filter=function(e,t){return-1!==na(t.ALB_TITLE.toLowerCase()).indexOf(e)};var Ra=ka,Da=function(e){function t(){return ne(this,t),ae(this,e.apply(this,arguments))}return re(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return t.ART_ID!==e.item.ART_ID||t.ART_NAME!==e.item.ART_NAME},t.prototype.render=function(){var e=[],t=this.props.item;if(t.ARTISTS&&t.ARTISTS.length){var n=[];t.ARTISTS.forEach(function(t,a){0!==Number(t.ROLE_ID)&&5!==Number(t.ROLE_ID)||-1!==n.indexOf(t.ART_ID)||(e.push(a>0?", ":"",rn.a.createElement(Na.a,{key:"artist_"+t.ART_ID,className:"datagrid-label datagrid-label-main",to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)),n.push(t.ART_ID))})}else 0===Number(t.ART_ID)?e.push(t.ART_NAME||"-"):e.push(rn.a.createElement(Na.a,{key:"artist_"+t.ART_ID,className:"datagrid-label datagrid-label-main",to:"/artist/"+t.ART_ID},t.ART_NAME));return rn.a.createElement("div",{className:"datagrid-cell cell-artist"},rn.a.createElement("div",{className:"ellipsis"},e))},t}(an.Component);Da.getLabel=function(){return Object(un.a)("Artiste")},Da.className="cell-artist",Da.sort=function(e,t){return e.ART_NAME.toLowerCase()<t.ART_NAME.toLowerCase()?-1:1},Da.filter=function(e,t){return-1!==na(t.ART_NAME.toLowerCase()).indexOf(e)};var Ia=Da,xa=rn.a.createElement(Gn.a,{className:"checkbox-tick",name:"check",size:"10"}),La=function(e){function t(n,a){ie(this,t);var r=se(this,e.call(this,n,a));return r._onSelect=r._onSelect.bind(r),r._updateSelection=r._updateSelection.bind(r),r.state={selected:a.store.isSelected(Object(_n.e)(n.item))},r}return le(t,e),t.prototype.componentDidMount=function(){this.context.store.onChange(this._updateSelection)},t.prototype.componentWillReceiveProps=function(e){this.setState({selected:this.context.store.isSelected(Object(_n.e)(e.item))})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.selected!==t.selected},t.prototype.componentWillUnmount=function(){this.context.store.offChange(this._updateSelection)},t.prototype.render=function(){var e=this.state.selected,t=On()({checkbox:!0,checked:e});return rn.a.createElement("div",{className:"datagrid-cell cell-checkbox"},rn.a.createElement("label",{className:t,onDoubleClick:this._onDoubleClick},rn.a.createElement("input",{className:"checkbox-input",type:"checkbox","data-target":"check",checked:e,onChange:this._onSelect}),xa))},t.prototype._onDoubleClick=function(e){e.stopPropagation()},t.prototype._onSelect=function(){var e=this.state.selected;this.context.store[e?"unselect":"select"](Object(_n.e)(this.props.item)),this._updateSelection("selection"),this.setState({selected:!e})},t.prototype._updateSelection=function(e){"selection"===e&&this.setState({selected:this.context.store.isSelected(Object(_n.e)(this.props.item))})},t}(an.Component);La.contextTypes={store:nn.a.object.isRequired};var Ma=rn.a.createElement(_a,null);La.getLabel=function(){return Ma},La.className="cell-checkbox";var Ua=La,Fa=function(e){function t(n){ue(this,t);var a=pe(this,e.call(this,n));return a.state={isRadio:bn.a.isRadio(),isFavorite:jn.a.isFavorite("song",Object(_n.e)(n.item))},a}return de(t,e),t.prototype.render=function(){var e=void 0,t=this.props,n=t.type,a=t.item,r=t.index,o=this.state,i=o.isFavorite,s=o.isRadio;if(!Object(_n.p)(a))return null;switch(n){case"discography":case"topArtist":e=Ta.a.Artist;break;case"personalPlaylist":e=Ta.a.Playlist;break;default:e=n}var l={className:"datagrid-action",position:"left",type:Ta.a.Track,data:{SONG:a,PLAYLIST_ID:n===Ta.a.Playlist||"personalPlaylist"===n?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n,INDEX:r},id:Object(_n.e)(a),context:e,listenContext:{TYPE:Object(_n.b)(n),ID:this.context.id},isFavorite:i,isRadio:s};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Afficher le menu")},rn.a.createElement(zn.a,l)))},t}(an.Component);Fa.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,store:nn.a.object.isRequired};var Ba=Fa,Ha=rn.a.createElement(Gn.a,{name:"download",size:"14"}),Ga=function(e){function t(n){he(this,t);var a=me(this,e.call(this,n));return a._onDownloadClick=a._onDownloadClick.bind(a),a}return ye(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.componentWillUnmount=function(){cn.a.cancel(this._apiCallRef)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Télécharger")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onDownloadClick},Ha)))},t.prototype._onDownloadClick=function(){this._apiCallRef=Object(_n.a)(Object(_n.e)(Object(_n.c)(this.props.item)))},t}(an.Component),za=function(e){function t(){return _e(this,t),ge(this,e.apply(this,arguments))}return ve(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return(t.DURATION||t.duration)!==(e.item.DURATION||e.item.duration)},t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-duration"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis"},Object(Aa.G)(e.DURATION||e.duration)))},t}(an.Component);za.getLabel=function(){return Object(un.a)("D.")},za.className="cell-duration",za.sort=function(e,t){return(e.DURATION||e.duration)-(t.DURATION||t.duration)};var Ya=za,qa=rn.a.createElement(Gn.a,{name:"edit",size:"14"}),Va=function(e){function t(){Oe(this,t);var n=Te(this,e.call(this));return n._onEditClick=n._onEditClick.bind(n),n}return je(t,e),t.prototype.render=function(){return!0===Object(_n.n)(this.props.item)?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Editer")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onEditClick},qa)))},t.prototype._onEditClick=function(e){e.preventDefault(),pn.a.open("/lightbox/edit_personal_song.php?sng_id="+this.props.item.SNG_ID)},t}(an.Component),Wa=n("./js/_components/ContextMenu/Episode.js"),Ka=function(e){function t(){return we(this,t),Ae(this,e.apply(this,arguments))}return Pe(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.item;if(!Object(_n.p)(n))return null;var a={position:"left",type:Ta.a.Episode,data:n,id:Number(n.EPISODE_ID),context:"talkShow",listenContext:{TYPE:Object(_n.b)(t),ID:this.context.id}};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("div",{className:"datagrid-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Afficher le menu")},rn.a.createElement(Wa.a,a))))},t}(an.Component);Ka.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired};var Qa=Ka,Xa=rn.a.createElement("span",{className:"heard-circle"}),$a=function(e){function t(n){Ne(this,t);var a=ke(this,e.call(this,n));return a._initHeard=a._initHeard.bind(a),a._updateHeard=a._updateHeard.bind(a),a.state={heard:n.item.IS_HEARD},a}return Re(t,e),t.prototype.componentDidMount=function(){ln.a.ready(ln.a.user.userReady,this._initHeard,"bookmark"),ln.a.subscribe(ln.a.talk.bookmarkSet,this._updateHeard,"bookmark")},t.prototype.shouldComponentUpdate=function(e,t){return this.state.heard!==t.heard},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.talk.bookmarkSet,this._updateHeard)},t.prototype.render=function(){var e=this.state.heard,t=On()("heard-status",{empty:"1"===e,half:"0.5"===e});return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement("div",{className:"heard-icon"},Xa,rn.a.createElement("span",{className:t})))},t.prototype._initHeard=function(){var e=this.props.item,t=jn.a.getEpisodeBookmark(e.EPISODE_ID,e.DURATION);this.setState({heard:t.IS_HEARD})},t.prototype._updateHeard=function(e,t){this.props.item.EPISODE_ID===t.EPISODE_ID&&this.setState({heard:t.ISHEARD})},t}(an.Component);$a.className="datagrid-cell datagrid-cell-action cell-heard",$a.sort=function(e,t){return e.IS_HEARD-t.IS_HEARD};var Ja=$a,Za=rn.a.createElement("button",{type:"button"},rn.a.createElement("span",{className:"icon icon-info"})),er=function(e){function t(){return Ie(this,t),xe(this,e.apply(this,arguments))}return Le(t,e),t.prototype.render=function(){var e=this.props.item;if(!Object(_n.p)(e))return null;var t={id:Number(e.EPISODE_ID),type:"episode",hasDescription:!0,data:e,position:"left",context:this.context.panel_name,listenContext:{TYPE:"show",ID:e.EPISODE_ID},anchor:Za};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("div",{className:"datagrid-action"},rn.a.createElement(Wa.a,t)))},t}(an.Component);er.contextTypes={name:nn.a.string.isRequired,panel_name:nn.a.string},er.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var tr=er,nr=function(e){function t(){return Ue(this,t),Fe(this,e.apply(this,arguments))}return Be(t,e),t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-date"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis",title:e.EPISODE_PUBLISHED_TIMESTAMP},Object(Aa.m)(e.EPISODE_PUBLISHED_TIMESTAMP.split(" ")[0],"/")))},t}(an.Component);nr.className="cell-date",nr.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var ar=nr,rr=function(e){function t(n){Ge(this,t);var a=ze(this,e.call(this,n));return a._play=a._play.bind(a),a}return Ye(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.item,a="talkEpisodes"===t?n.SHOW_NAME+" | ":"";return a+=n.EPISODE_TITLE,rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-main title ellipsis",tabIndex:"0",onClick:this._play,onKeyDown:this._play},a))},t.prototype._play=function(){var e=this.props,t=e.item,n=e.type,a=e.index,r=e.options;!1===Object(_n.p)(t)||r.isRadio||(Object(_n.o)(t,this.context.name)?bn.a.control.togglePause():Object(_n.r)(n)?bn.a.playTrackAtIndex(a):bn.a.play(Object(_n.i)(this.props,this.context)))},t}(an.Component);rr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired},rr.className="cell-title",rr.sort=function(e,t){return e.EPISODE_TITLE.toLowerCase()<t.EPISODE_TITLE.toLowerCase()?-1:1};var or=rr,ir=function(e){function t(n){Ve(this,t);var a=We(this,e.call(this,n));return a._play=a._play.bind(a),a}return Ke(t,e),t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("div",{className:"ellipsis"},rn.a.createElement("a",{className:"datagrid-label datagrid-label-main title",tabIndex:"0",onClick:this._play,role:"button",onKeyDown:this._play},e.title)))},t.prototype._play=function(e){if(void 0===e.keyCode||13===e.keyCode){var t=this.props,n=t.item,a=t.type,r=t.index;if(!1!==Object(_n.p)(n))if(Object(_n.o)(n,this.context.name))bn.a.control.togglePause();else if(Object(_n.r)(a))bn.a.playTrackAtIndex(r);else{var o=Object(_n.i)(this.props,this.context);bn.a.play(o)}}},t}(an.Component);ir.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired},ir.defaultProps={filter:"",sortCell:""};var sr=ir,lr=n("./js/_components/Favorite.js"),cr=function(e){function t(){return Xe(this,t),$e(this,e.apply(this,arguments))}return Je(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.render=function(){var e=this.props.item,t=Object(_n.p)(e),n={className:"datagrid-action",type:"song",id:String(this.props.item.SNG_ID),tooltip:t,isDisabled:!t,context:this.context.name};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action cell-love"},rn.a.createElement(lr.a,n))},t}(an.Component);cr.contextTypes={name:nn.a.string.isRequired},cr.className="datagrid-cell-action cell-love";var ur=cr,pr=rn.a.createElement(Gn.a,{name:"lyrics",size:"14"}),dr=function(e){function t(){et(this,t);var n=tt(this,e.call(this));return n._onLyricsClick=n._onLyricsClick.bind(n),n}return nt(t,e),t.prototype.render=function(){var e=this.props.item;return!1===Object(_n.p)(e)||void 0===e.LYRICS_ID||0===e.LYRICS_ID?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Écouter avec les paroles")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onLyricsClick},pr)))},t.prototype._onLyricsClick=function(e){e.preventDefault();var t=this.props.item;if(!1!==Object(_n.p)(t))if(Object(_n.o)(t,this.context.name))ln.a.trigger(ln.a.menu.openPanel,{panel:"lyrics"});else{ln.a.subscribeOnce(ln.a.player.displayCurrentSong,function(){ln.a.trigger(ln.a.menu.openPanel,{panel:"lyrics"})});var n=Object(_n.i)(this.props,this.context);bn.a.play(n)}},t}(an.Component);dr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,store:nn.a.object.isRequired};var fr=dr,hr=n("./js/_components/Thumbnail/index.js"),mr=rn.a.createElement("span",{className:"datagrid-badge-unseen"}),yr=rn.a.createElement("span",{className:"play-default"},rn.a.createElement("span",{className:"icon icon-play"})),br=rn.a.createElement("span",{className:"play-hover"},rn.a.createElement("span",{className:"icon icon-pause"})),_r=rn.a.createElement("span",{className:"play-active"},rn.a.createElement("span",{className:"equalizer equalizer-inverse equalizer-12"})),gr=function(e){function t(n){rt(this,t);var a=ot(this,e.call(this,n));return a._play=a._play.bind(a),a}return it(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.index!==e.index||this.props.active!==e.active||this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.render=function(){var e=this.props,t=e.item,n=e.options,a=e.index,r=e.active;if(!Object(_n.s)(t))return this._renderCalendar();var o=null;n.unseen&&Object(_n.q)(t,this.context.lastSeen)?o=mr:n.trackNumber?o=rn.a.createElement("span",{className:"datagrid-track-number"},t.TRACK_NUMBER):n.trackIndex?o=rn.a.createElement("span",{className:"datagrid-track-number"},a+1):n.cover&&(o=this._renderThumbnail());var i=(Object(_n.p)(t)||n.isRadio)&&(r||!n.isRadio);return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},o,i?rn.a.createElement("div",{className:"datagrid-cell-hover cell-play"},rn.a.createElement("a",{className:"icon-28 icon-stack icon-stack-hover",onClick:this._play,role:"button","data-target":"play",tabIndex:"0","aria-label":Object(un.a)("Play")},yr,br,_r)):null)},t.prototype._renderThumbnail=function(){var e=this.props,t=e.options,n=e.item,a=On()("datagrid-cover",{"datagrid-cover-hover":!t.isRadio});return rn.a.createElement("div",{className:a},rn.a.createElement(hr.a,{type:t.cover,coverLink:!1,data:n,height:28,width:28}))},t.prototype._renderCalendar=function(){var e=Object(_n.j)(this.props.item);return rn.a.createElement("div",{className:"datagrid-calendar"},rn.a.createElement("div",{className:"month"},Object(Aa.u)(e[1])),rn.a.createElement("div",{className:"day"},e[2]))},t.prototype._play=function(e){e.preventDefault();var t=this.props,n=t.item,a=t.items,r=t.type,o=t.index;if(!1!==Object(_n.p)(n)){if(Object(_n.o)(n,this.context.name))return kn.a.intent("toggle"),void bn.a.control.togglePause();if(Oa.a.isCasting()){var i=Object(_n.f)(n,a)%Oa.a.getQueueMaxItems(),s=bn.a.getTrackList()[i];if(s&&String(s.SNG_ID||s.EPISODE_ID)===String(n.SNG_ID||n.EPISODE_ID))return void Oa.a.executeAction("playAtIndex",[i])}if(Object(_n.r)(r))return kn.a.intent("play"),void bn.a.playTrackAtIndex(o);kn.a.intent("play"),bn.a.play(Object(_n.i)(this.props,this.context))}},t}(an.Component);gr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,lastSeen:nn.a.number},gr.getLabel=function(e){return e.trackIndex||e.trackNumber?"#":null},gr.className="datagrid-cell datagrid-cell-action cell-play";var vr=gr,Er=function(e){function t(){return lt(this,t),ct(this,e.apply(this,arguments))}return ut(t,e),t.prototype.render=function(){var e=this.props.item.RANK_SNG/1e5;return rn.a.createElement("div",{className:"datagrid-cell cell-popularity"},rn.a.createElement(Mn.a,{text:Object(un.a)("Popularité : ")+e.toFixed(2)+" / 10",position:"left"},this._renderNote(e)))},t.prototype._renderNote=function(e){for(var t=[],n=0;n<10;n++){var a=On()({"datagrid-note":!0,active:n<=Math.round(e)-1});t.push(rn.a.createElement("span",{key:n,className:a}))}return rn.a.createElement("span",{className:"popularity-note"},t)},t}(an.Component);Er.getLabel=function(){return Object(un.a)("Pop.")},Er.className="cell-popularity",Er.sort=function(e,t){return e.RANK_SNG-t.RANK_SNG};var Or=Er,Tr=rn.a.createElement("span",{className:"datagrid-action"},rn.a.createElement(Gn.a,{name:"cancel",size:"14"})),jr=function(e){function t(n){dt(this,t);var a=ft(this,e.call(this,n));return a._onRemoveTrack=a._onRemoveTrack.bind(a),a}return ht(t,e),t.prototype.render=function(){return this.props.options.isRadio?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action cell-remove",onClick:this._onRemoveTrack},rn.a.createElement(Mn.a,{text:Object(un.a)("Retirer de la file d'attente")},Tr))},t.prototype._onRemoveTrack=function(){bn.a.removeTracks(this.props.index)},t}(an.Component),Sr=n("./js/_modules/www.js"),wr=function(e){function t(n){yt(this,t);var a=bt(this,e.call(this,n));return a._onClick=a._onClick.bind(a),a._reset=a._reset.bind(a),a._open=a._open.bind(a),a.state={position:n.position,show:!1,animate:!1,style:{}},a}return _t(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.hovercard.hide,this._reset)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.hovercard.hide)},t.prototype.render=function(){var e={position:"absolute",top:"100%",left:"50%",transform:"translate(-6px, -7px)"},t=this.state.style;this.state.show&&(t.display="block");var n={onClick:this._onClick,ref:"anchor"};return rn.a.createElement("div",null,rn.a.cloneElement(this.props.anchor,n),rn.a.createElement(Sn.a,{id:"hovercard-portal",show:this.state.show,onOutsideClose:this._reset},rn.a.createElement("div",{ref:"content",className:"hovercard-tpl",id:"hovercard",style:t},rn.a.createElement("div",{id:"arrow",className:"hovercard_arrow arrow_s",style:e}),this.props.children)))},t.prototype._onClick=function(e){e.stopPropagation(),0!==fn.a.get("USER.USER_ID")?this.state.show?this._close():(ln.a.trigger(ln.a.hovercard.show,this.props.id),setTimeout(this._open,0)):Sr.c.goToConnection()},t.prototype._close=function(){var e=this;this.setState({animate:!1},function(){setTimeout(function(){e.setState({show:!1})},150)})},t.prototype._open=function(){var e=this;this.setState({show:!0},function(){var t=Tn.a.getPositions(e.refs.anchor,e.refs.content),n=Tn.a.getPositionForRtl(e.props.position),a=e._addOffsets(n,t[n]);e.setState({animate:!0,position:n,style:a},function(){e._reposition(n,t)})})},t.prototype._reposition=function(e,t){var n=Tn.a.checkPosition(this.refs.anchor,this.refs.content,e);if(n!==e){var a=this._addOffsets(n,t[n]);this.setState({position:n,style:a})}},t.prototype._reset=function(e,t){this.state.show&&(t&&this.props.id===t||this.setState({show:!1,animate:!1}))},t.prototype._addOffsets=function(e,t){switch(e){case"top":t.top-=10;break;case"bottom":t.top+=10;break;case"left":t.left-=10;break;case"right":t.left+=10;break;case"left-top":t.top+=30,t.left-=10;break;case"right-top":t.top+=30,t.left+=10;break;case"left-bottom":t.top-=30,t.left-=10;break;case"right-bottom":t.top-=30,t.left+=10}return t},t}(an.Component);wr.defaultProps={position:"top",anchor:rn.a.createElement("button",{className:"action-item-btn",type:"button"},rn.a.createElement("span",{className:"icon icon-options"}))};var Ar=wr,Pr=rn.a.createElement("div",{className:"tinyscroll_scrollbar"},rn.a.createElement("div",{className:"tinyscroll_track"},rn.a.createElement("div",{className:"tinyscroll_thumb"},rn.a.createElement("div",{className:"tinyscroll_end"})))),Cr=rn.a.createElement("div",{className:"clearfix"}),Nr=rn.a.createElement("div",{className:"clearfix"}),kr=rn.a.createElement("span",{className:"icn_play sprite_naboo"}),Rr=function(e){function t(n){vt(this,t);var a=Et(this,e.call(this,n));return a._apiCallRefs=[],a.state={},a._renderTrack=a._renderTrack.bind(a),a._delete=a._delete.bind(a),a._deleteCallback=a._deleteCallback.bind(a),a._replace=a._replace.bind(a),a._replaceCallback=a._replaceCallback.bind(a),a._fetchTracks=a._fetchTracks.bind(a),a}return Ot(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.hovercard.show,this._fetchTracks)},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.hovercard.show,this._fetchTracks)},t.prototype.render=function(){var e=this.props,t=e.track,n=e.anchor,a={height:"75px"},r={float:"right"},o={display:this.state.selected?"block":"none",float:"right"};return rn.a.createElement(Ar,{id:"replace-"+t.SNG_ID,anchor:n},rn.a.createElement("div",{id:"content",className:"box-shadow"},rn.a.createElement("div",{className:"hovercard_replace tooltipdisconnect"},rn.a.createElement("div",{className:"hovercard_content_title"},rn.a.createElement("span",null,t.SNG_TITLE+" - "+t.ART_NAME)),rn.a.createElement("div",{className:"hovercard_content_listing"},rn.a.createElement("div",{id:"hovercard_content_tracks",style:a},Pr,rn.a.createElement("div",{className:"tinyscroll_viewport"},rn.a.createElement("div",{className:"tinyscroll_overview"},this._renderResults()))))),Cr,rn.a.createElement("div",{className:"hovercard_replace_bottom"},rn.a.createElement("a",{onClick:this._delete,style:r,className:"btn btn-default btn-small pull-right mr_5"},rn.a.createElement("span",{className:"label"},Object(un.a)("Supprimer le titre de la playlist"))),rn.a.createElement("a",{id:"hovercard_replace_button",style:o,onClick:this._replace,className:"btn btn-default btn-small pull-right mr_5"},rn.a.createElement("span",{className:"label"},Object(un.a)("Remplacer"))),Nr)))},t.prototype._renderResults=function(){var e=this.state.results;if(!e)return null;if(0===e.length)return rn.a.createElement("div",null,rn.a.createElement("b",null,Object(un.a)("Aucune correspondance n'a été trouvée")));var t={width:"100%"};return rn.a.createElement("div",null,rn.a.createElement("strong",{style:t},Object(un.a)("Veuillez choisir un remplacant parmi la liste suivante:")),e.map(this._renderTrack))},t.prototype._renderTrack=function(e){var t=this.state.selected,n=On()({selected:t&&t.SNG_ID===e.SNG_ID});return rn.a.createElement("dl",{key:e.SNG_ID,className:n},rn.a.createElement("dd",{className:"hovercard_line_play"},rn.a.createElement("a",{onClick:this._play.bind(this,e)},kr)),rn.a.createElement("dd",null,rn.a.createElement("a",{onClick:this._select.bind(this,e)},rn.a.createElement("span",{className:"hovercard_line_title"},e.SNG_TITLE),rn.a.createElement("span",{className:"hovercard_line_artist"},e.ART_NAME),rn.a.createElement("span",{className:"hovercard_line_album"},e.ALB_TITLE))))},t.prototype._play=function(e){bn.a.play({data:[e]})},t.prototype._select=function(e){this.setState({selected:e})},t.prototype._delete=function(){if(confirm(Object(un.a)("Voulez-vous vraiment effacer ce morceau ?"))){var e=this.props.track,t=void 0;switch(this.context.name){case"loved_page":t=cn.a.call({method:"favorite_song.remove",data:{sng_id:e.SNG_ID},success:this._deleteCallback});break;default:t=cn.a.call({method:"playlist.deleteSongs",data:{playlist_id:this.context.id,songs:[[e.SNG_ID,0]]},success:this._deleteCallback})}this._apiCallRefs.push(t)}},t.prototype._deleteCallback=function(e){if(e){var t=this.props.track;switch(this.context.name){case"loved_page":jn.a.deleteFavorite({type:"song",id:t.SNG_ID});break;default:jn.a.removePlaylistSong(this.context.id,[t.SNG_ID])}ln.a.trigger(ln.a.hovercard.hide)}},t.prototype._replace=function(){var e=this.props.track,t=this.state.selected,n=void 0;switch(this.context.name){case"loved_page":n=cn.a.call({method:"favorite_song.recoverSong",data:{new_sng_id:t.SNG_ID,old_sng_id:e.SNG_ID},success:this._replaceCallback});break;default:n=cn.a.call({method:"playlist.recoverSong",data:{new_sng_id:t.SNG_ID,old_sng_id:e.SNG_ID,playlist_id:this.context.id},success:this._replaceCallback})}this._apiCallRefs.push(n)},t.prototype._replaceCallback=function(e){if(e){var t=this.props.track,n=this.state.selected;switch(this.context.name){case"loved_page":jn.a.replaceFavorite(Number(t.SNG_ID),n);break;default:ln.a.trigger(ln.a.playlist.updateSong,{playlist_id:this.context.id,id:Number(t.SNG_ID),item:n})}ln.a.trigger(ln.a.hovercard.hide)}},t.prototype._fetchTracks=function(e,t){var n=this,a=this.state.results,r=this.props.track;if(!a&&t==="replace-"+r.SNG_ID){var o=cn.a.call({method:"search.music",data:{QUERY:'artist:"'+r.ART_NAME+'" track:"'+r.SNG_TITLE+'"',FILTER:0,OUTPUT:"TRACK",NB:5,COUNTRY:fn.a.get("COUNTRY")},success:function(e){n.setState({results:e.data})}});this._apiCallRefs.push(o)}},t}(an.Component);Rr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired};var Dr=Rr,Ir=rn.a.createElement("button",{className:"datagrid-action",type:"button"},rn.a.createElement(Gn.a,{name:"replace",size:"14"})),xr=function(e){function t(){return jt(this,t),St(this,e.apply(this,arguments))}return wt(t,e),t.prototype.render=function(){var e=this.props.item;if(Object(_n.p)(e))return null;var t={track:e,anchor:Ir};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Remplacer")},rn.a.createElement(Dr,t)))},t}(an.Component),Lr=rn.a.createElement("span",{className:"icon icon-datagrid icon-link"}),Mr=function(e){function t(n){Pt(this,t);var a=Ct(this,e.call(this,n));return a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onFavoriteChange=a._onFavoriteChange.bind(a),a._play=a._play.bind(a),a.state={isRadio:bn.a.isRadio(),isFavorite:jn.a.isFavorite("song",Object(_n.e)(n.item))},a}return Nt(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.player.changePlayerType,this._onPlayerTypeChange),ln.a.ready(ln.a.user.userReady,this._onFavoriteChange),ln.a.subscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.subscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.shouldComponentUpdate=function(e,t){var n=Object(_n.e)(this.props.item),a=Object(_n.e)(e.item);return n!==a||e.item.SNG_TITLE!==this.props.item.SNG_TITLE||e.active!==this.props.active||t.isFavorite!==this.state.isFavorite||t.isRadio!==this.state.isRadio||this.context.store.hasDisplayedContributors(n)!==this.context.store.hasDisplayedContributors(a)},t.prototype.componentWillUnmount=function(){cn.a.cancel(this._apiCallRef),ln.a.unsubscribe(ln.a.player.changePlayerType,this._onPlayerTypeChange),ln.a.unsubscribe(ln.a.user.addFavorite,this._onFavoriteChange),ln.a.unsubscribe(ln.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("div",{className:"ellipsis"},this._renderTitle(),this._renderMultiArtist()))},t.prototype._renderTitle=function(){var e=this._getTitle(),t=this.props,n=t.options,a=t.active;return n.isRadio&&!a?e:rn.a.createElement("a",{className:"datagrid-label datagrid-label-main title",tabIndex:"0",onClick:this._play,role:"button",onKeyDown:this._play},e)},t.prototype._renderLink=function(){var e=this.props,t=e.item,n=e.options;return void 0===t.FALLBACK||!0!==n.fallback?null:rn.a.createElement("li",null,rn.a.createElement(Mn.a,{text:Object(un.a)("Afficher la source de ce titre")},rn.a.createElement(Na.a,{to:"/album/"+t.FALLBACK.ALB_ID,"aria-label":Object(un.a)("Afficher la source de ce titre")},Lr)))},t.prototype._renderMultiArtist=function(){var e=this.props,t=e.item;if(!e.options.multiArtist||!Array.isArray(t.MULTI_ARTIST)||0===t.MULTI_ARTIST.length)return null;var n=t.MULTI_ARTIST.map(function(e,t,n){if(0===Number(e.ROLE_ID)||5===Number(e.ROLE_ID)){var a=t===n.length-1?"":", ";return[rn.a.createElement(Na.a,{className:"datagrid-label-sub",to:"/artist/"+e.ART_ID},e.ART_NAME),a]}return[]});return rn.a.createElement("span",{className:"datagrid-label-artist"},n)},t.prototype._onPlayerTypeChange=function(){this.setState({isRadio:bn.a.isRadio()})},t.prototype._onFavoriteChange=function(e,t){var n=Number(Object(_n.e)(this.props.item));t&&("song"!==t.type||Number(t.id)!==n)||"loved"===this.props.type||"personalLoved"===this.props.type||this.setState({isFavorite:jn.a.isFavorite("song",n)})},t.prototype._play=function(e){if(void 0===e.keyCode||13===e.keyCode){var t=this.props,n=t.item,a=t.type,r=t.index;!1!==Object(_n.p)(n)&&(Object(_n.o)(n,this.context.name)?bn.a.control.togglePause():Object(_n.r)(a)?bn.a.playTrackAtIndex(r):bn.a.play(Object(_n.i)(this.props,this.context)))}},t.prototype._getTitle=function(){var e=[],t=this.props.item;return void 0!==t.SNG_CONTRIBUTORS&&void 0!==t.SNG_CONTRIBUTORS.abbreviated_composer&&""!==t.SNG_CONTRIBUTORS.abbreviated_composer&&e.push(t.SNG_CONTRIBUTORS.abbreviated_composer),e.push(t.SNG_TITLE),e=e.join(" | "),"string"==typeof t.VERSION&&""!==t.VERSION&&(e+=" "+t.VERSION),e},t.prototype._toggleContributors=function(e){e.preventDefault(),this.context.store.toggleContributors(Object(_n.e)(this.props.item))},t.prototype._getContext=function(e){switch(e){case"discography":case"topArtist":return"artist";case"personalPlaylist":return"playlist";default:return e}},t}(an.Component);Mr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,store:nn.a.object.isRequired},Mr.getLabel=function(){return Object(un.a)("Titre")},Mr.className="cell-title",Mr.sort=function(e,t){return e.SNG_TITLE.toLowerCase()<t.SNG_TITLE.toLowerCase()?-1:1},Mr.filter=function(e,t){return-1!==na(t.SNG_TITLE.toLowerCase()).indexOf(e)};var Ur=Mr,Fr=function(e){function t(){return Rt(this,t),Dt(this,e.apply(this,arguments))}return It(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.VARIATION!==e.VARIATION},t.prototype.render=function(){var e=this.props.item.VARIATION,t=Number(e)||0,n="eq",a="arrow-right";return t>0&&(n="up",a="arrow-up"),t<0&&(n="down",a="arrow-down"),rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Gn.a,{className:"datagrid-variation-"+n,name:a,size:"12"}))},t}(an.Component);Fr.className="datagrid-cell datagrid-cell-action",Fr.sort=function(e,t){return e=Number(e.VARIATION)||.5,(t=Number(t.VARIATION)||.5)-e};var Br=Fr,Hr=rn.a.createElement(Gn.a,{name:"link",size:"14"}),Gr=function(e){function t(){return Lt(this,t),Mt(this,e.apply(this,arguments))}return Ut(t,e),t.prototype.render=function(){var e=this.props.item;return e.hasFallback()?rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Afficher la source de ce titre")},rn.a.createElement(Na.a,{className:"datagrid-action",to:"/album/"+e.FALLBACK.ALB_ID},Hr))):null},t}(an.Component),zr=rn.a.createElement(Gn.a,{name:"share",size:"14"}),Yr={AddToPlaylist:wa,AddDate:Ca,Album:Ra,Artist:Ia,Checkbox:Ua,ContextMenu:Ba,Download:Ga,Duration:Ya,EditMp3:Va,EpisodeAdd:Qa,EpisodeHeard:Ja,EpisodeInformation:tr,EpisodeReleaseDate:ar,EpisodeTitle:or,ChapterTitle:sr,Love:ur,Lyrics:fr,Play:vr,Popularity:Or,RemoveFromQueueList:jr,Replace:xr,Title:Ur,Variation:Br,FallbackLink:Gr,Share:function(e){function t(n){Bt(this,t);var a=Ht(this,e.call(this,n));return a._onShare=a._onShare.bind(a),a}return Gt(t,e),t.prototype.render=function(){var e=this.props.item;return Object(_n.p)(e)?rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Mn.a,{text:Object(un.a)("Partager")},rn.a.createElement("button",{className:"datagrid-action",onClick:this._onShare},zr))):null},t.prototype._onShare=function(){var e=this.props.item;window.sharebox.load(Object(Aa.t)(e.__TYPE__),Object(Aa.q)(e))},t}(an.Component)},qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vr=function(e){function t(n,a){Yt(this,t);var r=qt(this,e.call(this,n,a));return r._onPlay=r._onPlay.bind(r),r._onPause=r._onPause.bind(r),r._updateTrack=r._updateTrack.bind(r),r._onPlaying=r._onPlaying.bind(r),r._play=r._play.bind(r),r._contextMenu=r._contextMenu.bind(r),r.state={trackActive:Object(_n.o)(n.item,a.name),trackPaused:r._isTrackPaused(n.item,a.name)},r}return Vt(t,e),t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.player.play,this._onPlay),ln.a.subscribe(ln.a.player.paused,this._onPause),ln.a.subscribe(ln.a.player.playerLoaded,this._updateTrack),ln.a.subscribe(ln.a.player.updateCurrentTrack,this._updateTrack),ln.a.subscribe(ln.a.player.playing,this._onPlaying)},t.prototype.componentWillReceiveProps=function(e){this.setState({trackActive:Object(_n.o)(e.item,this.context.name),trackPaused:this._isTrackPaused(e.item,this.context.name)})},t.prototype.shouldComponentUpdate=function(e,t){return this.props.index!==e.index||this.props.filter!==e.filter||this.props.sortCell!==e.sortCell||this.props.sortOrder!==e.sortOrder||this.state.trackActive!==t.trackActive||this.state.trackPaused!==t.trackPaused||this.props.draggable!==e.draggable||this.props.item.ART_NAME!==e.item.ART_NAME||this.props.item.ALB_TITLE!==e.item.ALB_TITLE||this.props.item.SNG_TITLE!==e.item.SNG_TITLE||this.props.item.title!==e.item.title},t.prototype.componentWillUnmount=function(){ln.a.unsubscribe(ln.a.player.play,this._onPlay),ln.a.unsubscribe(ln.a.player.paused,this._onPause),ln.a.unsubscribe(ln.a.player.playerLoaded,this._updateTrack),ln.a.unsubscribe(ln.a.player.updateCurrentTrack,this._updateTrack),ln.a.unsubscribe(ln.a.player.playing,this._onPlaying)},t.prototype.render=function(){var e=this,t=this.props,n=t.type,a=t.item,r=t.items,o=t.options,i=t.filter,s=t.sortCell,l=t.index,c=t.draggable,u=t.onDragStart,p=t.onDrop,d=t.onDragOver,f=t.onDragEnd,h=this.state,m=h.trackActive,y=h.trackPaused,b=Object(_n.e)(Object(_n.c)(a)),_=Object(_n.g)(a),g=On()("datagrid-row",{song:"talkShow"!==n,show:"talkShow"===n,unavailable:!Object(_n.p)(a)&&!o.isRadio,active:m,paused:y,unseen:o.unseen&&Object(_n.q)(a,this.context.lastSeen),soon:!Object(_n.s)(a),new:"chartsPlaylist"===n&&void 0===a.VARIATION}),v=o.cells.map(function(t){return e._renderCell(t,{type:n,item:a,items:r,options:o,filter:i,sortCell:s,index:l,active:m})}),E=rn.a.createElement("div",{className:g,key:"item-"+b,"data-key":b,draggable:c,onDoubleClick:this._play,onDragStart:u,onDrop:p,onDragOver:d,onDragEnd:f},v);return""===_||o.isRadio?E:rn.a.createElement(Mn.a,{text:_,relativeTo:".title"},E)},t.prototype._renderCell=function(e,t){return void 0===Yr[e]?rn.a.createElement("div",{key:e,className:"datagrid-cell cell-action"}):rn.a.createFactory(Yr[e])(qr({key:e},t))},t.prototype._onPlay=function(){var e=Object(_n.o)(this.props.item,this.context.name);this.state.trackActive===e&&!1===this.state.trackPaused||this.setState({trackActive:e,trackPaused:!1})},t.prototype._onPause=function(){var e=this._isTrackPaused(this.props.item,this.context.name);this.state.trackPaused!==e&&this.setState({trackPaused:e})},t.prototype._onPlaying=function(){this.setState({trackPaused:this._isTrackPaused(this.props.item,this.context.name)})},t.prototype._updateTrack=function(){var e=Object(_n.o)(this.props.item,this.context.name),t=this._isTrackPaused(this.props.item,this.context.name);this.state.trackActive===e&&this.state.trackPaused===t||this.setState({trackActive:e,trackPaused:t})},t.prototype._play=function(e){e.preventDefault();var t=this.props,n=t.item,a=t.items,r=t.type,o=t.index,i=t.options;if(!1!==Object(_n.p)(n)&&!i.isRadio)if(Object(_n.o)(n,this.context.name))bn.a.control.togglePause();else{if(Oa.a.isCasting()){var s=Object(_n.f)(n,a)%Oa.a.getQueueMaxItems(),l=bn.a.getTrackList()[s];if(l&&String(l.SNG_ID||l.EPISODE_ID)===String(n.SNG_ID||n.EPISODE_ID))return void Oa.a.executeAction("playAtIndex",[s])}Object(_n.r)(r)?bn.a.playTrackAtIndex(o):bn.a.play(Object(_n.i)(this.props,this.context))}},t.prototype._contextMenu=function(e){e.preventDefault();var t=this.props,n=t.type,a=t.item,r=void 0;switch(n){case"discography":case"topArtist":r="artist";break;case"personalPlaylist":r="playlist";break;default:r=n}ln.a.trigger(ln.a.menu.contextMenuRightClickOpen,{style:{left:e.pageX+1,top:e.pageY+1},data:{SONG:a,PLAYLIST_ID:"playlist"===r?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n},id:Number(a.SNG_ID),context:r,listenContext:{TYPE:Object(_n.b)(n),ID:this.context.id},isRadio:bn.a.isRadio(),isFavorite:jn.a.isFavorite("song",Number(a.SNG_ID))})},t.prototype._isTrackPaused=function(e,t){return Object(_n.o)(e,t)&&!bn.a.isPlaying()},t}(an.Component);Vr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string,lastSeen:nn.a.number};var Wr=Vr,Kr=function(e){function t(){var n,a,r;Kt(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Qt(this,e.call.apply(e,[this].concat(i))),a.defaultImage="https://"+fn.a.get("host_img_url_ssl")+"/cover/d41d8cd98f00b204e9800998ecf8427e/30x30-000000-80-0-0.jpg",r=n,Qt(a,r)}return Xt(t,e),t.prototype.render=function(){var e=this.props.items;return e?1===e.length?this._renderDragImageSingle():this._renderDragImageMultiple():this._renderPlaceholder()},t.prototype._renderPlaceholder=function(){return rn.a.createElement("div",{className:"datagrid-ghost",id:"naboo_datagrid_ghost_single","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))},t.prototype._renderDragImageSingle=function(){var e=this.props.items[0],t=e.RANK_SNG/1e5;return rn.a.createElement("div",{className:"datagrid-ghost",id:"naboo_datagrid_ghost_single","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("div",{className:"wrapper-table"},rn.a.createElement("span",{className:"cell cell-thumbnail"},rn.a.createElement("figure",{className:"thumbnail thumbnail-bordered"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))),rn.a.createElement("span",{className:"cell cell-track"},rn.a.createElement("div",{className:"ellipsis"},rn.a.createElement("strong",null,e.SNG_TITLE)),rn.a.createElement("div",{className:"ellipsis"},e.ALB_TITLE)),rn.a.createElement("span",{className:"cell cell-length"},Object(Aa.G)(e.DURATION)),rn.a.createElement("span",{className:"cell cell-popularity"},rn.a.createElement("span",{className:"note note-"+Math.round(t)}))))},t.prototype._renderDragImageMultiple=function(){var e=this.props.items.length,t=Object(un.c)("%s titre","%s titres",{sprintf:[e],count:e});return rn.a.createElement("div",{className:"datagrid-ghost multiple",id:"naboo_datagrid_ghost_multi","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("div",{className:"wrapper-table"},rn.a.createElement("span",{className:"cell cell-thumbnail"},rn.a.createElement("figure",{className:"thumbnail thumbnail-bordered"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))),rn.a.createElement("span",{className:"cell"},rn.a.createElement("strong",null,t))))},t}(an.Component);Kr.defaultProps={items:null,isDragging:!1};var Qr=Kr,Xr=rn.a.createElement("div",{key:"divider",className:"datagrid-drag-divider"}),$r=rn.a.createElement("div",{key:"divider",className:"datagrid-drag-divider"}),Jr=rn.a.createElement("span",{className:"btn btn-primary btn-icon"},rn.a.createElement("span",{className:"icon icon-add"})),Zr=function(e){function t(n,a){Jt(this,t);var r=Zt(this,e.call(this,n,a));r.defaultOptions={availableOnly:!1,cdNumber:!1,changeOrder:!1,cells:["Play","Love","Title","Artist","Album","Duration"],isRadio:!1,header:!1,toolbar:!1,contributors:!1,cover:!1,fallback:!1,infiniteScroll:!1,fillerHeight:!1,multiArtist:!1,sorterStorageKey:"",trackNumber:!1,trackIndex:!1,unseen:!1},r.defaultToolbarOptions={playAll:!1,favorite:!1,shareType:!1,contextMenu:!1,playlistAssistant:!1,upload:!1,edit:!1,filter:!1,sorter:!1,download:!1},r.defaultHeaderOptions={sorter:!1,add:!1,remove:!1,download:!1},r.fillerHeight=0,r._apiCallRefs=[],r._filteredItems=[],r._dragDebounce=0,r._onAddFavorite=r._onAddFavorite.bind(r),r._onRemoveFavorite=r._onRemoveFavorite.bind(r),r._onUpdateFavorite=r._onUpdateFavorite.bind(r),r._onAddPersonalSong=r._onAddPersonalSong.bind(r),r._onUpdatePersonalSong=r._onUpdatePersonalSong.bind(r),r._onAddSong=r._onAddSong.bind(r),r._onRemoveSong=r._onRemoveSong.bind(r),r._onUpdateSong=r._onUpdateSong.bind(r),r._onPlaylistAssistantClick=r._onPlaylistAssistantClick.bind(r),r._onSendPersonalSong=r._onSendPersonalSong.bind(r),r._onSort=r._onSort.bind(r),r._onFilter=r._onFilter.bind(r),r._drop=r._drop.bind(r),r._dragOver=r._dragOver.bind(r),r._dragEnd=r._dragEnd.bind(r);var o=dn.a.hydrate(n.items),i=o.map(function(e){return Object(_n.e)(e)});r._store=(new yn).fill(i);var s=r._getOptions(n.options,n.type),l=Object(_n.k)(a.id||n.id,s.sorterStorageKey),c=l.cell,u=l.order;return r.state={id:n.id||a&&a.id,type:n.type,items:o,options:s,sortCell:c,sortOrder:u,filter:"",dragItems:null,dragDivider:null,isDragging:!1},r}return en(t,e),t.prototype.getChildContext=function(){return{id:this.props.id||this.context&&this.context.id,name:this.props.context||this.context&&this.context.name||Object(_n.b)(this.props.type),store:this._store,type:this.props.type}},t.prototype.componentWillMount=function(){this._filteredItems=this._filterItems(this.state.items,this.state.filter),this._filteredItems=this._sortItems(this._filteredItems,this.state.sortCell,this.state.sortOrder)},t.prototype.componentDidMount=function(){ln.a.subscribe(ln.a.user.addFavorite,this._onAddFavorite),ln.a.subscribe(ln.a.user.deleteFavorite,this._onRemoveFavorite),ln.a.subscribe(ln.a.user.updateFavorite,this._onUpdateFavorite),ln.a.subscribe(ln.a.user.sendPersonalSong,this._onSendPersonalSong),ln.a.subscribe(ln.a.user.addPersonalSong,this._onAddPersonalSong),ln.a.subscribe(ln.a.user.updatePersonalSong,this._onUpdatePersonalSong),ln.a.subscribe(ln.a.playlist.addSong,this._onAddSong),ln.a.subscribe(ln.a.playlist.removeSong,this._onRemoveSong),ln.a.subscribe(ln.a.playlist.updateSong,this._onUpdateSong),ln.a.subscribe(ln.a.player.tracklist_changed,this._onRemoveSong),!0===this.state.options.infiniteScroll&&this.forceUpdate()},t.prototype.componentWillReceiveProps=function(e,t){var n=dn.a.hydrate(e.items),a=n.map(function(e){return Object(_n.e)(e)}),r=e.id||t&&t.id,o=this._getOptions(e.options,e.type),i=Object(_n.k)(r,o.sorterStorageKey),s=i.cell,l=i.order;r!==this.state.id&&this._store.reset(),this._store.fill(a),this.setState({id:r,type:e.type,items:this.state.id!==r||this.props.type!==e.type||Object(_n.r)(e.type)?n:this.state.items,options:o,sortCell:s,sortOrder:l,filter:"",context:e.context||t&&t.name||Object(_n.b)(this.props.type)})},t.prototype.componentWillUpdate=function(e,t){this._filteredItems=this._filterItems(t.items,t.filter),this._filteredItems=this._sortItems(this._filteredItems,t.sortCell,t.sortOrder),!0===t.options.infiniteScroll&&!0===t.options.fillerHeight&&(this.fillerHeight=this._getFillerHeight(e.scrollingContainer))},t.prototype.componentWillUnmount=function(){this._apiCallRefs.forEach(cn.a.cancel),ln.a.unsubscribe(ln.a.user.addFavorite,this._onAddFavorite),ln.a.unsubscribe(ln.a.user.deleteFavorite,this._onRemoveFavorite),ln.a.unsubscribe(ln.a.user.updateFavorite,this._onUpdateFavorite),ln.a.unsubscribe(ln.a.user.sendPersonalSong,this._onSendPersonalSong),ln.a.unsubscribe(ln.a.user.addPersonalSong,this._onAddPersonalSong),ln.a.unsubscribe(ln.a.user.updatePersonalSong,this._onUpdatePersonalSong),ln.a.unsubscribe(ln.a.playlist.addSong,this._onAddSong),ln.a.unsubscribe(ln.a.playlist.removeSong,this._onRemoveSong),ln.a.unsubscribe(ln.a.playlist.updateSong,this._onUpdateSong),ln.a.unsubscribe(ln.a.player.tracklist_changed,this._onRemoveSong)},t.prototype.addItems=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(a){if("number"!=typeof a.count||a.count===e.length){a=a.data||a,e=a.map(function(e){return void 0===e.DATE_ADD&&(e.DATE_ADD=Number(Date.now()/1e3)),e}),e=dn.a.hydrate(e);var r=(e=n?e.concat(t.state.items):t.state.items.concat(e)).map(function(e){return Object(_n.e)(e)});t._store.fill(r),t.setState({items:e}),ln.a.trigger(ln.a.datagrid.addedItems,{items:e})}};if("number"!=typeof(e=Array.isArray(e)?e:[e])[0])a(e);else{e=e.map(function(e){return[e,0]});var r=cn.a.call({method:"song.getListAllData",data:{sng_ids:e},success:a});this._apiCallRefs.push(r)}},t.prototype.removeItems=function(e){e=Array.isArray(e)?e:[e],e=e.map(function(e){return Number(Array.isArray(e)?e[0]:e)}),e=this.state.items.filter(function(t){return-1===e.indexOf(Number(t.SNG_ID))}),this.setState({items:e})},t.prototype.updateItem=function(e,t){for(var n=this.state.items.slice(0),a=0,r=n.length;a<r;a++)if(Number(n[a].SNG_ID)===e){n[a]=Object.assign({},n[a],t);break}this.setState({items:dn.a.hydrate(n)},this._forceListUpdate)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-container"},this._renderToolbar(this._filteredItems),this.props.caption?rn.a.createElement("span",{className:"hide sr-only"},this.props.caption):null,rn.a.createElement("div",{ref:"datagrid",className:"datagrid"},this._renderHeader(this._filteredItems),this._renderBody(this._filteredItems)),this._renderDragImage())},t.prototype._renderToolbar=function(e){var t=this.props,n=t.onLoadAll,a=t.pageData,r=this.state,o=r.options,i=r.id,s=r.type,l=r.filter,c=r.sortOrder,u=r.sortCell;return!1===o.toolbar?null:rn.a.createElement(ma,{id:Number(i),type:s,data:a,items:e,options:o,onFilter:this._onFilter,filter:l,sortOrder:c,sortCell:u,onSort:this._onSort,onUpload:function(){return n()}})},t.prototype._renderHeader=function(e){var t=this.props,n=t.type,a=t.pageData,r=this.state,o=r.options,i=r.sortOrder,s=r.sortCell;return o.header?rn.a.createElement(Ea,{cells:Yr,nbTracks:a.NB_SONG,items:e,options:o,sortOrder:i,sortCell:s,onSort:this._onSort,type:n}):null},t.prototype._renderBody=function(e){return!1===this.state.options.infiniteScroll?this._renderLines(e):rn.a.createElement(Cn,{ref:"list",containerType:"div",spacerType:"div",elementHeight:_n.t},this._renderLines(e))},t.prototype._renderLines=function(e){var t=[],n=void 0,a=void 0,r=void 0,o=void 0,i=void 0,s=void 0,l=void 0,c=void 0,u=[],p=this.state,d=p.options,f=p.sortCell,h=p.dragDivider,m=p.type,y=p.filter,b=p.sortOrder;d.changeOrder&&null===f&&(r=!0,i=this._drop,s=this._dragOver,l=this._dragEnd);for(var _=0,g=e.length;_<g;++_)n=Object(_n.c)(e[_]),a=Object(_n.e)(n),!0===d.availableOnly&&!1===Object(_n.p)(e[_])||(h&&h[0]===a&&"before"===h[1]&&t.push(Xr),d.changeOrder&&null===f&&(o=this._dragStart.bind(this,e[_])),d.cdNumber&&n.DISK_NUMBER!==c&&null===f&&(u.push(_),c=n.DISK_NUMBER),t.push(rn.a.createElement(Wr,{type:m,items:e,item:e[_],filter:y,sortCell:f,sortOrder:b,options:d,index:r?_:e[_].SONG_RANK||_,draggable:r,onDragStart:o,onDrop:i,onDragOver:s,onDragEnd:l,key:Object(_n.h)(e[_])})),h&&h[0]===a&&"after"===h[1]&&t.push($r));return d.cdNumber&&u.length>1&&u.forEach(function(e,n){var a=String(n+1),r=e+n;t.splice(r,0,rn.a.createElement("div",{className:"datagrid-divider",key:"cd-"+a},rn.a.createElement("div",{className:"datagrid-row"},"CD ",a)))}),!1===d.infiniteScroll?t:(this.fillerHeight>0&&t.push(rn.a.createElement("div",{key:"filler",style:{height:this.fillerHeight}})),t)},t.prototype._renderDragImage=function(){var e=this.state,t=e.dragItems,n=e.isDragging;return rn.a.createElement(Qr,{ref:"dragImage",items:t,isDragging:n})},t.prototype._renderGridContextMenu=function(){return rn.a.createElement(An,{id:"grid_context_"+this.props.id})},t.prototype._renderPlaylistAssistant=function(){return!1===hn.a.isAllowed("playlist_assistant")?null:!1===this.state.options.playlistAssistant||0!==this.state.items.length||0===fn.a.get("USER.USER_ID")?null:this.fillerHeight<50?null:rn.a.createElement("button",{className:"btn datagrid-empty-add-track",type:"button",onClick:this._onPlaylistAssistantClick},Jr,rn.a.createElement("span",{className:"label"},Object(un.a)("Me suggérer des titres")))},t.prototype._onSort=function(e,t){if(null===e||void 0!==Yr[e]&&"function"==typeof Yr[e].sort){var n=this._updateSort.bind(this,e,t);"function"!=typeof this.props.onLoadAll?setTimeout(n,0):this.props.onLoadAll(n)}},t.prototype._onFilter=function(e){var t=this._updateFilter.bind(this,e);"function"!=typeof this.props.onLoadAll?setTimeout(t,0):this.props.onLoadAll(t)},t.prototype._onAddSong=function(e,t){if(this.state.id===Number(t.playlist_id)&&-1!==["personalPlaylist","collaborativePlaylist"].indexOf(this.props.type)){var n=t.song.map(function(e){return Number(Array.isArray(e)?e[0]:e)});this.addItems(n,hn.a.isAllowed("curator_local"))}},t.prototype._onRemoveSong=function(e,t){var n=this.props.type,a=["personalPlaylist","personalSong"].indexOf(n)>-1;("PLAYLIST.removeSong"!==e.namespace||a&&this.state.id===Number(t.playlist_id))&&"PLAYER.tracklist_changed"!==e.namespace&&this.removeItems(t.song)},t.prototype._onUpdateSong=function(e,t){this.state.id===Number(t.playlist_id)&&-1!==["personalPlaylist","personalSong"].indexOf(this.props.type)&&this.updateItem(t.id,t.item)},t.prototype._onAddFavorite=function(e,t){this.state.id===fn.a.get("USER.USER_ID")&&"loved"===this.props.type&&"personalLoved"===this.props.type&&"song"===t.type&&this.addItems(Number(t.id))},t.prototype._onRemoveFavorite=function(e,t){this.state.id===fn.a.get("USER.USER_ID")&&"loved"===this.props.type&&"personalLoved"===this.props.type&&this.removeItems(Number(t.id))},t.prototype._onUpdateFavorite=function(e,t){this.state.id===fn.a.get("USER.USER_ID")&&"loved"===this.props.type&&"personalLoved"===this.props.type&&this.updateItem(t.id,t.item)},t.prototype._onAddPersonalSong=function(e,t){this.state.id===fn.a.get("USER.USER_ID")&&"personalSong"===this.props.type&&this.addItems(Number(t))},t.prototype._onUpdatePersonalSong=function(e,t){this.state.id===fn.a.get("USER.USER_ID")&&"personalSong"===this.props.type&&this.updateItem(t.id,t.item)},t.prototype._onSendPersonalSong=function(e,t){this.addItems(t.sng_id)},t.prototype._onPlaylistAssistantClick=function(){pn.a.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)},t.prototype._forceListUpdate=function(){void 0!==this.refs&&void 0!==this.refs.list&&this.refs.list.forceUpdate()},t.prototype._getOptions=function(e,t){e=e||{};var n={},a=void 0,r=void 0;for(var o in this.defaultOptions)this.defaultOptions.hasOwnProperty(o)&&(a=e[o],r=vn.a[t]&&vn.a[t][o],n[o]=void 0!==a?a:void 0!==r?r:this.defaultOptions[o]);return!1!==n.toolbar&&(n.toolbar=Object.assign({},this.defaultToolbarOptions,n.toolbar)),!1!==n.header&&(n.header=Object.assign({},this.defaultHeaderOptions,n.header)),n},t.prototype._updateSort=function(e,t){var n=this.state,a=n.sortCell,r=n.sortOrder,o=n.options;if(void 0===t)switch(a===e&&r){case"asc":t="desc";break;case"desc":t=void 0,e=null;break;default:t="asc"}Object(_n.v)(this.context.id||this.props.id,o.sorterStorageKey,{cell:e,order:t}),r===t&&a===e||this.setState({sortOrder:t,sortCell:e},this._forceListUpdate)},t.prototype._updateFilter=function(e){this.state.filter!==e&&this.setState({filter:e},this._forceListUpdate)},t.prototype._sortItems=function(e,t,n){return void 0===Yr[t]||"function"!=typeof Yr[t].sort?e:((e=e.slice()).sort(Yr[t].sort),"asc"===n?e:e.reverse())},t.prototype._filterItems=function(e,t){var n=this;if(""===t)return e;if(!this._filterFuncs){this._filterFuncs=[];for(var a in Yr)Yr.hasOwnProperty(a)&&void 0!==Yr[a].filter&&this._filterFuncs.push(Yr[a].filter)}return e.filter(function(e){return n._filterFuncs.some(function(n){return n(t,e)})})},t.prototype._getFillerHeight=function(e){var t=e?e.offsetHeight:window.innerHeight,n=this.refs.datagrid.getBoundingClientRect().top,a=_n.w+_n.m+this._filteredItems.length*_n.t;return Math.max(0,t-n-a)},t.prototype._dragStart=function(e,t){var n=this.state.items,a=void 0,r=[];this._store.select(Object(_n.e)(e));for(var o=0,i=n.length;o<i;o++)a=Object(_n.e)(n[o]),this._store.isSelected(a)&&r.push(n[o]);if(Object(_n.r)(this.props.type)&&r.length>1)return this._store.unselectAll(),void t.preventDefault();this.setState({dragItems:r,isDragging:!0}),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",""),"setDragImage"in t.dataTransfer&&t.dataTransfer.setDragImage(sn.a.findDOMNode(this.refs.dragImage),-10,-10)},t.prototype._drop=function(){var e=void 0,t=void 0,n=this.state.items.slice(0),a=0,r=!1,o=!1,i=this.state,s=i.dragDivider,l=i.dragItems;for(Object(_n.f)(Object(_n.d)(s[0],n),n)<Object(_n.f)(l[0],n)?o=!0:r=!0,e=0,t=l.length;e<t;e++){var c=this._getIndexes(l[e],s);this._moveItem(n,c.src+(r?a--:0),c.dest+(o?a++:0))}var u=[];for(e=0,t=n.length;e<t;e++)u.push(Object(_n.e)(n[e]));var p=void 0;switch(this.props.type){case"personalPlaylist":case"collaborativePlaylist":p=cn.a.call({method:"playlist.updateOrder",data:{playlist_id:this.context.id,position:"0",order:u}});break;case"personalLoved":p=cn.a.call({method:"favorite_song.updateOrder",data:{position:"0",order:u}});break;case"queuelist":bn.a.orderTracks(u)}this._apiCallRefs.push(p),this.setState({items:n},this._forceListUpdate),this._cleanAfterDrag()},t.prototype._dragEnd=function(){this._cleanAfterDrag()},t.prototype._dragOver=function(e){e.preventDefault();var t=Date.now();if(!(t-this._dragDebounce<150)){this._dragDebounce=t;var n=this.state.dragDivider,a=Number(e.currentTarget.getAttribute("data-key")),r=e.currentTarget.getBoundingClientRect(),o=e.clientY-r.top<_n.t/2?"before":"after";n&&a===n[0]&&o===n[1]||this.setState({dragDivider:[a,o]},this._forceListUpdate)}},t.prototype._cleanAfterDrag=function(){var e=this.state,t=e.dragDivider,n=e.items;if(null!==t){var a=void 0,r=void 0,o=void 0;for(a=0,r=n.length;a<r;a++)o=Object(_n.e)(n[a]),this._store.unselect(o);this.setState({dragItems:null,dragDivider:null,isDragging:!1},this._forceListUpdate)}},t.prototype._getIndexes=function(e,t){var n=void 0,a=void 0,r=void 0,o=void 0,i=void 0,s=Object(_n.e)(Object(_n.c)(e)),l=t[0],c=t[1],u=this.state.items;for(n=0,a=u.length;n<a&&(r=Object(_n.e)(Object(_n.c)(u[n])),s===r&&(o=n),l===r&&(i=n),!o||!i);n++);return o<i&&"before"===c?i-=1:o>i&&"after"===c&&(i+=1),{src:o,dest:i}},t.prototype._moveItem=function(e,t,n){var a=void 0,r=e[t];if(t<n)for(a=t;a<n;a++)e[a]=e[a+1];else for(a=t;a>n;a--)e[a]=e[a-1];e[n]=r},t}(an.Component);Zr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string},Zr.childContextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string,store:nn.a.object,type:nn.a.string},Zr.defaultProps={id:0,context:void 0,caption:void 0,options:void 0,scrollingContainer:void 0,onLoadAll:void 0,pageData:{}};t.a=Zr},"./js/_components/DataGrid/FullPage.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=n.n(s),c=n("./node_modules/react/react.js"),u=n.n(c),p=n("./js/_components/DataGrid/utils.js"),d=n("./js/_modules/Events.js"),f=n("./js/_modules/api.js"),h=n("./js/_modules/config/index.js"),m=n("./js/_modules/Type.js"),y=n("./js/_components/DataGrid/DataGrid.js"),b=n("./js/_components/PageScroll.js"),_=n("./js/_modules/redux/stores/entities/playlists.js"),g=function(e){function t(n,a){r(this,t);var i=o(this,e.call(this,n,a));return i._isLoadingAll=!1,i._loadAll=i._loadAll.bind(i),i._update=i._update.bind(i),i._getData=i._getData.bind(i),i._itemsSize=Math.max(n.items.length,Math.ceil(n.items.length/p.l)*p.l),i._itemsTotal=n.itemsTotal,i.state={id:n.id||a&&a.id,context:n.context||a&&a.name||Object(p.b)(n.type),itemsNext:n.next||i._itemsSize},i}return i(t,e),t.prototype.getChildContext=function(){return{id:this.state.id,name:this.state.context}},t.prototype.componentDidMount=function(){this._isFullLoaded()&&this.props.onFullLoaded(),d.a.subscribe(d.a.datagrid.allTracksSelected,this._loadAll)},t.prototype.componentWillReceiveProps=function(e){this.setState({id:e.id||this.context&&this.context.id,context:e.context||this.context&&this.context.name||Object(p.b)(this.props.type),itemsNext:e.next||this._itemsSize})},t.prototype.shouldComponentUpdate=function(e,t){return t.itemsNext!==this.state.itemsNext||this.props.id&&e.id&&this.props.id!==e.id},t.prototype.componentWillUnmount=function(){f.a.cancel(this._apiLoadMore),d.a.unsubscribe(d.a.datagrid.allTracksSelected,this._loadAll)},t.prototype.isSorted=function(){var e=Object(p.k)(this.state.id,"topArtistFull"),t=e.cell,n=e.order;return null!==t||"string"==typeof n&&"asc"!==n},t.prototype.render=function(){var e=this.props,t=e.caption,n=e.type,a=e.pageData,r=e.items;return u.a.createElement(b.a,{loadData:this._getData,start:this.state.itemsNext,total:this._itemsTotal,nb:p.l,spacer:100,wrapperClass:""},u.a.createElement(y.a,{ref:"datagrid",caption:t,type:n,pageData:a,items:r,onLoadAll:this._loadAll}))},t.prototype._getData=function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!this._isFullLoaded()){var r=this._getRequestArgs(this.props.type,e,t),o=r.method,i=r.parameters;this._apiLoadMore=f.a.call({method:o,data:i,success:function(e){n._update(e),a()}})}},t.prototype._loadAll=function(e,t){t=(t="function"==typeof e?e:t)||function(){},this._isFullLoaded()?t():this._isLoadingAll||(this._isLoadingAll=!0,this._getData(this.state.itemsNext,this._itemsTotal-this.state.itemsNext,t))},t.prototype._update=function(e){var t=this,n=e=e.SONGS||e.EPISODES||e,a=n.data,r=n.count,o=n.total,i=n.next,s=this.state.itemsNext;this._itemsTotal=o,0!==r&&(this._itemsSize=a.length>p.l?o:this._itemsSize+Math.max(a.length,p.l),this.setState({itemsNext:i||this._itemsSize},function(){t.refs.datagrid.addItems(Object(_.f)(a,s)),t._isFullLoaded()&&t.props.onFullLoaded()}))},t.prototype._isFullLoaded=function(){return null!==this._itemsTotal&&this._itemsTotal<=this._itemsSize},t.prototype._getRequestArgs=function(e,t,n){var a=void 0,r=void 0;switch(e){case"loved":case"personalLoved":case"favorite":a="favorite_song.getList",r={user_id:this.state.id,start:t,nb:n};break;case"history":a="user.getSongsHistory",r={start:t,nb:n};break;case"personalSong":a="personal_song.getList",r={start:t,nb:n};break;case"search":a="search.music",r={query:this.context.id,filter:"searchTag"===this.context.searchType?"TAG":"ALL",output:"TRACK",start:t,nb:n};break;case"talkShow":a="deezer.pageShow",r={show_id:this.state.id,start:t,nb:n};break;case m.a.Audiobook:a="deezer.pageAudiobook",r={audiobook_id:this.state.id,start:this._itemsNext,nb:n};break;case"playlist":case"collaborativePlaylist":case"curatorPlaylist":case"chartsPlaylist":case"personalPlaylist":a="deezer.pagePlaylist",r={playlist_id:this.state.id,lang:h.a.get("SETTING_LANG"),start:t,nb:n,header:!1,tags:!1};break;case"downloads":a="store.getList",r={start:t,nb:n,order:7};break;case"topArtistFull":a="artist.getTopTrack",r={art_id:this.state.id,start:t,nb:this.isSorted()?p.u:n};break;default:throw new Error('Items of type "'+e+'" are not handled by the DataGrid.FullPage component.')}return{method:a,parameters:r}},t}(c.Component);g.contextTypes={id:l.a.oneOfType([l.a.number,l.a.string]),name:l.a.string,searchType:l.a.string},g.childContextTypes={id:l.a.oneOfType([l.a.number,l.a.string]),name:l.a.string.isRequired},g.defaultProps={itemsTotal:p.u,context:void 0,caption:void 0,next:void 0,pageData:{},onFullLoaded:function(){}},t.a=g},"./js/_components/DataGrid/index.js":function(e,t,n){"use strict";var a=n("./js/_components/DataGrid/DataGrid.js"),r=n("./js/_components/DataGrid/FullPage.js");a.a.FullPage=r.a,t.a=a.a},"./js/_components/DataGrid/presets/album.json":function(e,t){e.exports={cdNumber:!0,cells:["Play","Love","Title","AddToPlaylist","ContextMenu","FallbackLink","Lyrics","Duration","Popularity","Checkbox"],toolbar:{playAll:!0,favorite:!0,shareType:1,contextMenu:!0},header:{sorter:!0,add:!0,contextMenu:!0},multiArtist:!0,trackNumber:!0,sorterStorageKey:"album"}},"./js/_components/DataGrid/presets/audiobook.json":function(e,t){e.exports={cells:["Play","ChapterTitle","Share","Duration"],toolbar:{playAll:!0,favorite:!0,shareType:9},trackIndex:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/chartsPlaylist.json":function(e,t){e.exports={availableOnly:!0,cells:["Play","Variation","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0},trackIndex:!0,unseen:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/collaborativePlaylist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","Replace","EditMp3","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/curatorPlaylist.json":function(e,t){e.exports={availableOnly:!0,cells:["Play","Love","Title","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/discographyArtist.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics"],trackIndex:!0,trackNumber:!0}},"./js/_components/DataGrid/presets/downloads.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Download","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0,download:!0},toolbar:{playAll:!0,filter:!0,download:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/history.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0},toolbar:{playAll:!0,filter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/index.js":function(e,t,n){e.exports={album:n("./js/_components/DataGrid/presets/album.json"),collaborativePlaylist:n("./js/_components/DataGrid/presets/collaborativePlaylist.json"),curatorPlaylist:n("./js/_components/DataGrid/presets/curatorPlaylist.json"),chartsPlaylist:n("./js/_components/DataGrid/presets/chartsPlaylist.json"),history:n("./js/_components/DataGrid/presets/history.json"),personalSong:n("./js/_components/DataGrid/presets/personalSong.json"),loved:n("./js/_components/DataGrid/presets/loved.json"),personalLoved:n("./js/_components/DataGrid/presets/personalLoved.json"),personalPlaylist:n("./js/_components/DataGrid/presets/personalPlaylist.json"),playlist:n("./js/_components/DataGrid/presets/playlist.json"),downloads:n("./js/_components/DataGrid/presets/downloads.json"),search:n("./js/_components/DataGrid/presets/search.json"),talkShow:n("./js/_components/DataGrid/presets/talkShow.json"),talkEpisodes:n("./js/_components/DataGrid/presets/talkEpisodes.json"),discographyArtist:n("./js/_components/DataGrid/presets/discographyArtist.json"),topArtist:n("./js/_components/DataGrid/presets/topArtist.json"),topArtistFull:n("./js/_components/DataGrid/presets/topArtistFull.json"),audiobook:n("./js/_components/DataGrid/presets/audiobook.json"),queuelist:n("./js/_components/DataGrid/presets/queuelist.json"),queuelistPodcast:n("./js/_components/DataGrid/presets/queuelistPodcast.json")}},"./js/_components/DataGrid/presets/loved.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0},toolbar:{playAll:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,sorterStorageKey:"loved",trackIndex:!0}},"./js/_components/DataGrid/presets/personalLoved.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","AddToPlaylist","Replace","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,sorterStorageKey:"loved",trackIndex:!0}},"./js/_components/DataGrid/presets/personalPlaylist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","Replace","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,shareType:3,contextMenu:!0,edit:!0,filter:!0,sorter:!0},infiniteScroll:!0,trackIndex:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/personalSong.json":function(e,t){e.exports={cells:["Play","Love","Title","EditMp3","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0,remove:!0},toolbar:{playAll:!0,upload:!0,filter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/playlist.json":function(e,t){e.exports={availableOnly:!1,cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,trackIndex:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/queuelist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","ContextMenu","Lyrics","Artist","Duration","RemoveFromQueueList"],multiArtist:!0,cover:"album",sorterStorageKey:"queuelist"}},"./js/_components/DataGrid/presets/queuelistPodcast.json":function(e,t){e.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","Share","Duration","EpisodeReleaseDate"],cover:"episode",sorterStorageKey:"queuelist"}},"./js/_components/DataGrid/presets/search.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},infiniteScroll:!0,fillerHeight:!0,cover:"album",sorterStorageKey:"search"}},"./js/_components/DataGrid/presets/talkEpisodes.json":function(e,t){e.exports={availableOnly:!0,cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","EpisodeAdd","Duration","EpisodeReleaseDate"],shareType:8,trackIndex:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/talkShow.json":function(e,t){e.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","Share","Duration","EpisodeReleaseDate"],toolbar:{playAll:!0,favorite:!0,shareType:7},infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/topArtist.json":function(e,t){e.exports={cells:["Play","Love","Title","ContextMenu","Lyrics"],toolbar:!1,share:!0,trackIndex:!0,selectAll:!1}},"./js/_components/DataGrid/presets/topArtistFull.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Popularity","Duration","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,filter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/utils.js":function(e,t,n){"use strict";function a(e){return{playlist:"playlist_page",search:"search_page",personalSong:"personalsong_page",downloads:"downloads_page",album:"album_page",topArtist:"artist_top",discographyArtist:"artist_discography",exclusivityArtist:"artist_exclu",discography:"artist_discography",loved:"loved_page",personalLoved:"loved_page",history:"history_page",audiobook:"audiobook_page",talkShow:"show_page",talkEpisodes:"show_page",curatorPlaylist:"playlist_page",chartsPlaylist:"playlist_page",personalPlaylist:"playlist_page",collaborativePlaylist:"playlist_page",topArtistFull:"artist_top",menu_panel_playlist:"playlist_page",menu_panel_album:"album_page",menu_panel_show:"show_page",suggest_playlist:"playlist_page",suggest_album:"album_page",search_playlist:"playlist_page",search_album:"album_page",artist_discography:"album_page",artist_similar_playlist:"playlist_page",history_playlist:"playlist_page",history_album:"album_page"}[e]||e}function r(e){return Number(e.SNG_ID||e.EPISODE_ID||e.id)}function o(e){return e.hasFallback()?e.getFallback():e}function i(e,t){for(var n=r(o(e)),a=0,i=t.length;a<i;a++)if(n===r(o(t[a]))&&e.TS===t[a].TS&&e.UID===t[a].UID)return a;return-1}function s(e){return E.a.checkSongAvailable(o(e))===E.a.READABLE}function l(e){var t=E.a.checkSongAvailable(o(e));return E.a.getMessage(t)}function c(e){return e.SNG_ID>0}function u(e,t){for(var n=0,a=t.length;n<a;n++){var i=o(t[n]);if(r(i)===e)return i}return null}function p(e,t){return T.a.get(t.toUpperCase()+"_SORT_"+e,{cell:null,order:"asc"})}function d(e,t,n){T.a.set(t.toUpperCase()+"_SORT_"+e,n)}function f(e){return"queuelist"===e||"queuelistPodcast"===e}function h(e,t){return!(!t||!e.hasOwnProperty("DATE_ADD"))&&e.DATE_ADD>t}function m(e,t){if(null===O.a.getContext()||null===O.a.getCurrentSong())return!1;var n=r(O.a.getCurrentSong())===r(o(e)),a=!t||(O.a.getContext("TYPE")===t||S.a.get("LOG_CONTEXT")[O.a.getContext("TYPE")]===S.a.get("LOG_CONTEXT")[t]||f(t)),i=!e.TS||e.TS===O.a.getCurrentSong().TS,s=!e.UID||e.UID===O.a.getCurrentSong().UID;return n&&a&&i&&s}function y(e){return e=Array.isArray(e)?e:[e],j.a.call({method:"store.getDownloadUrl",data:{songs:e},success:function(e){var t=e+"";A.a.assign(t)}})}function b(e){return"item-"+r(e)+(e.TS?"-"+e.TS:"")+(e.UID?"-"+e.UID:"")}function _(e,t){var n=!0===e.options.infiniteScroll,r=""!==e.filter||null!==e.sortCell||e.items.length<P,o="topArtist"===e.type,s="discographyArtist"===e.type,l="history"===e.type,c=(n&&!r||o||s)&&!l?void 0:e.items;return{id:t.id,type:e.type,data:c,index:i(e.item,e.items),context:{TYPE:a(e.type),ID:t.id}}}function g(e){var t=E.a.checkSongAvailable(o(e));return t!==E.a.NOT_RELEASE_FREE&&t!==E.a.NOT_RELEASE_PREMIUM}function v(e){var t=o(e),n=E.a.checkSongAvailable(t)===E.a.NOT_RELEASE_FREE?E.a.getTimestampAds(t.RIGHTS):E.a.getTimestampSub(t.RIGHTS);return n?Object(w.K)(n,!1,"-",!0).split("-"):"2000-01-01".split("-")}n.d(t,"u",function(){return C}),n.d(t,"l",function(){return P}),n.d(t,"b",function(){return a}),n.d(t,"f",function(){return i}),n.d(t,"p",function(){return s}),n.d(t,"q",function(){return h}),n.d(t,"o",function(){return m}),n.d(t,"g",function(){return l}),n.d(t,"e",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"n",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"k",function(){return p}),n.d(t,"v",function(){return d}),n.d(t,"a",function(){return y}),n.d(t,"h",function(){return b}),n.d(t,"i",function(){return _}),n.d(t,"s",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"r",function(){return f}),n.d(t,"w",function(){return N}),n.d(t,"m",function(){return k}),n.d(t,"t",function(){return R});var E=n("./js/_modules/right.js"),O=n("./js/_modules/dzPlayer.js"),T=n("./js/_modules/storage.js"),j=n("./js/_modules/api.js"),S=n("./js/_modules/config/index.js"),w=n("./js/_modules/utils.js"),A=n("./js/_modules/navigation/index.js"),P=40,C=2e3,N=48,k=52,R=52},"./js/_components/Dislike.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=(n.n(s),n("./node_modules/react/react.js")),c=n.n(l),u=n("./node_modules/classnames/index.js"),p=n.n(u),d=n("./js/_modules/i18n.js"),f=n("./js/_modules/favorite.js"),h=n("./js/_modules/Events.js"),m=n("./js/_modules/dzPlayer.js"),y=n("./js/_modules/userData.js"),b=n("./js/_components/Icon/index.js"),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._onDislikeClick=a._onDislikeClick.bind(a),a.state={active:!1},a}return i(t,e),t.prototype.componentDidMount=function(){h.a.subscribe(h.a.user.addFavorite,this._onFavoriteToggle),h.a.subscribe(h.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.componentWillReceiveProps=function(){this.setState({active:!1})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.active!==t.active||this.props.id!==e.id},t.prototype.componentWillUnmount=function(){clearTimeout(this._removeTooltipTimeout),h.a.unsubscribe(h.a.user.addFavorite,this._onFavoriteToggle),h.a.unsubscribe(h.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.tooltip,a=e.tooltip_gravity,r=this.state.active,o=Object(d.a)("Ne plus me proposer ce titre"),i={};n&&(i={"data-tooltip":"1","data-tooltip-gravity":a,"data-tooltip-delay":"400","data-original-title":o});var s=_({className:p()(t,{"evt-over evt-out":n}),type:"button",onClick:this._onDislikeClick,"aria-label":o},i),l=p()({"is-active":r&&m.a.skipRadioAllowed()});return c.a.createElement("button",s,c.a.createElement(b.a,{className:l,name:"cancel",size:"auto"}))},t.prototype._onFavoriteToggle=function(e,t){var n=Number(this.props.id);n===Number(t.SNG_ID)&&"disliked_song"===t.type&&this.setState({active:y.a.isDisliked(n)})},t.prototype._onDislikeClick=function(e){e.stopPropagation();var t=this.props,n=t.type,a=t.id,r=t.onClickCallback;f.a.add({type:n,id:a}),r(),this._removeTooltipTimeout=setTimeout(function(){document.querySelectorAll(".tipsy").forEach(function(e){return e.parentNode.removeChild(e)})},0)},t}(l.Component);g.defaultProps={className:"",type:"disliked_song",tooltip:!1,tooltip_gravity:"s",onClickCallback:function(){}},t.a=g},"./js/_components/Menu/store/menu.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case r:return t.activePanel!==e.activePanel?a({},e,{activePanel:t.activePanel}):e;default:return e}},n.d(t,"b",function(){return i});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r="components/Menu/SET_ACTIVE_PANEL",o={activePanel:null},i=function(e){return{type:r,activePanel:e.panel}}},"./js/_components/Menu/store/queuelist.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;switch(t.type){case c:if(e.selectedItems[t.index])delete(n=Object.assign({},e.selectedItems))[t.index];else{var a;n=l({},e.selectedItems,(a={},a[t.index]=t.data,a))}return l({},e,{selectedItems:n});case u:return t.hasSelectedFavorite!==e.hasSelectedFavorite?l({},e,{hasSelectedFavorite:t.hasSelectedFavorite}):e;case s.c:return p;default:return e}},n.d(t,"f",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"e",function(){return y}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return _});var a=n("./node_modules/reselect/es/index.js"),r=n("./node_modules/lodash.size/index.js"),o=n.n(r),i=n("./js/_modules/dzPlayer.js"),s=n("./js/_components/Player/store/music.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c="components/Menu/queuelist/TOGGLED_SELECTED_ITEM",u="components/Menu/queuelist/UPDATED_SELECTED_FAVORITE",p={selectedItems:{},hasSelectedFavorite:!1},d=function(e){return{type:c,index:e.index,data:e.data}},f=function(e){return{type:u,hasSelectedFavorite:e.hasSelectedFavorite}},h=function(e){return e.queuelist.selectedItems},m=Object(a.a)([h],function(e){return o()(e)}),y=Object(a.a)([h],function(e){return Object.keys(e).reverse()}),b=Object(a.a)([h],function(e){return Object.keys(e).map(function(t){return e[t]})}),_=Object(a.a)([h],function(e){return Object.keys(e).map(function(t){var n=e[t],a=i.a.getMediaId(n);return e[t][a]})})},"./js/_components/PageScroll.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=(n.n(s),n("./node_modules/react/react.js")),c=n.n(l),u=n("./node_modules/lodash.debounce/index.js"),p=n.n(u),d=n("./js/_modules/Events.js"),f=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onScroll=a._onScroll.bind(a),a._onResize=a._onResize.bind(a),a}return i(t,e),t.prototype.componentWillMount=function(){this._scrollActive=0!==this.props.total,this._scrollActive&&0===this.props.start&&this._loadData()},t.prototype.componentDidMount=function(){this._resizeCallback=p()(this._onResize,500),d.a.subscribe(d.a.layout.scroll,this._onScroll),window.addEventListener("resize",this._resizeCallback),this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype.componentWillReceiveProps=function(e){this._scrollActive=0!==e.total,this._scrollActive&&0===e.start&&this._loadData()},t.prototype.componentDidUpdate=function(){this._scrollActive=this.props.total>this.props.start,this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype.componentWillUnmount=function(){this._resizeCallback.cancel(),d.a.unsubscribe(d.a.layout.scroll,this._onScroll),window.removeEventListener("resize",this._resizeCallback)},t.prototype.render=function(){return c.a.createElement("div",{className:this.props.wrapperClass,"aria-live":"polite"},this.props.children)},t.prototype._onScroll=function(e,t){var n=t.height,a=t.yscroll,r=document.body.scrollHeight;this._scrollActive&&r<=n+a+this.props.spacer&&this._loadData()},t.prototype._onResize=function(){this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype._loadData=function(){this._scrollActive=!1;var e=this.props,t=e.start,n=e.nb;this.props.loadData(t,n)},t.prototype._hasScrollbar=function(){return window.innerHeight<document.body.scrollHeight},t}(l.Component);f.defaultProps={wrapperClass:"container",spacer:0,nb:20},t.a=f},"./js/_components/Player/presets/ad.json":function(e,t){e.exports={label:!0,next:!0,pause:!0,play:!0,prev:!0,timer:!0,title:{id:"ART_ID",url:"/artist/"},volume:!0}},"./js/_components/Player/presets/blindtest.json":function(e,t){e.exports={chromecast:!0,contextMenu:!0,cover:!0,dislike:!1,label:!1,like:!0,lyrics:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,queuelist:!0,repeat:!0,seek:!0,shuffle:!0,subTitle:{id:"ALB_ID",url:"/album/"},stop:!1,timer:!0,title:{url:"/artist/"},volume:!0}},"./js/_components/Player/presets/business.json":function(e,t){e.exports={cover:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,seek:!0,subTitle:{id:"ART_ID",url:"/artist/"},timer:!0,title:{id:"ALB_ID",url:"/album/"},volume:!0}},"./js/_components/Player/presets/businessRadio.json":function(e,t){e.exports={cover:!0,mute:!0,pause:!0,play:!0,subTitle:{id:"ART_ID",url:"/artist/"},timer:!0,title:{id:"ALB_ID",url:"/album/"},volume:!0}},"./js/_components/Player/presets/externalTrack.json":function(e,t){e.exports={cover:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,queuelist:!0,repeat:!0,seek:!0,shuffle:!0,subTitle:{id:"ART_ID",url:"/artist/"},timer:!0,title:{id:"ALB_ID",url:"/album/"},volume:!0}},"./js/_components/Player/presets/index.js":function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"a",function(){return O});var a=n("./js/_components/Player/presets/ad.json"),r=n.n(a),o=n("./js/_components/Player/presets/blindtest.json"),i=n.n(o),s=n("./js/_components/Player/presets/business.json"),l=n.n(s),c=n("./js/_components/Player/presets/businessRadio.json"),u=n.n(c),p=n("./js/_components/Player/presets/standard.json"),d=n.n(p),f=n("./js/_components/Player/presets/externalTrack.json"),h=n.n(f),m=n("./js/_components/Player/presets/radio.json"),y=n.n(m),b=n("./js/_components/Player/presets/livestream.json"),_=n.n(b),g=n("./js/_components/Player/presets/podcast.json"),v=n.n(g),E={ad:r.a,blindtest:i.a,business:l.a,businessRadio:u.a,standard:d.a,externalTrack:h.a,radio:y.a,livestream:_.a,podcast:v.a},O={AD:"ad",BLINDTEST:"blindtest",BUSINESS:"business",BUSINESS_RADIO:"businessRadio",STANDARD:"standard",EXTERNAL_TRACK:"externalTrack",RADIO:"radio",LIVESTREAM:"livestream",PODCAST:"podcast"}},"./js/_components/Player/presets/livestream.json":function(e,t){e.exports={cover:!0,label:!0,mute:!0,next:!0,play:!0,prev:!0,stop:!0,title:!0,volume:!0}},"./js/_components/Player/presets/podcast.json":function(e,t){e.exports={chromecast:!0,cover:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,queuelist:!0,seek:!0,skipBackwards:!0,skipForwards:!0,subTitle:{id:"SHOW_ID",url:"/show/"},timer:!0,title:{id:"SHOW_ID",url:"/show/"},volume:!0}},"./js/_components/Player/presets/radio.json":function(e,t){e.exports={chromecast:!0,contextMenu:!0,cover:!0,dislike:!0,label:!0,like:!0,lyrics:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,queuelist:!0,saveAsPlaylist:!0,seek:!0,subTitle:{id:"ART_ID",url:"/artist/"},timer:!0,title:{id:"ALB_ID",url:"/album/"},volume:!0}},"./js/_components/Player/presets/standard.json":function(e,t){e.exports={chromecast:!0,contextMenu:!0,cover:!0,dislike:!1,label:!1,like:!0,lyrics:!0,mute:!0,next:!0,pause:!0,play:!0,prev:!0,queuelist:!0,repeat:!0,saveAsPlaylist:!0,seek:!0,shuffle:!0,subTitle:{url:"/artist/"},stop:!1,timer:!0,title:{id:"ALB_ID",url:"/album/"},upnext:!0,volume:!0}},"./js/_components/Player/store/chromecast.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case r.a:return o({},u,{loading:a.a.isLoading(),active:a.a.isActive(),chunksInfo:a.a.getChunksInfo()});case i:return o({},e,{available:t.status,connecting:!1,casting:!1,active:t.active,chunksInfo:t.chunksInfo});case s:return o({},e,{available:!0,connecting:t.status,casting:!1,chunksInfo:t.chunksInfo});case l:return o({},e,{available:!0,connecting:!1,active:t.active,casting:t.status,chunksInfo:t.chunksInfo});case c:return o({},e,{loading:t.loading,active:t.active,chunksInfo:t.chunksInfo});default:return e}},n.d(t,"c",function(){return p}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return h});var a=n("./js/_modules/chromecast/index.js"),r=n("./js/_components/Player/store/music.js"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i="components/Player/chromecast/SET_AVAILABLE_STATUS",s="components/Player/chromecast/SET_CONNECTING_STATUS",l="components/Player/chromecast/SET_CASTING_STATUS",c="components/Player/chromecast/SET_ACTIVE_STATE",u={available:!1,connecting:!1,casting:!1,loading:!1,active:!1,chunksInfo:{}},p=function(e){return{type:i,status:e.status,active:e.active,chunksInfo:e.chunksInfo}},d=function(e){return{type:s,status:e.status,chunksInfo:e.chunksInfo}},f=function(e){return{type:l,status:e.status,active:e.active,chunksInfo:e.chunksInfo}},h=function(e){return{type:c,loading:e.loading,active:e.active,chunksInfo:e.chunksInfo}}},"./js/_components/Player/store/config.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SET_BLIND_TEST_MODE",function(){return c}),n.d(t,"UPDATED_PLAYER_TYPE",function(){return u}),n.d(t,"SET_PLAYER_FULL",function(){return p}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,a=void 0,i=void 0;switch(t.type){case s.a:case s.c:case s.b:return n=o.a.isAllowed("business"),a=o.a.isAllowed("business_mod"),l({},e,{isBusiness:n,isBusinessMod:a,isBusinessNonMod:n&&!a,isRadio:r.a.isRadio(),isUpnext:"up_next_artist"===r.a.getContext("TYPE"),isFlow:r.a.helper.isPlayingFlow(),isMyFlow:r.a.helper.isPlayingUserFlow(),playerType:r.a.getPlayerType()});case c:return Boolean(t.active)!==e.isBlindTestMode?l({},e,{isBlindTestMode:Boolean(t.active)}):e;case u:return(i=r.a.getPlayerType())!==e.playerType?l({},e,{playerType:i}):e;case p:return e.isPlayerFull!==t.isPlayerFull?l({},e,{isPlayerFull:t.isPlayerFull}):e;default:return e}},n.d(t,"setBlindTestMode",function(){return f}),n.d(t,"updatePlayerType",function(){return h}),n.d(t,"setPlayerFull",function(){return m}),n.d(t,"getInterfaceType",function(){return y}),n.d(t,"getInterfaceConfiguration",function(){return b});var a=n("./node_modules/reselect/es/index.js"),r=n("./js/_modules/dzPlayer.js"),o=n("./js/_modules/gatekeeper.js"),i=n("./js/_components/Player/presets/index.js"),s=n("./js/_components/Player/store/music.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c="components/Player/config/SET_BLIND_TEST_MODE",u="component/Player/config/UPDATED_PLAYER_TYPE",p="component/Player/config/SET_PLAYER_FULL",d={isBusiness:!1,isBusinessMod:!1,isBusinessNonMod:!1,isRadio:!1,isUpnext:!1,isFlow:!1,isMyFlow:!1,isBlindTestMode:!1,isPlayerFull:!1,playerType:""},f=function(e){return{type:c,active:e}},h=function(){return{type:u}},m=function(e){return{type:p,isPlayerFull:e.isPlayerFull}},y=Object(a.a)([function(e){return e.player.config},function(e){return e.player.music}],function(e,t){return t.mediaType===r.a.MEDIA_TYPE_TALK?i.a.PODCAST:t.mediaType===r.a.MEDIA_TYPE_LIVE_STREAM?i.a.LIVESTREAM:t.mediaType===r.a.MEDIA_TYPE_EXTERNAL?i.a.EXTERNAL_TRACK:t.mediaType===r.a.MEDIA_TYPE_ADS?i.a.AD:e.isBlindTestMode?i.a.BLINDTEST:e.isBusinessMod?i.a.BUSINESS:e.isBusinessNonMod?i.a.BUSINESS_RADIO:e.isRadio?i.a.RADIO:i.a.STANDARD}),b=Object(a.a)([y],function(e){return Object.assign({},i.b[e])})},"./js/_components/Popper/store/popper.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case a:return{popperId:t.popperId};case r:return{popperId:""};default:return e}},n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s});var a="components/Popper/SET_ACTIVE",r="components/Popper/SET_INACTIVE",o={popperId:""},i=function(e){return{type:a,popperId:e}},s=function(){return{type:r}}},"./js/_components/Root.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}function p(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):p(e,t))}function m(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):m(e,t))}function g(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):g(e,t))}function T(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):T(e,t))}function A(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):A(e,t))}function k(e){return Vo[e]||!1}function R(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):R(e,t))}function L(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):L(e,t))}function B(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):B(e,t))}function Y(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Y(e,t))}function K(e,t){var n=null;return t===so.a.MEDIA_TYPE_TALK?n="/show/"+e.SHOW_ID:Number(e.ALB_ID)>0&&(n="/album/"+e.ALB_ID),n}function Q(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Q(e,t))}function Z(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Z(e,t))}function ae(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ae(e,t))}function se(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):se(e,t))}function pe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):pe(e,t))}function me(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):me(e,t))}function ge(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ge(e,t))}function Te(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Te(e,t))}function Ae(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ae(e,t))}function ke(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ke(e,t))}function xe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):xe(e,t))}function Fe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Fe(e,t))}function ze(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ze(e,t))}function We(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):We(e,t))}function $e(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$e(e,t))}function tt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):tt(e,t))}function ot(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ot(e,t))}function ct(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ct(e,t))}function ft(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ft(e,t))}function bt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):bt(e,t))}function Et(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Et(e,t))}function St(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):St(e,t))}function Ct(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ct(e,t))}function Dt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Dt(e,t))}function Mt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Mt(e,t))}function Ht(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ht(e,t))}function qt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):qt(e,t))}function Qt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Qt(e,t))}function Zt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Zt(e,t))}function an(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function sn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):an(e,t))}function ln(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ln(e,t))}function dn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):dn(e,t))}function yn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):yn(e,t))}function vn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function On(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):vn(e,t))}function jn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function An(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):jn(e,t))}function Pn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Pn(e,t))}function Rn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Rn(e,t))}function Ln(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ln(e,t))}function Bn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Bn(e,t))}function Yn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Yn(e,t))}function Kn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Kn(e,t))}function Jn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ta(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Jn(e,t))}function na(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function oa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):na(e,t))}function ia(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function la(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ia(e,t))}function ua(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function da(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ua(e,t))}function ha(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ba(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ha(e,t))}function _a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ea(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_a(e,t))}function Oa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Sa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Oa(e,t))}function wa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):wa(e,t))}function Na(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Na(e,t))}function Ia(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function La(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ma(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ia(e,t))}function Ua(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ba(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ha(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ua(e,t))}function Ga(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ya(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ga(e,t))}function Va(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ka(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Va(e,t))}function Xa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function $a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ja(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Za(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Xa(e,t))}function er(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):er(e,t))}function rr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function sr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):rr(e,t))}function lr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):lr(e,t))}function dr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):dr(e,t))}function yr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function gr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):yr(e,t))}function vr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):vr(e,t))}function jr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):jr(e,t))}function Pr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function kr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Pr(e,t))}function Rr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Rr(e,t))}function Lr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Lr(e,t))}function Br(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Br(e,t))}function Yr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Yr(e,t))}function Kr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Kr(e,t))}function Jr(){return void 0!==lo.a.get("USER")&&lo.a.get("USER.OPTIONS.ads_display")&&so.a.isAdvertisingAllowed()}function Zr(){0===lo.a.get("USER.USER_ID")&&io.c.goToConnection()}function eo(e){var t=e.params,n=t.id,a=void 0===n?null:n,r=t.goBack,o=void 0!==r&&r;if(a){var i=window.history&&window.history.pushState?oo.f:oo.g;o?i.goBack():i.replace("/"),so.a.play({type:co.a.Livestream,id:parseInt(a,10),radio:!0,context:{TYPE:"livestream_page",ID:parseInt(a,10)}})}}function to(e,t,a){return uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod")?ao.a.createElement(oo.d,{path:"/",component:Jr()?hd:Vp,appState:e,modalPath:t,store:a},ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),bd):ao.a.createElement(oo.d,{path:"/",component:Jr()?hd:Vp,appState:e,modalPath:t,store:a},ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),lo.a.get("AVAILABLE_LANGUAGES").map(function(e){return ao.a.createElement(oo.d,{key:e,path:e+"/"},ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"channels/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("artist-index").then(n.bind(null,"./js/Artist/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"artist/:id(/:tab)",getComponent:function(e,t){return n.e("artist-index").then(n.bind(null,"./js/Artist/index.js")).then(md(t)).catch(yd)}})),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("album-index").then(n.bind(null,"./js/Album/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"album/:id",getComponent:function(e,t){return n.e("album-index").then(n.bind(null,"./js/Album/index.js")).then(md(t)).catch(yd)}})),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("audiobook-index").then(n.bind(null,"./js/Audiobook/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"audiobook/:id",getComponent:function(e,t){return n.e("audiobook-index").then(n.bind(null,"./js/Audiobook/index.js")).then(md(t)).catch(yd)}})),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("playlist-index").then(n.bind(null,"./js/Playlist/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"playlist/:id",getComponent:function(e,t){return n.e("playlist-index").then(n.bind(null,"./js/Playlist/index.js")).then(md(t)).catch(yd)}})),ao.a.createElement(oo.d,null,ao.a.createElement(oo.a,{getComponent:function(e,t){return n.e("track-index").then(n.bind(null,"./js/Track/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"track/:id(/:tab)",getComponent:function(e,t){return n.e("track-index").then(n.bind(null,"./js/Track/index.js")).then(md(t)).catch(yd)}})))})),ao.a.createElement(oo.d,{path:"flow",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"feed",getComponent:function(e,t){return n.e("feed-index").then(n.bind(null,"./js/Feed/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"mixes/genre/:id",getComponent:function(e,t){return n.e("mix-index").then(n.bind(null,"./js/Mix/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,null,ao.a.createElement(oo.d,{path:"mixes/:type/:id",getComponent:function(e,t){return n.e("mixes-index").then(n.bind(null,"./js/Mixes/index.js")).then(md(t)).catch(yd)}}),_d),ao.a.createElement(oo.d,{path:"shows(/:tab(/:id))",getComponent:function(e,t){return n.e("shows-index").then(n.bind(null,"./js/Shows/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"profile/:id(/:tab)",getComponent:function(e,t){return n.e("profile-index").then(n.bind(null,"./js/Profile/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"appstudio",getComponent:function(e,t){return n.e("appstudio-index").then(n.bind(null,"./js/AppStudio/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"app/login",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"app/:app_id(/)*",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"artist/:id(/:tab)",getComponent:function(e,t){return n.e("artist-index").then(n.bind(null,"./js/Artist/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"album/:id",getComponent:function(e,t){return n.e("album-index").then(n.bind(null,"./js/Album/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"playlist/:id",getComponent:function(e,t){return n.e("playlist-index").then(n.bind(null,"./js/Playlist/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"search/:query(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"tags/:tags(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"show/:id",getComponent:function(e,t){return n.e("show-index").then(n.bind(null,"./js/Show/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"audiobook/:id",getComponent:function(e,t){return n.e("audiobook-index").then(n.bind(null,"./js/Audiobook/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"offline",getComponent:function(e,t){return n.e("offline-index").then(n.bind(null,"./js/Offline/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"track/:id(/:tab)",getComponent:function(e,t){return n.e("track-index").then(n.bind(null,"./js/Track/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"episodes",getComponent:function(e,t){return n.e("episodes-index").then(n.bind(null,"./js/Episodes/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"episode/:id",getComponent:function(e,t){return n.e("episode-index").then(n.bind(null,"./js/Episode/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,null,ao.a.createElement(oo.d,{path:"channels/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),gd,vd,Ed,Od,Td),ao.a.createElement(oo.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"plannings",getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(md(t)).catch(yd)},onEnter:Zr}),ao.a.createElement(oo.d,{path:"account(/:tab)",getComponent:function(e,t){return n.e("account-index").then(n.bind(null,"./js/Account/index.js")).then(md(t)).catch(yd)}}),ao.a.createElement(oo.d,{path:"/livestream/:id(/:goBack)",onEnter:eo,getComponent:function(){return[]}}),ao.a.createElement(oo.d,{path:"*",getComponent:function(e,t){return n.e("legacy-index").then(n.bind(null,"./js/Legacy/index.js")).then(md(t)).catch(yd)}}))}var no=n("./node_modules/react/react.js"),ao=n.n(no),ro=n("./node_modules/react-redux/es/index.js"),oo=n("./node_modules/react-router/es/index.js"),io=n("./js/_modules/www.js"),so=n("./js/_modules/dzPlayer.js"),lo=n("./js/_modules/config/index.js"),co=n("./js/_modules/Type.js"),uo=n("./js/_modules/gatekeeper.js"),po=n("./node_modules/jquery/dist/jquery.js"),fo=n.n(po),ho=n("./node_modules/prop-types/index.js"),mo=n.n(ho),yo=n("./node_modules/lodash.size/index.js"),bo=n.n(yo),_o=n("./js/_modules/modal.js"),go=n("./js/_modules/Events.js"),vo=n("./js/_modules/live/live.js"),Eo=n("./js/_modules/userData.js"),Oo=n("./js/_modules/logger/browser.js"),To=n("./js/_modules/Labs.js"),jo=n("./js/_modules/ui.js"),So=n("./node_modules/react-smooth/es6/index.js"),wo=n("./js/_modules/redux/stores/modal.js"),Ao=n("./node_modules/classnames/index.js"),Po=n.n(Ao),Co=n("./js/_modules/i18n.js"),No=n("./js/_modules/api.js"),ko=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=Po()("modal-header",this.props.className);return ao.a.createElement("div",{id:"modal_title",className:e},this.props.children)},t}(no.Component);ko.defaultProps={className:""};var Ro=ko,Do=function(e){function t(){return l(this,t),c(this,e.apply(this,arguments))}return u(t,e),t.prototype.render=function(){var e,t=Po()("modal-body",(e={},e[this.props.className]=!0,e));return ao.a.createElement("div",{className:t},this.props.children)},t}(no.Component);Do.defaultProps={className:""};var Io=Do,xo=function(e){function t(){return d(this,t),f(this,e.apply(this,arguments))}return h(t,e),t.prototype.render=function(){var e=Po()("modal-footer",this.props.className);return ao.a.createElement("div",{className:e},this.props.children)},t}(no.Component);xo.defaultProps={className:""};var Lo={Header:Ro,Body:Io,Footer:xo},Mo=n("./js/_components/Icon/index.js"),Uo=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Fo=function(e){function t(n){y(this,t);var a=b(this,e.call(this,n));return a._actionsList={artist:["cover","duplicate_artist","explicit_content","other"],album:["wrong_artist","audio","explicit_content","other"],track:["wrong_artist","audio","explicit_content","other"]},a._onInputClick=a._onInputClick.bind(a),a._onClose=a._onClose.bind(a),a._onSubmit=a._onSubmit.bind(a),a._onClickOther=a._onClickOther.bind(a),a.state={inputOtherDisplay:!1,inputOtherError:!1,confirmMessage:!1},a}return _(t,e),t.prototype.componentWillUnmount=function(){No.a.cancel(this._feedbackApiRef)},t.prototype.render=function(){var e=this._getData();return e?ao.a.createElement("div",{className:"modal-feedback-catalog"},ao.a.createElement(Lo.Header,null,Object(Co.a)("Signaler un problème")),ao.a.createElement(Lo.Body,{className:"feedback-catalog"},this._renderBody(e)),ao.a.createElement(Lo.Footer,null,this._renderFooter())):null},t.prototype._renderBody=function(e){var t=this,n=this.state.confirmMessage;return!1!==n?ao.a.createElement("h4",{className:"heading-4"},n):ao.a.createElement("div",{className:"feedback-catalog-content"},ao.a.createElement("div",{className:"form-horizontal"},e.map(function(e){return ao.a.createElement("div",{className:"form-group",key:e.id},ao.a.createElement("span",{className:"checkbox",ref:"checkbox-"+e.id,onClick:t._onClick.bind(t,e.id)},ao.a.createElement("label",{className:"checkbox-label"},ao.a.createElement("input",{className:"checkbox-input",onChange:e.action?e.action:void 0,ref:e.id,type:"checkbox"}),e.label,Uo)),t._renderInputText(e))})))},t.prototype._renderInputText=function(e){var t=this.state,n=t.inputOtherDisplay,a=t.inputOtherError;if(!n||"other"!==e.id)return null;var r=Po()({"form-group":!0,"has-error":a});return ao.a.createElement("div",{className:r},ao.a.createElement("input",{ref:"comment",className:"form-control",maxLength:140,placeholder:Object(Co.a)("Écrire un commentaire"),type:"text",onClick:this._onInputClick}))},t.prototype._renderFooter=function(){return!1!==this.state.confirmMessage?ao.a.createElement("button",{className:"btn btn-default pull-right",type:"button",onClick:this._onClose},ao.a.createElement("span",{className:"label"},Object(Co.a)("Fermer"))):ao.a.createElement("div",null,ao.a.createElement("button",{className:"btn btn-default pull-left",type:"button",onClick:this._onClose},ao.a.createElement("span",{className:"label"},Object(Co.a)("Annuler"))),ao.a.createElement("button",{className:"btn pull-right btn-primary",type:"button",onClick:this._onSubmit},ao.a.createElement("span",{className:"label"},Object(Co.a)("Valider"))))},t.prototype._onClick=function(e){var t=this.refs["checkbox-"+e],n=this.refs[e];t.className=Po()({checkbox:!0,checked:n.checked})},t.prototype._onInputClick=function(){this.state.inputOtherError&&this.setState({inputOtherError:!1})},t.prototype._onSubmit=function(){var e=this,t=this._getFormData();!1!==t&&(this._feedbackApiRef=No.a.call({method:"deezer.feedbackCatalog",data:{type:this.props.type,id:this.props.id,problem:t},success:function(t){t?e.setState({confirmMessage:Object(Co.a)("Merci pour votre retour !")}):e._onClose()}}))},t.prototype._onClose=function(){this.props.closeModal()},t.prototype._onClickOther=function(){this.setState({inputOtherDisplay:!this.state.inputOtherDisplay})},t.prototype._getFormData=function(){var e=this,t=[];return this._getData().map(function(n){if(e.refs[n.id].checked){var a={type:n.id};if("other"===n.id){if(""===e.refs.comment.value)return t=[],e.setState({inputOtherError:!0}),!1;a.data=e.refs.comment.value}t.push(a)}return!0}),0!==t.length&&t},t.prototype._getData=function(){var e=this,t=this.props.type,n=[];return this._actionsList[t].forEach(function(a){return n.push({id:a,label:e._getWording(t,a),action:"other"===a?e._onClickOther:void 0})}),n},t.prototype._getWording=function(e,t){return{cover:Object(Co.a)("La photo n'est pas bonne."),duplicate_artist:Object(Co.a)("Cet artiste existe déjà."),wrong_artist:e===co.a.Album?Object(Co.a)("Cet album n'est pas de cet artiste."):Object(Co.a)("Ce titre n'est pas de cet artiste."),audio:Object(Co.a)("Il y a un problème audio."),explicit_content:Object(Co.a)("Contenu indésirable."),other:Object(Co.a)("Autre")}[t]||""},t}(no.Component),Bo=Object(ro.b)(null,{closeModal:wo.a})(Fo),Ho=function(e){function t(n){v(this,t);var a=E(this,e.call(this,n));return a.ERROR_MSG=Object(Co.a)("Votre adresse email n'a pas été mise à jour."),a.ERROR_CONFIRM_EMAIL_MSG=Object(Co.a)("Vos adresses email ne correspondent pas. Veuillez réessayer."),a.ERROR_ALREADY_EXIST_MSG=Object(Co.a)("Cette adresse email est indisponible."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return O(t,e),t.prototype.componentWillUnmount=function(){No.a.cancel(this._apiRef)},t.prototype.render=function(){return ao.a.createElement("div",null,ao.a.createElement(Lo.Header,null,Object(Co.a)("Modification de votre email")),ao.a.createElement(Lo.Body,{className:"wrapper"},ao.a.createElement("form",{className:"form-horizontal"},ao.a.createElement("div",{className:"form-wrapper"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(Co.a)("Votre mot de passe")})),ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"email",className:"form-control",type:"text",placeholder:Object(Co.a)("Votre nouvel email")})),ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"email_confirm",className:"form-control",type:"text",placeholder:Object(Co.a)("Vérification du nouvel email")})),this.state.message?ao.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,ao.a.createElement("div",{className:"form-group"},ao.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},ao.a.createElement("span",{className:"label"},Object(Co.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n="",a=this.refs,r=a.password,o=a.email,i=a.email_confirm;!o.value.length||!i.value.length||r.value.length<6?n=this.ERROR_MSG:o.value!==i.value&&(n=this.ERROR_CONFIRM_EMAIL_MSG),""===n?this._apiRef=No.a.call({method:"deezer.updateEmail",data:{password:r.value,email:o.value},success:function(e){e&&(go.a.trigger(go.a.user.updateEmail,{email:o.value}),t.props.closeModal()),t.setState({message:t.ERROR_MSG})},error:function(e){var n=t.ERROR_MSG;"Email already exists"===e.message&&(n=t.ERROR_ALREADY_EXIST_MSG),"Invalid email domain"===e.message&&(n=Object(Co.a)("Le nom de domaine '%s' n'est pas autorisé.",{sprintf:[e.payload.domain]})),t.setState({message:n})}}):this.setState({message:n})},t}(no.Component),Go=Object(ro.b)(null,{closeModal:wo.a})(Ho),zo=function(e){function t(n){j(this,t);var a=S(this,e.call(this,n));return a.ERROR_MSG=Object(Co.a)("Votre mot de passe n'a pas été mis à jour."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return w(t,e),t.prototype.componentWillUnmount=function(){No.a.cancel(this._apiRef)},t.prototype.render=function(){return ao.a.createElement("div",null,ao.a.createElement(Lo.Header,null,Object(Co.a)("Modification du mot de passe")),ao.a.createElement(Lo.Body,{className:"wrapper"},ao.a.createElement("form",{className:"form-horizontal"},ao.a.createElement("div",{className:"form-wrapper"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"old_password",className:"form-control",type:"password",placeholder:Object(Co.a)("Votre mot de passe")})),ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(Co.a)("Votre nouveau mot de passe")})),ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{ref:"password_confirm",className:"form-control",type:"password",placeholder:Object(Co.a)("Vérification du mot de passe")})),this.state.message?ao.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,ao.a.createElement("div",{className:"form-group"},ao.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},ao.a.createElement("span",{className:"label"},Object(Co.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n=this.refs,a=n.old_password,r=n.password,o=n.password_confirm;!a.value.length||r.value.length<6||r.value!==o.value?this.setState({message:this.ERROR_MSG}):this._apiRef=No.a.call({method:"deezer.updatePassword",data:{old_password:a.value,password:r.value},success:function(e){e?t.props.closeModal():t.setState({message:t.ERROR_MSG})}})},t}(no.Component),Yo=Object(ro.b)(null,{closeModal:wo.a})(zo),qo=function(e){function t(n){P(this,t);var a=C(this,e.call(this,n));return a.state={selectedChronicle:n.selectedChronicle},a}return N(t,e),t.prototype.render=function(){var e=this.props.data[this.state.selectedChronicle];return ao.a.createElement("div",{id:"modal_album_chronicles"},ao.a.createElement(Lo.Header,null,Object(Co.a)("CHRONIQUE")),ao.a.createElement(Lo.Body,null,ao.a.createElement("div",{className:"wrapper"},ao.a.createElement("div",{className:"chronicle-heading"},ao.a.createElement("div",{className:"chronicle-title heading-1"},e.ALB_TITLE),this._renderLogo()),this._renderChronicle(e.CHRONICLE),ao.a.createElement("div",{className:"chronicle-footer heading-4"},ao.a.createElement("p",null,e.AUTHOR_NAME),ao.a.createElement("p",null,Object(Co.a)("Source :")," ",ao.a.createElement("a",{className:"link-primary link-animated",href:e.URL,target:"_blank"},e.PARTNER_NAME))))))},t.prototype._renderChronicle=function(e){return ao.a.createElement("div",{className:"chronicle-text",dangerouslySetInnerHTML:{__html:e}})},t.prototype._renderLogo=function(){var e=this,t=this.props.data,n=this.state.selectedChronicle;return t.map(function(t,a){var r=t.LOGO_BIG.split("."),o=r[0],i=r[1],s=Po()("chronicle-logo",{"is-active":n===a});return ao.a.createElement("button",{className:s,key:t.SOURCE,onClick:function(){return e._onSelect(a)},role:"button"},ao.a.createElement("img",{src:"https://"+lo.a.get("host_static_ssl")+"/img/review/big/"+o+"-v"+lo.a.get("STATIC_VERSION")+"."+i}))})},t.prototype._onSelect=function(e){this.setState({selectedChronicle:e})},t}(no.Component);qo.defaultProps={selectedChronicle:0};var Vo={CATALOG_FEEDBACK:Bo,UPDATE_EMAIL:Go,UPDATE_PASSWORD:Yo,ALBUM_CHRONICLES:Object(ro.b)(null,{closeModal:wo.a})(qo)},Wo=function(e){function t(n){D(this,t);var a=I(this,e.call(this,n));return a._open=a._open.bind(a),a._close=a._close.bind(a),a._onKeyDown=a._onKeyDown.bind(a),a._onOutsideMouseDown=a._onOutsideMouseDown.bind(a),a}return x(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.disableClosingAction,a=e.data,r=e.name;if(!t)return null;var o=k(r);return o?ao.a.createElement("div",{className:"modal",role:"dialog","aria-hidden":!1,"aria-labelledby":"modal_title"},ao.a.createElement(So.a,{from:{opacity:0},to:{opacity:.8},duration:150},ao.a.createElement("div",{className:"modal-backdrop",onClick:this._close})),ao.a.createElement("div",{className:"modal-wrapper"},ao.a.createElement(So.a,{from:{opacity:0},to:{opacity:1},duration:150},ao.a.createElement("div",{className:"modal-dialog modal-large",ref:"content"},n?null:ao.a.createElement("button",{className:"modal-close icon icon-cancel",id:"modal-close",type:"button",onClick:this._close}),ao.a.createElement(o,a))))):null},t.prototype._onKeyDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&27===e.keyCode&&this._close()},t.prototype._onOutsideMouseDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&"HTML"!==e.target.tagName&&e.target.contains(this.refs.content)&&(e.stopPropagation(),this._close())},t.prototype._close=function(){this.props.closeModal()},t.prototype._open=function(){this.props.openModal()},t}(no.Component),Ko=Object(ro.b)(function(e){var t=e.modal;return{name:t.name,data:t.props,disableClosingAction:t.disableClosingAction,isOpen:""!==t.name}},{closeModal:wo.a,openModal:wo.c})(Wo),Qo=n("./js/_modules/redux/stores/labs.js"),Xo=function(e){function t(n){return M(this,t),U(this,e.call(this,n))}return F(t,e),t.prototype.render=function(){var e=this.props,t=e.id;if(!e.active[t])return null;var n=this._getLabComponent(t);return n?ao.a.createElement(n,null):null},t.prototype._getLabComponent=function(e){var t=this.props.list.filter(function(t){return t.id===e});return t.length?t[0].component:null},t}(no.Component),$o=Object(ro.b)(function(e){var t=e.labs;return{list:Object(Qo.e)(t),active:Object(Qo.d)(t)}})(Xo),Jo=n("./js/_components/App/components/LoadingBar.js"),Zo=n("./js/_modules/EventDispatcher.js"),ei=n("./js/_components/Link.js"),ti=n("./js/_modules/user.js"),ni=n("./js/_modules/userSetting.js"),ai=n("./js/_modules/dom.js"),ri=n("./js/_components/Menu/store/menu.js"),oi=n("./node_modules/react-addons-pure-render-mixin/index.js"),ii=n.n(oi),si=n("./js/_modules/SearchStore.js"),li=function(e){function t(n){H(this,t);var a=G(this,e.call(this,n));return a._focused=!1,a._request_suggest_timeout=null,a.shouldComponentUpdate=ii.a.shouldComponentUpdate.bind(ii.a),a._handleBlur=a._handleBlur.bind(a),a._handleKeys=a._handleKeys.bind(a),a._handleEnterKey=a._handleEnterKey.bind(a),a._handleClick=a._handleClick.bind(a),a._triggerSearch=a._triggerSearch.bind(a),a._searchStoreChanged=a._searchStoreChanged.bind(a),a}return z(t,e),t.prototype.componentDidMount=function(){si.a.onChange(this._searchStoreChanged)},t.prototype.componentWillUnmount=function(){clearTimeout(this._request_suggest_timeout),si.a.offChange(this._searchStoreChanged),si.a.cancel()},t.prototype.render=function(){var e=Object(Co.a)("Rechercher"),t=Po()({search:!0,active:this.props.active});return ao.a.createElement("div",{className:t,role:"search"},ao.a.createElement("form",{onSubmit:this._triggerSearch,autoComplete:"off"},ao.a.createElement("div",{className:"search-form"},ao.a.createElement("label",{htmlFor:"menu_search",className:"sr-only"},e),ao.a.createElement("input",{id:"menu_search",ref:"query",className:"search-control",type:"search",placeholder:e,onBlur:this._handleBlur,onChange:this._handleKeys,onKeyUp:this._handleEnterKey,onClick:this._handleClick}),ao.a.createElement("button",{className:"search-submit",type:"submit"},ao.a.createElement(Mo.a,{name:"search",size:"16",srLabel:e})))))},t.prototype._searchStoreChanged=function(e){if("suggest"!==e)return!1;var t=uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod");""!==si.a.getQuery()&&this._focused?go.a.trigger(go.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuthUser&&Eo.a.isLoaded&&this._focused&&!t?go.a.trigger(go.a.menu.openPanel,{panel:"searchhistory"}):go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._handleKeys=function(){var e=this.refs.query.value;si.a.setQuery(e),this._triggerSuggest()},t.prototype._handleEnterKey=function(e){13===e.keyCode&&(this.refs.query.blur(),this._triggerSearch())},t.prototype._handleClick=function(){var e=si.a.getQuery(),t=uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod");e?go.a.trigger(go.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuthUser&&!t&&go.a.trigger(go.a.menu.openPanel,{panel:"searchhistory"}),this._focused||(this.refs.query.select(),this._focused=!0)},t.prototype._handleBlur=function(){this._focused=!1},t.prototype._triggerSuggest=function(){var e=si.a.getQuery();null!==this._request_suggest_timeout&&(clearTimeout(this._request_suggest_timeout),this._request_suggest_timeout=null),this._request_suggest_timeout=setTimeout(function(){si.a.search(e)},this.props.request_suggest_wait_value)},t.prototype._triggerSearch=function(e){e&&e.preventDefault();var t=si.a.getQuery();t&&(this.props.isAuthUser&&Eo.a.addSearchHistory(t),lo.a.set("__SEARCH_TAB","all"),go.a.trigger(go.a.menu.closeAllPanels),0===t.lastIndexOf("#",0)?(t=t.replace(/#/g,""),io.c.navigate("/tags/"+encodeURIComponent(t),{force:!0})):io.c.navigate("/search/"+encodeURIComponent(t),{force:!0}))},t}(no.Component);li.defaultProps={request_suggest_wait_value:400,isAuthUser:0!==lo.a.get("USER.USER_ID")};var ci=li,ui=n("./js/_components/Badge.js"),pi=n("./js/_modules/notification.js"),di=n("./js/_modules/chromecast/index.js"),fi=n("./js/_modules/player/PlayerMetrics.js"),hi=n("./js/_modules/navigation/index.js"),mi=n("./js/_components/Player/store/config.js"),yi=n("./js/_components/Player/store/control.js"),bi=n("./js/_components/Player/store/music.js"),_i=n("./js/_components/Player/store/chromecast.js"),gi=ao.a.createElement("div",{className:"player-track-title heading-2"},"???"),vi=function(e){function t(){return q(this,t),V(this,e.apply(this,arguments))}return W(t,e),t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.track,r=e.isBusinessNonMod,o=e.isBlindTestMode,i=e.title;if("ads"===t&&void 0!==window.sasAudioConfig)return this._renderAd();if(o&&n!==so.a.MEDIA_TYPE_TALK&&n!==so.a.MEDIA_TYPE_EXTERNAL&&n!==so.a.MEDIA_TYPE_LIVE_STREAM)return gi;window.document.title=i;var s=ao.a.createElement("span",null,i);if(!r){var l=K(a,n);s=ao.a.createElement(ei.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},i)}return ao.a.createElement("div",{className:"player-track-title heading-2"},s)},t.prototype._renderAd=function(){var e={title:window.sasAudioConfig.text,link:decodeURIComponent(window.sasAudioConfig.url)},t=void 0;return t="http"===e.link.substr(0,4)?ao.a.createElement("a",{className:"player-track-link",href:e.link,onClick:function(t){t.preventDefault(),Object(hi.b)(e.link)}},e.title):ao.a.createElement(ei.a,{className:"player-track-link",to:e.link,onClick:function(e){return e.stopPropagation()}},e.title),ao.a.createElement("div",{className:"player-track-title heading-2 ads"},t)},t}(no.Component),Ei=ao.a.createElement("div",null),Oi=function(e){function t(){return X(this,t),$(this,e.apply(this,arguments))}return J(t,e),t.prototype.render=function(){var e=this.props,t=e.track,n=e.playerType,a=e.mediaType,r=e.isFingerprinted,o=e.isBusinessNonMod,i=e.isBlindTestMode,s=e.artists;if("ads"===n)return Ei;if(a===so.a.MEDIA_TYPE_TALK)return ao.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},ao.a.createElement(ei.a,{className:"player-track-link",to:"/show/"+t.SHOW_ID,onClick:function(e){return e.stopPropagation()}},t.SHOW_NAME));if(a===so.a.MEDIA_TYPE_EXTERNAL||a===so.a.MEDIA_TYPE_LIVE_STREAM){var l=r?"/artist/"+t.ART_ID:null;return ao.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},l?ao.a.createElement(ei.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},t.ART_NAME):ao.a.createElement("span",null,t.ART_NAME))}return ao.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},Object(Co.a)("par")," ",s.map(function(e,t){if(i)return"???";window.document.title+=" - "+e.ART_NAME+" - Deezer";var n="artist_"+e.ART_ID+t,a=ao.a.createElement("span",{key:n},e.ART_NAME);if(!o){var r=0!==Number(e.ART_ID)?"/artist/"+e.ART_ID:null;a=ao.a.createElement(ei.a,{className:"player-track-link",key:n,to:r,onClick:function(e){return e.stopPropagation()}},e.ART_NAME)}return[t>0?", ":"",a]}))},t}(no.Component),Ti=n("./js/_modules/displayNotification.js"),ji=n("./js/_components/Dislike.js"),Si=n("./js/_components/Favorite.js"),wi=n("./js/_components/ContextMenu/Track.js"),Ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pi={"data-tooltip":1,"data-tooltip-delay":700,"data-tooltip-offset":2,"data-tooltip-gravity":"sw"},Ci=ao.a.createElement("span",{className:"icon icon-playlist-add"}),Ni=function(e){function t(n){ee(this,t);var a=te(this,e.call(this,n));return a._onDislikeClick=a._onDislikeClick.bind(a),a._onFavoriteClick=a._onFavoriteClick.bind(a),a._toggleLyrics=a._toggleLyrics.bind(a),a}return ne(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this._nextSongTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isSponsored,r=e.isFingerprinted,o=e.isRadio,i=e.seek,s=[];return"ads"!==t&&(n===so.a.MEDIA_TYPE_SONG?(s.push(this._renderFavorite()),o&&s.unshift(this._renderDislike()),this.props.hasLyrics&&s.push(this._renderLyrics()),o||s.push(this._renderAddToPlaylist()),a&&s.push(this._renderOptions())):n===so.a.MEDIA_TYPE_LIVE_STREAM&&r&&s.push(this._renderFavorite(),this._renderAddToPlaylist())),ao.a.createElement("div",{className:"player-actions clearfix",onClick:i},s.map(function(e,t){return[e,t===s.length-1]}))},t.prototype._renderFavorite=function(){var e=this.props,t=e.isSponsored,n=e.track,a=String(n.SNG_ID_ORIGIN||n.SNG_ID);return ao.a.createElement("span",{className:"action"},ao.a.createElement(Si.a,{className:t?null:"icon-stack icon-stack-circle icon-32",type:"song",context:"player",tooltip:!0,tooltip_gravity:"sw",id:a,onClickCallback:this._onFavoriteClick}))},t.prototype._renderDislike=function(){var e=this.props,t=e.isSponsored,n=e.id;return ao.a.createElement("span",{className:"action"},ao.a.createElement(ji.a,{className:t?null:"icon-stack icon-stack-circle icon-32",tooltip:!0,tooltip_gravity:"sw",id:n,onClickCallback:this._onDislikeClick}))},t.prototype._renderAddToPlaylist=function(){var e=this.props,t=e.track,n=e.isSponsored,a=e.id,r=e.context,o=Po()({"icon-32 icon-stack icon-stack-circle":!n}),i={position:"right",type:"track",forceShowPlaylists:!0,anchor:ao.a.createElement("button",{className:"action-item-btn",type:"button"},ao.a.createElement("span",{className:o},Ci)),data:{SONG:t,PLAYLIST_ID:r.ID},id:Number(a),context:"player",srLabel:Object(Co.a)("Ajouter à une playlist")};return ao.a.createElement("span",Ai({className:"evt-out evt-over action",key:"add_playlist_"+a,"data-tooltip-fallback":Object(Co.a)("Ajouter à une playlist")},Pi),ao.a.createElement(wi.a,i))},t.prototype._renderLyrics=function(){var e=this.props,t=e.id,n=e.lyricsOpened,a=e.isSponsored,r=Po()({"icon icon-lyrics":!0,disabled:Number(t)<0,active:n}),o=n?Object(Co.a)("Masquer les paroles"):Object(Co.a)("Afficher les paroles"),i=Object.assign({},Pi,{title:o}),s=Po()({"icon-32 icon-stack icon-stack-circle":!a});return ao.a.createElement("button",Ai({className:"action evt-over evt-out",type:"button",key:"lyrics_"+t,"aria-label":o},i,{onClick:this._toggleLyrics}),ao.a.createElement("span",{className:s,id:"player-lyrics"},ao.a.createElement("span",{className:r})))},t.prototype._renderOptions=function(){var e=this.props,t=e.track,n=e.id,a=e.isFavorite,r=e.isRadio,o=e.context,i={position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:o.ID},context:"player",isFavorite:a,isRadio:r};return ao.a.createElement(wi.a,i)},t.prototype._onDislikeClick=function(){var e=this.props,t=e.skipRadioAllowed,n=e.next;if(!t){if(this._notifyAlreadyDisplayed)return;return this._notifyAlreadyDisplayed=!0,void pi.b.display("flow_skip_push",{})}Object(Ti.a)("dislike"),this._nextSongTimeoutRef=setTimeout(n,300)},t.prototype._onFavoriteClick=function(e,t,n){n&&Object(Ti.a)("like")},t.prototype._toggleLyrics=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.isChromecastLoading,a=t.lyricsOpened;n&&!a||go.a.trigger(go.a.menu.openLyricsPanel,{context:"player",toggle:!0})},t}(no.Component),ki=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,skipRadioAllowed:e.player.control.skipRadioAllowed,isChromecastLoading:e.player.chromecast.loading,lyricsOpened:"lyrics"===e.menu.activePanel,hasLyrics:Object(bi.m)(e)}})(Ni),Ri=n("./js/_modules/utils.js"),Di=ao.a.createElement("div",{className:"progress progress-background"}),Ii=ao.a.createElement("div",{className:"progress-seek-overlay"}),xi=function(e){function t(n){re(this,t);var a=oe(this,e.call(this,n));return a._dragging=!1,a._seekOnKeyDown=a._seekOnKeyDown.bind(a),a}return ie(t,e),t.prototype.componentDidMount=function(){var e=this;fo()(this.refs.seek).draggable({axis:"x",containment:"parent",start:function(){e._dragging=!0},stop:function(t,n){var a=e.props,r=a.playing,o=a.seek,i=a.cursorPosition;e._dragging=!1,r?o(null,n.position.left/t.target.parentNode.offsetWidth):fo()(this).css("left",i)}})},t.prototype.componentDidUpdate=function(){fo()(this.refs.seek).draggable(this.props.canSeek?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.buffer,n=e.position,a=e.trackDuration,r=e.cursorPosition,o=e.seek,i=e.canSeek,s={};this._dragging||(s.left=r);var l=Po()({"player-progress":!0,"player-seek-disabled":!i});return ao.a.createElement("div",{className:l},Di,ao.a.createElement("div",{className:"progress progress-buffer",style:{width:t+"%"},onClick:o}),ao.a.createElement("div",{className:"progress progress-seek",style:{width:r},onClick:o},Ii),ao.a.createElement("div",{className:"progress-handler",style:s,ref:"seek",role:"slider",tabIndex:i&&a?0:-1,"aria-live":"polite","aria-valuenow":n.toFixed(2),"aria-valuemin":"0","aria-valuemax":a,"aria-valuetext":Object(Co.a)("%s sur %s",{sprintf:[Object(Ri.G)(n),Object(Ri.G)(a)]}),"aria-disabled":!i||!a,"aria-label":Object(Co.a)("Aller à la position"),onKeyDown:this._seekOnKeyDown}),ao.a.createElement("div",{className:"progress-time"},Object(Ri.G)(n)),ao.a.createElement("div",{className:"progress-length"},Object(Ri.G)(a)))},t.prototype._seekOnKeyDown=function(e){var t=this.props,n=t.trackDuration,a=t.position;if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var r=a/n;37!==e.keyCode&&40!==e.keyCode||(r-=.01),34===e.keyCode&&(r-=.1),36===e.keyCode&&(r=0),39!==e.keyCode&&38!==e.keyCode||(r+=.01),33===e.keyCode&&(r+=.1),35===e.keyCode&&(r=.98),so.a.control.seek(Math.min(Math.max(r,0),1))}},t}(no.Component),Li=Object(ro.b)(function(e){return{playing:e.player.control.playing,buffer:e.player.control.buffer,position:e.player.control.position,trackDuration:e.player.music.trackDuration,cursorPosition:Object(yi.e)(e)}})(xi),Mi=(n("./node_modules/isomorphic-fetch/fetch-npm-browserify.js"),function(e){function t(n){le(this,t);var a=ce(this,e.call(this,n));return a._onSponsoredClick=a._onSponsoredClick.bind(a),a}return ue(t,e),t.prototype.render=function(){var e=this.props.sponsoredData;return e.CTA_URL?ao.a.createElement("a",{className:"thumbnail-sponsored",href:e.CTA_URL,onClick:this._onSponsoredClick,rel:"noopener",target:"_blank"},ao.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-live":"assertive"},Object(Co.a)("SPONSORISÉ")),ao.a.createElement("span",{className:"thumbnail-sponsored-link"},ao.a.createElement("span",{className:"btn btn-sponsored btn-small btn-block link-animated"},ao.a.createElement("span",{className:"label"},e.CTA_TEXT)))):ao.a.createElement("div",{className:"thumbnail-sponsored"},ao.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-assertive":"true"},Object(Co.a)("SPONSORISÉ")))},t.prototype._onSponsoredClick=function(e){var t=this.props.sponsoredData,n=lo.a.get("host_website_ssl");t.CTA_TRACKING_URL&&fetch(t.CTA_TRACKING_URL+so.a.getPosition().toFixed(0));var a=t.CTA_URL;-1!==a.indexOf(n)&&(e.preventDefault(),0===(a=a.replace(/^(https?):\/\//,"").replace(n,"")).length&&(a="/"),window.reactRouter.push(a))},t}(no.Component)),Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fi=function(e){function t(){return de(this,t),fe(this,e.apply(this,arguments))}return he(t,e),t.prototype.render=function(){var e=this.props,t=e.cover,n=e.isBusinessNonMod,a=e.isSponsored,r=e.sponsoredData,o=e.canSeek,i=this.props,s=i.seek,l=i.next;return ao.a.createElement("div",{className:"player-cover",id:"player-cover"},ao.a.createElement("img",{src:t,height:"220",width:"220",alt:""}),a?null:this._renderTitle(),this._renderOptions(),a||n?null:ao.a.createElement(ki,{seek:s,next:l}),ao.a.createElement(Li,{seek:s,canSeek:o}),a?ao.a.createElement(Mi,{sponsoredData:r}):null,ao.a.createElement("div",{className:"player-overlay",onClick:s}))},t.prototype._renderTitle=function(){var e=this.props,t=e.seek,n=e.trackTitle,a=e.trackArtists,r=a.map(function(e){return e.ART_NAME}).join(", ");return ao.a.createElement("div",{className:"player-track",onClick:t},ao.a.createElement("div",{"aria-hidden":"true"},ao.a.createElement(vi,Ui({},this.props,{title:n})),ao.a.createElement(Oi,Ui({},this.props,{artists:a}))),ao.a.createElement("span",{className:"sr-only",id:"player-track-info"},Object(Co.a)("Player")," - ",ao.a.createElement("span",{"aria-live":"assertive"},n," ",Object(Co.a)("par")," ",r)))},t.prototype._renderOptions=function(){if(!this._hasOptions())return null;var e=this.props,t=e.track,n=e.id,a=e.context,r=e.isFavorite,o=e.isRadio,i={className:"player-options",position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:a.ID},context:"player",isFavorite:r,isRadio:o};return ao.a.createElement(wi.a,i)},t.prototype._hasOptions=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isFingerprinted,r=e.isSponsored;return!(e.isBusinessNonMod||"ads"===t||r||n!==so.a.MEDIA_TYPE_SONG&&!a)},t}(no.Component),Bi=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,sponsoredData:e.player.music.sponsoredData,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playing:e.player.control.playing,cover:Object(bi.e)(e),trackTitle:Object(bi.l)(e),trackArtists:Object(bi.j)(e)}})(Fi),Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gi=function(e){function t(){return ye(this,t),be(this,e.apply(this,arguments))}return _e(t,e),t.prototype.render=function(){var e=this.props,t=e.available,n=e.connecting,a=e.casting,r=Po()({"chromecast-icon":!0,hidden:!t}),o=Po()({"is-connecting":n,active:a});return ao.a.createElement("button",{className:r,type:"button",title:"Chromecast","aria-label":"Chromecast",onClick:this._onClick},ao.a.createElement(Mo.a,{className:o,name:"chromecast",size:"20"}))},t.prototype._onClick=function(){di.a.requestSession()},t}(no.Component),zi=Object(ro.b)(function(e){var t=e.player;return Hi({},t.chromecast)})(Gi),Yi=ao.a.createElement(Mo.a,{className:"is-volume-default",name:"volume",size:"18"}),qi=ao.a.createElement(Mo.a,{className:"is-volume-min",name:"volume-min",size:"18"}),Vi=ao.a.createElement(Mo.a,{className:"is-volume-off",name:"volume-off",size:"18"}),Wi=ao.a.createElement("div",{className:"control control-volume-max disabled"},ao.a.createElement(Mo.a,{className:"is-volume-max",name:"volume",size:"18"})),Ki=function(e){function t(n){ve(this,t);var a=Ee(this,e.call(this,n));return a._setVolume=a._setVolume.bind(a),a._setVolumeOnKeyDown=a._setVolumeOnKeyDown.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a}return Oe(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.isChromecastLoading;fo()(this.refs.volume).draggable({axis:"x",containment:"parent",drag:function(n,a){t?n.preventDefault():fo()(this).is(":visible")&&e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4))},stop:function(n,a){t?n.preventDefault():fo()(this).is(":visible")?e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4)):fo()(this).css("left",100*e.props.volume+"%")}})},t.prototype.componentDidUpdate=function(){fo()(this.refs.volume).draggable("ads"!==this.props.playerType?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.volume,n=e.isBusinessNonMod,a=e.mute,r=a?0:100*t,o=Po()({volume:!0,"volume-extended":n}),i=Po()({control:!0,"control-volume":!a,"control-volume-mute":a}),s=a?Object(Co.a)("Remettre le son"):Object(Co.a)("Couper le son");return ao.a.createElement("li",{className:o},ao.a.createElement("button",{className:i,type:"button",title:s,"aria-label":s,onClick:this._toggleMute},Yi,qi,Vi),ao.a.createElement("span",{className:"volume-progress",onClick:this._onVolumeChange,ref:"volume_bar"},ao.a.createElement("span",{className:"volume-progress-bar"},ao.a.createElement("span",{className:"volume-bar",style:{width:r+"%"},onClick:this._onVolumeChange}),ao.a.createElement("span",{className:"volume-handler",ref:"volume",role:"slider","aria-label":Object(Co.a)("Volume"),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":r.toFixed(2),"aria-valuetext":Object(Co.a)("Volume")+" - "+r.toFixed(2)+"%",onKeyDown:this._setVolumeOnKeyDown,style:{left:r+"%"}}))),Wi)},t.prototype._onVolumeChange=function(e){e.preventDefault(),e.stopPropagation();var t=(e.pageX-e.currentTarget.getBoundingClientRect().left)/this.refs.volume_bar.offsetWidth;this._setVolume(t)},t.prototype._setVolume=function(e){e=Math.max(Math.min(e,1),0),so.a.control.setVolume(e,!0)},t.prototype._setVolumeOnKeyDown=function(e){if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var t=this.props.volume;37!==e.keyCode&&40!==e.keyCode||(t-=.01),34===e.keyCode&&(t-=.1),36===e.keyCode&&(t=0),39!==e.keyCode&&38!==e.keyCode||(t+=.01),33===e.keyCode&&(t+=.1),35===e.keyCode&&(t=1),t=Math.max(Math.min(t,1),0),so.a.control.setVolume(t,!0)}},t.prototype._toggleMute=function(){so.a.control.mute(!so.a.isMuted())},t}(no.Component),Qi=n("./js/_components/hocs/TrackingComponent.js"),Xi=function(e){function t(n){je(this,t);var a=Se(this,e.call(this,n));return a._cycleRepeat=a._cycleRepeat.bind(a),a}return we(t,e),t.prototype.render=function(){var e=this.props.repeat,t=Po()({active:e>0}),n=Object(Co.a)("Répéter");switch(e){case 0:n=Object(Co.a)("Réécouter tous les titres");break;case 1:n=Object(Co.a)("Réécouter ce titre");break;case 2:n=Object(Co.a)("Désactiver la fonction Répéter")}return ao.a.createElement("li",null,ao.a.createElement("button",{className:"control control-repeat",type:"button",title:n,"aria-label":n,onClick:this._cycleRepeat},ao.a.createElement(Mo.a,{className:t,name:2===e?"repeat-one":"repeat",size:"18"})))},t.prototype._cycleRepeat=function(e){this.tracking("player_click",e.currentTarget);var t=2===this.props.repeat?0:this.props.repeat+1;this.tracking("player_click",e.currentTarget),so.a.control.setRepeat(t)},t}(no.Component),$i=Object(Qi.a)(Xi),Ji=function(e){function t(n){Pe(this,t);var a=Ce(this,e.call(this,n));return a._toggleShuffle=a._toggleShuffle.bind(a),a}return Ne(t,e),t.prototype.render=function(){var e=this.props.shuffle,t=Po()({active:e}),n=e?Object(Co.a)("Désactiver le mode aléatoire"):Object(Co.a)("Activer le mode aléatoire");return ao.a.createElement("li",null,ao.a.createElement("button",{className:"control control-shuffle",type:"button",title:n,"aria-label":n,onClick:this._toggleShuffle},ao.a.createElement(Mo.a,{className:t,name:"shuffle",size:"18"})))},t.prototype._toggleShuffle=function(e){this.tracking("player_click",e.currentTarget),so.a.control.setShuffle(!this.props.shuffle)},t}(no.Component),Zi=Object(Qi.a)(Ji),es=ao.a.createElement("li",{className:"chromecast"},ao.a.createElement(zi,null)),ts=ao.a.createElement("li",{className:"invisible"}),ns=function(e){function t(n){Re(this,t);var a=De(this,e.call(this,n));return a._toggleQueuelist=a._toggleQueuelist.bind(a),a}return Ie(t,e),t.prototype.render=function(){var e=this.props,t=e.isBusinessNonMod,n=e.isChromecastLoading,a=e.playerType,r=e.volume,o=e.mute,i=[];return t||(-1!==["mod","planning","campaign"].indexOf(a)?i=this._renderModControls():"radio"===a?i=this._renderRadioControls():"ads"===a&&(i=ao.a.createElement("li",{className:"tag","aria-live":"assertive"},ao.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(Co.a)("PUBLICITÉ"))))),ao.a.createElement("ul",{className:"controls controls-options clearfix"},ao.a.createElement(Ki,{playerType:a,volume:r,mute:o,isBusinessNonMod:t,isChromecastLoading:n}),i,this._renderQueuelist())},t.prototype._renderModControls=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.repeat,r=e.shuffle,o=e.isChromecastActive,i=-1!==["planning","campaign"].indexOf(t);if(!(n!==so.a.MEDIA_TYPE_SONG&&n!==so.a.MEDIA_TYPE_EXTERNAL||i)){var s=[ao.a.createElement($i,{key:"repeat-control",repeat:a})];return o||s.push(ao.a.createElement(Zi,{key:"shuffle-control",shuffle:r})),s}return n!==so.a.MEDIA_TYPE_TALK||i?ts:es},t.prototype._renderRadioControls=function(){var e=this.props,t=e.mediaType,n=e.isFlow,a=e.isRadio,r=e.context,o=void 0;return t===so.a.MEDIA_TYPE_LIVE_STREAM?ao.a.createElement("li",{className:"tag","aria-live":"assertive"},ao.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(Co.a)("EN DIRECT"))):("up_next_artist"===r.TYPE?o=Object(Co.a)("RECOMMANDÉ"):a&&(o=n?Object(Co.a)("FLOW"):Object(Co.a)("MIX")),ao.a.createElement("li",{className:"tag","aria-live":"assertive"},ao.a.createElement("span",{className:"sticker sticker-small sticker-flow"},o)))},t.prototype._renderQueuelist=function(){var e=this.props,t=e.mediaType,n=e.queuelistOpened,a=e.isChromecastLoading,r=Object(Co.a)("File d'attente"),o=a||t===so.a.MEDIA_TYPE_LIVE_STREAM,i=Po()("control control-qlist",{disabled:o}),s=Po()({active:n});return ao.a.createElement("li",null,ao.a.createElement("button",{className:i,type:"button",disabled:o,title:r,"aria-label":r,onClick:this._toggleQueuelist},ao.a.createElement(Mo.a,{className:s,name:"qlist",size:"18"})))},t.prototype._toggleQueuelist=function(e){this.tracking("player_click",e.currentTarget),go.a.trigger(go.a.menu.togglePanel,{panel:"queuelist",currentTarget:e.currentTarget})},t}(no.Component),as=Object(ro.b)(function(e){var t=e.player,n=e.menu;return{playerType:t.config.playerType,isBusinessNonMod:t.config.isBusinessNonMod,isFlow:t.config.isFlow,isRadio:t.config.isRadio,mediaType:t.music.mediaType,context:t.music.context,volume:t.control.volume,shuffle:t.control.shuffle,repeat:t.control.repeat,mute:t.control.mute,isChromecastActive:t.chromecast.active,isChromecastLoading:t.chromecast.loading,queuelistOpened:"queuelist"===n.activePanel}})(Object(Qi.a)(ns)),rs=n("./js/_modules/dzoffline.js"),os=ao.a.createElement(Mo.a,{name:"play",size:"32"}),is=function(e){function t(n){Le(this,t);var a=Me(this,e.call(this,n));return a._play=a._play.bind(a),a}return Ue(t,e),t.prototype.render=function(){var e=this.props,t=e.mediaType,n=e.playing,a=e.paused,r=e.loading,o=e.canPause,i=e.isChromecastCasting,s=t===so.a.MEDIA_TYPE_LIVE_STREAM,l=s?Object(Co.a)("Stop"):Object(Co.a)("Pause"),c=n?l:Object(Co.a)("Play");if(a&&!n||!a&&!n)return ao.a.createElement("button",{className:"control control-play",type:"button",disabled:!o||r,"aria-label":c,title:c,onClick:this._play},i?ao.a.createElement("span",{className:Po()({icon:!0,"icon-play":!r,"icon-loader":r,"icon-spin":r,"icon-32":r})}):os);var u=s?so.a.control.stop:so.a.control.pause,p=s?"stop":"pause";return ao.a.createElement("button",{type:"button",className:"control control-play",disabled:!o,"aria-label":c,title:l,onClick:function(){fi.a.intent("pause"),u()}},ao.a.createElement(Mo.a,{name:p,size:"32"}))},t.prototype._play=function(){lo.a.get("OFFLINE")?rs.a.display():(fi.a.intent("play"),so.a.control.play())},t}(no.Component),ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ls=function(e){function t(){return Be(this,t),He(this,e.apply(this,arguments))}return Ge(t,e),t.prototype.render=function(){var e=this.props,t=e.trackTitle,n=e.trackArtists,a=e.next;return ao.a.createElement("div",{className:"player-sponsored-heading"},ao.a.createElement("div",{className:"player-track"},ao.a.createElement(vi,ss({},this.props,{title:t})),ao.a.createElement(Oi,ss({},this.props,{artists:n}))),ao.a.createElement(ki,{seek:function(){},next:a}))},t}(no.Component),cs=Object(ro.b)(function(e){return{track:e.player.music.track,mediaType:e.player.music.mediaType,isFingerprinted:e.player.music.isFingerprinted,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playerType:e.player.config.playerType,trackTitle:Object(bi.l)(e),trackArtists:Object(bi.j)(e)}})(ls),us=ao.a.createElement(as,null),ps=ao.a.createElement(zi,null),ds=ao.a.createElement(Mo.a,{name:"prev",size:"20"}),fs=ao.a.createElement(Mo.a,{name:"prev-30",size:"20"}),hs=ao.a.createElement(Mo.a,{name:"next-30",size:"20"}),ms=ao.a.createElement(Mo.a,{name:"next",size:"20"}),ys=function(e){function t(n){Ye(this,t);var a=qe(this,e.call(this,n));return a._skipForwards=a._skipForwards.bind(a),a._skipBackwards=a._skipBackwards.bind(a),a}return Ve(t,e),t.prototype.render=function(){var e=this.props,t=e.isSponsored,n=e.isBusinessNonMod,a=e.mediaType,r=e.next;return ao.a.createElement("div",{className:"player-controls"},t?ao.a.createElement(cs,{next:r}):null,ao.a.createElement("ul",{className:"controls controls-main clearfix"},this._renderPrevious(),ao.a.createElement("li",null,ao.a.createElement(is,this.props)),this._renderNext()),us,a===so.a.MEDIA_TYPE_SONG&&!n&&ps)},t.prototype._renderPrevious=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=Object(Co.a)("Précédent"),r=[];return t||r.push(ao.a.createElement("li",{key:"prev"},ao.a.createElement("button",{className:"control control-prev",type:"button",disabled:!this.props.hasPrev,title:a,"aria-label":a,onClick:this._prev},ds))),n===so.a.MEDIA_TYPE_TALK&&r.push(ao.a.createElement("li",{key:"skip-backwards"},ao.a.createElement("button",{className:"control control-prev-30",type:"button",title:Object(Co.a)("Retour rapide de 30 secondes"),"aria-label":Object(Co.a)("Retour rapide de 30 secondes"),onClick:this._skipBackwards},fs))),r},t.prototype._renderNext=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=e.next,r=Object(Co.a)("Suivant"),o=[];return n===so.a.MEDIA_TYPE_TALK&&o.push(ao.a.createElement("li",{key:"skip-forwards"},ao.a.createElement("button",{className:"control control-next-30",type:"button",title:Object(Co.a)("Avance rapide de 30 secondes"),"aria-label":Object(Co.a)("Avance rapide de 30 secondes"),onClick:this._skipForwards},hs))),t||o.push(ao.a.createElement("li",{key:"next"},ao.a.createElement("button",{className:"control control-next",type:"button",disabled:!this.props.hasNext,title:r,"aria-label":r,onClick:a},ms))),o},t.prototype._prev=function(){fi.a.intent("previous"),so.a.control.prevSong()},t.prototype._skipForwards=function(){var e=this.props,t=e.position,n=e.trackDuration,a=e.next,r=(t+30)/n;r>=1?a():so.a.control.seek(r)},t.prototype._skipBackwards=function(){var e=this.props,t=(e.position-30)/e.trackDuration;so.a.control.seek(t)},t}(no.Component),bs=Object(ro.b)(function(e){return{isSponsored:e.player.music.isSponsored,mediaType:e.player.music.mediaType,trackDuration:e.player.music.trackDuration,position:e.player.control.position,playing:e.player.control.playing,paused:e.player.control.paused,loading:e.player.control.loading,isBusinessNonMod:e.player.config.isBusinessNonMod,isChromecastCasting:e.player.chromecast.casting,hasNext:Object(yi.f)(e),hasPrev:Object(yi.g)(e),canPause:Object(yi.b)(e)}})(ys),_s=function(e){function t(n){Ke(this,t);var a=Qe(this,e.call(this,n));return a.state={fading:!1},a._next=a._next.bind(a),a._seek=a._seek.bind(a),a._onFading=a._onFading.bind(a),a._onFinish=a._onFinish.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onTrackRecognized=a._onTrackRecognized.bind(a),a._onChangePlayerType=a._onChangePlayerType.bind(a),a._onTracklistChange=a._onTracklistChange.bind(a),a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onPlayingChange=a._onPlayingChange.bind(a),a._onPauseChange=a._onPauseChange.bind(a),a._onTracklistFinish=a._onTracklistFinish.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onLoaded=a._onLoaded.bind(a),a._onTrackDurationChange=a._onTrackDurationChange.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a._onRepeatChange=a._onRepeatChange.bind(a),a._onSimultaneousAccess=a._onSimultaneousAccess.bind(a),a._onShuffleChange=a._onShuffleChange.bind(a),a._setAvailableStatus=a._setAvailableStatus.bind(a),a._setConnectingStatus=a._setConnectingStatus.bind(a),a._setCastingStatus=a._setCastingStatus.bind(a),a._setChromecastActiveState=a._setChromecastActiveState.bind(a),a}return Xe(t,e),t.prototype.componentDidMount=function(){this.props.initPlayer(),go.a.ready(go.a.user.userReady,this._onToggleFavorite),go.a.subscribe(go.a.player.displayCurrentSong,this._onTrackChange,"player"),go.a.subscribe(go.a.player.displayRecognizedTrack,this._onTrackRecognized,"player"),go.a.subscribe(go.a.player.changePlayerType,this._onChangePlayerType,"player"),go.a.subscribe(go.a.player.tracklist_changed,this._onTracklistChange,"player"),go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"player"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"player"),go.a.subscribe(go.a.player.playing,this._onPlayingChange,"player"),go.a.subscribe(go.a.player.paused,this._onPauseChange,"player"),go.a.subscribe(go.a.player.finishTrackList,this._onTracklistFinish,"player"),go.a.subscribe(go.a.player.position,this._onPositionChange,"player"),go.a.subscribe(go.a.player.pourcentLoaded,this._onLoaded,"player"),go.a.subscribe(go.a.player.duration,this._onTrackDurationChange,"player"),go.a.subscribe(go.a.player.volume_changed,this._onVolumeChange,"player"),go.a.subscribe(go.a.player.mute_changed,this._onToggleMute,"player"),go.a.subscribe(go.a.player.repeat_changed,this._onRepeatChange,"player"),go.a.subscribe(go.a.player.shuffle_changed,this._onShuffleChange,"player"),go.a.subscribeOnce(go.a.player.playerLoaded,function(){so.a.initRestriction(),so.a.restoreSetting(lo.a.get("USER.SETTING"))}),go.a.subscribe(go.a.player.fading,this._onFading,"player"),go.a.subscribe(go.a.player.finish,this._onFinish,"player"),go.a.subscribe(go.a.live.simultaneousAccess,this._onSimultaneousAccess,"player"),go.a.subscribe(go.a.chromecast.available,this._setAvailableStatus,"player"),go.a.subscribe(go.a.chromecast.connecting,this._setConnectingStatus,"player"),go.a.subscribe(go.a.chromecast.casting,this._setCastingStatus,"player"),go.a.subscribe(go.a.chromecast.loading,this._setChromecastActiveState,"player"),go.a.subscribe(go.a.user.settingChanged,function(e,t){t.data&&t.data.site&&t.data.site.labs&&void 0!==t.data.site.labs.FirefoxHTML5&&hi.a.reload()})},t.prototype.componentWillUpdate=function(e){this.props.id!==e.id&&go.a.trigger(go.a.menu.contextMenuClose)},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("player")},t.prototype.render=function(){var e=this.props,t=e.track,n=e.showUpNextNotification,a=e.playerType;if(0===bo()(t)&&"ads"!==a)return null;var r=Po()({player:!0,"has-up-next":n});return ao.a.createElement("article",{className:r,id:"player",role:"application","aria-labelledby":"player-track-info"},ao.a.createElement($o,{id:To.a.Notification}),ao.a.createElement(Bi,{seek:this._seek,next:this._next,canSeek:this.props.canSeek}),ao.a.createElement(bs,{next:this._next}))},t.prototype._onFading=function(){lo.a.get("USER.OPTIONS.ads_audio")&&null!==so.a.getAudioAds()||(this.setState({fading:!0}),so.a.control.nextSong(!0))},t.prototype._onFinish=function(){this.state.fading||so.a.control.nextSong(!0),this.setState({fading:!1})},t.prototype._onTrackChange=function(){this.props.updateTrack()},t.prototype._onTrackRecognized=function(e,t){t?this.props.updateRecognizedTrack({track:t}):this._onTrackChange()},t.prototype._onChangePlayerType=function(){this.props.updatePlayerType()},t.prototype._onTracklistChange=function(){this.props.updateTracklist(),go.a.trigger(go.a.list.deselectAll)},t.prototype._onToggleFavorite=function(e,t){(!t||"song"===t.type&&String(t.id)===this.props.id)&&this.props.updateFavorite()},t.prototype._onPlayingChange=function(e,t){this.props.setPlaying({playing:t})},t.prototype._onPauseChange=function(e,t){this.props.setPaused({paused:t})},t.prototype._onTracklistFinish=function(){this.props.setTracklistFinished()},t.prototype._onPositionChange=function(e,t){this.props.setPosition({position:t})},t.prototype._onLoaded=function(e,t){this.props.setBuffer({buffer:t})},t.prototype._onTrackDurationChange=function(e,t){this.props.setTrackDuration({trackDuration:t})},t.prototype._onVolumeChange=function(e,t){this.props.setVolume({volume:t/100})},t.prototype._onToggleMute=function(e,t){this.props.setMute({mute:t})},t.prototype._onRepeatChange=function(e,t){this.props.setRepeat({repeat:t})},t.prototype._onSimultaneousAccess=function(){var e=this.props,t=e.playing,n=e.playerType;t&&"ads"!==n&&(so.a.control.pause(),_o.a.open("/lightbox/limitation.php"))},t.prototype._onShuffleChange=function(e,t){this.props.setShuffle({shuffle:t}),go.a.trigger(go.a.list.deselectAll)},t.prototype._setChromecastActiveState=function(e,t){this.props.setLoading({loading:t}),this.props.setChromecastActiveState({loading:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._setAvailableStatus=function(e,t){this.props.setChromecastAvailableStatus({status:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._setConnectingStatus=function(e,t){this.props.setChromecastConnectingStatus({status:t,chunksInfo:di.a.getChunksInfo()})},t.prototype._setCastingStatus=function(e,t){this.props.setChromecastCastingStatus({status:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._seek=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.props.canSeek&&("number"!=typeof t&&(t=e.pageX/e.currentTarget.parentNode.offsetWidth),so.a.control.seek(Math.min(Math.max(t,0),1)))},t.prototype._next=function(){fi.a.intent("next"),this.props.skipRadioAllowed?so.a.control.nextSong():pi.b.display("flow_skip_push",{})},t}(no.Component);_s.defaultProps={playerType:"",showUpNextNotification:!1};var gs=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,skipRadioAllowed:e.player.control.skipRadioAllowed,playing:e.player.control.playing,playerType:e.player.config.playerType,canSeek:Object(yi.c)(e)}},{initPlayer:bi.n,setPlaying:yi.l,setPaused:yi.k,setLoading:yi.i,setTracklistFinished:yi.p,setPosition:yi.m,setBuffer:yi.h,setTrackDuration:bi.o,setVolume:yi.q,setRepeat:yi.n,setShuffle:yi.o,setMute:yi.j,updateFavorite:bi.p,updateTrack:bi.r,updateRecognizedTrack:bi.q,updatePlayerType:mi.updatePlayerType,updateTracklist:bi.s,setChromecastActiveState:_i.b,setChromecastAvailableStatus:_i.c,setChromecastConnectingStatus:_i.e,setChromecastCastingStatus:_i.d})(_s),vs=n("./js/_components/Thumbnail/utils.js"),Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Os=ao.a.createElement("span",{className:"sr-only"},"Deezer"),Ts=ao.a.createElement("div",{className:"nav-divider"}),js=ao.a.createElement("div",{className:"nav-divider"}),Ss=ao.a.createElement(Mo.a,{name:"love",size:"16"}),ws=ao.a.createElement(Mo.a,{name:"playlist",size:"16"}),As=ao.a.createElement(Mo.a,{name:"playlist",size:"16"}),Ps=ao.a.createElement(Mo.a,{name:"playlist",size:"16"}),Cs=ao.a.createElement(Mo.a,{name:"playlist",size:"16"}),Ns=ao.a.createElement(Mo.a,{name:"album",size:"16"}),ks=ao.a.createElement(Mo.a,{name:"podcast",size:"16"}),Rs=ao.a.createElement(Mo.a,{name:"time",size:"16"}),Ds=ao.a.createElement(Mo.a,{name:"app",size:"16"}),Is=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right",size:"auto"}),xs=ao.a.createElement("div",{className:"nav-expand"},ao.a.createElement(Mo.a,{name:"chevron-down"})),Ls=ao.a.createElement(Mo.a,{name:"add"}),Ms=function(e){function t(n){Je(this,t);var a=Ze(this,e.call(this,n));a._pages={home:{pattern:/^\/[a-z]{2}\/?$/i,selected:!1},businessRadioHome:{pattern:new RegExp("^/$|/planning","i"),selected:!1},plannings:{pattern:new RegExp("^/planning","i"),selected:!1},boxes:{pattern:new RegExp("^/boxes","i"),selected:!1},campaigns:{pattern:/^\/campaigns/i,selected:!1},feed:{pattern:/^\/feed?$/i,selected:!1},loved:{pattern:new RegExp("^/profile/"+lo.a.get("USER.USER_ID")+"/loved","i"),selected:!1},profile:{pattern:new RegExp("^/profile/"+lo.a.get("USER.USER_ID")+"[^0-9]*(/.*)?$","i"),pattern_not:new RegExp("^/profile/"+lo.a.get("USER.USER_ID")+"/loved","i"),selected:!1},explore:{pattern:/^\/explore/i,selected:!1},charts:{pattern:/^\/charts/i,selected:!1},mixes:{pattern:/^\/mixes\/?$/i,selected:!1},exclus:{pattern:/^\/exclus/i,selected:!1},pro:{pattern:/^\/pro\/?$/i,selected:!1},audiobooks:{pattern:/^\/app\/audiobooks/i,selected:!1},moods:{pattern:/^\/(moods)/i,selected:!1}},a._custo={active:!1,large:!1},a._updateNanoScroller=a._updateNanoScroller.bind(a),a._updateUnseenPlaylists=a._updateUnseenPlaylists.bind(a),a._updateUnseenNotifications=a._updateUnseenNotifications.bind(a),a._updatePicture=a._updatePicture.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onClosePanelsByEsc=a._onClosePanelsByEsc.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a._onTogglePanel=a._onTogglePanel.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onBugReportClick=a._onBugReportClick.bind(a),a._onUserReady=a._onUserReady.bind(a),a._openLyricsPanel=a._openLyricsPanel.bind(a),a._pageDisplayed=a._pageDisplayed.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._onOpenPanelClick=a._onOpenPanelClick.bind(a),a._onOpenModalClick=a._onOpenModalClick.bind(a);var r=so.a.getContext("TYPE");return a.state={pages:a._getPagesState(),panels:a._getPanelsState(),unseenPlaylistCount:0,unseenNotificationCount:0,userPicture:lo.a.get("USER.USER_PICTURE"),showUpNextNotification:"up_next_artist"===r&&lo.a.get("USER.SETTING.tips.up_next"),playerContextType:r},a}return et(t,e),t.prototype.componentWillMount=function(){var e=lo.a.get("CUSTO");this._custo.active="object"===(void 0===e?"undefined":Es(e))&&"object"===Es(e.logos)&&"string"==typeof e.logos.logo_position&&""!==e.logos.header.trim(),this._custo.active&&(this._custo.position=e.logos.logo_position)},t.prototype.componentDidMount=function(){this._onPageChanged(io.c.getCurrentPath()),fo()(this.refs.navigation).nanoScroller({tabIndex:-1,preventPageScrolling:!0}),fo()(this.refs.navigation).on("transitionend",this._updateNanoScroller),document.addEventListener("keydown",this._onClosePanelsByEsc),go.a.subscribe(go.a.navigation.page_displayed,this._pageDisplayed,"menu"),go.a.subscribe(go.a.menu.closeAllPanels,this._onClosePanels,"menu"),go.a.subscribe(go.a.menu.openPanel,this._onOpenPanel,"menu"),go.a.subscribe(go.a.menu.togglePanel,this._onTogglePanel,"menu"),go.a.subscribe(go.a.menu.openLyricsPanel,this._openLyricsPanel,"menu"),go.a.subscribe(go.a.playlist.seen,this._updateUnseenPlaylists,"menu"),go.a.subscribe(go.a.user.updatePicture,this._updatePicture,"menu"),go.a.subscribe(go.a.player.changePlayerType,this._onPlayerTypeChange,"menu"),go.a.subscribe(go.a.live.notificationNew,this._updateUnseenNotifications,"menu"),go.a.subscribe(go.a.live.notificationRead,this._updateUnseenNotifications,"menu"),go.a.subscribe(go.a.live.messageNew,this._updateUnseenNotifications,"menu"),go.a.subscribe(go.a.live.messageRead,this._updateUnseenNotifications,"menu"),go.a.ready(go.a.user.userReady,this._onUserReady),window.PLAYER_INIT.show_lyrics&&go.a.trigger(go.a.menu.openPanel,{panel:"lyrics"})},t.prototype.shouldComponentUpdate=function(e,t){var n=this;if(t.unseenPlaylistCount!==this.state.unseenPlaylistCount||t.unseenNotificationCount!==this.state.unseenNotificationCount||t.playerContextType!==this.state.playerContextType||t.userPicture!==this.state.userPicture)return!0;var a=void 0,r=void 0;return r=Object.keys(t.pages).some(function(e){return t.pages[e]!==n.state.pages[e]}),a=Object.keys(t.panels).some(function(e){return t.panels[e]!==n.state.panels[e]}),r||a},t.prototype.componentWillUnmount=function(){clearTimeout(this._updateUnseenPlaylistRef),fo()(this.refs.navigation).off("transitionend",this._updateNanoScroller),go.a.unsubscribeAll("menu"),document.removeEventListener("keydown",this._onClosePanelsByEsc)},t.isPanelOpen=function(e){return!!e&&(!!t._panels[e]&&t._panels[e].active)},t.prototype.render=function(){var e=uo.a.isAllowed("employee_feature"),t=uo.a.isAllowed("business"),n=uo.a.isAllowed("business_mod"),a=uo.a.isAllowed("business_box_owner"),r=uo.a.isAllowed("business_box_manager"),o=t&&!n,i=this.state,s=i.panels,l=i.pages,c=i.unseenPlaylistCount,u=i.unseenNotificationCount,p=i.userPicture,d=i.showUpNextNotification,f=Po()({"sidebar-container":!0,"has-partner":this._custo.active&&"right"===this._custo.position,"has-partner-large":this._custo.active&&"bottom"===this._custo.position,"business-sidebar":t,"business-mod-sidebar":n}),h=lo.a.get("CUSTO"),m=lo.a.get("USER.USER_ID"),y=lo.a.get("SETTING_LANG"),b=Po()({"nav nav-main":!0,"panel-opened":this._hasOpenPanel()}),_=Po()({nav:!0,"panel-opened":this._hasOpenPanel()}),g=Po()({logo:!0,"logo-deezer":!uo.a.isAllowed("logo_uk"),"logo-deezer-uk":uo.a.isAllowed("logo_uk")});return ao.a.createElement("div",{className:f},ao.a.createElement("header",{role:"banner",className:"brand"},ao.a.createElement("h1",null,ao.a.createElement(ei.a,{to:"/"+y+"/",lang:"en","data-type":"home",onClick:m>0?this._onLinkClick:function(){}},ao.a.createElement("span",{className:g}),Os),this._custo.active?ao.a.createElement("a",{className:"logo-partner",href:h.logos.logo_link,target:"_blank"},ao.a.createElement("img",{className:"logo-partner-img",src:h.logos.header,alt:""})):"")),ao.a.createElement("a",{className:"sr-only",href:"#main"},Object(Co.a)("Accès direct au contenu principal")),ao.a.createElement("a",{className:"sr-only",href:"#player"},Object(Co.a)("Accès direct au player")),ao.a.createElement(ci,{active:"active-panel"===s.search}),ao.a.createElement("nav",{className:"navigation nano",id:"menu_navigation",ref:"navigation",role:"navigation","aria-label":Object(Co.a)("Menu principal")},ao.a.createElement("div",{className:"nano-content"},ao.a.createElement("ul",{className:b},o>0&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.businessRadioHome,to:"/"+y+"/","data-type":"plannings",onClick:this._onLinkClick},Object(Co.a)("PLANNINGS"))),m>0&&!o&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.home,to:"/"+y+"/","data-type":"home",onClick:this._onLinkClick},Object(Co.a)("ACCUEIL"))),!!n&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.plannings,to:"/plannings","data-type":"plannings",onClick:this._onLinkClick},Object(Co.a)("PLANNINGS"))),!!t&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.campaigns,to:"/campaigns","data-type":"campaigns",onClick:this._onLinkClick},Object(Co.a)("CAMPAGNES"))),!(!a&&!r)&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.boxes,to:"/boxes","data-type":"boxes",onClick:this._onLinkClick},Object(Co.a)("BOXES"))),m>0&&!ti.a.isKid()&&!o&&ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.feed,to:"/feed","data-type":"feed",onClick:this._onLinkClick},Object(Co.a)("À ÉCOUTER"))),!!e&&ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link ellipsis",type:"button",onClick:this._onBugReportClick},"REPORT A BUG"))),this._custo.active&&""!==h.tab_header.name?ao.a.createElement("div",null,Ts,ao.a.createElement("ul",{className:"nav"},ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.exclus,to:"/"+h.tab_header.url,onClick:this._onLinkClick},h.tab_header.name)))):"",js,m>0?ao.a.createElement("ul",{className:_},ao.a.createElement("li",{className:"profile"},ao.a.createElement(ei.a,{className:"nav-link "+l.profile,"data-type":"profile",to:"/profile/"+m,onClick:this._onLinkClick},ao.a.createElement("span",{className:"profile-picture"},ao.a.createElement("img",{alt:"",id:"naboo_menu_collection_avatar",src:vs.a.getImageSrc("user",p,24,24)})),ti.a.getMultiAccountOptions().ENABLED&&ti.a.getMultiAccountOptions().PARENT?ao.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},ti.a.getDisplayName(!0)):ao.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},Object(Co.a)("Ma musique"))),ao.a.createElement("button",{className:"profile-settings "+s.settings,type:"button","data-type":"settings",onClick:this._onOpenPanelClick},ao.a.createElement(Mo.a,{name:"settings",size:"16",srLabel:Object(Co.a)("Paramètres")}))),lo.a.get("USER.OPTIONS.can_subscribe")?ao.a.createElement("li",{className:"subscribe"},this._renderABTestPushMobile()):"",o?"":ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nav-link "+l.loved,"data-type":"loved",to:"/profile/"+m+"/loved",onClick:this._onLinkClick},Ss,Object(Co.a)("Coups de cœur"))),t?ao.a.createElement("li",{id:"business-mixes-toggle"},ao.a.createElement("button",{type:"button",className:"business-playlists-tips-highlight nav-link "+s.business_mixes,"data-type":"business_mixes",onClick:this._onOpenPanelClick},ws,Object(Co.c)("Mix","Mix",{count:2}))):"",t?ao.a.createElement("li",{id:"business-curated-panel-toggle"},ao.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_curated_playlists,"data-type":"business_curated_playlists",type:"button",onClick:this._onOpenPanelClick},As,Object(Co.a)("Business Playlists"))):"",t?ao.a.createElement("li",null,ao.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_regular_playlists,"data-type":"business_regular_playlists",type:"button",onClick:this._onOpenPanelClick},Ps,Object(Co.a)("Sélection éditos"))):"",ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link "+s.playlists,"data-type":"playlists",type:"button",onClick:this._onOpenPanelClick},Cs,Object(Co.a)("Playlists"),ao.a.createElement(ui.a,{counter:c}))),ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link "+s.albums,"data-type":"albums",type:"button",onClick:this._onOpenPanelClick},Ns,Object(Co.a)("Albums"))),!o&&uo.a.isAllowed("talk")?ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link "+s.shows,"data-type":"shows",type:"button",onClick:this._onOpenPanelClick},ks,Object(Co.a)("Podcasts"))):"",o?null:ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link "+s.notifications,"data-type":"notifications",type:"button",onClick:this._onOpenPanelClick},Rs,Object(Co.a)("Activité"),ao.a.createElement(ui.a,{counter:u}))),t?"":ao.a.createElement("li",null,ao.a.createElement("button",{className:"nav-link "+s.apps,"data-type":"apps",type:"button",onClick:this._onOpenPanelClick},Ds,Object(Co.a)("Applications")))):ao.a.createElement("div",{className:"unlogged"},ao.a.createElement("button",{className:"btn btn-primary btn-block evt-click","data-register":"1",type:"button"},ao.a.createElement("span",{className:"label"},Object(Co.a)("Inscription"))),ao.a.createElement("button",{className:"btn btn-inverse btn-block evt-click","data-login":"1",type:"button"},ao.a.createElement("span",{className:"label"},Object(Co.a)("Connexion"))),ao.a.createElement("div",{className:"divider"},ao.a.createElement("span",{className:"or"},Object(Co.a)("ou"))),ao.a.createElement("a",{className:"btn btn-discover btn-block animate-wobble","data-type":"discovery",href:"/company",target:"_blank",onClick:this._onLinkClick},ao.a.createElement("span",{className:"label"},Object(Co.a)("Découvrir Deezer")),Is))),xs),ao.a.createElement(gs,{showUpNextNotification:d}),d?this._renderUpNextNotification():null)},t.prototype._renderUpNextNotification=function(){return ao.a.createElement("div",{className:"popover player-upnext-notification"},Object(Co.a)("Recommandations activées"))},t.prototype._renderABTestPushMobile=function(){var e=lo.a.get("USER.OPTIONS"),t=lo.a.get("USER.ABTEST"),n=void 0!==e.upgrade?e.upgrade.offer.duration:0,a=void 0!==t.abtest_senttomobile_oldreg?t.abtest_senttomobile_oldreg.option:"default";return n>0&&"A"===a?ao.a.createElement("button",{className:"btn btn-primary btn-block","data-modal":"/lightbox/push_mobile?context=button_menu",type:"button",onClick:this._onOpenModalClick},ao.a.createElement("span",{className:"label"},Object(Co.c)("%s JOUR OFFERT","%s JOURS OFFERTS",{count:n,sprintf:[n]}))):ao.a.createElement("a",{className:"btn btn-primary btn-block","data-type":"offers_subscribe",href:"/offers",target:"_blank",onClick:this._onLinkClick},Ls,ao.a.createElement("span",{className:"label"},Object(Co.a)("S'ABONNER")))},t.prototype._onLinkClick=function(e){this.tracking("menu_click",e.currentTarget),go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._onOpenPanelClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=ai.a.dataset(e.currentTarget,"type");void 0!==t&&go.a.trigger(go.a.menu.togglePanel,{panel:t,currentTarget:e.currentTarget})},t.prototype._onOpenModalClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=ai.a.dataset(e.currentTarget,"modal");void 0!==t&&_o.a.open(t)},t.prototype._onBugReportClick=function(e){e.preventDefault();var t=lo.a.get("ATL_JQ_SHOW_DIALOG");"function"==typeof t&&t()},t.prototype._onClosePanelsByEsc=function(e){void 0!==e.keyCode&&27!==e.keyCode||go.a.trigger(go.a.menu.closeAllPanels,!0)},t.prototype._onClosePanels=function(){for(var e in t._panels)t._panels.hasOwnProperty(e)&&(t._panels[e].active=!1);var n=this.state.showUpNextNotification;n&&(ni.a.set({tips:{up_next:!1}}),n=!1),this.props.setActivePanel({panel:null}),this.setState({panels:this._getPanelsState(),showUpNextNotification:n})},t.prototype._onOpenPanel=function(e,n){var a=n.panel;if(!t.isPanelOpen(a)){for(var r in t._panels)t._panels.hasOwnProperty(r)&&(t._panels[r].active=a===r);var o=this.state.showUpNextNotification;o&&(ni.a.set({tips:{up_next:!1}}),o=!1),this.props.setActivePanel({panel:a}),this.setState({panels:this._getPanelsState(),showUpNextNotification:o})}},t.prototype._onTogglePanel=function(e,n){t.isPanelOpen(n.panel)?go.a.trigger(go.a.menu.closeAllPanels):go.a.trigger(go.a.menu.openPanel,n)},t.prototype._onPageChanged=function(e){var t=void 0;for(var n in this._pages)this._pages.hasOwnProperty(n)&&(t=(t=!0)&&this._pages[n].pattern.test(e),void 0!==this._pages[n].pattern_not&&(t=t&&!this._pages[n].pattern_not.test(e)),this._pages[n].selected=t);this.setState({pages:this._getPagesState()})},t.prototype._onPlayerTypeChange=function(){var e=so.a.getContext("TYPE");this.setState({playerContextType:e,showUpNextNotification:"up_next_artist"===e&&lo.a.get("USER.SETTING.tips.up_next")})},t.prototype._onUserReady=function(){No.a.call({method:"notification.get",data:{start:0,nb:20},success:function(e){e.count>0?e.data.reverse().forEach(Eo.a.addNotification):Eo.a.notifications=[]},error:function(){}}),this._updateUnseenNotifications(),this._updateUnseenPlaylists()},t.prototype._openLyricsPanel=function(e,t){"ads"!==so.a.getPlayerType()&&("player"===t.context?t.toggle?go.a.trigger(go.a.menu.togglePanel,{panel:"lyrics",currentTarget:e.currentTarget}):go.a.trigger(go.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget}):so.a.isRadio()?(io.c.navigate("/track/"+t.data.SONG.SNG_ID),go.a.trigger(go.a.menu.closeAllPanels)):0!==so.a.getTrackList().filter(function(e){return e.SNG_ID_ORIGIN?e.SNG_ID_ORIGIN===t.data.SONG.SNG_ID_ORIGIN:e.SNG_ID===t.data.SONG.SNG_ID}).length&&t.data.INDEX?so.a.getIndexSong()===t.data.INDEX?go.a.trigger(go.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget}):(go.a.subscribeOnce(go.a.player.displayCurrentSong,function(){go.a.trigger(go.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),so.a.playTrackAtIndex(t.data.INDEX)):(go.a.subscribeOnce(go.a.player.tracklist_changed,function(){so.a.control.nextSong(),go.a.trigger(go.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),so.a.play({id:t.id,context:t.listenContext,type:"track",radio:!1,addNext:!0})),go.a.trigger(go.a.menu.contextMenuClose))},t.prototype._updateUnseenPlaylists=function(){var e=this;this._updateUnseenPlaylistRef=setTimeout(function(){e.setState({unseenPlaylistCount:Eo.a.getUnseenPlaylistCount()})},0)},t.prototype._updateUnseenNotifications=function(){this.setState({unseenNotificationCount:Eo.a.getNotificationCount()+Eo.a.getMessageCount()})},t.prototype._updateNanoScroller=function(){fo()(this.refs.navigation).nanoScroller()},t.prototype._updatePicture=function(e,t){this.setState({userPicture:t.md5})},t.prototype._hasOpenPanel=function(){for(var e in t._panels)if(t._panels.hasOwnProperty(e)&&!0===t._panels[e].active)return!0;return!1},t.prototype._getPagesState=function(){var e={};for(var t in this._pages)this._pages.hasOwnProperty(t)&&(e[t]=!0===this._pages[t].selected?"active-link":"");return e},t.prototype._getPanelsState=function(){var e={};for(var n in t._panels)t._panels.hasOwnProperty(n)&&(e[n]=!0===t._panels[n].active?"active-panel":"");return e},t.prototype._pageDisplayed=function(e,t){this._onPageChanged(t?t.path:io.c.getCurrentPath()),this._hasOpenPanel()&&go.a.trigger(go.a.menu.closeAllPanels)},t}(no.Component);Ms._panels={searchhistory:{active:!1},searchsuggest:{active:!1},playlists:{active:!1},business_regular_playlists:{active:!1},business_curated_playlists:{active:!1},business_mixes:{active:!1},albums:{active:!1},shows:{active:!1},loved:{active:!1},apps:{active:!1},queuelist:{active:!1},settings:{active:!1},lyrics:{active:!1},notifications:{active:!1}};var Us=Object(ro.b)(null,{setActivePanel:ri.b})(Object(Qi.a)(Ms)),Fs=n("./js/_components/TagList.js"),Bs=n("./js/_components/List/index.js"),Hs=ao.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Gs=function(e){function t(n){nt(this,t);var a=at(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a.state={history:n.history},a}return rt(t,e),t.prototype.render=function(){var e=this;if(this._isHistoryEmpty())return null;var t=[];return this.state.history.map(function(n,a){var r=[],o=null,i="query_"+n.query+"_"+a;null!==n.result&&(r.push(n.result),o=ao.a.createElement(Bs.a,{data:r,displayAdd:!0,context:"history_"+r[0].__TYPE__})),t.push(ao.a.createElement("li",{key:i},ao.a.createElement("a",{className:"nano-card-link heading-4 ellipsis",onClick:e._onViewAll,"data-type":"query","data-query":n.query,"data-index":a},Hs,e._getQueryTitle(n.query)),o))}),ao.a.createElement("ul",{className:"nano-card-list search-history"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");go.a.trigger(go.a.menu.closeAllPanels),io.c.navigate("/search/"+encodeURIComponent(t))},t.prototype._isHistoryEmpty=function(){return!(this.state.history&&this.state.history.length)},t.prototype._getQueryTitle=function(e){return e?0===e.indexOf("+")&&e.length>1?e.substr(1,e.length):e:null},t}(no.Component),zs=Object(Qi.a)(Gs),Ys=n("./js/_components/hocs/PanelComponent.js"),qs=n("./js/_components/hocs/PanelScrollComponent.js"),Vs=ao.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Ws=function(e){function t(n){it(this,t);var a=st(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return lt(t,e),t.prototype.render=function(){var e=this;if(this._isSuggestionEmpty())return null;var t=this.props.suggestion.map(function(t,n){var a=t.REVISED_QUERY;return ao.a.createElement("li",{key:"query_"+a},ao.a.createElement(ei.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(a),onClick:e._onViewAll,"data-type":"query","data-query":a,"data-index":n},Vs,a))});return ao.a.createElement("ul",{className:"nano-card-list search-suggestion"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");go.a.trigger(go.a.menu.closeAllPanels),0!==lo.a.get("USER.USER_ID")&&Eo.a.addSearchHistory(t)},t.prototype._isSuggestionEmpty=function(){return!(this.props.suggestion&&this.props.suggestion.length)},t}(no.Component);Ws.defaultProps={suggestion:[]};var Ks=Object(Qi.a)(Ws),Qs=ao.a.createElement("div",{className:"placeholders-img nocontent"}),Xs=function(e){function t(n){ut(this,t);var a=pt(this,e.call(this,n));return a.panel_name="searchsuggest",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.suggest!==a.state.suggest}},a._onSearchStoreChange=a._onSearchStoreChange.bind(a),a._onHistoryChange=a._onHistoryChange.bind(a),a._onSuggestionClick=a._onSuggestionClick.bind(a),a._onSearchWithoutRevision=a._onSearchWithoutRevision.bind(a),a.state={suggest:si.a.getResults(),history:Eo.a.data.SEARCH_HISTORY?Eo.a.data.SEARCH_HISTORY.data:[]},a}return dt(t,e),t.prototype.componentDidMount=function(){si.a.onChange(this._onSearchStoreChange),go.a.subscribe(go.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){si.a.offChange(this._onSearchStoreChange),si.a.cancel(),go.a.unsubscribe(go.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod"),t=Po()({"heading-2":!0,"link-animated icon-right":!this._isSuggestEmpty()&&!e}),n=Po()({"panel-header":!0,"panel-header-link":!e});return this.renderPanel(ao.a.createElement("div",{className:"panel-search-suggest"},ao.a.createElement("div",{className:n,onClick:this._onViewAllClick.bind(this,"all")},ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:t},Object(Co.a)("Résultats")))),this.renderScrollbar({"panel-body":!0},ao.a.createElement("div",null,this._renderContent()))))},t.prototype._renderPlaceholder=function(){return ao.a.createElement("div",{key:"no-result-placeholder"},Qs,ao.a.createElement("div",{className:"placeholders-title"},Object(Co.a)("Aucun résultat.")))},t.prototype._renderContent=function(){var e=[],t=this.state,n=t.history,a=t.suggest,r=uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod");if(this._isSuggestEmpty()){e.push(this._renderPlaceholder());var o=a&&a.ALTERNATIVE_QUERIES&&a.ALTERNATIVE_QUERIES.length,i=a&&a.RELATED_CONTENT&&a.RELATED_CONTENT.length;if(o||i){if(e.push(ao.a.createElement("h2",{key:"suggestion-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Recommandé"))),o&&e.push(ao.a.createElement(Ks,{key:"suggestion-list",suggestion:a.ALTERNATIVE_QUERIES})),i){var s=a.RELATED_CONTENT[0].__TYPE__,l=uo.a.isAllowed("business")&&("playlist"===s||"album"===s||"radio"===s);e.push(ao.a.createElement(Bs.a,{key:"suggest_list_RELATED_CONTENT",data:a.RELATED_CONTENT,displayAdd:!0,displayFavorite:!0,displayType:this._getDisplayType(s),draggable:l,thumbnailRounded:"artist"===s||"user"===s,onClick:this._onSuggestionClick.bind(this,"alternative"),type:s,context:"suggest_"+s}))}}else{var c=Eo.a.data.USER_TAGS?Eo.a.data.USER_TAGS.data:null;c&&c.length&&!r&&(e.push(ao.a.createElement("h2",{key:"user-tag-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Tags"))),e.push(ao.a.createElement(Fs.a,{key:"user-tag-list",tags:c,overflowHidden:!1}))),n.length&&(e.push(ao.a.createElement("h2",{key:"history-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Dernières recherches"))),e.push(ao.a.createElement(zs,{key:"history-list",history:n})))}return e}if(r||e.push(ao.a.createElement(Fs.a,{key:"tag-list",max:5,tags:a.TAG,overflowHidden:!1})),a.REVISED_QUERY&&a.QUERY!==a.REVISED_QUERY){var u="true"===a.AUTOCORRECT?a.REVISED_QUERY:a.QUERY,p="true"===a.AUTOCORRECT?a.QUERY:a.REVISED_QUERY,d="true"===a.AUTOCORRECT?Object(Co.a)("Essayez quand même avec"):Object(Co.a)("Afficher les résultats pour :");e.push(ao.a.createElement("div",{key:"panel-search-revised-query"},ao.a.createElement("h2",{className:"panel-heading heading-3-sub"},ao.a.createElement("p",null,Object(Co.a)("Résultats de recherche pour %s",{sprintf:[u]})),ao.a.createElement("p",{className:"heading-sub-search"},d+" ",ao.a.createElement("a",{className:"link-primary",onClick:this._onSearchWithoutRevision.bind(this,p)},p)))))}var f=a.TOP_RESULT,h=r?{}:{TOP_RESULT:f&&f.length>0?{title:Object(Co.a)("Meilleur résultat"),context:"best_result",data:f,type:f[0].__TYPE__}:null};h=Object.assign(h,{ARTIST:{title:Object(Co.a)("Artistes"),view_more_wording:Object(Co.a)("Afficher tous les artistes"),data:a.ARTIST,type:"artist"},ALBUM:{title:Object(Co.a)("Albums"),view_more_wording:Object(Co.a)("Afficher tous les albums"),data:a.ALBUM,type:"album"},TRACK:{title:Object(Co.a)("Titres"),view_more_wording:Object(Co.a)("Afficher tous les titres"),data:a.TRACK,type:"track"},PLAYLIST:{title:Object(Co.a)("Playlists"),view_more_wording:Object(Co.a)("Afficher toutes les playlists"),data:a.PLAYLIST,type:"playlist"},RADIO:{title:Object(Co.a)("Mix"),view_more_wording:Object(Co.a)("Afficher tous les mix"),data:a.RADIO,type:"radio"},CHANNEL:uo.a.isAllowed("search_channel")?{title:Object(Co.a)("Univers"),view_more_wording:Object(Co.a)("Afficher tous les Univers"),data:a.CHANNEL,type:"channelCard"}:null,SHOW:{title:Object(Co.a)("Podcasts"),view_more_wording:Object(Co.a)("Afficher tous les podcasts"),data:a.SHOW,type:"show"},LIVESTREAM:uo.a.isAllowed("search_livestream")?{title:Object(Co.a)("Radios"),view_more_wording:Object(Co.a)("Afficher toutes les radios"),data:a.LIVESTREAM,type:"livestream"}:null,USER:uo.a.isAllowed("search_users")?{title:Object(Co.a)("Profils"),view_more_wording:Object(Co.a)("Afficher tous les profils"),data:a.USER,type:"user"}:null});for(var m in h)if(h.hasOwnProperty(m)&&null!==h[m]){var y=h[m].data;if(y&&y.length){e.push(ao.a.createElement("h2",{className:"panel-heading-sub heading-4",key:"suggest_title_"+m},h[m].title));var b=y.length>2&&!r?y.slice(0,2):y,_="TOP_RESULT"===m?this._getDisplayType(h[m].type):"",g=uo.a.isAllowed("business")&&("PLAYLIST"===m||"ALBUM"===m||"RADIO"===m),v=h[m].context||"default";e.push(ao.a.createElement(Bs.a,{key:"suggest_list_"+m,data:b,displayAdd:!0,displayFavorite:!0,displayType:_,draggable:g,options:["label","name"],thumbnailRounded:"artist"===h[m].type||"user"===h[m].type,onClick:this._onSuggestionClick.bind(this,v),type:h[m].type,context:"suggest_"+h[m].type})),y.length>2&&!r&&e.push(ao.a.createElement("button",{key:"viewmore_"+m,onClick:this._onViewAllClick.bind(this,m),className:"btn btn-block btn-view-more",type:"button","data-type":"view_all"},ao.a.createElement("span",{className:"label"},h[m].view_more_wording)))}}return e},t.prototype._onSearchStoreChange=function(e){if("suggest"===e){var t=si.a.getResults();t&&this.setState({suggest:t})}},t.prototype._onSuggestionClick=function(e,t,n,a){this.props.isAuthUser&&Eo.a.addSearchHistory(si.a.getQuery(),e,n,a)},t.prototype._onViewAllClick=function(e,t){if(uo.a.isAllowed("business")&&!uo.a.isAllowed("business_mod"))return!1;this.tracking("panel_click",t.currentTarget);var n=si.a.getQuery(),a=window.reactRouter;if(this.props.isAuthUser&&Eo.a.addSearchHistory(n),go.a.trigger(go.a.menu.closeAllPanels),lo.a.set("__SEARCH_TAB",e&&"TRACK"!==e?e.toLowerCase():"all"),0===n.lastIndexOf("#",0))return a.push("/tags/"+encodeURIComponent(n.replace(/#/g,"")));var r="/search/"+encodeURIComponent(n),o=lo.a.get("__SEARCH_TAB");return"all"!==o&&(r+="/"+o),a.push(r)},t.prototype._onHistoryChange=function(){this.setState({history:Eo.a.data.SEARCH_HISTORY})},t.prototype._onSearchWithoutRevision=function(e){var t="+"+e;this.props.isAuthUser&&Eo.a.addSearchHistory(t,"force_no_correction"),io.c.navigate("/search/"+encodeURIComponent(t),{force:!0})},t.prototype._isSuggestEmpty=function(){var e=this.state.suggest;return!(null!==e&&(e.TOP_RESULT&&0!==e.TOP_RESULT.length||e.ARTIST&&0!==e.ARTIST.length||e.ALBUM&&0!==e.ALBUM.length||e.TRACK&&0!==e.TRACK.length||e.PLAYLIST&&0!==e.PLAYLIST.length||e.CHANNEL&&0!==e.CHANNEL.length||e.RADIO&&0!==e.RADIO.length||e.SHOW&&0!==e.SHOW.length||e.LIVESTREAM&&0!==e.LIVESTREAM.length||e.USER&&0!==e.USER.length))},t.prototype._getDisplayType=function(e){return{album:Object(Co.a)("Album"),artist:Object(Co.a)("Artiste"),playlist:Object(Co.a)("Playlist"),show:Object(Co.a)("Podcast"),livestream:Object(Co.a)("Radio"),radio:Object(Co.a)("Mix"),channel:Object(Co.a)("Univers"),song:Object(Co.a)("Titre"),track:Object(Co.a)("Titre"),user:Object(Co.a)("Profil")}[e]},t}(no.Component);Xs.defaultProps={isAuthUser:0!==lo.a.get("USER.USER_ID")};var $s=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(Xs))),Js=ao.a.createElement("span",{className:"icon icon-top-playlist pull-left"}),Zs=function(e){function t(n){ht(this,t);var a=mt(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return yt(t,e),t.prototype.render=function(){var e=this;if(!this.props.queries.length)return null;var t=this.props.queries.map(function(t,n){return ao.a.createElement("li",{key:"query_"+t.QUERY},ao.a.createElement(ei.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(t.QUERY),onClick:e._onViewAll.bind(e,t.QUERY),"data-type":"query","data-index":n},Js,t.QUERY))});return ao.a.createElement("ul",{className:"nano-card-list"},t)},t.prototype._onViewAll=function(e,t){this.props.isAuthUser&&Eo.a.addSearchHistory(e,"trending"),this.tracking("panel_click",t.currentTarget),go.a.trigger(go.a.menu.closeAllPanels)},t}(no.Component);Zs.defaultProps={queries:[],isAuthUser:0!==lo.a.get("USER.USER_ID")};var el=Object(Qi.a)(Zs),tl=function(e){function t(n){_t(this,t);var a=gt(this,e.call(this,n));return a.panel_name="searchhistory",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.historyLength!==a.state.historyLength}},a._onHistoryChange=a._onHistoryChange.bind(a),a._clearSearchHistory=a._clearSearchHistory.bind(a),a.state={userTags:Eo.a.data.USER_TAGS?Eo.a.data.USER_TAGS.data:[],history:Eo.a.data.SEARCH_HISTORY?Eo.a.data.SEARCH_HISTORY.data:[],historyLength:Eo.a.data.SEARCH_HISTORY?Eo.a.data.SEARCH_HISTORY.total:0,trendingQueries:Eo.a.data.TRENDING_QUERIES?Eo.a.data.TRENDING_QUERIES.data:[]},a}return vt(t,e),t.prototype.componentDidMount=function(){go.a.subscribe(go.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=[],t=this.state,n=t.userTags,a=t.history,r=t.trendingQueries;return uo.a.isAllowed("trending_queries")&&r.length?(e.push(ao.a.createElement("h2",{key:"trending-queries-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Les plus recherchés"))),e.push(ao.a.createElement(el,{key:"trending-queries-list",queries:r}))):n.length&&(e.push(ao.a.createElement("h2",{key:"user-tag-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Tags"))),e.push(ao.a.createElement(Fs.a,{key:"user-tag-list",tags:n,overflowHidden:!1}))),a.length&&(e.push(ao.a.createElement("h2",{key:"history-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Dernières recherches"))),e.push(ao.a.createElement(zs,{key:"history-list",history:a})),e.push(ao.a.createElement("button",{key:"history-clear-button",className:"btn btn-block btn-view-more btn-clear",type:"button",onClick:this._clearSearchHistory},ao.a.createElement("span",{className:"label"},Object(Co.a)("Effacer"))))),this.renderPanel(ao.a.createElement("div",{className:"panel-search-history"},this.renderScrollbar({"panel-body":!0},ao.a.createElement("div",null,e))))},t.prototype._onHistoryChange=function(){this.setState({historyLength:Eo.a.data.SEARCH_HISTORY.total})},t.prototype._clearSearchHistory=function(){Eo.a.clearSearchHistory(),go.a.trigger(go.a.menu.closeAllPanels)},t}(no.Component),nl=Object(Ys.a)(Object(qs.a)(tl)),al=n("./node_modules/lodash.debounce/index.js"),rl=n.n(al),ol=n("./js/_components/Selectbox.js"),il=n("./js/_components/Sort.js"),sl=function(e){function t(n){Ot(this,t);var a=Tt(this,e.call(this,n));return a.panel_name="playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._onToggleFavorite=rl()(a._onToggleFavorite.bind(a),0),a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._onOpenPlaylistAssistant=a._onOpenPlaylistAssistant.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:[],playlistOnTop:[],sortType:lo.a.get("USER.SETTING.site.sort_panel_playlist")||"PLAYLIST_TITLE",filter:"",nbDisplay:50},a}return jt(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"panel_playlist"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"panel_playlist"),go.a.subscribe(go.a.playlist.created,this._updatePlaylists,"panel_playlist"),go.a.subscribe(go.a.playlist.removed,this._updatePlaylists,"panel_playlist"),go.a.subscribe(go.a.playlist.updated,this._updatePlaylists,"panel_playlist"),go.a.subscribe(go.a.playlist.addSong,this._updatePlaylists,"panel_playlist"),go.a.subscribe(go.a.playlist.removeSong,this._updatePlaylists,"panel_playlist"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({list:e._getPlaylistList(),playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-playlists");Object(Ri.l)(e)})})},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-playlists"},ao.a.createElement("div",{className:"panel-header",id:"panel-playlists",tabIndex:"0","aria-label":Object(Co.a)("Playlists")},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return 0===e?ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t)):ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},ao.a.createElement(ei.a,{className:"link-animated",to:"/profile/"+lo.a.get("USER.USER_ID")+"/playlists"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length>0?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=uo.a.isAllowed("business"),t=e&&!uo.a.isAllowed("business_mod");return ao.a.createElement(Bs.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:uo.a.isAllowed("business"),displayAdd:!0,draggable:e,helper:t?null:this._onOpenPlaylistAssistant,context:"menu_panel_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onOpenPlaylistAssistant=function(e){this.tracking("panel_click",e.currentTarget),_o.a.open("/lightbox/playlist_assistant?type=create"),go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._onToggleFavorite=function(e,t){"playlist"===t.type&&this._updatePlaylists()},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=il.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){return fo.a.merge(fo.a.merge([],Eo.a.data.PLAYLISTS.data),Eo.a.data.FAVORITES_PLAYLISTS.data)},t}(no.Component),ll=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(sl))),cl=n("./js/_modules/business/stores/ContentsStore.js"),ul=function(e){function t(n){wt(this,t);var a=At(this,e.call(this,n));return a.panel_name="business_regular_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:lo.a.get("USER.SETTING.site.sort_panel_playlist")||"PLAYLIST_TITLE",filter:"",nbDisplay:50},a}return Pt(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),go.a.subscribe(go.a.business_content.loaded,this._updatePlaylists,"panel_business_regular_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-regular-playlists");Object(Ri.l)(e)})})},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_business_regular_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-playlists"},ao.a.createElement("div",{className:"panel-header",id:"panel-regular-playlists","aria-label":Object(Co.a)("Sélection éditos"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length>0?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return ao.a.createElement(Bs.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:uo.a.isAllowed("business"),context:"menu_panel_business_regular_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.filter,a=e.sortType,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=il.a.data(t,a),l=n.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=cl.a.getRegularPlaylists();return e&&void 0!==e.data?e.data:[]},t}(no.Component),pl=Object(Ys.a)(Object(qs.a)(ul)),dl=function(e){function t(n){Nt(this,t);var a=kt(this,e.call(this,n));return a.panel_name="business_curated_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:lo.a.get("USER.SETTING.site.sort_panel_playlist")||"PLAYLIST_TITLE",filter:"",nbDisplay:50},a}return Rt(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),go.a.subscribe(go.a.business_content.loaded,this._updatePlaylists,"panel_business_curated_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-curated-playlists");Object(Ri.l)(e)})})},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_business_curated_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-playlists"},ao.a.createElement("div",{className:"panel-header",id:"panel-curated-playlists","aria-label":Object(Co.a)("Business Playlists"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length>0?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return ao.a.createElement(Bs.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:uo.a.isAllowed("business"),context:"menu_panel_business_curated_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=il.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=cl.a.getCuratedPlaylists();return e&&void 0!==e.data?e.data:[]},t}(no.Component),fl=Object(Ys.a)(Object(qs.a)(dl)),hl=function(e){function t(n){It(this,t);var a=xt(this,e.call(this,n));return a.panel_name="business_mixes",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:lo.a.get("USER.SETTING.site.sort_panel_playlist")||"PLAYLIST_TITLE",filter:"",nbDisplay:50},a}return Lt(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),go.a.subscribe(go.a.business_content.loaded,this._updatePlaylists,"panel_business_mixes"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-business-mixes");Object(Ri.l)(e)})})},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_business_mixes")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-playlists"},ao.a.createElement("div",{className:"panel-header",id:"panel-business-mixes","aria-label":Object(Co.c)("Mix","Mix",{count:2}),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s mix","%s mix",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length>0?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return ao.a.createElement(Bs.a,{key:"playlist-list",data:this._current_list,type:"radio",displayFavorite:!0,draggable:uo.a.isAllowed("business"),context:"menu_panel_business_mixes"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=il.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var u=0;u<s.length;u++)if(Number(s[u].PLAYLIST_ID)===Number(r[c])){i.push(s[u]),s.splice(u,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=cl.a.getAllRadios();return e&&void 0!==e.data?e.data:[]},t}(no.Component),ml=Object(Ys.a)(Object(qs.a)(hl)),yl=function(e){function t(n){Ut(this,t);var a=Ft(this,e.call(this,n));return a.panel_name="albums",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=rl()(a._onToggleFavorite.bind(a),0),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPageAllAlbums=a._openPageAllAlbums.bind(a),a.state={list:Eo.a.data.FAVORITES_ALBUMS.data.slice(0),sortType:lo.a.get("USER.SETTING.site.sort_panel_album")||"ART_NAME",nbDisplay:50,filter:""},a}return Bt(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"panel_album"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"panel_album"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-albums");Object(Ri.l)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_album")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-albums"},ao.a.createElement("div",{className:"panel-header",id:"panel-albums","aria-label":Object(Co.a)("Albums"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s album","%s albums",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return 0===e?ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t)):ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},ao.a.createElement(ei.a,{className:"link-animated",to:"/profile/"+lo.a.get("USER.USER_ID")+"/albums"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"album",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=uo.a.isAllowed("business");return ao.a.createElement(Bs.a,{key:"album-list",data:this._currentList,type:co.a.Album,displayFavorite:e,displayAdd:!0,helper:e?null:this._openPageAllAlbums,draggable:uo.a.isAllowed("business"),context:"menu_panel_album"})},t.prototype._onToggleFavorite=function(e,t){"album"===t.type&&this.setState({list:Eo.a.data.FAVORITES_ALBUMS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPageAllAlbums=function(e){e.preventDefault(),this.context.router.push("/profile/"+lo.a.get("USER.USER_ID")+"/albums")},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=il.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.ALB_TITLE.toLowerCase().indexOf(a.toLowerCase())>-1||e.ART_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(no.Component);yl.contextTypes={router:mo.a.object};var bl=Object(Ys.a)(Object(qs.a)(yl)),_l=function(e){function t(n){Gt(this,t);var a=zt(this,e.call(this,n));return a.panel_name="shows",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPagePodcasts=a._openPagePodcasts.bind(a),a.state={list:Eo.a.data.FAVORITES_SHOWS.data.slice(0),sortType:lo.a.get("USER.SETTING.site.sort_panel_show")||"SHOW_NAME",nbDisplay:50,filter:""},a}return Yt(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"panel_show"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"panel_show"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-shows");Object(Ri.l)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_show")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(ao.a.createElement("div",{className:"panel-shows"},ao.a.createElement("div",{className:"panel-header",id:"panel-shows","aria-label":Object(Co.a)("Podcasts"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=ao.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Co.c)("%s podcast","%s podcasts",{sprintf:['<span class="color-primary">'+Object(Ri.f)(e)+"</span>"],count:e})}});return 0===e?ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},t)):ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2"},ao.a.createElement(ei.a,{className:"link-animated",to:"/profile/"+lo.a.get("USER.USER_ID")+"/shows"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return ao.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},ao.a.createElement("div",{className:"form-group"},ao.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(Co.a)("Filtrer"),value:t})),n.length?ao.a.createElement("div",{className:"form-group"},ao.a.createElement(ol.a,{type:"show",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=uo.a.isAllowed("business"),t=e&&!uo.a.isAllowed("business_mod");return ao.a.createElement(Bs.a,{key:"show-list",data:this._currentList,type:co.a.Show,displayFavorite:e,displayAdd:!0,draggable:e,helper:t?null:this._openPagePodcasts,context:"menu_panel_show"})},t.prototype._onToggleFavorite=function(e,t){"show"===t.type&&this.setState({list:Eo.a.data.FAVORITES_SHOWS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPagePodcasts=function(e){e.preventDefault(),io.c.navigate("/channels/podcasts")},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=il.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.SHOW_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(no.Component);_l.defaultProps={selected:!1};var gl=Object(Ys.a)(Object(qs.a)(_l)),vl=n("./js/_components/Thumbnail/index.js"),El=function(e){function t(n){Vt(this,t);var a=Wt(this,e.call(this,n));return a.panel_name="apps",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onAppClick=a._onAppClick.bind(a),a._onHelperClick=a._onHelperClick.bind(a),a.state={list:Eo.a.data.FAVORITES_APPLICATIONS?Eo.a.data.FAVORITES_APPLICATIONS.data.slice(0):[],suggest:Eo.a.data.DEFAULT_APPLICATIONS?Eo.a.data.DEFAULT_APPLICATIONS.data.slice(0):[]},a}return Kt(t,e),t.prototype.componentDidMount=function(){go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"panel_application"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"panel_application"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-apps");Object(Ri.l)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.suggest!==this.state.suggest||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_application")},t.prototype.render=function(){var e=this.state,t=e.list,n=e.suggest,a=il.a.data(t,"APP_NAME"),r=Object(Co.c)("%s application","%s applications",{sprintf:['<span class="color-primary">'+Object(Ri.f)(a.length)+"</span>"],count:a.length});return this.renderPanel(ao.a.createElement("div",{className:"panel-apps"},ao.a.createElement("div",{className:"panel-header",id:"panel-apps","aria-label":Object(Co.a)("Applications"),tabIndex:"0"},ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2",dangerouslySetInnerHTML:{__html:r}}))),this.renderScrollbar({"panel-body":!0},[this._renderSuggest(n),this._renderContent(a)])))},t.prototype._renderContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ao.a.createElement(Bs.a,{key:"apps-list",data:e,type:"app",helper:this._onHelperClick})},t.prototype._renderSuggest=function(e){return 0===e.length?null:(e=e[0],ao.a.createElement("aside",{role:"complementary",key:"suggest",className:"app-suggest",onClick:this._onAppClick,"data-type":"suggested_apps","data-url":this._getSuggestUrl(),"data-id":e.APP_ID},ao.a.createElement("div",{className:"panel-heading-sub heading-4"},Object(Co.a)("Deezer vous recommande :")),ao.a.createElement(vl.a,{type:"app",data:e,alt:e.NAME,height:120,width:320}),ao.a.createElement("ul",{className:"nano-card-list"},ao.a.createElement("li",{className:"nano-card-item"},ao.a.createElement("div",{className:"nano-card-options"},ao.a.createElement("span",{className:"option"},ao.a.createElement(Si.a,{type:"application",context:"appsuggest",id:e.APP_ID}))),ao.a.createElement("div",{className:"nano-card-infos"},ao.a.createElement("div",{className:"heading-4 ellipsis"},ao.a.createElement("a",{href:this._getSuggestUrl()},e.NAME)),ao.a.createElement("div",{className:"heading-4-sub ellipsis"},ao.a.createElement("a",{href:this._getSuggestUrl()},e.DESCRIPTION)))))))},t.prototype._onToggleFavorite=function(e,t){"application"===t.type&&this.setState({list:Eo.a.data.FAVORITES_APPLICATIONS.data.slice(0)})},t.prototype._onAppClick=function(e){e.preventDefault(),e.stopPropagation(),io.c.navigate(this._getSuggestUrl()),this.tracking("panel_click",e.currentTarget)},t.prototype._onHelperClick=function(e){e.preventDefault(),e.stopPropagation(),io.c.navigate("/appstudio"),this.tracking("panel_click",e.currentTarget)},t.prototype._getSuggestUrl=function(){var e=this.state.suggest[0];return"/app/"+(""!==e.INAPP_ALIAS?e.INAPP_ALIAS:e.APP_ID)},t}(no.Component),Ol=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(El))),Tl=n("./node_modules/react-dom/index.js"),jl=n.n(Tl),Sl=n("./js/_components/Menu/store/queuelist.js"),wl=n("./js/_modules/redux/stores/user.js"),Al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pl=50,Cl=ao.a.createElement("span",{className:"icon icon-trash"}),Nl=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),kl=ao.a.createElement("button",{className:"action-item-btn",id:"naboo_queuelist_add",type:"button"},ao.a.createElement("span",{className:"icon icon-add"})),Rl=function(e){function t(n){Xt(this,t);var a=$t(this,e.call(this,n));return a.panel_name="queuelist",a.scrollbar={ref:"nano",shouldUpdate:function(e){return a.props.list.length!==e.list.length}},a._displayMoreEnabled=!0,a.state={nbDisplay:Pl},a._onSelect=a._onSelect.bind(a),a._checkTrackList=a._checkTrackList.bind(a),a._onAdd=a._onAdd.bind(a),a._onRemove=a._onRemove.bind(a),a._onQueueListChange=a._onQueueListChange.bind(a),a._onUpNextToggle=a._onUpNextToggle.bind(a),a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._activateScroll=a._activateScroll.bind(a),a}return Jt(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.list.select,this._onSelect,"panel_queue"),go.a.subscribe(go.a.user.addFavorite,this._onFavoriteToggle,"panel_queue"),go.a.subscribe(go.a.user.deleteFavorite,this._onFavoriteToggle,"panel_queue"),go.a.subscribe(go.a.player.tracklist_changed,this._onQueueListChange,"panel_queue"),this.scrollbar_onEnd(this._activateScroll),this.subscribeOnOpen(function(){e._checkTrackList();var t=document.getElementById("panel-queuelist");Object(Ri.l)(t)}),fo()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentDidUpdate=function(e){this.props.selected===this.panel_name&&e.selected!==this.panel_name&&fo()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("panel_queue")},t.prototype.render=function(){var e=this.props,t=e.isRadio,n=e.isAuth,a=e.isFlow,r=e.isMyFlow,o=e.context,i=e.mediaType;if(!e.list.length)return null;var s=n&&!a&&!r&&(!t||"up_next_artist"===o.TYPE)&&"artist_smartradio"!==o.TYPE&&i!==so.a.MEDIA_TYPE_LIVE_STREAM&&i!==so.a.MEDIA_TYPE_TALK,l=Po()({"panel-qlist":!0,"has-up-next":s}),c=Po()({"panel-header":!0,"is-radio":i!==so.a.MEDIA_TYPE_LIVE_STREAM&&t&&"up_next_artist"!==o.TYPE});return this.renderPanel(ao.a.createElement("div",{className:l},ao.a.createElement("div",{className:c,id:"panel-queuelist","aria-label":Object(Co.a)("File d'attente"),tabIndex:"0"},this._renderActionBar(),this._renderTitle(),s?this._renderUpNextToggle():null),this.renderScrollbar({"panel-body":!0},this._renderContent())))},t.prototype._renderContent=function(){var e=this.props,t=e.list,n=e.recommendations,a=e.context,r=e.mediaType,o=e.isRadio,i=e.isFlow,s=e.isMyFlow,l=e.isAuth,c=e.index,u=r!==so.a.MEDIA_TYPE_TALK,p=l&&lo.a.get("USER.HAS_UPNEXT")&&!i&&!s&&"up_next_artist"===a.TYPE&&n.length,d=t.slice(0,this.state.nbDisplay),f={isRadio:o,shareContext:i?"flow":"",playIndex:c,playData:o?[]:d,data:d,context:"queue_list",displayPlay:o&&"up_next_artist"!==a.TYPE?"off":"on"};return ao.a.createElement("div",{ref:"list"},ao.a.createElement(Bs.a,Al({},f,{displayAdd:u,selectable:!0})),p?this._renderRecommendations():null)},t.prototype._renderRecommendations=function(){var e=this.props,t=e.list,n={data:e.recommendations,isRadio:!0,shareContext:"up_next_artist",playIndex:e.index-t.length,playData:[],context:"up_next_artist",displayPlay:"off"};return ao.a.createElement("div",null,ao.a.createElement("h2",{className:"panel-heading-sub heading-4"},Object(Co.a)("Recommandé")),ao.a.createElement(Bs.a,Al({},n,{displayAdd:!1,selectable:!1})))},t.prototype._renderTitle=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.tracklistDuration,r=e.context,o=e.mediaType,i=e.isRadio,s=e.isFlow,l=n.length,c=Object(Co.c)("%s titre","%s titres",{count:l,sprintf:[Object(Ri.f)(l)]}),u=Object(Co.a)("File d'attente");return o!==so.a.MEDIA_TYPE_LIVE_STREAM&&(i&&"up_next_artist"!==r.TYPE?i&&(c="",u=s?Object(Co.a)("Derniers titres écoutés sur Flow"):Object(Co.a)("Derniers titres écoutés dans le mix")):0===t?c+=" "+String.fromCharCode(183)+" "+Object(Ri.n)(a,!0):c=Object(Co.c)("%s titre sélectionné","%s titres sélectionnés",{count:t,sprintf:[Object(Ri.f)(t)]})),ao.a.createElement("div",{className:"panel-headings"},ao.a.createElement("h2",{className:"heading-2 ellipsis"},u),ao.a.createElement("h3",{className:"heading-3-sub ellipsis"},c))},t.prototype._renderActionBar=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.mediaType;return 0!==t&&ao.a.createElement("div",{className:"panel-actions"},a!==so.a.MEDIA_TYPE_TALK?ao.a.createElement("a",{className:"btn btn-default btn-mini",role:"button",onClick:this._onAdd},this._renderAdd()):"",n.length>1&&!di.a.isActive()?ao.a.createElement("button",{className:"btn btn-default btn-mini",type:"button",onClick:this._onRemove,"data-type":"edit_delete"},Cl):"")},t.prototype._renderUpNextToggle=function(){var e=this.props.hasUpNext,t=Po()({checkbox:!0,checked:e}),n=e?Object(Co.a)("Désactiver les recommandations automatiques"):Object(Co.a)("Activer les recommandations automatiques");return ao.a.createElement("button",{type:"button","aria-label":n,onClick:this._onUpNextToggle},ao.a.createElement("span",{className:t},Nl,ao.a.createElement("span",{className:"checkbox-label heading-3-sub","aria-hidden":"true"},Object(Co.a)("Recommandations automatiques"))))},t.prototype._renderAdd=function(){var e=kl,t=this.props,n=t.nbSelected,a=t.selectedItemIds,r=t.selectedItemIndexes,o=t.selectedItemData,i=t.hasSelectedFavorite,s=t.isRadio,l={type:"track",id:a,context:this.panel_name,data:{SONG:1===n?o[0]:{},INDEX:r},position:"bottom",anchor:e,isRadio:s,isFavorite:i};return ao.a.createElement(wi.a,l)},t.prototype._onSelect=function(e,t){var n=this.props,a=n.onItemSelect,r=n.mediaType,o=n.nbSelected,i=n.onFavoriteToggle;if(a(t),"song"===r&&0===o){var s=so.a.getMediaId(t.data),l=t.data[s];i({hasSelectedFavorite:Eo.a.isFavorite("song",l)})}},t.prototype._onAdd=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onRemove=function(e){var t=this.props.selectedItemIndexes;if(this.tracking("panel_click",e.currentTarget),t.length)for(var n=0,a=t.length;n<a;n++)so.a.removeTracks(t[n])},t.prototype._onQueueListChange=function(){go.a.trigger(go.a.list.deselectAll)},t.prototype._onUpNextToggle=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.toggleUpNext,a=t.updateTracklist,r=t.hasUpNext,o=t.context,i=t.list,s=t.recommendations,l=t.index;if(r=!r,n({hasUpNext:r}),!r&&"up_next_artist"===o.TYPE){var c=i.length+s.length,u=l+1;c-u>0&&(so.a.removeTracks(u,c-u),a())}},t.prototype._onFavoriteToggle=function(e,t){var n=this.props.selectedItemIds[0];(!t||"song"===t.type&&String(t.id)===n)&&this.props.onFavoriteToggle({hasSelectedFavorite:Eo.a.isFavorite("song",n)})},t.prototype._activateScroll=function(){this.state.nbDisplay>this.props.list.length||(this._displayMoreEnabled=!0,this._displayMore())},t.prototype._displayMore=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,n=this.state.nbDisplay;this.setState({nbDisplay:n+t},function(){!1===e._displayMoreEnabled||n>e.props.list.length||(e._displayMoreEnabled=!0,e._checkTrackList())})},t.prototype._checkTrackList=function(){var e=this.props.index;return e>this.state.nbDisplay?(this._displayMoreEnabled=!0,this._displayMore(Math.ceil(e/Pl)*Pl-Pl),!1):(this._displayMoreEnabled=!1,!0)},t.prototype._getScrollPosition=function(){var e=this.refs.nano_content,t=jl.a.findDOMNode(this.refs.list);if(t.offsetHeight<e.offsetHeight)return 0;var n=this.props,a=n.list,r=n.index,o=Math.min(this.state.nbDisplay,a.length);return Math.ceil(t.offsetHeight/o)*r},t}(no.Component),Dl=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(Rl))),Il=Object(ro.b)(function(e){return{list:e.player.music.list,recommendations:e.player.music.recommendations,index:e.player.music.index,tracklistDuration:e.player.music.tracklistDuration,context:e.player.music.context,mediaType:e.player.music.mediaType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,isMyFlow:e.player.config.isMyFlow,selectedItems:e.queuelist.selectedItems,hasSelectedFavorite:e.queuelist.hasSelectedFavorite,isAuth:e.user.isAuth,hasUpNext:e.user.hasUpNext,nbSelected:Object(Sl.b)(e),selectedItemIndexes:Object(Sl.e)(e),selectedItemData:Object(Sl.c)(e),selectedItemIds:Object(Sl.d)(e)}},{onItemSelect:Sl.f,onFavoriteToggle:Sl.g,updateTracklist:bi.s,toggleUpNext:wl.c},null,{withRef:!0})(Dl),xl=n("./js/_modules/BrowserDetect.js"),Ll=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),Ml=ao.a.createElement("span",{className:"rounded-icon rounded-icon-user"},ao.a.createElement(Mo.a,{name:"user",size:"16"})),Ul=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),Fl=ao.a.createElement("span",{className:"rounded-icon rounded-icon-family"},ao.a.createElement(Mo.a,{name:"family",size:"16"})),Bl=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),Hl=ao.a.createElement("span",{className:"rounded-icon rounded-icon-help"},ao.a.createElement(Mo.a,{name:"help",size:"16"})),Gl=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),zl=ao.a.createElement("span",{className:"rounded-icon rounded-icon-code"},ao.a.createElement(Mo.a,{name:"barcode",size:"16"})),Yl=ao.a.createElement("input",{className:"checkbox-input",type:"checkbox"}),ql=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Vl=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),Wl=ao.a.createElement("span",{className:"rounded-icon rounded-icon-labs"},ao.a.createElement(Mo.a,{name:"labs",size:"16"})),Kl=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Ql=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Xl=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),$l=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Jl=ao.a.createElement("span",{className:"heading-4","aria-hidden":"true"},"Electron UI"),Zl=ao.a.createElement("span",{className:"slider-label"},"10"),ec=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),tc=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),nc=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),ac=ao.a.createElement(Mo.a,{className:"animate-wobble-target",name:"chevron-right"}),rc=function(e){function t(n){en(this,t);var a=tn(this,e.call(this,n));a.panel_name="settings",a.scrollbar={ref:"nano",shouldUpdate:function(){}},a._onHqChange=a._onHqChange.bind(a),a._onFadeChange=a._onFadeChange.bind(a),a._onModalOpenClick=a._onModalOpenClick.bind(a),a._onSetHq=a._onSetHq.bind(a),a._onSetHTML5Player=a._onSetHTML5Player.bind(a),a._setFade=a._setFade.bind(a),a._toggleNormalize=a._toggleNormalize.bind(a),a._toggleUi=a._toggleUi.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._setFadeOnKeyDown=a._setFadeOnKeyDown.bind(a),a.shouldComponentUpdate=ii.a.shouldComponentUpdate.bind(ii.a);var r=lo.a.get("USER.SETTING.site.player_html5");return a.state={hq:so.a.isHq(),html5Player:void 0!==r?r:so.a.html5.supported,fade:so.a.fade,normalize:so.a.normalize,electronUI:jo.a.current===jo.a.electron},a}return nn(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.player.hq,this._onHqChange,"player"),go.a.subscribe(go.a.user.settingChanged,this._onSettingChange,"player"),go.a.subscribe(go.a.player.fade,this._onFadeChange,"player"),fo()(this.refs.fade).draggable({axis:"x",containment:"parent",drag:function(t,n){e.setState({fade:e._getCursorFade(t,n)})},stop:function(t,n){so.a.control.changeFadeValue(e._getCursorFade(t,n))}}),this.subscribeOnOpen(function(){var e=document.getElementById("panel-settings");Object(Ri.l)(e)})},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.player.hq,this._onHqChange),go.a.unsubscribe(go.a.user.settingChanged,this._onSettingChange),go.a.unsubscribe(go.a.player.fade,this._onFadeChange)},t.prototype.render=function(){return this.renderPanel(ao.a.createElement("div",{className:"panel-settings",id:"panel-settings",tabIndex:"0","aria-label":Object(Co.a)("Paramètres")},this.renderScrollbar({"panel-body":!0},ao.a.createElement("div",null,ao.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Compte")),this._renderAccountSettings(),ao.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Audio")),this._renderAudioSettings(),ao.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(Co.a)("Découvrir Deezer")),this._renderDiscoveryLinks(),ao.a.createElement("div",{className:"btn-logout"},ao.a.createElement("button",{className:"btn btn-danger btn-block","data-type":"log_out",type:"button",onClick:function(){return ti.a.logout()}},ao.a.createElement("span",{className:"label"},Object(Co.a)("Déconnexion"))))))))},t.prototype._renderAccountSettings=function(){var e=ti.a.getMultiAccountOptions(),t=Po()({"checkbox checkbox-settings":!0,checked:e.IS_KID}),n="http://support.deezer.com/hc/"+lo.a.get("SETTING_LANG");return ao.a.createElement("ul",{className:"nano-card-list"},ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account",onClick:this._onLinkClick},Ll,Ml,Object(Co.a)("Paramètres du compte"))),e.ENABLED||e.CHILD_COUNT?ao.a.createElement("li",null,ao.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"family_switch","data-modal":"/lightbox/multi_account/switch",href:"/lightbox/multi_account/switch",onClick:this._onModalOpenClick},Ul,Fl,e.CHILD_COUNT?Object(Co.a)("Changer de profil"):Object(Co.a)("Nouveau profil"))):null,ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"support",to:n,target:"_blank",onClick:this._onLinkClick},Bl,Hl,Object(Co.a)("Assistance"))),e.PARENT?null:ao.a.createElement("li",null,ao.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"gift_code",href:"/gift",target:"_blank",onClick:this._onLinkClick},Gl,zl,Object(Co.a)("Activer un code"))),e.PARENT?ao.a.createElement("li",null,ao.a.createElement("button",{className:"nano-card-link","data-type":"is_kid",type:"button",onClick:function(e){return ti.a.setKidStatus(e)}},ao.a.createElement("span",{className:t},Yl,ql),ao.a.createElement("span",{className:"heading-4"},Object(Co.a)("Activer Deezer Kids")))):null,uo.a.isAllowed("web_labs")?ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account/labs",onClick:this._onLinkClick},Vl,Wl,"Deezer Labs")):null)},t.prototype._renderAudioSettings=function(){var e=this.state,t=e.html5Player,n=e.hq,a=e.fade,r=e.normalize,o=e.electronUI,i=Po()({"checkbox checkbox-settings":!0,checked:t}),s=Po()({"checkbox checkbox-settings":!0,checked:n}),l=Po()({"checkbox checkbox-settings":!0,checked:r}),c=Po()({"checkbox checkbox-settings":!0,checked:o}),u=Math.round(10*a),p=100*a+"%";return ao.a.createElement("ul",{className:"nano-card-list"},so.a.html5.supported&&"Firefox"!==xl.a.browser?ao.a.createElement("li",null,ao.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._onSetHTML5Player},ao.a.createElement("span",{className:i},Kl),ao.a.createElement("span",{className:"heading-4"},Object(Co.a)("Player HTML5")))):null,ao.a.createElement("li",{"data-type":"audio_hq"},ao.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":n?Object(Co.a)("Désactiver le son Haute Qualité"):Object(Co.a)("Activer le son Haute Qualité"),onClick:this._onSetHq},ao.a.createElement("span",{className:s},Ql),ao.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(Co.a)("Haute Qualité")))),so.a.html5.active&&(uo.a.isAllowed("employee_feature")||uo.a.isAllowed("business"))?ao.a.createElement("li",null,ao.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":Object(Co.a)("Normaliser le volume"),onClick:this._toggleNormalize},ao.a.createElement("span",{className:l},Xl),ao.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(Co.a)("Normaliser le volume")))):null,uo.a.isAllowed("electron_ui")?ao.a.createElement("li",null,ao.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._toggleUi},ao.a.createElement("span",{className:c},$l),Jl)):null,so.a.html5.active?null:ao.a.createElement("li",{className:"nano-card-link"},ao.a.createElement("span",{className:"heading-4"},ao.a.createElement("span",{className:"slider-container pull-right"},ao.a.createElement("span",{className:"slider-label","aria-live":"assertive"},u),ao.a.createElement("span",{className:"slider-bar",ref:"fade_bar",onClick:this._setFade},ao.a.createElement("span",{className:"slider-bar-active",style:{width:p}}),ao.a.createElement("span",{className:"slider-bar-handler",ref:"fade",tabIndex:"0",role:"slider","aria-label":Object(Co.a)("Fondu sonore"),"aria-valuemin":"0","aria-valuemax":"10","aria-valuetext":Object(Co.a)("Fondu sonore - Niveau %s",{sprintf:[u]}),"aria-valuenow":u,onKeyDown:this._setFadeOnKeyDown,style:{left:p}})),Zl),Object(Co.a)("Fondu sonore"))))},t.prototype._renderDiscoveryLinks=function(){return ao.a.createElement("ul",{className:"nano-card-list"},ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"offers",to:"/offers",target:"_blank",onClick:this._onLinkClick},ec,Object(Co.a)("Offres"))),ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"company",to:"/company",target:"_blank",onClick:this._onLinkClick},tc,Object(Co.a)("À propos"))),ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"features",to:"/features",target:"_blank",onClick:this._onLinkClick},nc,Object(Co.a)("Fonctionnalités"))),ao.a.createElement("li",null,ao.a.createElement(ei.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"jobs",to:"/jobs",target:"_blank",onClick:this._onLinkClick},ac,Object(Co.a)("Jobs"))))},t.prototype._onHqChange=function(e,t){this.setState({hq:t}),this.props.onHqAudioToggle({hasHqAudio:t})},t.prototype._onSettingChange=function(e,t){t.data&&t.data.site&&(void 0!==t.data.site.player_html5||void 0!==t.data.site.version)&&hi.a.reload()},t.prototype._onFadeChange=function(e,t){this.setState({fade:t})},t.prototype._onLinkClick=function(e){this.tracking("panel_click",e.currentTarget),go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._onModalOpenClick=function(e){if(void 0===e.keyCode||13===e.keyCode){e.preventDefault(),e.stopPropagation();var t=ai.a.dataset(e.currentTarget,"modal");"string"==typeof t&&(this.tracking("panel_click",e.currentTarget),go.a.trigger(go.a.menu.closeAllPanels),_o.a.open(t))}},t.prototype._onSetHq=function(e){e.preventDefault(),lo.a.get("USER.OPTIONS.web_hq")?so.a.control.setHq(!this.state.hq):(Object(hi.b)("/offers"),go.a.trigger(go.a.menu.closeAllPanels))},t.prototype._onSetHTML5Player=function(e){e.preventDefault(),ni.a.set({site:{player_html5:!this.state.html5Player}}),this.setState({html5Player:!this.state.html5Player})},t.prototype._getCursorFade=function(e,t){var n=t.position.left/(e.target.parentNode.offsetWidth-5);return n=Math.min(n,1),n=Math.max(n,0)},t.prototype._setFade=function(e){var t=(e.pageX-fo()(e.target).offset().left)/this.refs.fade_bar.offsetWidth;so.a.control.changeFadeValue(Math.min(Math.max(t,0),1))},t.prototype._toggleNormalize=function(){var e=!this.state.normalize;ni.a.set({site:{player_normalize:e}}),this.setState({normalize:e}),so.a.control.setNormalize(e)},t.prototype._toggleUi=function(){var e=!this.state.electronUI;ni.a.set({site:{version:e?jo.a.electron:jo.a.web}}),this.setState({electronUI:e})},t.prototype._setFadeOnKeyDown=function(e){if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var t=this.state.fade;37!==e.keyCode&&40!==e.keyCode||(t-=.01),34===e.keyCode&&(t-=.1),36===e.keyCode&&(t=0),39!==e.keyCode&&38!==e.keyCode||(t+=.01),33===e.keyCode&&(t+=.1),35===e.keyCode&&(t=10),so.a.control.changeFadeValue(Math.min(Math.max(t,0),1))}},t}(no.Component),oc=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(rc))),ic=Object(ro.b)(null,{onHqAudioToggle:wl.b},null,{withRef:!0})(oc),sc=(n("./node_modules/visibly.js/visibly.js"),n("./js/core/Blurred.js")),lc=n.n(sc),cc=n("./js/_modules/lyrics.js"),uc=ao.a.createElement("g",{fill:"none",stroke:"rgba(255,255,255,0.3)"},ao.a.createElement("circle",{cx:"50",cy:"50",r:"45"})),pc=ao.a.createElement("circle",{cx:"50",cy:"50",r:"45"}),dc=ao.a.createElement("span",{className:"icon icon-32 icon-lyrics"}),fc=function(e){function t(n){rn(this,t);var a=on(this,e.call(this,n));return a.state=a._getState(),a}return sn(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this._animTimeoutRef=setTimeout(function(){t.setState(t._getState(e))},0)},t.prototype.shouldComponentUpdate=function(e,t){return-1===e.max||t.strokeDashoffset>=0&&0!==this.state.strokeDashoffset},t.prototype.componentWillUnmount=function(){clearTimeout(this._animTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.max,a=e.now,r=e.strokeDasharray,o=this.state,i=o.strokeDashoffset,s=o.transition;if(!t)return null;var l={strokeDashoffset:i},c=Po()({"starter-svg":!0,"svg-animate":s}),u=void 0,p=void 0,d=void 0,f=void 0,h=void 0;return n>0&&(u=0,d=a<(p=n)?a:p,f=Math.floor(p-d),h=Object(Co.c)("%s seconde","%s secondes",{sprintf:[f],count:f})),ao.a.createElement("div",{className:"lyrics-starter"},ao.a.createElement("div",{className:"starter-anim"},ao.a.createElement("svg",{className:c,height:"100",width:"100",x:"0px",y:"0px"},uc,ao.a.createElement("g",{className:"spinner",fill:"none",stroke:"#FFFFFF",role:"timer","aria-describedby":"starter-message",strokeDasharray:r,style:l,"aria-valuemin":u,"aria-valuemax":p,"aria-valuenow":d,"aria-valuetext":h},pc)),dc))},t.prototype._getState=function(e){var t=(e=e||this.props).max>=0?e.strokeDasharray:0,n=this.state?this.state.strokeDashoffset:null,a=void 0,r=void 0;return e.max>0&&e.now<=e.max&&(t=e.now>0?e.strokeDasharray/(e.max/e.now):0),r=e.strokeDasharray-t,a=!(0===r||r===e.strokeDasharray||null!==n&&r>=n),{strokeDashoffset:e.strokeDasharray-t,transition:a}},t}(no.Component);fc.defaultProps={now:0,max:-1,strokeDasharray:300,show:!1};var hc=fc,mc=n("./js/_components/Image/index.js"),yc=function(e){function t(n){cn(this,t);var a=un(this,e.call(this,n));return a.shouldComponentUpdate=ii.a.shouldComponentUpdate.bind(ii.a),a.state=a._getState(n.track,n.show),a}return pn(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState(this._getState(e.track,e.show),function(){t._fadeTimeoutRef=setTimeout(function(){t.setState({fadeIn:e.show})},0)})},t.prototype.componentWillUnmount=function(){clearTimeout(this._fadeTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.placeholders,a=e.explanations,r=this.state,o=r.placeholderIndex,i=r.explanationIndex,s=r.fadeIn;if(!t)return null;var l=n[o],c=a[i],u=Object(Co.a)("(Mal) entendu dans %1$s <em>de %2$s</em>",{sprintf:[l.title,l.artist]}),p=Po()({"lyrics-placeholder":!0,"lyrics-placeholder-active":s});return ao.a.createElement("div",{className:p,role:"alert"},ao.a.createElement("div",{className:"lyrics-placeholder-image"},ao.a.createElement(mc.a,{src:"naboo/layouts/panels/lyrics/placeholder_"+(o+1)+".png",width:"64",height:"64"})),ao.a.createElement("div",{className:"lyrics-placeholder-quote"},l.quote),ao.a.createElement("div",{className:"lyrics-placeholder-track",dangerouslySetInnerHTML:{__html:u}}),ao.a.createElement("div",{className:"lyrics-placeholder-message"},c))},t.prototype._getState=function(e,t){if(!t)return{};var n=this.props,a=n.placeholders,r=n.explanations,o=a.length,i=this.state?this.state.placeholderIndex:null,s=this.state?this.state.explanationIndex:null,l="fr"===lo.a.get("SETTING_LANG")?o:o-1;return{placeholderIndex:this._getRandom(0,l,i),explanationIndex:this._getRandom(0,r.length,s),fadeIn:!1}},t.prototype._getRandom=function(e,t,n){if(t<=1)return 0;var a=Math.floor(Math.random()*(t-e))+e;return void 0!==n&&a===n?a===t-1?--a:++a:a},t}(no.Component);yc.defaultProps={placeholders:[{title:"You Oughta Know",artist:"Alanis Morissette",quote:"It's not fair, to deny me of the cross-eyed bear that you gave to me"},{title:"Rock the Casbah",artist:"The Clash",quote:"Shareef don't like it. Rock the cat box, rock the cat box"},{title:"Sweet Dreams",artist:"Eurythmics",quote:"Sweet dreams are made of cheese"},{title:"Bad Moon Rising",artist:"Creedence Clearwater Revival",quote:"Don't go around tonight, it's bound to take your life, there's a bathroom on the right"},{title:"Smells Like Teen Spirit",artist:"Nirvana",quote:"Here we are now, in containers"},{title:"Message in a Bottle",artist:"The Police",quote:"Mon opinel a dû mal couper !"}],explanations:[Object(Co.a)("OK... Nous n'avons pas les paroles de cette chanson."),Object(Co.a)("Pas tout à fait... On donne tout pour trouver les paroles de cette chanson."),Object(Co.a)("Presque... On se dépêche de vous trouver les paroles de cette chanson.")]};var bc=yc,_c=function(e){function t(n){fn(this,t);var a=hn(this,e.call(this,n));return a.shouldComponentUpdate=ii.a.shouldComponentUpdate.bind(ii.a),a._onClick=a._onClick.bind(a),a}return mn(t,e),t.prototype.render=function(){var e=this.props,t=e.milliseconds,n=e.line,a=e.active,r=e.oneLine,o=void 0!==t;n=n?n.trim():"";var i=Po()({"lyrics-line":!0,"lyrics-line-empty":!n,"lyrics-line-active":o&&a,ellipsis:r});return o?ao.a.createElement("a",{className:i,onClick:this._onClick},n):ao.a.createElement("p",{className:i},n)},t.prototype._onClick=function(){var e=this.props,t=e.milliseconds,n=e.index,a=e.seek;go.a.trigger(go.a.lyrics.seek,{milliseconds:t,index:n,seek:a})},t}(no.Component);_c.defaultProps={seek:!0,oneLine:!1};var gc=_c,vc=ao.a.createElement("span",{className:"icon icon-cancel"}),Ec=function(e){function t(){return bn(this,t),_n(this,e.apply(this,arguments))}return gn(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.track,a=t.lyric;return e.track.SNG_ID!==n.SNG_ID||void 0!==e.lyric&&void 0===a||void 0===e.lyric&&void 0!==a||void 0!==e.lyric&&void 0!==a&&(e.lyric.milliseconds!==a.milliseconds||e.lyric.line!==a.line)},t.prototype.render=function(){var e=this.props,t=e.lyric,n=e.track,a=void 0!==t,r="https://"+lo.a.get("host_img_url_ssl")+"/cover/"+n.ALB_PICTURE+"/65x65-000000-80-0-0.jpg",o=Po()({"lyrics-track-infos":!0,hide:a}),i=Po()({"lyrics-active":!0,hide:!a});return ao.a.createElement("div",{className:"panel-header"},ao.a.createElement("div",{className:"panel-header-container clearfix"},ao.a.createElement(ei.a,{isContextual:!0,href:"/album/"+n.ALB_ID,className:"evt-click"},ao.a.createElement("figure",{className:"lyrics-thumbnail"},ao.a.createElement("img",{width:"65",height:"65",src:r,alt:n.ALB_TITLE,title:n.ALB_TITLE}))),ao.a.createElement("div",{className:"lyrics-infos"},ao.a.createElement("p",{className:"sticker sticker-small sticker-flow"},Object(Co.a)("PAROLES")),ao.a.createElement("div",{className:o,"aria-hidden":a},ao.a.createElement("h2",{className:"heading-4 heading-inverse",itemProp:"name"},n.SNG_TITLE),ao.a.createElement("h3",{className:"heading-4-sub heading-inverse"},Object(Co.a)("par")+" "," ",ao.a.createElement(ei.a,{to:"/artist/"+n.ART_ID,className:"lyrics-artist-link evt-click"},n.ART_NAME))),ao.a.createElement("p",{className:i,"aria-hidden":!a},a?ao.a.createElement(gc,{line:t.line,milliseconds:t.milliseconds,active:!0,seek:!1,oneLine:!0}):""))),ao.a.createElement("button",{className:"btn btn-link panel-close",type:"button","aria-label":Object(Co.a)("Masquer les paroles"),onClick:this._closePanels},vc))},t.prototype._closePanels=function(){go.a.trigger(go.a.menu.closeAllPanels)},t}(no.Component),Oc=function(e){function t(){return En(this,t),On(this,e.apply(this,arguments))}return Tn(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.activeIndex,a=t.synchro,r=t.lyrics;return e.activeIndex!==n||e.synchro!==a||e.lyrics.length!==r.length},t.prototype.getLyric=function(e){return this.refs["lyric_"+e]},t.prototype.render=function(){var e=this.props,t=e.lyrics,n=e.activeIndex,a=e.synchro,r=void 0,o=void 0,i=void 0,s=void 0;return"snippet"===lo.a.get("USER.ABTEST.lyrics.behaviour")&&t.splice(0,t.length-5),ao.a.createElement("ol",{className:"lyrics-content",itemProp:"text"},t.map(function(e,t){return r=t===n,o="lyric_"+t,i=e,a&&(i=e.line,s=e.milliseconds),ao.a.createElement("li",{key:o},ao.a.createElement(gc,{ref:o,index:t,line:i,milliseconds:s,active:r}))}))},t}(no.Component);Oc.defaultProps={lyrics:[]};var Tc=Oc,jc=ao.a.createElement("div",{className:"panel-lyrics-overlay"}),Sc=ao.a.createElement("div",{className:"lyrics-blurred"}),wc=ao.a.createElement("div",{className:"ads ads-bottom"},ao.a.createElement("div",{id:"lyrics_ads_banner_bottom"})),Ac=function(e){function t(n){Sn(this,t);var a=wn(this,e.call(this,n));a.panel_name="lyrics",a.scrollbar={ref:"nano",disableScrollTopOnUpdate:!0,shouldUpdate:function(e,t){return a.state.lyrics.length!==t.lyrics.length}},a._onTrackChange=a._onTrackChange.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onPlayerSeek=a._onPlayerSeek.bind(a),a._onLyricsLoad=a._onLyricsLoad.bind(a),a._onLyricsSeek=a._onLyricsSeek.bind(a),a._onPanelScroll=a._onPanelScroll.bind(a),a._scrollToTop=a._scrollToTop.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a);var r=a._getStateFromStore();return r.position=so.a.getPosition(),r.isActivePanel=!0,r.firstOpen=!0,a.state=r,a}return An(t,e),t.prototype.componentDidMount=function(){var e=this;go.a.subscribe(go.a.player.displayCurrentSong,this._onTrackChange,"lyrics_panel"),go.a.subscribe(go.a.player.changePlayerType,this._onPlayerTypeChange,"lyrics_panel"),go.a.subscribe(go.a.player.position,this._onPositionChange,"lyrics_panel"),go.a.subscribe(go.a.player.seek,this._onPlayerSeek,"lyrics_panel"),go.a.subscribe(go.a.lyrics.load,this._onLyricsLoad,"lyrics_panel"),go.a.subscribe(go.a.lyrics.seek,this._onLyricsSeek,"lyrics_panel"),this.subscribeOnOpen(function(){var t=e.state,n=t.track,a=t.activeLyricIndex;if(n.SNG_ID===so.a.getCurrentSong("SNG_ID")&&e._scrollToActiveLyric(a,!0),!e.state.autoScroll){var r=document.getElementById("panel-lyrics");Object(Ri.l)(r)}}),fo()(this.refs.nano_content).on("scroll",this._onPanelScroll),this._setCoverBackground(this.state.track.ALB_PICTURE),so.a.control.loadLyrics()},t.prototype.componentWillReceiveProps=function(e){this.setState({isActivePanel:"lyrics"===e.selected&&!0===e.displayed})},t.prototype.shouldComponentUpdate=function(){return!0===this.state.isActivePanel},t.prototype.componentWillUpdate=function(e,t){t.isActivePanel&&(this._scrollTopWhenActive?(this._scrollTopWhenActive=!1,this._scrollTopTimeoutRef=setTimeout(this._scrollToTop,0)):t.autoScroll&&t.hasLyrics&&this._scrollToActiveLyric(t.activeLyricIndex))},t.prototype.componentWillUnmount=function(){clearTimeout(this._scrollTopTimeoutRef),clearTimeout(this._scrollLyricTimeoutRef),clearTimeout(this._scrollTopAnimateRef),clearTimeout(this._coverTimeoutRef),clearTimeout(this._animTimeoutRef),go.a.unsubscribeAll("lyrics_panel"),fo()(this.refs.nano_content).off("scroll",this._onPanelScroll)},t.prototype.getTrackingParams=function(){return{action:{type:"display"},container:"panel",sng:this.state.track.SNG_ID,type:so.a.hasSyncLyrics()?"synchro":"full_text"}},t.prototype.render=function(){var e=this.state,t=e.hasLyrics,n=e.synchro,a=e.ready,r=e.autoScroll,o=e.activeLyricIndex,i=e.lyrics,s=e.track,l=e.timeToFirstLyric,c=e.position,u=Po()("panel-lyrics",{"has-lyrics":t,"has-synchro":n}),p=Po()({"lyrics-container":!0,"lyrics-container-active":a}),d=void 0;n&&!r&&-1!==o&&(d=i[o]);var f=a&&t,h=f&&n?"marquee":null,m=void 0;f&&n&&(m=r?"assertive":"polite");var y=lo.a.get("USER.ABTEST.lyrics.behaviour");return this.renderPanel(ao.a.createElement("div",{className:u,ref:"panel_lyrics",itemScope:!0,itemType:"http://data-vocabulary.org/MusicRecording",id:"panel-lyrics","aria-label":Object(Co.a)("PAROLES"),tabIndex:"0"},jc,ao.a.createElement(Ec,{track:s,lyric:d}),this.renderScrollbar({"panel-body lyrics-panel-body":!0},ao.a.createElement("article",{className:p,role:h,"aria-live":m},"static"===y&&t?this._renderSubscription():"",ao.a.createElement(bc,{show:a&&!t,track:s}),ao.a.createElement(hc,{show:f,max:l,now:c}),"noLyrics"===y&&t?Sc:ao.a.createElement(Tc,{ref:"lyriclist",synchro:n,lyrics:i,activeIndex:o}),this._renderFooter())),this.props.hasAds?wc:"",ao.a.createElement("div",{className:"panel-footer"},t&&"full"===lo.a.get("USER.ABTEST.lyrics.behaviour")?ao.a.createElement("a",{className:"evt-click btn btn-link link-animated",onClick:this._closePanels,href:"/track/"+s.SNG_ID},ao.a.createElement("span",{className:"label"},Object(Co.a)("TOUTES LES PAROLES"))):"")))},t.prototype._renderFooter=function(){var e=this.state,t=e.hasLyrics,n=e.metadata;if(!t)return null;var a=lo.a.get("USER.ABTEST.lyrics.behaviour");return"noLyrics"===a||"snippet"===a?this._renderSubscription():ao.a.createElement("div",{className:"lyrics-legal",role:"complementary"},ao.a.createElement("p",null,Object(Co.a)("Licence et autorisation données par LyricFind")),ao.a.createElement("p",null,"© ",n.copyrights),ao.a.createElement("p",null,n.writers))},t.prototype._renderSubscription=function(){var e=lo.a.get("USER.ABTEST.lyrics.behaviour"),t=Po()("lyrics-subscription",{"is-top":"static"===e,"is-bottom":"noLyrics"===e||"snippet"===e});return ao.a.createElement("div",{className:t},ao.a.createElement("h2",{className:"heading-2 heading-inverse"},Object(cc.a)()),ao.a.createElement("button",{className:"btn btn-primary btn-xlarge",type:"button",onClick:this._onSubscribe},ao.a.createElement("span",{className:"label"},Object(Co.a)("S'ABONNER"))))},t.prototype._onTrackChange=function(e,t){var n=this,a=this.state.track;this._scrollTopWhenActive=!0,a.ALB_ID!==t.ALB_ID&&(this._coverTimeoutRef=setTimeout(function(){n._setCoverBackground(t.ALB_PICTURE)},0)),this.setState(this._getStateFromStore(),so.a.control.loadLyrics)},t.prototype._onSubscribe=function(){Object(hi.b)("https://"+lo.a.get("host_website_ssl")+"/payment/go.php?origin=lyrics_"+lo.a.get("USER.ABTEST.lyrics.option").toLocaleLowerCase())},t.prototype._onLyricsLoad=function(){var e=this,t=so.a.hasSyncLyrics(),n=so.a.getLyrics(),a={lyrics:n,metadata:so.a.getLyricsMetadata(),hasLyrics:n&&0!==n.length,ready:!0,synchro:!1,autoScroll:!1,autoSeek:!1},r=void 0;if(this.tracking("lyrics"),t){r=[];for(var o=0,i=n.length;o<i;o++){var s=n[o];s&&s.line&&s.milliseconds&&(s.originalIndex=o,r.push(s))}a=r.length>0?Object.assign({},a,{lyricIndex:r,synchro:!0,autoScroll:!0,autoSeek:!0,timeToFirstLyric:parseInt(r[0].milliseconds,10)/1e3}):Object.assign({},a,{hasLyrics:!1,lyrics:[]})}this._animTimeoutRef=setTimeout(function(){e.setState(a)},0)},t.prototype._onPositionChange=function(e,t){var n=this.state,a=n.isActivePanel,r=n.hasLyrics,o=n.synchro,i=n.canSeek,s=n.autoSeek,l=n.activeLyricIndex,c=this.props,u=c.isAuthUser,p=c.unloggedClipLength;if(!window.visibly.hidden()&&a&&r&&o){!u&&i&&(t+=p);var d=this._findLyric(t);s?(-1===d&&-1!==l&&(this._scrollTopWhenActive=!0),this.setState({position:t,activeLyricIndex:d})):this.setState({position:t,autoSeek:d===l})}},t.prototype._onLyricsSeek=function(e,t){var n=this.state,a=n.activeLyricIndex,r=n.canSeek,o=n.track,i=this.props,s=i.isAuthUser,l=i.unloggedClipLength,c=void 0,u=void 0,p=void 0;if(!t.seek||r){if(void 0!==t.index){if(t.index===a&&so.a.playing)return;a=t.index}if(t.seek){if(p=parseInt(t.milliseconds,10)/1e3,u=parseInt(o.DURATION,10),s||(u=l,p-=l),(c=p/u)>1||!s&&p<0)return;so.a.control.seek(c)}else this._scrollToActiveLyric(a),so.a.isPaused()&&so.a.control.togglePause();this.setState({activeLyricIndex:a,autoSeek:!t.seek,autoScroll:!0})}},t.prototype._onPlayerSeek=function(e,t){var n=this.state,a=n.synchro,r=n.autoScroll;a&&!r&&this.setState({activeLyricIndex:this._findLyric(t),autoScroll:!0})},t.prototype._onPanelScroll=function(){this.state.synchro&&!this._blockUserScroll&&this.setState({autoScroll:!1})},t.prototype._onPlayerTypeChange=function(){this.state.isActivePanel&&"ads"===so.a.getPlayerType()&&go.a.trigger(go.a.menu.togglePanel,{panel:"lyrics"})},t.prototype._getStateFromStore=function(){var e=so.a.hasLyrics();return{track:so.a.getCurrentSong(),hasLyrics:e,lyrics:[],metadata:{},position:0,synchro:!1,autoScroll:!1,autoSeek:!1,timeToFirstLyric:-1,activeLyricIndex:-1,ready:!e,canSeek:so.a.control.canSeek(),firstOpen:!1}},t.prototype._closePanels=function(){go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._scrollToActiveLyric=function(e,t){var n=this,a=this.state,r=a.autoScroll,o=a.activeLyricIndex;if(!r||t||o!==e){var i=this.refs.lyriclist.getLyric(e);if(i){this._blockUserScroll=!0;var s=this.refs.nano_content,l=fo()(s).scrollTop(),c=s.offsetHeight||0,u=jl.a.findDOMNode(i),p=fo()(u).position().top,d=this.props,f=d.autoScrollDuration,h=d.autoScrollEasing,m=d.scrollWaitTimeout,y=u.getBoundingClientRect();(t||y.bottom<=0||y.bottom>c)&&(f/=3),fo()(s).animate({scrollTop:l+p-c/2},f,h,function(){n._scrollLyricTimeoutRef=setTimeout(function(){n._blockUserScroll=0!==fo()(s).queue("fx").length},m)})}}},t.prototype._scrollToTop=function(){var e=this;this._blockUserScroll=!0,this.refs.nano_content.scrollTop=0,this._scrollTopAnimateRef=setTimeout(function(){e._blockUserScroll=!1},this.props.scrollWaitTimeout)},t.prototype._setCoverBackground=function(e){var t=this.refs.panel_lyrics,n="http://cdn-images.deezer.com/images/cover/"+e+"/500x500-000000-80-0-0.jpg";new lc.a(t).setUrl(n).setBlurStrength(3).render()},t.prototype._findLyric=function(e){var t=this.state,n=t.lyricIndex,a=t.timeToFirstLyric,r=Math.round(1e3*e),o=1e3*a,i=0,s=n.length,l=void 0,c=void 0,u=void 0;if(r<o)return-1;var p=n[s-1];if(r>parseInt(p.milliseconds,10))return n[s-1].originalIndex;for(;i!==s&&(l=Math.floor((i+s)/2),(c=parseInt(n[l].milliseconds,10))!==r);)c<r?i=l+1:s=l;return u=0===i?i:i-1,n[u].originalIndex},t}(no.Component);Ac.defaultProps={tolerance:0,autoScrollDuration:500,scrollWaitTimeout:900,unloggedClipLength:30,autoScrollEasing:"swing",isAuthUser:0!==lo.a.get("USER.USER_ID"),hasAds:lo.a.get("USER.OPTIONS.ads_display")};var Pc=Object(Qi.a)(Object(Ys.a)(Object(qs.a)(Ac))),Cc=n("./js/_modules/facebook/index.js"),Nc=n("./js/_modules/googleplus/index.js"),kc=n("./js/_modules/twitter.js"),Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dc=function(e){function t(n){Cn(this,t);var a=Nn(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._markAsRead=a._markAsRead.bind(a),a._onItemClick=a._onItemClick.bind(a),a.state={data:n.data},a}return kn(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t.data.NOTIFICATION_ID!==this.state.data.NOTIFICATION_ID||t.data.READ!==this.state.data.READ},t.prototype.getTrackingParams=function(){return{type:"notification",id:this.state.data.NOTIFICATION_ID,index:this.props.index}},t.prototype.render=function(){var e=!this.state.data.READ,t={className:Po()({"notifications-item":!0,"is-unread":e}),onClick:this._onItemClick};return e&&(t.onMouseOver=this._markAsRead),ao.a.createElement("li",t,ao.a.createElement("div",{className:"notifications-item-container"},ao.a.createElement("div",{className:"notifications-item-heading"},this._renderPicture(),this._renderMessage()),this._renderContent()))},t.prototype._renderPicture=function(){var e=this.state.data;return ao.a.createElement("div",{className:"notifications-item-picture"},ao.a.createElement(vl.a,{type:"user",height:32,width:32,rounded:!0,data:e.DATA}))},t.prototype._renderMessage=function(){var e=this.state.data,t=this._getMessage("SHARE"===e.TYPE?"SHARE_"+e.DATA.TYPE:e.TYPE);return ao.a.createElement("div",{className:"notifications-item-message"},ao.a.createElement("div",{className:"heading-4-sub"},ao.a.createElement(ei.a,{className:"link-username",to:"/profile/"+e.DATA.USER_ID},e.DATA.USER_NAME)," ",ao.a.createElement("span",null,t)))},t.prototype._renderContent=function(){var e=this.state.data;if("FRIEND_FOLLOW"===e.TYPE)return ao.a.createElement("div",{className:"notifications-item-content"},this._renderDate());var t=this._getMediaType(e);return ao.a.createElement("div",{className:"notifications-item-content"},ao.a.createElement("div",{className:"notifications-item-media"},ao.a.createElement("div",{className:"notifications-item-media-picture"},ao.a.createElement(vl.a,{type:t,height:56,width:56,play:"on",context:"menu_panel_notification_"+t,data:e.DATA})),this._renderMediaTitle(t)),this._renderComment(),this._renderDate())},t.prototype._renderMediaTitle=function(e){var t=this.state.data.DATA;switch(e){case"album":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/album/"+t.ALB_ID,title:t.ALB_TITLE},t.ALB_TITLE)),ao.a.createElement("div",{className:"heading-4-sub"},ao.a.createElement("span",null,Object(Co.a)("par"))," ",ao.a.createElement(ei.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"artist":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"episode":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/episode/"+t.EPISODE_ID,title:t.EPISODE_TITLE},t.EPISODE_TITLE)),ao.a.createElement("div",{className:"heading-4-sub"},ao.a.createElement("span",null,Object(Co.a)("par"))," ",ao.a.createElement(ei.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"playlist":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/playlist/"+t.PLAYLIST_ID,title:t.PLAYLIST_TITLE},t.PLAYLIST_TITLE)));case"radio":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/mixes/genre/"+t.RADIO_ID,title:t.RADIO_TITLE},t.RADIO_TITLE)));case"show":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"track":return ao.a.createElement("div",{className:"notifications-item-media-title"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/track/"+t.SNG_ID,title:t.SNG_TITLE},t.SNG_TITLE)),ao.a.createElement("div",{className:"heading-4-sub"},ao.a.createElement("span",null,Object(Co.a)("par"))," ",ao.a.createElement(ei.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));default:return null}},t.prototype._renderComment=function(){var e=this.state.data;return e.DATA.hasOwnProperty("COMMENT")&&""!==e.DATA.COMMENT?ao.a.createElement("div",{className:"notifications-item-comment"},e.DATA.COMMENT):null},t.prototype._renderDate=function(){var e=this.state.data;return e.hasOwnProperty("DATE")?ao.a.createElement("div",{className:"notifications-item-date"},Object(Ri.o)(lo.a.get("SERVER_TIMESTAMP")-e.DATE)):null},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._markAsRead=function(){var e=Rc({},this.state.data);e.READ||(e.READ=1,this.setState({data:e},function(){Eo.a.markNotificationAsRead(e.NOTIFICATION_ID)}))},t.prototype._getMediaType=function(e){if("SHARE"===e.TYPE)return"SONG"===e.DATA.TYPE?"track":e.DATA.TYPE.toLowerCase();switch(e.TYPE){case"ALBUM_COMMENT":case"ALBUM_FAN":return"album";case"ARTIST_COMMENT":case"ARTIST_FAN":return"artist";case"PLAYLIST_COMMENT":case"PLAYLIST_CREATION":case"PLAYLIST_FAN":return"playlist";case"RADIO_COMMENT":case"RADIO_FAN":return"radio";default:return""}},t.prototype._getMessage=function(e){var t={ALBUM_COMMENT:Object(Co.a)("a commenté cet album."),ALBUM_FAN:Object(Co.a)("a ajouté cet album à sa musique préférée."),ARTIST_COMMENT:Object(Co.a)("a commenté cet artiste."),ARTIST_FAN:Object(Co.a)("a ajouté cet artiste à sa musique préférée."),FRIEND_FOLLOW:Object(Co.a)("suit désormais votre activité musicale."),PLAYLIST_COMMENT:Object(Co.a)("a commenté votre playlist."),PLAYLIST_CREATION:Object(Co.a)("vient de créer cette playlist."),PLAYLIST_FAN:Object(Co.a)("a ajouté cette playlist à sa musique préférée."),RADIO_COMMENT:Object(Co.a)("a commenté ce mix."),RADIO_FAN:Object(Co.a)("a ajouté ce mix à sa musique préférée."),SHARE_ALBUM:Object(Co.a)("vous recommande cet album."),SHARE_ARTIST:Object(Co.a)("vous recommande cet artiste."),SHARE_EPISODE:Object(Co.a)("vous recommande cet épisode."),SHARE_PLAYLIST:Object(Co.a)("vous recommande cette playlist."),SHARE_RADIO:Object(Co.a)("vous recommande ce mix."),SHARE_SHOW:Object(Co.a)("vous recommande ce podcast."),SHARE_SONG:Object(Co.a)("vous recommande ce titre.")};return t.hasOwnProperty(e)?t[e]:""},t}(no.Component),Ic=Object(Qi.a)(Dc),xc=n("./js/_components/Tooltip/index.js"),Lc=ao.a.createElement(Mo.a,{name:"mail",size:"18"}),Mc=function(e){function t(n){Dn(this,t);var a=In(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._onItemClick=a._onItemClick.bind(a),a._onMessageClick=a._onMessageClick.bind(a),a._onMessageNew=a._onMessageNew.bind(a),a.state={messageCount:a._getMessageCount()},a}return xn(t,e),t.prototype.componentDidMount=function(){go.a.subscribe(go.a.live.messageNew,this._onMessageNew)},t.prototype.shouldComponentUpdate=function(e,t){return e.data.USER_ID!==this.props.data.USER_ID||t.messageCount!==this.state.messageCount},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.live.messageNew,this._onMessageNew)},t.prototype.getTrackingParams=function(){return{type:"user",id:Number(this.props.data.USER_ID),index:this.props.index}},t.prototype.render=function(){var e=this.props.data,t={className:Po()({"notifications-item":!0,"is-friend":!0}),onClick:this._onItemClick};return ao.a.createElement("li",t,ao.a.createElement("div",{className:"notifications-item-container"},ao.a.createElement("div",{className:"notifications-item-heading"},ao.a.createElement("div",{className:"notifications-item-picture"},ao.a.createElement(vl.a,{type:"user",height:32,width:32,rounded:!0,data:e})),ao.a.createElement("div",{className:"notifications-item-message"},ao.a.createElement("div",{className:"heading-4"},ao.a.createElement(ei.a,{to:"/profile/"+e.USER_ID},e.DISPLAY_NAME))),this._renderIcon())))},t.prototype._renderIcon=function(){var e=this.state.messageCount;return 0===e?null:ao.a.createElement("a",{className:"notifications-item-icon active",tabIndex:"0",onClick:this._onMessageClick,onKeyDown:this._onMessageClick},ao.a.createElement(xc.a,{text:Object(Co.c)("Vous avez reçu %s nouveau message.","Vous avez reçu %s nouveaux messages.",{sprintf:[e],count:e})},Lc))},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onMessageClick=function(e){void 0!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),_o.a.open("/lightbox/instant_messenger.php?friend_id="+this.props.data.USER_ID),this.state.messageCount>0&&this.setState({messageCount:0}))},t.prototype._onMessageNew=function(e,t){if(Number(t.USER_ID)===Number(this.props.data.USER_ID)){var n=this.state.messageCount;this.setState({messageCount:n+1})}},t.prototype._getMessageCount=function(){var e=this.props.data,t=Eo.a.data.MESSAGE_UNREAD;if(!Eo.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID))return 0;for(var n in t.data)if(Number(t.data[n].AUTHOR)===Number(e.USER_ID))return Number(t.data[n].TOTAL);return 0},t}(no.Component);Mc.contextTypes={router:mo.a.object.isRequired};var Uc=Object(Qi.a)(Mc),Fc=ao.a.createElement("div",{className:"notifications-placeholder-image"},ao.a.createElement(mc.a,{className:"animate-spin",src:"common/placeholders/loader.png",width:"56",height:"56",retina:!0})),Bc=ao.a.createElement("div",{className:"notifications-placeholder-image"},ao.a.createElement(mc.a,{src:"common/placeholders/friends.png",width:"56",height:"56",retina:!0})),Hc=ao.a.createElement("span",{className:"label"},"Facebook"),Gc=ao.a.createElement("span",{className:"label"},"Twitter"),zc=ao.a.createElement("button",{className:"btn btn-googleplus",id:"btn_notification_googleplus",type:"button"},ao.a.createElement("span",{className:"label"},"Google")),Yc=function(e){function t(){return Mn(this,t),Un(this,e.apply(this,arguments))}return Fn(t,e),t.prototype.componentDidMount=function(){go.a.ready(go.a.googleplus.ready,function(){Nc.a.renderGGPlus("btn_notification_googleplus")})},t.prototype.render=function(){var e=this.props,t=e.data;return e.isLoading?this._renderLoading():t.length>0?this._renderList():this._renderPlaceholder()},t.prototype._renderList=function(){var e=this.props,t=e.data,n=e.type;return ao.a.createElement("ul",{className:"notifications-list"},t.map(function(e,t){switch(n){case"notification":return ao.a.createElement(Ic,{key:"notification_"+e.NOTIFICATION_ID,data:e,index:t});case"following":return ao.a.createElement(Uc,{key:"following_"+e.USER_ID,data:e,index:t});default:return null}}))},t.prototype._renderLoading=function(){return ao.a.createElement("div",{className:"notifications-placeholder"},Fc,ao.a.createElement("div",{className:"notifications-placeholder-title"},Object(Co.a)("Chargement en cours")))},t.prototype._renderPlaceholder=function(){return ao.a.createElement("div",{className:"notifications-placeholder"},Bc,ao.a.createElement("div",{className:"notifications-placeholder-title"},Object(Co.a)("Ne restez pas dans votre coin.")),ao.a.createElement("div",{className:"notifications-placeholder-social"},ao.a.createElement("div",{className:"notifications-placeholder-text"},Object(Co.a)("Connectez-vous sur les réseaux sociaux pour retrouver vos amis.")),ao.a.createElement("div",{className:"notifications-placeholder-buttons"},ao.a.createElement("button",{className:"btn btn-facebook",onClick:this._onSocialClick.bind(this,"facebook"),type:"button"},Hc),ao.a.createElement("button",{className:"btn btn-twitter",onClick:this._onSocialClick.bind(this,"twitter"),type:"button"},Gc),zc)))},t.prototype._onSocialClick=function(e,t){void 0!==t.keyCode&&13!==t.keyCode||("twitter"===e?kc.a.link():"facebook"===e&&Cc.a.login({scopes_mandatory:!0}))},t}(no.Component);Yc.defaultProps={isLoading:!1};var qc=Yc,Vc=ao.a.createElement(Mo.a,{name:"cancel"}),Wc=function(e){function t(n){Hn(this,t);var a=Gn(this,e.call(this,n));return a.panel_name="notifications",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.data.length!==t.data.length||a.state.nbDisplay!==t.nbDisplay}},a._fetchFeedApiRef=null,a._displayMoreEnabled=!0,a._currentList=[],a._nbDisplay=20,a._defaultTab="feed",a._displayMore=a._displayMore.bind(a),a._updateNotifications=a._updateNotifications.bind(a),a._updateFeed=a._updateFeed.bind(a),a._updateFollowing=a._updateFollowing.bind(a),a._updateMessageCount=a._updateMessageCount.bind(a),a._filterFollowing=a._filterFollowing.bind(a),a._onFilterEmpty=a._onFilterEmpty.bind(a),a.state={tab:a._defaultTab,data:a._getTabData(a._defaultTab),notificationCount:Eo.a.getNotificationCount(),messageCount:Eo.a.getMessageCount(),nbDisplay:a._nbDisplay,feedLoaded:!1,filter:""},a}return zn(t,e),t.prototype.componentDidMount=function(){this.scrollbar_onEnd(this._displayMore),go.a.subscribe(go.a.live.notificationNew,this._updateNotifications,"panel_notifications"),go.a.subscribe(go.a.live.notificationRead,this._updateNotifications,"panel_notifications"),go.a.subscribe(go.a.live.tickerNew,this._updateFeed,"panel_notifications"),go.a.subscribe(go.a.live.messageNew,this._updateMessageCount,"panel_notifications"),go.a.subscribe(go.a.live.messageRead,this._updateMessageCount,"panel_notifications"),go.a.subscribe(go.a.user.addFavorite,this._updateFollowing,"panel_notifications"),go.a.subscribe(go.a.user.deleteFavorite,this._updateFollowing,"panel_notifications"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-notifications");Object(Ri.l)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.tab!==this.state.tab||t.notificationCount!==this.state.notificationCount||t.messageCount!==this.state.messageCount||t.data.length!==this.state.data.length||t.feedLoaded!==this.state.feedLoaded||t.nbDisplay!==this.state.nbDisplay||t.filter!==this.state.filter},t.prototype.componentWillUnmount=function(){No.a.cancel(this._fetchFeedApiRef),go.a.unsubscribeAll("panel_notifications")},t.prototype.render=function(){return this.renderPanel(ao.a.createElement("div",{className:"panel-notifications"},ao.a.createElement("div",{className:"panel-header",id:"panel-notifications","aria-label":Object(Co.a)("Activité"),tabIndex:"0"},this._renderNavbar(),this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderNavbar=function(){var e=this,t=this.state.tab,n=this._getTabList();return ao.a.createElement("ul",{className:"panel-navbar",role:"tablist"},n.map(function(n){var a=Po()({"panel-navbar-link":!0,active:t===n.id});return ao.a.createElement("li",{className:"panel-navbar-item",key:n.id},ao.a.createElement(xc.a,{position:"bottom",text:n.label},ao.a.createElement("a",{className:a,onClick:function(t){return e._onTabClick(t,n.id)},onKeyDown:function(t){return e._onTabClick(t,n.id)},role:"tab",tabIndex:"0","aria-label":n.label,"aria-selected":t===n.id,"aria-controls":"activity-"+n.id},ao.a.createElement(Mo.a,{name:n.icon,size:"18"}),ao.a.createElement("span",{className:"sr-only"},n.label),e._renderCounter(n.counter))))}))},t.prototype._renderTitle=function(){var e=this.state,t=e.tab,n=e.filter,a=this._getTabList().find(function(e){return e.id===t}),r=null,o=null;return""!==n&&(o=ao.a.createElement("button",{className:"filter-empty",onClick:this._onFilterEmpty,type:"button"},Vc)),a.filter&&(r=ao.a.createElement("span",{className:"filter"},ao.a.createElement("input",{className:"filter-control form-control input-small",onChange:this._onFilterChange.bind(this,a.filter),placeholder:Object(Co.a)("Rechercher"),ref:"filter",type:"text",value:n}),o)),ao.a.createElement("div",{className:"panel-headings"},r,ao.a.createElement("h2",{className:"heading-2"},a.label))},t.prototype._renderCounter=function(e){return 0===e?null:ao.a.createElement("span",{className:"panel-navbar-counter"},e)},t.prototype._renderContent=function(){var e=this.state,t=e.tab,n=e.nbDisplay,a=e.feedLoaded,r=this.state.data.slice(0,n);switch(t){case"notifications":return ao.a.createElement(qc,{data:r,type:"notification",key:"notifications-list"});case"feed":return ao.a.createElement(qc,{data:r,isLoading:!a,type:"notification",key:"feed-list"});case"following":return ao.a.createElement(qc,{data:r,type:"following",key:"following-list"});default:return null}},t.prototype._onTabClick=function(e,t){var n=this;if((void 0===e.keyCode||13===e.keyCode)&&(e.preventDefault(),t!==this.state.tab)){var a=this.state.feedLoaded,r=this._nbDisplay,o=this._getTabData(t,a);this.setState({tab:t,data:o,nbDisplay:r,filter:""},function(){n.refreshScrollbar({scroll:"top"})})}},t.prototype._onFilterChange=function(){var e=this.state.tab,t=this._getTabList().find(function(t){return t.id===e});if("function"==typeof t.filter){var n=this.refs.filter.value.toLowerCase().trim();this.setState({data:t.filter(n),filter:n})}},t.prototype._onFilterEmpty=function(){var e=this.refs.filter;e.value="",e.focus(),this._onFilterChange()},t.prototype._filterFollowing=function(e){var t=Eo.a.data.FRIENDS.data.filter(function(t){var n=t.DISPLAY_NAME.toLowerCase(),a=Eo.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(t.USER_ID);return-1!==n.indexOf(e)||a});return t.length>0&&(t=this._sortFollowing(t)),t},t.prototype._sortFollowing=function(e){if(0===e.length)return e;var t=function(e,t){var n=e.DISPLAY_NAME.toLowerCase().trim(),a=t.DISPLAY_NAME.toLowerCase().trim();return n>a?1:n<a?-1:0},n=[],a=[];return e.forEach(function(e){Eo.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID)?n.push(e):a.push(e)}),n.sort(t),a.sort(t),n.concat(a)},t.prototype._updateNotifications=function(){var e=this.state.tab,t={notificationCount:Eo.a.getNotificationCount()};"notifications"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._updateFeed=function(){var e=this.state,t=e.tab,n=e.feedLoaded;"feed"===t&&n&&this.setState({data:this._getTabData(t,n)})},t.prototype._updateFollowing=function(e,t){var n=this.state.tab;"user"===t.type&&"following"===n&&this.setState({data:this._getTabData(n)})},t.prototype._updateMessageCount=function(){var e=this.state.tab,t={messageCount:Eo.a.getMessageCount()};"following"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._getTabList=function(){var e=this.state,t=e.notificationCount,n=e.messageCount;return[{id:"feed",label:Object(Co.a)("Activité"),icon:"time",filter:!1,counter:0},{id:"notifications",label:Object(Co.a)("Notifications"),icon:"notification",filter:!1,counter:t},{id:"following",label:Object(Co.a)("Following"),icon:"friends",filter:this._filterFollowing,counter:n}]},t.prototype._getTabData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"notifications":return[].concat(Eo.a.notifications);case"feed":return t?[].concat(Eo.a.ticker):(this._fetchFeed(),[]);case"following":return this._sortFollowing([].concat(Eo.a.data.FRIENDS.data));default:return[]}},t.prototype._fetchFeed=function(){var e=this;this._fetchFeedApiRef=No.a.call({method:"user.getFeed",data:{limit:20},success:function(t){Eo.a.ticker=[],t.count>0&&t.data.reverse().forEach(Eo.a.addTicker),e.setState({data:e._getTabData("feed",!0),feedLoaded:!0})},error:function(){}})},t.prototype._displayMore=function(){var e=this;if(!1===this._displayMoreEnabled||this.state.nbDisplay>=this.state.data.length)return!1;this._displayMoreEnabled=!1;var t=this.state.nbDisplay+this._nbDisplay;return this.setState({nbDisplay:t},function(){e._displayMoreEnabled=!0}),!0},t}(no.Component);Wc.defaultProps={selected:null};var Kc=Object(Ys.a)(Object(qs.a)(Wc)),Qc=function(e){function t(n){qn(this,t);var a=Vn(this,e.call(this,n));return a._panels_initialized={},a._onPanelMounted=a._onPanelMounted.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a),a.state={openPanelName:null,currentTarget:null,opened:!1},a}return Wn(t,e),t.prototype.getChildContext=function(){return{getTrackingParams:this.getTrackingParams}},t.prototype.componentWillMount=function(){go.a.subscribe(go.a.menu.panel_mounted,this._onPanelMounted)},t.prototype.componentDidMount=function(){go.a.subscribe(go.a.menu.closeAllPanels,this._onClosePanels),go.a.subscribe(go.a.menu.openPanel,this._onOpenPanel)},t.prototype.componentWillUnmount=function(){clearTimeout(this._closePanelTimeoutRef),clearTimeout(this._openPanelTimeoutRef),go.a.unsubscribe(go.a.menu.closeAllPanels,this._onClosePanels),go.a.unsubscribe(go.a.menu.openPanel,this._onOpenPanel),go.a.unsubscribe(go.a.menu.panel_mounted,this._onPanelMounted)},t.prototype.getTrackingParams=function(){return{panel:this.state.openPanelName}},t.isPanelMounted=function(e){return void 0!==t._panels_mounted[e]},t.prototype.render=function(){var e=this.state,t=e.openPanelName,n=e.opened,a=e.displayed;this._initPanel(t);var r={"panel-wrapper":!0};t&&(r["panel-wrapper-"+t]=!0);var o=Po()(r),i=Po()({"panel-container":!0,opened:n});return ao.a.createElement("div",{className:i,"aria-hidden":!a,style:a?{display:"block"}:{}},ao.a.createElement("div",{className:o},this._isPanelInitialized("searchhistory")?ao.a.createElement(nl,{ref:"searchhistory",selected:t}):null,this._isPanelInitialized("searchsuggest")?ao.a.createElement($s,{ref:"searchsuggest",selected:t}):null,this._isPanelInitialized("playlists")?ao.a.createElement(ll,{ref:"playlists",selected:t}):null,this._isPanelInitialized("business_regular_playlists")?ao.a.createElement(pl,{ref:"business_regular_playlists",selected:t}):null,this._isPanelInitialized("business_curated_playlists")?ao.a.createElement(fl,{ref:"business_curated_playlists",selected:t}):null,this._isPanelInitialized("business_mixes")?ao.a.createElement(ml,{ref:"business_mixes",selected:t}):null,this._isPanelInitialized("albums")?ao.a.createElement(bl,{ref:"albums",selected:t}):null,this._isPanelInitialized("shows")?ao.a.createElement(gl,{ref:"shows",selected:t}):null,this._isPanelInitialized("apps")?ao.a.createElement(Ol,{ref:"apps",selected:t}):null,this._isPanelInitialized("queuelist")?ao.a.createElement(Il,{ref:"queuelist",selected:t}):null,this._isPanelInitialized("settings")?ao.a.createElement(ic,{ref:"settings",selected:t}):null,this._isPanelInitialized("lyrics")?ao.a.createElement(Pc,{ref:"lyrics",selected:t,displayed:a}):null,this._isPanelInitialized("notifications")?ao.a.createElement(Kc,{ref:"notifications",selected:t}):null),ao.a.createElement("div",{className:"panel-overlay",onClick:this._onOverlayClick}))},t.prototype._onPanelMounted=function(e,n){t._panels_mounted[n]=!0},t.prototype._onOverlayClick=function(){go.a.trigger(go.a.menu.closeAllPanels)},t.prototype._onClosePanels=function(e,t){var n=this,a=this.state.currentTarget;this.setState({opened:!1},function(){n._closePanelTimeoutRef=setTimeout(function(){n.setState({displayed:!1,openPanelName:null,currentTarget:null},function(){a&&t&&Object(Ri.l)(a)})},150)})},t.prototype._onOpenPanel=function(e,t){var n=this,a=t.panel;this._needUserData(a)&&!1===Eo.a.isLoaded||this.setState({openPanelName:a,currentTarget:t.currentTarget,displayed:!0},function(){"lyrics"===a&&so.a.control.play(),n._openPanelTimeoutRef=setTimeout(function(){n.setState({opened:!0},function(){var e=n.refs[a];e.getWrappedInstance&&(e=e.getWrappedInstance()),e.openPanel()})},0)})},t.prototype._initPanel=function(e){void 0===this._panels_initialized[e]&&(this._panels_initialized[e]=!0)},t.prototype._isPanelInitialized=function(e){return void 0!==this._panels_initialized[e]},t.prototype._needUserData=function(e){return{playlists:!0,albums:!0,shows:!0,apps:!0,searchhistory:!0,notifications:!0,business_regular_playlists:!0,business_curated_playlists:!0,business_mixes:!0}[e]||!1},t}(no.Component);Qc.childContextTypes={getTrackingParams:mo.a.func},Qc._panels_mounted={};var Xc=Qc,$c=ao.a.createElement("div",{className:"page-sidebar",id:"page_sidebar"},ao.a.createElement(Us,null)),Jc=function(e){function t(){var n,a,r;Qn(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Xn(this,e.call.apply(e,[this].concat(i))),a._authorized_actions={openCreatePlaylist:!0},r=n,Xn(a,r)}return $n(t,e),t.prototype.componentDidMount=function(){this._dispatchActionEvent=new Zo.a,this._subscribeActions(this._onAction)},t.prototype.render=function(){return $c},t.prototype._onAction=function(e){var t=this;switch(e.action){case"openCreatePlaylist":Xc.isPanelMounted("playlists")||go.a.subscribe(go.a.menu.panel_mounted,function(e,n){"playlists"===n&&t._dispatchAction("openCreatePlaylist")}),go.a.trigger(go.a.menu.openPanel,{panel:"playlists"})}},t.prototype._dispatchAction=function(e,t){void 0!==this._authorized_actions[e]&&this._dispatchActionEvent.trigger({action:e,params:t})},t.prototype._subscribeActions=function(e){this._dispatchActionEvent.subscribe(e)},t}(no.Component),Zc=ao.a.createElement("div",{className:"page-panels",id:"page_panels"},ao.a.createElement(Xc,null)),eu=ao.a.createElement("div",{id:"page_context_menu"}),tu=ao.a.createElement("aside",{id:"notification",className:"page-notifications",role:"alert","aria-hidden":"true"},ao.a.createElement("div",{className:"notification"},ao.a.createElement("h2",null))),nu=function(e){function t(){return Zn(this,t),ea(this,e.apply(this,arguments))}return ta(t,e),t.prototype.render=function(){return tu},t}(no.Component),au=ao.a.createElement("div",{className:"modal-backdrop"}),ru=ao.a.createElement("div",{className:"modal-wrapper"}),ou=ao.a.createElement("div",{className:"overlay"}),iu=ao.a.createElement("span",{className:"icon icon-cancel"}),su=ao.a.createElement("a",{id:"interstitial_ads"}),lu=function(e){function t(){return aa(this,t),ra(this,e.apply(this,arguments))}return oa(t,e),t.prototype.render=function(){return ao.a.createElement("div",{id:"interstitial",style:{display:"none"}},ou,ao.a.createElement("div",{className:"interstitial-container"},ao.a.createElement("span",{className:"interstitial-wrapper"},ao.a.createElement("a",{className:"close",href:"#",onClick:this._onClose},Object(Co.a)("Fermer"),iu),su)))},t.prototype._onClose=function(e){e.preventDefault()},t}(no.Component),cu=ao.a.createElement("a",{className:"message",href:"#"}),uu=function(e){function t(){return sa(this,t),la(this,e.apply(this,arguments))}return ca(t,e),t.prototype.render=function(){return ao.a.createElement("div",{id:"notify"},ao.a.createElement("a",{className:"close",href:"#",onClick:this._onClose}),cu)},t.prototype._onClose=function(e){e.preventDefault(),pi.b.hide()},t}(no.Component),pu=ao.a.createElement(nu,null),du=ao.a.createElement(function(){return eu},null),fu=ao.a.createElement(function(){return ao.a.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},au,ru)},null),hu=ao.a.createElement(lu,null),mu=ao.a.createElement(uu,null),yu=ao.a.createElement("div",{id:"hotkeys_container"}),bu=ao.a.createElement("div",{className:"core-player",id:"core_player"}),_u=n("./node_modules/react-custom-scrollbars/lib/index.js"),gu=ao.a.createElement("div",{className:"sidebar-header"},ao.a.createElement("div",{className:"sidebar-navbar"},ao.a.createElement("button",{className:"sidebar-navbar-arrow",type:"button"},ao.a.createElement(Mo.a,{name:"chevron-prev"})),ao.a.createElement("button",{className:"sidebar-navbar-arrow",disabled:!0,type:"button"},ao.a.createElement(Mo.a,{name:"chevron-next"})))),vu=(ao.a.createElement("div",{className:"sidebar-header"}),function(e){function t(n){pa(this,t);var a=da(this,e.call(this,n));return a._updateUnseenPlaylists=a._updateUnseenPlaylists.bind(a),a._onBugReportClick=a._onBugReportClick.bind(a),a._onUserReady=a._onUserReady.bind(a),a.state={unseenPlaylistCount:0},a}return fa(t,e),t.prototype.componentDidMount=function(){go.a.subscribe(go.a.playlist.seen,this._updateUnseenPlaylists),go.a.ready(go.a.user.userReady,this._onUserReady)},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.playlist.seen,this._updateUnseenPlaylists)},t.prototype.render=function(){return ao.a.createElement("div",{className:"page-electron-sidebar",id:"page_sidebar"},this._renderHeader(),this._renderNav())},t.prototype._renderHeader=function(){return gu},t.prototype._renderNav=function(){var e=this;return ao.a.createElement("div",{className:"sidebar-nav"},ao.a.createElement(_u.Scrollbars,null,ao.a.createElement("ul",{className:"sidebar-nav-list",role:"navigation","aria-label":Object(Co.a)("Menu principal")},this._getNavLinks().map(function(t){return e._renderNavLink(t)}))))},t.prototype._renderNavLink=function(e){if(e.isDisabled)return null;var t=Po()("sidebar-nav-item",{"is-divider":e.isDivider}),n={className:Po()("sidebar-nav-link",{"is-main":e.isMain}),activeClassName:"is-active",to:e.to,onClick:e.onClick};return e.to||Object.assign(n,{role:"button",tabIndex:0,onKeyPress:e.onClick}),ao.a.createElement("li",{className:t,key:e.id},ao.a.createElement(ei.a,n,e.icon?ao.a.createElement(Mo.a,{name:e.icon,size:"16"}):null,ao.a.createElement("span",{className:"sidebar-nav-label"},e.label),e.badge?ao.a.createElement(ui.a,{type:"info",counter:e.badge}):null))},t.prototype._onBugReportClick=function(e){if(e.preventDefault(),void 0===e.key||"Enter"===e.key){var t=lo.a.get("ATL_JQ_SHOW_DIALOG");"function"==typeof t&&t()}},t.prototype._onUserReady=function(){this._updateUnseenPlaylists()},t.prototype._updateUnseenPlaylists=function(){this.setState({unseenPlaylistCount:Eo.a.getUnseenPlaylistCount()})},t.prototype._getNavLinks=function(){var e=this.state.unseenPlaylistCount,t=lo.a.get("SETTING_LANG"),n=lo.a.get("USER.USER_ID");return[{id:"home",label:Object(Co.a)("Accueil"),to:"/"+t+"/",isMain:!0},{id:"feed",label:Object(Co.a)("À écouter"),to:"/feed",isMain:!0},{id:"bugreport",label:"Report a bug",to:null,onClick:this._onBugReportClick,isMain:!0,isDisabled:!uo.a.isAllowed("employee_feature")},{id:"profile",label:Object(Co.a)("Ma musique"),to:"/profile/"+n,isMain:!0,isDivider:!0},{id:"loved",label:Object(Co.a)("Coups de cœur"),to:"/profile/"+n+"/loved",icon:"love"},{id:"downloads",label:"Downloads",to:"/profile/"+n+"/downloads",icon:"download",isDisabled:!0},{id:"playlists",label:Object(Co.a)("Playlists"),to:"/profile/"+n+"/playlists",icon:"playlist",badge:e},{id:"albums",label:Object(Co.a)("Albums"),to:"/profile/"+n+"/albums",icon:"album"},{id:"podcasts",label:Object(Co.a)("Podcasts"),to:"/profile/"+n+"/shows",icon:"podcast",isDisabled:!uo.a.isAllowed("talk")}]},t}(no.Component)),Eu=n("./node_modules/react-transition-group/index.js"),Ou=n("./js/_components/Player/presets/index.js"),Tu=function(e){var t=e.playerUI.title,n=e.track;return t.url&&t.id?t.url+n[t.id]:null},ju=function(e){var t=e.playerUI.subTitle,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).ART_ID;return t.url&&n?t.url+n:null},Su=n("./js/_components/DataGrid/index.js"),wu=n("./js/_components/DataGrid/utils.js"),Au=ao.a.createElement(Mo.a,{className:"checkbox-tick",name:"check"}),Pu=function(e){function t(n){ma(this,t);var a=ya(this,e.call(this,n));return a._onUpNextToggle=a._onUpNextToggle.bind(a),a._nbDisplayTracks=0,a.state={list:a._getList(n)},a}return ba(t,e),t.prototype.componentWillReceiveProps=function(e){e.index!==this.props.index&&e.isRadio&&this.setState({list:this._getList(e)})},t.prototype.render=function(){return ao.a.createElement("div",null,this._renderUpNextToggle(),this._renderRecommendations())},t.prototype._renderUpNextToggle=function(){var e=this.props,t=e.isAuth,n=e.isUpnext,a=e.playerUI,r=e.hasUpNext;if(!(t&&(a.upnext||n)))return null;var o=Po()({checkbox:!0,checked:r});return ao.a.createElement("div",{className:"player-upnext"},ao.a.createElement("span",{className:"player-queuelist-title"},Object(Co.a)("Recommandations automatiques")),ao.a.createElement("button",{className:"player-upnext-check",type:"button",onClick:this._onUpNextToggle},ao.a.createElement("span",{className:o},Au)))},t.prototype._renderRecommendations=function(){return this.props.isUpnext?ao.a.createElement(Su.a,{id:lo.a.get("USER.USER_ID"),type:"queuelist",items:this._getList(),options:{isRadio:!0,changeOrder:!1}}):null},t.prototype._onUpNextToggle=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.hasUpNext,a=t.context,r=t.list,o=t.recommendations,i=t.index;if(n=!n,this.props.toggleUpNext({hasUpNext:n}),!n&&"up_next_artist"===a.TYPE){var s=r.length+o.length,l=i+1;s-l>0&&so.a.removeTracks(l,s-l)}},t.prototype._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.index,n=e.list;return e.recommendations.slice(0,t-n.length+1)},t}(no.Component),Cu=Object(ro.b)(function(e){return{list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,recommendations:e.player.music.recommendations,isRadio:e.player.config.isRadio,isUpnext:e.player.config.isUpnext,isAuth:e.user.isAuth,hasUpNext:e.user.hasUpNext,playerUI:Object(mi.getInterfaceConfiguration)(e),uiType:Object(mi.getInterfaceType)(e)}},{toggleUpNext:wl.c})(Pu),Nu=ao.a.createElement(Cu,null),ku=function(e){function t(n){ga(this,t);var a=va(this,e.call(this,n));return a._onScroll=rl()(a._onScroll.bind(a),100),a._onScrollStop=a._onScrollStop.bind(a),a._nbDisplayTracks=0,a.state={list:a._getList(n)},a}return Ea(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.isRadio,n=e.index,a=this.refs.scrollbar;t?a.scrollToBottom():a.scrollTop(n*wu.t)},t.prototype.componentWillReceiveProps=function(e){(e.index!==this.props.index&&e.isRadio||e.list.length!==this.props.list)&&this.setState({list:this._getList(e)})},t.prototype.render=function(){var e=this.props,t=e.uiType,n=e.isRadio,a=e.isUpnext,r=this.state.list,o=n&&!a;return ao.a.createElement("div",{className:"player-queuelist-container",onScroll:this._onScroll},ao.a.createElement(_u.Scrollbars,{onScrollStop:this._onScrollStop,ref:"scrollbar"},ao.a.createElement(Su.a,{id:lo.a.get("USER.USER_ID"),type:t===Ou.a.PODCAST?"queuelistPodcast":"queuelist",items:r,options:{isRadio:o,changeOrder:!o}}),this._renderUpnext()))},t.prototype._renderUpnext=function(){return this._isFullyRendered()?Nu:null},t.prototype._onScroll=function(){go.a.trigger(go.a.menu.contextMenuClose)},t.prototype._onScrollStop=function(){if(!this.props.isRadio){var e=this.refs.scrollbar,t=e.getScrollHeight(),n=e.getScrollTop();e.getClientHeight()+n<t-wu.t||this._isFullyRendered()||(this._nbDisplayTracks+=40,this.setState({list:this._getList()}))}},t.prototype._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.index,n=e.list;return e.isRadio?n.slice(0,t+1):n.slice(0,this._nbDisplayTracks+40)},t.prototype._isFullyRendered=function(){var e=this.props,t=e.list;return!!e.isRadio||this._nbDisplayTracks+40>=t.length},t}(no.Component),Ru=Object(ro.b)(function(e){return{list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,isRadio:e.player.config.isRadio,isUpnext:e.player.config.isUpnext,playerUI:Object(mi.getInterfaceConfiguration)(e),uiType:Object(mi.getInterfaceType)(e)}})(ku),Du=ao.a.createElement(Mo.a,{name:"chevron-down",size:"auto"}),Iu=ao.a.createElement(Ru,null),xu=ao.a.createElement("span",{className:"label"},"Save as playlist"),Lu=function(e){function t(n){Ta(this,t);var a=ja(this,e.call(this,n));return a._onClose=a._onClose.bind(a),a._onCreatePlaylist=a._onCreatePlaylist.bind(a),a._onDislikeClick=a._onDislikeClick.bind(a),a}return Sa(t,e),t.prototype.componentDidMount=function(){this._unlisten=oo.f.listenBefore(this._onClose)},t.prototype.componentWillUnmount=function(){this._unlisten()},t.prototype.render=function(){var e=this,t=this.props,n=t.status,a=t.uiType,r=t.track,o=t.trackTitle,i=t.trackArtists,s=Po()("player-full",{"is-active":"entering"===n||"entered"===n});return ao.a.createElement("div",{className:s},ao.a.createElement("div",{className:"player-header"},ao.a.createElement("div",{className:"player-close-btn"},ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button",onClick:this._onClose},Du))),ao.a.createElement("div",{className:"player-container"},ao.a.createElement("div",{className:"player-cover"},ao.a.createElement("div",{className:"player-cover-thumbnail"},ao.a.createElement(vl.a,{type:a===Ou.a.PODCAST?co.a.Episode:co.a.Album,height:380,width:380,data:r,coverLink:!1})),ao.a.createElement("div",{className:"player-cover-title"},ao.a.createElement(ei.a,{className:"player-cover-link",to:Tu(this.props)},o)," · ",i.map(function(t,n){return[n>0?", ":"",ao.a.createElement(ei.a,{className:"player-cover-link",key:t.ART_ID,to:ju(e.props,t)},t.ART_NAME)]})),ao.a.createElement("div",{className:"player-cover-actions"},ao.a.createElement("ul",{className:"svg-icon-group"},ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderLike()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderDislike()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu("addToPlaylist")),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu())))),ao.a.createElement("div",{className:"player-queuelist"},ao.a.createElement("div",{className:"player-queuelist-header"},ao.a.createElement("div",{className:"player-queuelist-heading"},this._renderTitle(),this._renderSubTitle()),this._renderSaveAsPlaylist()),Iu)))},t.prototype._renderTitle=function(){var e=this.props,t=e.isRadio,n=e.isFlow,a=e.isUpnext,r=Object(Co.a)("File d'attente");return t&&!a&&(r=n?Object(Co.a)("Derniers titres écoutés sur Flow"):Object(Co.a)("Derniers titres écoutés dans le mix")),ao.a.createElement("span",{className:"player-queuelist-title"},r)},t.prototype._renderSubTitle=function(){var e=this.props,t=e.list,n=e.isRadio,a=e.tracklistDuration;if(n)return null;var r=Object(Co.c)("%s titre","%s titres",{sprintf:[Object(Ri.f)(t.length)],count:t.length});return ao.a.createElement("span",{className:"player-queuelist-info"}," · ",r," · ",Object(Ri.v)(a))},t.prototype._renderSaveAsPlaylist=function(){return this.props.playerUI.saveAsPlaylist?ao.a.createElement("div",{className:"player-queuelist-save-btn"},ao.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onCreatePlaylist},xu)):null},t.prototype._renderLike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.like?ao.a.createElement(Si.a,{className:"svg-icon-group-btn",type:"song",tooltip:!0,context:"player",id:String(n)}):null},t.prototype._renderDislike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.dislike?ao.a.createElement(ji.a,{className:"svg-icon-group-btn",tooltip:!0,id:n,onClickCallback:this._onDislikeClick}):null},t.prototype._renderContextMenu=function(e){var t=this.props,n=t.track,a=t.id,r=t.context,o=t.playerUI,i=t.isFavorite,s=t.isRadio;if(!o.contextMenu)return null;var l="addToPlaylist"===e,c={position:"right",type:"track",forceShowPlaylists:l,anchor:ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},ao.a.createElement(Mo.a,{name:l?"add":"options",size:"auto"})),data:{SONG:n,PLAYLIST_ID:r.ID},id:Number(a),context:"player",isFavorite:i,isRadio:s};return ao.a.createElement(wi.a,c)},t.prototype._onClose=function(){this.props.setPlayerFull({isPlayerFull:!1})},t.prototype._onCreatePlaylist=function(){var e=this.props,t=e.isUpnext,n=e.isRadio,a=e.list,r=e.recommendations,o=e.index,i=a;t?i=i.concat(r.slice(0,o-a.length+1)):n&&(i=i.slice(0,o+1)),_o.a.open("/lightbox/playlist_assistant?type=create",!1,{sng_id:i.map(function(e){return e.SNG_ID})})},t.prototype._onDislikeClick=function(){this.context.onNext()},t}(no.Component),Mu=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,isFavorite:e.player.music.isFavorite,recommendations:e.player.music.recommendations,tracklistDuration:e.player.music.tracklistDuration,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,isUpnext:e.player.config.isUpnext,trackTitle:Object(bi.l)(e),trackArtists:Object(bi.j)(e),playerUI:Object(mi.getInterfaceConfiguration)(e),uiType:Object(mi.getInterfaceType)(e)}},{setPlayerFull:mi.setPlayerFull})(Lu),Uu=n("./node_modules/uuid-v4/index.js"),Fu=n.n(Uu),Bu=n("./node_modules/popper.js/dist/esm/popper.js"),Hu=n("./js/_components/Popper/store/popper.js"),Gu=function(e){var t=function(t){function n(e){Aa(this,n);var a=Pa(this,t.call(this,e));return a._popper=null,a._popperId=Fu()(),a._popperRef=null,a._targetRef=null,a._contentRef=null,a._arrowRef=null,a._showTimeout=null,a._onClick=a._onClick.bind(a),a._onDocumentClick=a._onDocumentClick.bind(a),a._onMouseEnter=a._onMouseEnter.bind(a),a._onMouseLeave=a._onMouseLeave.bind(a),a.state={isVisible:e.isVisible},a}return Ca(n,t),n.prototype.componentWillReceiveProps=function(e){var t=this;if(e.isDisabled)this._hide(function(){return t._destroy()});else{var n=this.props.isVisible!==e.isVisible;this.setState({isVisible:n||this.state.isVisible},function(){t.state.isVisible&&t._update()})}},n.prototype.shouldComponentUpdate=function(e){return e.popperId===this.props.popperId},n.prototype.componentWillUnmount=function(){this._clear(),this._destroy()},n.prototype.render=function(){var t=this,n=this.props,a=n.children,r=n.trigger,o=n.isDisabled,i=n.tag,s=n.className,l=n.data,c=this.state.isVisible,u={className:Po()("popper-wrapper",s),onMouseEnter:"hover"!==r||o?null:this._onMouseEnter,onMouseLeave:"hover"!==r||o?null:this._onMouseLeave,ref:function(e){return t._popperRef=t._getDomNode(e)}};return ao.a.createElement(i,u,ao.a.cloneElement(a,{className:Po()(a.props.className,{"is-popper-active":c}),onClick:this._onClick,ref:function(e){return t._targetRef=t._getDomNode(e)}}),ao.a.createElement("div",{className:"popper",ref:function(e){return t._contentRef=e},style:this._getPopperStyle()},ao.a.createElement(e,l),this._renderArrow()))},n.prototype._renderArrow=function(){var e=this;if(!this.props.hasArrow)return null;var t={className:"popper-arrow",ref:function(t){return e._arrowRef=t}};return ao.a.createElement("div",t)},n.prototype._onClick=function(){var e=this.props,t=e.children,n=e.trigger,a=e.isDisabled,r=this.state.isVisible;"click"!==n||a||(r?this._hide():this._show()),"function"==typeof t.props.onClick&&t.props.onClick()},n.prototype._onDocumentClick=function(e){this._popperRef.contains(e.target)||this._hide()},n.prototype._onMouseEnter=function(){var e=this,t=this.props.delay;t>0?this._showTimeout=window.setTimeout(function(){e._show()},t):this._show()},n.prototype._onMouseLeave=function(e){e.relatedTarget!==window?(this._clear(),this._hide()):e.stopPropagation()},n.prototype._initPopper=function(){if(this._targetRef&&this._contentRef){var e={placement:this.props.placement,modifiers:{arrow:{enabled:this.props.hasArrow,element:this._arrowRef}}};this._popper=new Bu.a(this._targetRef,this._contentRef,e)}},n.prototype._getPopperStyle=function(){return{display:this.state.isVisible?null:"none"}},n.prototype._getDomNode=function(e){return"function"==typeof e?jl.a.findDOMNode(e):e},n.prototype._show=function(){var e=this;this.state.isVisible||""!==this.props.popperId&&this.props.popperId!==this._popperId||this.setState({isVisible:!0},function(){e.props.setActive(e._popperId),e._update(),"click"===e.props.trigger&&document.addEventListener("click",e._onDocumentClick)})},n.prototype._hide=function(e){var t=this;this.state.isVisible&&this.props.popperId===this._popperId&&this.setState({isVisible:!1},function(){t.props.setInactive(),"function"==typeof e&&e(),"click"===t.props.trigger&&document.removeEventListener("click",t._onDocumentClick)})},n.prototype._update=function(){this._popper?this._popper.scheduleUpdate():this._initPopper()},n.prototype._destroy=function(){this._popper&&(this._popper.destroy(),this._popper=null)},n.prototype._clear=function(){this._showTimeout&&window.clearTimeout(this._showTimeout)},n}(no.Component);t.defaultProps={placement:"top",hasArrow:!0,trigger:"manual",delay:0,isVisible:!1,isDisabled:!1,tag:"div",className:"",data:{}};return Object(ro.b)(function(e){return{popperId:e.popper.popperId}},{setActive:Hu.b,setInactive:Hu.c},null,{withRef:!0})(t)},zu=function(e){function t(){return ka(this,t),Ra(this,e.apply(this,arguments))}return Da(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,a=e.size,r=Po()("popper-content",n,{"popper-sm":"sm"===a,"popper-lg":"lg"===a});return ao.a.createElement("div",{className:r},t)},t}(no.Component);zu.defaultProps={className:"",size:null};var Yu=zu,qu=function(e){function t(){return xa(this,t),La(this,e.apply(this,arguments))}return Ma(t,e),t.prototype.render=function(){return ao.a.createElement(Yu,{className:"popper-player-preview",size:"lg"},this._renderThumbnail(),this._renderInfos(),this._renderAction())},t.prototype._renderThumbnail=function(){var e=this.props,t=e.type,n=e.trackPrev,a=e.trackNext,r=e.mediaType,o=void 0;return o="prev"===t?n:a,ao.a.createElement("div",{className:"preview-thumbnail"},ao.a.createElement(vl.a,{type:r===so.a.MEDIA_TYPE_TALK?co.a.Episode:co.a.Album,height:40,width:40,data:o,coverLink:!1}))},t.prototype._renderInfos=function(){var e=this,t=this.props,n=t.type,a=t.trackPrev,r=t.trackNext,o=t.prevTrackTitle,i=t.prevTrackArtists,s=t.nextTrackTitle,l=t.nextTrackArtists,c=void 0,u=void 0,p=void 0;return"prev"===n?(c=a,u=o,p=i):(c=r,u=s,p=l),ao.a.createElement("div",{className:"preview-heading"},ao.a.createElement(ei.a,{className:"preview-link",to:this._getTitleLink(c)},u)," • ",p.map(function(t,n){return[n>0?", ":"",ao.a.createElement(ei.a,{className:"preview-link",key:t.ART_ID,to:e._getSubTitleLink(t)},t.ART_NAME)]}))},t.prototype._renderAction=function(){return ao.a.createElement("div",{className:"preview-action"},ao.a.createElement("ul",{className:"svg-icon-group"},this._renderLike()))},t.prototype._renderLike=function(){var e=this.props,t=e.ui,n=e.type,a=e.trackPrev,r=e.trackNext;if(!t.like)return null;var o="prev"===n?a[so.a.getMediaId(a)]:r[so.a.getMediaId(r)];return ao.a.createElement("li",{className:"svg-icon-group-item"},ao.a.createElement(Si.a,{className:"svg-icon-group-btn",type:"song",context:"player",tooltip:!0,id:String(o)}))},t.prototype._getTitleLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.ui;return t.title.url||t.title.id?t.title.url+e[t.title.id]:null},t.prototype._getSubTitleLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.ui;return t.subTitle.url&&0!==Number(e.ART_ID)?t.subTitle.url+e.ART_ID:null},t}(no.Component);qu.contextTypes={onNext:mo.a.func};var Vu=Gu(Object(ro.b)(function(e){return{trackPrev:e.player.music.trackPrev,trackNext:e.player.music.trackNext,mediaType:e.player.music.mediaType,prevTrackTitle:Object(bi.i)(e),prevTrackArtists:Object(bi.h)(e),nextTrackTitle:Object(bi.g)(e),nextTrackArtists:Object(bi.f)(e),ui:Object(mi.getInterfaceConfiguration)(e)}})(qu)),Wu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ku=ao.a.createElement(Mo.a,{name:"prev",size:"auto"}),Qu=ao.a.createElement(Mo.a,{name:"prev-30",size:"auto"}),Xu=ao.a.createElement(Mo.a,{name:"next",size:"auto"}),$u=ao.a.createElement(Mo.a,{name:"next-30",size:"auto"}),Ju=function(e){function t(n){Fa(this,t);var a=Ba(this,e.call(this,n));return a._onTogglePlay=a._onTogglePlay.bind(a),a._onPrev=a._onPrev.bind(a),a._onNext=a._onNext.bind(a),a._onSkipBackwards=a._onSkipBackwards.bind(a),a._onSkipForwards=a._onSkipForwards.bind(a),a}return Ha(t,e),t.prototype.render=function(){return ao.a.createElement("div",{className:"player-controls"},ao.a.createElement("ul",{className:"svg-icon-group"},ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderPrev()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderSkipBackwards()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderPlay()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderSkipForwards()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderNext())))},t.prototype._renderPrev=function(){if(!this.props.playerUI.prev)return null;var e=Object(Co.a)("Précédent"),t=so.a.getPrevSong()&&this.props.repeat!==so.a.repeatLevel.REPEAT_SINGLE&&!so.a.isRadio(),n={trigger:"hover",delay:500,isDisabled:!this.props.hasPrev||!t,data:{type:"prev"}},a={disabled:!this.props.hasPrev,onClick:this._onPrev,"aria-label":e};return ao.a.createElement(Vu,n,ao.a.createElement("button",Wu({className:"svg-icon-group-btn",type:"button"},a),Ku))},t.prototype._renderSkipBackwards=function(){if(!this.props.playerUI.skipBackwards)return null;var e=Object(Co.a)("Retour rapide de 30 secondes");return ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button","aria-label":e,onClick:this._onSkipBackwards},Qu)},t.prototype._renderNext=function(){if(!this.props.playerUI.next)return null;var e=Object(Co.a)("Suivant"),t=so.a.getNextSong()&&this.props.repeat!==so.a.repeatLevel.REPEAT_SINGLE&&!so.a.isRadio(),n={trigger:"hover",delay:500,isDisabled:!this.props.hasNext||!t,data:{type:"next"}},a={disabled:!this.props.hasNext,onClick:this._onNext,"aria-label":e};return ao.a.createElement(Vu,n,ao.a.createElement("button",Wu({className:"svg-icon-group-btn",type:"button"},a),Xu))},t.prototype._renderSkipForwards=function(){if(!this.props.playerUI.skipForwards)return null;var e=Object(Co.a)("Avance rapide de 30 secondes");return ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button","aria-label":e,onClick:this._onSkipForwards},$u)},t.prototype._renderPlay=function(){var e=this.props,t=e.playing,n=e.paused,a=e.loading,r=e.canPaused,o=e.playerUI,i=n&&!t||!n&&!t,s=o.stop?Object(Co.a)("Stop"):Object(Co.a)("Pause"),l=i?Object(Co.a)("Play"):s,c=o.stop?"stop":"pause",u=i?"play":c;return ao.a.createElement("button",{className:"svg-icon-group-btn is-highlight",type:"button",disabled:!r||a,"aria-label":l,onClick:this._onTogglePlay},ao.a.createElement(Mo.a,{name:u,size:"auto"}))},t.prototype._onPrev=function(){fi.a.intent("prev"),so.a.control.prevSong()},t.prototype._onNext=function(){this.context.onNext()},t.prototype._onSkipBackwards=function(){var e=this.props.trackDuration,t=(so.a.getPosition()-30)/e;so.a.control.seek(t)},t.prototype._onSkipForwards=function(){var e=this.props.trackDuration,t=(so.a.getPosition()+30)/e;t>=1?this._onNext():so.a.control.seek(t)},t.prototype._onTogglePlay=function(){if(lo.a.get("OFFLINE"))rs.a.display();else{var e=this.props,t=e.playing,n=e.paused,a=e.playerUI,r=n&&!t||!n&&!t;r?so.a.control.play():a.pause?so.a.control.pause():so.a.control.stop(),fi.a.intent(r?"play":"pause")}},t}(no.Component);Ju.contextTypes={onNext:mo.a.func};var Zu=Object(ro.b)(function(e){return{trackDuration:e.player.music.trackDuration,playing:e.player.control.playing,paused:e.player.control.paused,loading:e.player.control.loading,repeat:e.player.control.repeat,hasNext:Object(yi.f)(e),hasPrev:Object(yi.g)(e),canPaused:Object(yi.b)(e),playerUI:Object(mi.getInterfaceConfiguration)(e)}})(Ju),ep=ao.a.createElement("div",{className:"slider-track-default"}),tp=function(e){function t(n){za(this,t);var a=Ya(this,e.call(this,n));return a._onKeyUp=a._onKeyUp.bind(a),a._onMouseUp=a._onMouseUp.bind(a),a._onChange=a._onChange.bind(a),a._showTooltip=a._showTooltip.bind(a),a._hideTooltip=a._hideTooltip.bind(a),a.state={position:!1,isActive:!1,tooltipOffset:null,tooltipValue:0},a}return qa(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.value!==this.props.value||!1!==t.position||t.isActive!==this.state.isActive||t.tooltipOffset!==this.state.tooltipOffset||t.tooltipValue!==this.state.tooltipValue},t.prototype.render=function(){var e=this,t=this.props,n=t.max,a=t.min,r=t.value,o=t.step,i=t.disabled,s=t.tooltip,l=t.autoHide,c=this.state,u=c.position,p=c.isActive,d=u||r,f=100*(d-a)/(n-a)||0,h={className:Po()("slider",{"slider-autohide":l,"is-active":p}),onMouseEnter:l?function(){return e._setActive(!0)}:null,onMouseLeave:l?function(){return e._setActive(!1)}:null,onFocus:l?function(){return e._setActive(!0)}:null,onBlur:l?function(){return e._setActive(!1)}:null},m=this._getSliderTrackStyle(f);return ao.a.createElement("div",h,this._renderCurrentValue(d),ao.a.createElement("div",{className:"slider-track",ref:"sliderTrack"},ep,ao.a.createElement("div",{className:"slider-track-active",style:m}),ao.a.createElement("input",{className:"slider-track-input",type:"range",step:o,min:a,max:n,value:d,disabled:i,"aria-valuemin":a,"aria-valuemax":n,"aria-valuenow":d,onMouseUp:this._onMouseUp,onKeyUp:this._onKeyUp,onChange:this._onChange,onMouseMove:s?this._showTooltip:null,onMouseOut:s?this._hideTooltip:null})),this._renderMaxValue(),this._renderTooltip())},t.prototype._renderCurrentValue=function(e){if(!1===this.props.counter)return null;var t=this._formatValue(e);return ao.a.createElement("div",{className:"slider-counter slider-counter-current"},t)},t.prototype._renderMaxValue=function(){var e=this.props,t=e.counter,n=e.max;if(!1===t)return null;var a=this._formatValue(n);return ao.a.createElement("div",{className:"slider-counter slider-counter-max"},a)},t.prototype._renderTooltip=function(){var e=this.state,t=e.tooltipOffset,n=e.tooltipValue;if(null===t)return null;var a=this._formatValue(n),r=this._getTooltipStyle(t);return ao.a.createElement("div",{className:"slider-tooltip",style:r},a)},t.prototype._onMouseUp=function(e){this.props.onChange(e.target.value);var t={position:!1};if(this.props.tooltip){var n=e.target.getBoundingClientRect(),a=Math.floor(n.left),r=Math.floor(n.width);(e.clientX<a||e.clientX>a+r)&&(t.tooltipOffset=null)}this.setState(t)},t.prototype._onKeyUp=function(e){-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)&&(this.props.onChange(e.target.value),this.setState({position:!1}))},t.prototype._onChange=function(e){var t=e.target.value;this.props.onProgress(t),this.setState({position:t})},t.prototype._showTooltip=function(e){var t=this.refs.sliderTrack.getBoundingClientRect(),n=Math.floor(t.left),a=Math.floor(t.width),r=e.clientX-n;r<0&&(r=0),r>a&&(r=a);var o=this._getValueByCursorPosition(e.clientX);null!==this.state.tooltipOffset&&o===this.state.tooltipValue||this.setState({tooltipOffset:r,tooltipValue:o})},t.prototype._hideTooltip=function(){this.setState({tooltipOffset:null})},t.prototype._formatValue=function(e){var t=this.props.counter;return"function"==typeof t?t(e):e},t.prototype._setActive=function(e){this.setState({isActive:e})},t.prototype._getSliderTrackStyle=function(e){return{width:e+"%",willChange:"width"}},t.prototype._getTooltipStyle=function(e){return{transform:"translate3d("+e+"px, 0px, 0px)",WebkitTransform:"translate3d("+e+"px, 0px, 0px)",willChange:"transform"}},t.prototype._getValueByCursorPosition=function(e){var t=this.props,n=t.min,a=t.max,r=t.step,o=this.refs.sliderTrack.getBoundingClientRect(),i=Math.floor(o.left),s=Math.floor(o.width),l=e-i;l<0&&(l=0),l>s&&(l=s);var c=l/s*100/100,u=Math.round(c*(a*r/r)+n-c*n);return r>1&&u%r!=0?u-u%r:u},t}(no.Component);tp.defaultProps={min:0,max:100,value:0,step:1,disabled:!1,counter:!0,tooltip:!1,autoHide:!1,onChange:function(){},onProgress:function(){}};var np=tp,ap=function(e){function t(n){Wa(this,t);var a=Ka(this,e.call(this,n));return a._onChangeVolume=a._onChangeVolume.bind(a),a}return Qa(t,e),t.prototype.render=function(){var e=this.props,t=e.volume,n=e.mute;return ao.a.createElement(Yu,{className:"popper-player-volume"},ao.a.createElement(np,{min:0,max:100,step:1,value:n?0:t,counter:!1,onProgress:this._onChangeVolume}))},t.prototype._onChangeVolume=function(e){so.a.control.setVolume(Number(e/100),!0)},t}(no.Component),rp=Gu(Object(ro.b)(function(e){var t=e.player;return{volume:Math.round(100*t.control.volume),mute:t.control.mute}})(ap)),op=function(e){function t(){return $a(this,t),Ja(this,e.apply(this,arguments))}return Za(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.type,a=e.id,r=e.value,o=e.checked,i=Po()("input-"+n,t,{"is-checked":o}),s=null===a?"label":"span";return ao.a.createElement(s,{className:i},ao.a.createElement("input",{className:"input-control",id:a,type:"radio"===n?"radio":"checkbox",value:r,checked:o,onChange:this._onChange.bind(this)}))},t.prototype._onChange=function(e){var t=e.target,n=t.value,a=t.checked;this.props.onChange(""!==n?n:a)},t}(no.Component);op.defaultProps={className:"",type:"checkbox",id:null,value:"",checked:!1,onChange:function(){}},op.TYPE_CHECKBOX="checkbox",op.TYPE_RADIO="radio",op.TYPE_SWITCH="switch";var ip=op,sp=ao.a.createElement("li",{className:"setting-item"},ao.a.createElement("div",{className:"setting-label"},"Audio Quality")),lp=ao.a.createElement("div",{className:"setting-label"},"Standard"),cp=ao.a.createElement("div",{className:"setting-info"},"128kb/s"),up=ao.a.createElement("div",{className:"setting-label"},"High Quality"),pp=ao.a.createElement("div",{className:"setting-info"},"320kb/s"),dp=ao.a.createElement(ei.a,{className:"setting-discover-link link-animated",to:"/offers",target:"_blank"},"DISCOVER"),fp=ao.a.createElement("div",{className:"setting-label"},"HiFi"),hp=ao.a.createElement("div",{className:"setting-info"},"1 411kb/s"),mp=ao.a.createElement(ei.a,{className:"setting-discover-link link-animated",to:"/offers/hifi",target:"_blank"},"DISCOVER"),yp=ao.a.createElement("div",{className:"setting-notice"},"Stream your music in lossless quality"),bp=ao.a.createElement("div",{className:"setting-label"},"Normalize volume"),_p=ao.a.createElement("div",{className:"setting-label"},"Electron UI"),gp=ao.a.createElement("div",{className:"setting-label"},"Fader"),vp=function(e){function t(n){tr(this,t);var a=nr(this,e.call(this,n));a._onAudioQualityChange=a._onAudioQualityChange.bind(a),a._onAudioQualityUpdate=a._onAudioQualityUpdate.bind(a),a._onHtml5PlayerUpdate=a._onHtml5PlayerUpdate.bind(a),a._onNormalizeUpdate=a._onNormalizeUpdate.bind(a),a._onElectronUIUpdate=a._onElectronUIUpdate.bind(a),a._onFadeChange=a._onFadeChange.bind(a),a._onFadeUpdate=a._onFadeUpdate.bind(a),a._onDiscoverClick=a._onDiscoverClick.bind(a);var r=lo.a.get("USER.SETTING.site.player_html5");return a.state={hq:so.a.isHq(),html5Player:void 0!==r?r:so.a.html5.supported,normalize:so.a.normalize,electronUI:jo.a.current===jo.a.electron,fade:Math.round(10*so.a.fade)},a}return ar(t,e),t.prototype.componentDidMount=function(){go.a.subscribe(go.a.player.hq,this._onAudioQualityChange,"player_bottom"),go.a.subscribe(go.a.player.fade,this._onFadeChange,"player_bottom"),go.a.subscribe(go.a.user.settingChanged,this._onUserSettingChange,"player_bottom")},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("player_bottom")},t.prototype.render=function(){return ao.a.createElement(Yu,{className:"popper-player-settings"},this._renderAudioQuality(),ao.a.createElement("ul",{className:"setting-menu"},this._renderHtml5Player(),this._renderNormalize(),this._renderElectronUI()),this._renderSoundFade())},t.prototype._renderAudioQuality=function(){return ao.a.createElement("ul",{className:"setting-menu"},sp,this._renderAudioQualityStandard(),this._renderAudioQualityHigh(),this._renderAudioQualityLossless())},t.prototype._renderAudioQualityStandard=function(){var e=this.state.hq;return ao.a.createElement("li",{className:"setting-item"},lp,cp,ao.a.createElement("div",{className:"setting-input"},ao.a.createElement(ip,{type:ip.TYPE_RADIO,value:"128",checked:!e,onChange:this._onAudioQualityUpdate})))},t.prototype._renderAudioQualityHigh=function(){var e=this.state.hq;return ao.a.createElement("li",{className:"setting-item"},up,pp,ao.a.createElement("div",{className:"setting-input"},lo.a.get("USER.OPTIONS.web_hq")?ao.a.createElement(ip,{type:ip.TYPE_RADIO,value:"320",checked:e,onChange:this._onAudioQualityUpdate}):dp))},t.prototype._renderAudioQualityLossless=function(){return ao.a.createElement("li",{className:"setting-item"},fp,hp,ao.a.createElement("div",{className:"setting-input"},lo.a.get("USER.OPTIONS.web_lossless")?ao.a.createElement(ip,{type:ip.TYPE_RADIO,value:"1411",checked:!1,onChange:this._onAudioQualityUpdate}):mp),yp)},t.prototype._renderHtml5Player=function(){if(!so.a.html5.supported||"Firefox"===xl.a.browser)return null;var e=this.state.html5Player;return ao.a.createElement("li",{className:"setting-item"},ao.a.createElement("div",{className:"setting-label"},Object(Co.a)("Player HTML5")),ao.a.createElement("div",{className:"setting-input"},ao.a.createElement(ip,{type:ip.TYPE_SWITCH,checked:e,onChange:this._onHtml5PlayerUpdate})))},t.prototype._renderNormalize=function(){if(!so.a.html5.active||!uo.a.isAllowed("employee_feature")&&!uo.a.isAllowed("business"))return null;var e=this.state.normalize;return ao.a.createElement("li",{className:"setting-item"},bp,ao.a.createElement("div",{className:"setting-input"},ao.a.createElement(ip,{type:ip.TYPE_SWITCH,checked:e,onChange:this._onNormalizeUpdate})))},t.prototype._renderElectronUI=function(){if(!uo.a.isAllowed("electron_ui"))return null;var e=this.state.electronUI;return ao.a.createElement("li",{className:"setting-item"},_p,ao.a.createElement("div",{className:"setting-input"},ao.a.createElement(ip,{type:ip.TYPE_SWITCH,checked:e,onChange:this._onElectronUIUpdate})))},t.prototype._renderSoundFade=function(){if(so.a.html5.active)return null;var e=this.state.fade;return ao.a.createElement("ul",{className:"setting-menu"},ao.a.createElement("li",{className:"setting-item"},gp,ao.a.createElement("div",{className:"setting-input"},ao.a.createElement(np,{min:0,max:10,step:1,value:e,onChange:this._onFadeUpdate}))))},t.prototype._onAudioQualityChange=function(e,t){var n=this;this.setState({hq:t},function(){n.props.onHqAudioToggle({hasHqAudio:t})})},t.prototype._onAudioQualityUpdate=function(e){so.a.control.setHq("320"===e)},t.prototype._onHtml5PlayerUpdate=function(e){this.setState({html5Player:e},function(){ni.a.set({site:{player_html5:e}})})},t.prototype._onNormalizeUpdate=function(e){this.setState({normalize:e},function(){so.a.control.setNormalize(e),ni.a.set({site:{player_normalize:e}})})},t.prototype._onElectronUIUpdate=function(e){this.setState({electronUI:e},function(){ni.a.set({site:{version:e?jo.a.electron:jo.a.web}})})},t.prototype._onFadeChange=function(e,t){this.setState({fade:Math.round(10*t)})},t.prototype._onFadeUpdate=function(e){so.a.control.changeFadeValue(e/10)},t.prototype._onUserSettingChange=function(e,t){t.data&&t.data.site&&(void 0===t.data.site.player_html5&&void 0===t.data.site.version||hi.a.reload())},t.prototype._onDiscoverClick=function(e){e.preventDefault(),Object(hi.b)(e.target.href)},t}(no.Component),Ep=Gu(Object(ro.b)(null,{onHqAudioToggle:wl.b})(vp)),Op=ao.a.createElement(Ep,{trigger:"click"},ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},ao.a.createElement(Mo.a,{name:"equalizer",size:"auto"}))),Tp=function(e){function t(n){or(this,t);var a=ir(this,e.call(this,n));return a._onCycleRepeat=a._onCycleRepeat.bind(a),a._onToggleShuffle=a._onToggleShuffle.bind(a),a._onToggleQueuelist=a._onToggleQueuelist.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a}return sr(t,e),t.prototype.render=function(){return ao.a.createElement("div",{className:"player-options"},ao.a.createElement("ul",{className:"option-list"},ao.a.createElement("li",{className:"option-item"},ao.a.createElement("ul",{className:"svg-icon-group"},ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderRepeat()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderShuffle()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderVolume()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderSettings()))),this._renderQueuelist()))},t.prototype._renderRepeat=function(){var e=this.props,t=e.repeat,n=e.playerUI,a=Po()({"is-active":t>0&&n.repeat}),r="";if(n.repeat)switch(r=Object(Co.a)("Répéter"),t){case so.a.repeatLevel.REPEAT_OFF:r=Object(Co.a)("Réécouter tous les titres");break;case so.a.repeatLevel.REPEAT_ALL:r=Object(Co.a)("Réécouter ce titre");break;case so.a.repeatLevel.REPEAT_SINGLE:r=Object(Co.a)("Désactiver la fonction Répéter")}return ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:!n.repeat,"aria-label":r,onClick:this._onCycleRepeat},ao.a.createElement(Mo.a,{className:a,name:t===so.a.repeatLevel.REPEAT_SINGLE?"repeat-one":"repeat",size:"auto"}))},t.prototype._renderShuffle=function(){var e=this.props,t=e.shuffle,n=e.playerUI,a=Po()({"is-active":t&&n.shuffle}),r="";return n.shuffle&&(r=t?Object(Co.a)("Désactiver le mode aléatoire"):Object(Co.a)("Activer le mode aléatoire")),ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:n.chromecastActive||!n.shuffle,"aria-label":r,onClick:this._onToggleShuffle},ao.a.createElement(Mo.a,{className:a,name:"shuffle",size:"auto"}))},t.prototype._renderVolume=function(){var e=this.props,t=e.mute,n=e.playerUI,a=t?"volume-off":"volume";return ao.a.createElement(rp,{trigger:"hover",isDisabled:!n.volume},ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:!n.volume,onClick:this._onToggleMute},ao.a.createElement(Mo.a,{name:a,size:"auto"})))},t.prototype._renderSettings=function(){return Op},t.prototype._renderQueuelist=function(){var e=this.props,t=e.playerUI,n=e.uiType,a=e.track,r=e.isPlayerFull;if(!t.queuelist)return null;var o=Po()("queuelist",{"is-active":r});return ao.a.createElement("li",{className:"option-item"},ao.a.createElement("button",{className:o,type:"button",onClick:this._onToggleQueuelist},ao.a.createElement(vl.a,{type:n===Ou.a.PODCAST?co.a.Episode:co.a.Album,height:28,width:28,data:a,coverLink:!1}),ao.a.createElement("div",{className:"queuelist-label"},Object(Co.a)("File d'attente"))))},t.prototype._onCycleRepeat=function(){so.a.control.setRepeat(this.props.repeat===so.a.repeatLevel.REPEAT_SINGLE?so.a.repeatLevel.REPEAT_OFF:this.props.repeat+1)},t.prototype._onToggleShuffle=function(){so.a.control.setShuffle(!this.props.shuffle)},t.prototype._onToggleQueuelist=function(){this.props.setPlayerFull({isPlayerFull:!this.props.isPlayerFull})},t.prototype._onToggleMute=function(){so.a.control.mute(!this.props.mute)},t}(no.Component),jp=Object(ro.b)(function(e){return{volume:e.player.control.volume,shuffle:e.player.control.shuffle,repeat:e.player.control.repeat,mute:e.player.control.mute,track:e.player.music.track,isPlayerFull:e.player.config.isPlayerFull,playerUI:Object(mi.getInterfaceConfiguration)(e),uiType:Object(mi.getInterfaceType)(e)}},{setPlayerFull:mi.setPlayerFull})(Tp),Sp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wp=function(e){function t(n){cr(this,t);var a=ur(this,e.call(this,n));return a._containerRef=null,a._containerWidth=0,a._wrapperRef=null,a._childrenRef=null,a._gradientRef=null,a._scrollOffset=0,a._scrollWidth=0,a._frameId=null,a._isLastLoop=!1,a._onResize=rl()(a._measureText.bind(a),100),a.state={isTruncated:!1},a}return pr(t,e),t.prototype.componentDidMount=function(){this._measureText(),window.addEventListener("resize",this._onResize,!1)},t.prototype.componentWillReceiveProps=function(){var e=this;this.setState({isTruncated:!1},function(){e._measureText()})},t.prototype.componentWillUnmount=function(){this._clear(),window.removeEventListener("resize",this._onResize)},t.prototype.render=function(){var e=this,t=this.props.direction,n={};return this.state.isTruncated&&(n.onMouseEnter=function(){return e._start()},n.onMouseLeave=function(){return e._stop()},n.style=this._getWrapperStyle(0)),ao.a.createElement("div",{className:"marquee",dir:t,ref:function(t){return e._containerRef=t}},ao.a.createElement("div",Sp({className:"marquee-wrapper",ref:function(t){return e._wrapperRef=t}},n),this._renderContent(),this._renderContent(!1)),this._renderGradient("left"),this._renderGradient("right"))},t.prototype._renderContent=function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props,a=n.children,r=n.direction,o=this.state.isTruncated;if(!t&&!o)return null;if(t)return ao.a.createElement("div",{className:"marquee-content",ref:function(t){return e._childrenRef=t}},a);var i={paddingLeft:"ltr"===r?"24px":null,paddingRight:"rtl"===r?"24px":null};return ao.a.createElement("div",{className:"marquee-content",style:i},a)},t.prototype._renderGradient=function(e){if(!this.state.isTruncated)return null;var t=Po()("marquee-gradient",{"marquee-gradient-left":"left"===e,"marquee-gradient-right":"right"===e});return ao.a.createElement("span",{className:t,ref:this._getGradientRef(e)})},t.prototype._measureText=function(){var e=this;this._childrenRef&&this._containerRef&&this.setState({isTruncated:this._childrenRef.offsetWidth>this._containerRef.offsetWidth},function(){e._clear()})},t.prototype._start=function(){var e=this.props.onScrollStart;this._isLastLoop&&(this._isLastLoop=!1),this._isScrolling()||(this._scrollWidth=this._childrenRef.offsetWidth,this._containerWidth=this._containerRef.offsetWidth,"function"==typeof e&&e(),this._frameId=window.requestAnimationFrame(this._move.bind(this)))},t.prototype._stop=function(){this._isScrolling()&&(this._isLastLoop=!0)},t.prototype._move=function(){if(this._frameId=window.requestAnimationFrame(this._move.bind(this)),this._scrollOffset=Math.ceil(this._scrollOffset+.8),this._scrollOffset>this._scrollWidth+24&&(this._scrollOffset=0),this._moveTo(this._scrollOffset),0===this._scrollOffset&&this._isLastLoop){var e=this.props.onScrollEnd;"function"==typeof e&&e(),this._clear()}},t.prototype._moveTo=function(e){this._wrapperRef&&this._gradientRef&&(this._setStyle(this._wrapperRef,this._getWrapperStyle(this._getTranslateOffset(e))),this._setStyle(this._gradientRef,{opacity:this._isScrolling()&&(!this._isLastLoop||e>0&&e<this._scrollWidth)?null:0}))},t.prototype._clear=function(){this._isScrolling()&&window.cancelAnimationFrame(this._frameId),this._moveTo(0),this._frameId=null,this._isLastLoop=!1,this._scrollOffset=0},t.prototype._setStyle=function(e,t){e.style&&Object.assign(e.style,t)},t.prototype._getWrapperStyle=function(e){return{transform:"translate3d("+e+"px, 0px, 0px)",willChange:"transform"}},t.prototype._getGradientRef=function(e){var t=this,n=this.props.direction;return"ltr"===n&&"left"===e||"rtl"===n&&"right"===e?function(e){return t._gradientRef=e}:null},t.prototype._getTranslateOffset=function(e){var t=this.props.direction;return 0!==e&&"ltr"===t?e-2*e:e},t.prototype._isScrolling=function(){return null!==this._frameId},t}(no.Component);wp.defaultProps={direction:"ltr",onScrollStart:function(){},onScrollEnd:function(){}};var Ap=wp,Pp=function(e){function t(n){fr(this,t);var a=hr(this,e.call(this,n));return a._onSeek=a._onSeek.bind(a),a}return mr(t,e),t.prototype.shouldComponentUpdate=function(e){return e.position!==this.props.position},t.prototype.render=function(){var e=this.props,t=e.playerUI,n=e.duration,a=e.position,r=e.seekAllowed;return t.seek?ao.a.createElement(np,{max:n,value:a,counter:Ri.G,onChange:this._onSeek,disabled:!r,tooltip:!0,autoHide:!0}):null},t.prototype._onSeek=function(e){var t=this.props.duration;e>=t?so.a.control.nextSong():so.a.isPlaying()||so.a.isPaused()?so.a.control.seek(e/t):(so.a.getTrackList()[0].OFFSET=e/t*t,so.a.control.play())},t}(no.Component),Cp=Object(ro.b)(function(e){return{buffer:e.player.control.buffer,position:Math.floor(e.player.control.position),duration:e.player.music.trackDuration,playerUI:Object(mi.getInterfaceConfiguration)(e),seekAllowed:Object(yi.c)(e)}})(Pp),Np=ao.a.createElement("div",{className:"track-seekbar"},ao.a.createElement(Cp,null)),kp=ao.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},ao.a.createElement(Mo.a,{name:"add",size:"auto"})),Rp=function(e){function t(n){br(this,t);var a=_r(this,e.call(this,n));return a._onDislikeClick=a._onDislikeClick.bind(a),a}return gr(t,e),t.prototype.render=function(){var e=this.props.playerUI;return ao.a.createElement("div",{className:"player-track"},ao.a.createElement("div",{className:"track-container"},ao.a.createElement("div",{className:"track-heading"},this._renderLabel(),ao.a.createElement("div",{className:"track-title"},ao.a.createElement(Ap,{direction:lo.a.get("DIRECTION")},this._renderTitle(),e.subTitle?" • ":null,this._renderSubTitle())),ao.a.createElement("div",{className:"track-actions"},ao.a.createElement("ul",{className:"svg-icon-group"},ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderDislike()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderLike()),ao.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu())))),Np))},t.prototype._renderLabel=function(){var e=this.props,t=e.playerUI,n=e.uiType,a=e.isFlow,r=e.isUpnext;if(!t.label)return null;var o=Object(Co.a)("MIX");return n===Ou.a.AD?o=Object(Co.a)("PUBLICITÉ"):n===Ou.a.LIVESTREAM?o=Object(Co.a)("EN DIRECT"):r?o=Object(Co.a)("RECOMMANDÉ"):a&&(o=Object(Co.a)("FLOW")),ao.a.createElement("span",{className:"track-label"},o)},t.prototype._renderTitle=function(){var e=this.props,t=e.trackTitle;return e.playerUI.title?null===Tu(this.props)?t:ao.a.createElement(ei.a,{className:"track-link",to:Tu(this.props)},t):null},t.prototype._renderSubTitle=function(){var e=this,t=this.props,n=t.trackArtists;return t.playerUI.subTitle?n.map(function(t,n){return[n>0?", ":"",ao.a.createElement(ei.a,{className:"track-link",key:t.ART_ID,to:ju(e.props,t)},t.ART_NAME)]}):null},t.prototype._renderLike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.like?ao.a.createElement(Si.a,{className:"svg-icon-group-btn",type:"song",context:"player",tooltip:!0,id:String(n)}):null},t.prototype._renderDislike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.dislike?ao.a.createElement(ji.a,{className:"svg-icon-group-btn",tooltip:!0,id:n,onClickCallback:this._onDislikeClick}):null},t.prototype._renderContextMenu=function(){var e=this.props,t=e.track,n=e.id,a=e.context,r=e.playerUI,o=e.isFavorite,i=e.isRadio;if(!r.contextMenu)return null;var s={position:"right",type:"track",forceShowPlaylists:!0,anchor:kp,data:{SONG:t,PLAYLIST_ID:a.ID},id:Number(n),context:"player",isFavorite:o,isRadio:i};return ao.a.createElement(wi.a,s)},t.prototype._onDislikeClick=function(){this.context.onNext()},t}(no.Component);Rp.contextTypes={onNext:mo.a.func};var Dp=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,context:e.player.music.context,isFlow:e.player.config.isFlow,isUpnext:e.player.config.isUpnext,isFavorite:e.player.music.isFavorite,isRadio:e.player.config.isRadio,trackTitle:Object(bi.l)(e),trackArtists:Object(bi.j)(e),playerUI:Object(mi.getInterfaceConfiguration)(e),uiType:Object(mi.getInterfaceType)(e)}})(Rp),Ip=ao.a.createElement("div",{className:"player-bottom"},ao.a.createElement(Zu,null),ao.a.createElement(Dp,null),ao.a.createElement(jp,null)),xp=function(e){function t(n){Er(this,t);var a=Or(this,e.call(this,n));return a.state={fading:!1},a._onFading=a._onFading.bind(a),a._onFinish=a._onFinish.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onTrackRecognized=a._onTrackRecognized.bind(a),a._onChangePlayerType=a._onChangePlayerType.bind(a),a._onTracklistChange=a._onTracklistChange.bind(a),a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onPlayingChange=a._onPlayingChange.bind(a),a._onPauseChange=a._onPauseChange.bind(a),a._onTracklistFinish=a._onTracklistFinish.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onLoaded=a._onLoaded.bind(a),a._onTrackDurationChange=a._onTrackDurationChange.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a._onRepeatChange=a._onRepeatChange.bind(a),a._onSimultaneousAccess=a._onSimultaneousAccess.bind(a),a._onShuffleChange=a._onShuffleChange.bind(a),a._setAvailableStatus=a._setAvailableStatus.bind(a),a._setConnectingStatus=a._setConnectingStatus.bind(a),a._setCastingStatus=a._setCastingStatus.bind(a),a._setChromecastActiveState=a._setChromecastActiveState.bind(a),a}return Tr(t,e),t.prototype.getChildContext=function(){return{onNext:this._next.bind(this)}},t.prototype.componentDidMount=function(){this.props.initPlayer(),go.a.ready(go.a.user.userReady,this._onToggleFavorite),go.a.subscribe(go.a.player.displayCurrentSong,this._onTrackChange,"player"),go.a.subscribe(go.a.player.displayRecognizedTrack,this._onTrackRecognized,"player"),go.a.subscribe(go.a.player.changePlayerType,this._onChangePlayerType,"player"),go.a.subscribe(go.a.player.tracklist_changed,this._onTracklistChange,"player"),go.a.subscribe(go.a.user.addFavorite,this._onToggleFavorite,"player"),go.a.subscribe(go.a.user.deleteFavorite,this._onToggleFavorite,"player"),go.a.subscribe(go.a.player.playing,this._onPlayingChange,"player"),go.a.subscribe(go.a.player.paused,this._onPauseChange,"player"),go.a.subscribe(go.a.player.finishTrackList,this._onTracklistFinish,"player"),go.a.subscribe(go.a.player.position,this._onPositionChange,"player"),go.a.subscribe(go.a.player.pourcentLoaded,this._onLoaded,"player"),go.a.subscribe(go.a.player.duration,this._onTrackDurationChange,"player"),go.a.subscribe(go.a.player.volume_changed,this._onVolumeChange,"player"),go.a.subscribe(go.a.player.mute_changed,this._onToggleMute,"player"),go.a.subscribe(go.a.player.repeat_changed,this._onRepeatChange,"player"),go.a.subscribe(go.a.player.shuffle_changed,this._onShuffleChange,"player"),go.a.subscribeOnce(go.a.player.playerLoaded,function(){so.a.initRestriction(),so.a.restoreSetting(lo.a.get("USER.SETTING"))}),go.a.subscribe(go.a.player.fading,this._onFading,"player"),go.a.subscribe(go.a.player.finish,this._onFinish,"player"),go.a.subscribe(go.a.live.simultaneousAccess,this._onSimultaneousAccess,"player"),go.a.subscribe(go.a.chromecast.available,this._setAvailableStatus,"player"),go.a.subscribe(go.a.chromecast.connecting,this._setConnectingStatus,"player"),go.a.subscribe(go.a.chromecast.casting,this._setCastingStatus,"player"),go.a.subscribe(go.a.chromecast.loading,this._setChromecastActiveState,"player"),go.a.subscribe(go.a.user.settingChanged,function(e,t){t.data&&t.data.site&&t.data.site.labs&&void 0!==t.data.site.labs.FirefoxHTML5&&hi.a.reload()})},t.prototype.componentWillUpdate=function(e){this.props.id!==e.id&&go.a.trigger(go.a.menu.contextMenuClose)},t.prototype.componentWillUnmount=function(){go.a.unsubscribeAll("player")},t.prototype.render=function(){var e=this.props,t=e.track,n=e.playerType;return 0===bo()(t)&&"ads"!==n?null:ao.a.createElement("div",{className:"page-player",id:"page_player"},this._renderPlayerBottom(),this._renderPlayerFull())},t.prototype._renderPlayerBottom=function(){return Ip},t.prototype._renderPlayerFull=function(){var e={mountOnEnter:!0,unmountOnExit:!0,timeout:500,in:this.props.isPlayerFull,onEntered:function(){document.body.classList.add("has-scrollbar-disabled")},onExiting:function(){document.body.classList.remove("has-scrollbar-disabled")}};return ao.a.createElement(Eu.Transition,e,function(e){return ao.a.createElement(Mu,{status:e})})},t.prototype._onFading=function(){lo.a.get("USER.OPTIONS.ads_audio")&&null!==so.a.getAudioAds()||(this.setState({fading:!0}),so.a.control.nextSong(!0))},t.prototype._onFinish=function(){this.state.fading||so.a.control.nextSong(!0),this.setState({fading:!1})},t.prototype._onTrackChange=function(){this.props.updateTrack()},t.prototype._onTrackRecognized=function(e,t){t?this.props.updateRecognizedTrack({track:t}):this._onTrackChange()},t.prototype._onChangePlayerType=function(){this.props.updatePlayerType()},t.prototype._onTracklistChange=function(){this.props.updateTracklist(),go.a.trigger(go.a.list.deselectAll)},t.prototype._onToggleFavorite=function(e,t){(!t||"song"===t.type&&String(t.id)===this.props.id)&&this.props.updateFavorite()},t.prototype._onPlayingChange=function(e,t){this.props.setPlaying({playing:t})},t.prototype._onPauseChange=function(e,t){this.props.setPaused({paused:t})},t.prototype._onTracklistFinish=function(){this.props.setTracklistFinished()},t.prototype._onPositionChange=function(e,t){this.props.setPosition({position:t})},t.prototype._onLoaded=function(e,t){this.props.setBuffer({buffer:t})},t.prototype._onTrackDurationChange=function(e,t){this.props.setTrackDuration({trackDuration:t})},t.prototype._onVolumeChange=function(e,t){this.props.setVolume({volume:t/100})},t.prototype._onToggleMute=function(e,t){this.props.setMute({mute:t})},t.prototype._onRepeatChange=function(e,t){this.props.setRepeat({repeat:t})},t.prototype._onSimultaneousAccess=function(){var e=this.props,t=e.playing,n=e.playerType;t&&"ads"!==n&&(so.a.control.pause(),_o.a.open("/lightbox/limitation.php"))},t.prototype._onShuffleChange=function(e,t){this.props.setShuffle({shuffle:t}),go.a.trigger(go.a.list.deselectAll)},t.prototype._setChromecastActiveState=function(e,t){this.props.setLoading({loading:t}),this.props.setChromecastActiveState({loading:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._setAvailableStatus=function(e,t){this.props.setChromecastAvailableStatus({status:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._setConnectingStatus=function(e,t){this.props.setChromecastConnectingStatus({status:t,chunksInfo:di.a.getChunksInfo()})},t.prototype._setCastingStatus=function(e,t){this.props.setChromecastCastingStatus({status:t,active:di.a.isActive(),chunksInfo:di.a.getChunksInfo()})},t.prototype._seek=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.props.canSeek&&(void 0===t&&(t=e.pageX/e.currentTarget.parentNode.offsetWidth),so.a.control.seek(t))},t.prototype._next=function(){fi.a.intent("next"),this.props.skipRadioAllowed?so.a.control.nextSong():pi.b.display("flow_skip_push",{})},t}(no.Component);xp.childContextTypes={onNext:mo.a.func},xp.defaultProps={playerType:"",isPlayerFull:!1,showUpNextNotification:!1};var Lp=Object(ro.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,playing:e.player.control.playing,playerType:e.player.config.playerType,isPlayerFull:e.player.config.isPlayerFull,skipRadioAllowed:e.player.control.skipRadioAllowed,canSeek:Object(yi.c)(e)}},{initPlayer:bi.n,setPlaying:yi.l,setPaused:yi.k,setLoading:yi.i,setTracklistFinished:yi.p,setPosition:yi.m,setBuffer:yi.h,setTrackDuration:bi.o,setVolume:yi.q,setRepeat:yi.n,setShuffle:yi.o,setMute:yi.j,updateFavorite:bi.p,updateTrack:bi.r,updateRecognizedTrack:bi.q,updatePlayerType:mi.updatePlayerType,updateTracklist:bi.s,setChromecastActiveState:_i.b,setChromecastAvailableStatus:_i.c,setChromecastConnectingStatus:_i.e,setChromecastCastingStatus:_i.d})(xp),Mp=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Up=ao.a.createElement(Jo.a,null),Fp=ao.a.createElement(function(){return ao.a.createElement("div",{className:"page-shadow"},pu,du,fu,hu,mu,ao.a.createElement("input",{id:"checkForm",name:"checkForm",type:"hidden",value:lo.a.get("checkForm")}),yu,bu)},null),Bp=ao.a.createElement(Ko,null),Hp=ao.a.createElement(vu,null),Gp=ao.a.createElement(Jc,null),zp=ao.a.createElement(function(){return Zc},null),Yp=ao.a.createElement(Lp,null),qp=function(e){function t(n){Sr(this,t);var a=wr(this,e.call(this,n));return a._onLiveFeed=a._onLiveFeed.bind(a),a}return Ar(t,e),t.prototype.getChildContext=function(){var e=t.useAppState?this.props.route.appState:void 0;return t.useAppState=!1,{appState:e,location:this.props.location,reduxStore:this.props.route.store}},t.prototype.componentWillMount=function(){t.currentPage=this.props.children.type,window.reactRouter=this.context.router},t.prototype.componentDidMount=function(){vo.a.addInternalChannel("-1_"+lo.a.get("USER.USER_ID")+"_USERFEED_"+lo.a.get("USER.USER_ID")),vo.a.init(),go.a.subscribe(go.a.live.feed,this._onLiveFeed),go.a.trigger(go.a.navigation.page_displayed,{path:this.props.location.pathname}),go.a.resolve(go.a.navigation.page_initialized),this._openModal(),lo.a.get("USER.ONBOARDING_MODAL")&&_o.a.open("/lightbox/onboarding",!1,{},!0,this.props.route.store)},t.prototype.shouldComponentUpdate=function(e){return this.props.location.pathname!==e.location.pathname},t.prototype.componentWillUpdate=function(e){document.body.scrollTop=0,go.a.trigger(go.a.navigation.page_changed,{path:e.location.pathname})},t.prototype.componentDidUpdate=function(){t.currentPage=this.props.children.type,go.a.trigger(go.a.navigation.page_displayed,{path:this.props.location.pathname})},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.live.feed,this._onLiveFeed)},t.prototype.render=function(){return ao.a.createElement("div",null,Up,this._renderSidebar(),this._renderPanels(),this._renderMain(),this._renderPlayer(),Fp,ao.a.createElement($o,{id:To.a.HotKeys}),Bp)},t.prototype._renderSidebar=function(){return jo.a.current===jo.a.electron?Hp:Gp},t.prototype._renderPanels=function(){return jo.a.current===jo.a.electron?null:zp},t.prototype._renderMain=function(){return ao.a.createElement("main",{className:"page-main",id:"page_content",role:"main"},this.props.children)},t.prototype._renderPlayer=function(){return jo.a.current===jo.a.electron?Yp:null},t.prototype._onLiveFeed=function(e,t){if(t.length){var n=t[0];switch(n.ACTION){case"NEW_MESSAGE":Eo.a.addMessage(n);break;case"FRIEND_FOLLOW":case"PLAYLIST_COMMENT":case"SHARE":Eo.a.addNotification(n);break;default:Eo.a.addTicker(n,!0)}}},t.prototype._openModal=function(){2===bo()(this.props.route.modalPath)&&("modal"===this.props.route.modalPath.type?_o.a.open(decodeURIComponent(this.props.route.modalPath.page)):fo.a.facebox({ajax:decodeURIComponent(this.props.route.modalPath.page)}))},Mp(t,null,[{key:"currentPage",set:function(e){var t=(e=e.WrappedComponent||e).displayName;t||(Oo.a.error("Current page main component is missing display name, this can prevent some components (like ads) to know on which page the user is and can affect their behavior."),t=""),"profile"===t&&document.location.pathname.indexOf("/loved")&&(t="loved"),"page"!==t||"/"!==document.location.pathname&&!/^\/[a-z]{2}\/$/.test(document.location.pathname)?"page"===t&&-1!==document.location.pathname.indexOf("/channels")&&(t=-1!==document.location.pathname.indexOf("/explore")?"channels_explore":"channels"):t="home",this._currentPage=t},get:function(){return this._currentPage}}]),t}(no.Component);qp.contextTypes={router:mo.a.object},qp.childContextTypes={appState:mo.a.object,location:mo.a.object,reduxStore:mo.a.object},qp.useAppState=!0;var Vp=qp;window.getCurrentPage=function(){return qp.currentPage};var Wp=void 0,Kp=ao.a.createElement("div",{className:"abp-banner-visual"}),Qp=ao.a.createElement("a",{className:"abp-banner-close-icon"},ao.a.createElement("span",{className:"icon icon-cancel"})),Xp=function(e){function t(n){Cr(this,t);var a=Nr(this,e.call(this,n));return a._sendTracking=a._sendTracking.bind(a),a._isEligible=a._isEligible.bind(a),a._updateTimer=a._updateTimer.bind(a),a._adblockDetected=a._adblockDetected.bind(a),a._removeBanner=a._removeBanner.bind(a),a.state={timer:n.timer,display:!1},a}return kr(t,e),t.prototype.componentDidMount=function(){this._checkAdBlock()},t.prototype.componentWillUnmount=function(){clearInterval(Wp)},t.prototype.getTrackingParams=function(){return{group:this._getGroup()}},t.prototype.render=function(){return this.state.display?ao.a.createElement("div",{className:"abp-banner-container"},ao.a.createElement("div",{className:"abp-banner"},ao.a.createElement("div",{className:"abp-banner-close"},this._renderCloseButton()),Kp,ao.a.createElement("h2",{className:"heading-2"},this._getTitle()),ao.a.createElement("h3",{className:"heading-3"},Object(Co.a)("La publicité nous permet de vous proposer Deezer gratuitement. C’est grâce à elle que nous pouvons soutenir tous les artistes que vous écoutez.")),ao.a.createElement("div",{className:"abp-banner-cta"},ao.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this._sendTracking,"data-link":"howto","data-group":this._getGroup()},ao.a.createElement("a",{className:"label",href:this._getHowToUrl(),target:"_blank"},Object(Co.a)("Comment désactiver Adblock"))),ao.a.createElement("a",{className:"abp-banner-link",href:this._getPollUrl(),target:"_blank",onClick:this._sendTracking,"data-link":"poll","data-group":this._getGroup()},Object(Co.a)("Pas envie. Pourquoi ?"))))):null},t.prototype._renderCloseButton=function(){return this.state.timer>0?ao.a.createElement("span",null,Object(Co.c)("Vous pourrez fermer dans %s seconde","Vous pourrez fermer dans %s secondes",{sprintf:[this.state.timer],count:this.state.timer})):ao.a.createElement("span",{"data-link":"close",onClick:this._removeBanner},Qp)},t.prototype._checkAdBlock=function(){void 0===window.blockAdBlock?this._adblockDetected():window.blockAdBlock.onDetected(this._adblockDetected)},t.prototype._adblockDetected=function(){void 0!==lo.a.get("USER")&&0!==lo.a.get("USER.USER_ID")&&!0===lo.a.get("USER.OPTIONS.ads_display")&&(vo.a.log.send("adblock",{event:"onDisplay",properties:{adsClass:"page"===window.getCurrentPage()?"home":window.getCurrentPage()}}),this._isEligible()&&(Wp=setInterval(this._updateTimer,1e3),this.tracking("adblock_banner"),this.setState({display:!0})))},t.prototype._updateTimer=function(){var e=this.state.timer-1;e<=0&&clearInterval(Wp),this.setState({timer:e})},t.prototype._getTitle=function(){switch(this._getGroup()){case"V2":return Object(Co.a)("Notre petit doigt nous dit que vous utilisez AdBlock pour Deezer !");case"V3":return Object(Co.a)("Bonjour %s, on dirait que vous utilisez AdBlock pour Deezer !",{sprintf:[lo.a.get("USER.BLOG_NAME")]});case"V4":return Object(Co.a)("Si vous voyez ce robot super mignon, c'est que vous utilisez Adblock.");default:return Object(Co.a)("On n'utiliserait pas AdBlock pour Deezer par hasard ?")}},t.prototype._getHowToUrl=function(){var e=xl.a.browser,t=void 0,n=lo.a.get("SETTING_LANG");switch("fr"!==n&&"de"!==n&&"es"!==n&&"pt-br"!==n&&"en-gb"!==n&&(n="en-gb"),e){case"Safari":t=207780015;break;case"Firefox":t=207075879;break;default:t=207075869}return"http://support.deezer.com/hc/"+n+"/articles/"+t},t.prototype._getPollUrl=function(){var e=void 0;switch(lo.a.get("SETTING_LANG")){case"fr":e="nxfmss";break;case"es":e="WhnVvS";break;case"de":e="ZTpnj0";break;case"pt-br":e="F7XnI1";break;default:e="bSi3Wt"}var t=xl.a.browser;switch(t){case"Safari":t="SF";break;case"Firefox":t="FX";break;default:t="CH"}return"https://deezer.typeform.com/to/"+e+"?un="+lo.a.get("USER.BLOG_NAME")+"&uid="+lo.a.get("USER.USER_ID")+"&br="+t},t.prototype._sendTracking=function(e){"button"===e.target.type&&Object(hi.b)(this._getHowToUrl(),"_blank"),this.tracking("adblock_banner",e.currentTarget)},t.prototype._getGroup=function(){return void 0===lo.a.get("USER.ABTEST.ad_adblock_banner")?"default":lo.a.get("USER.ABTEST.ad_adblock_banner.option")},t.prototype._removeBanner=function(e){this.tracking("adblock_banner",e.currentTarget),this.setState({display:!1},function(){go.a.trigger(go.a.ads.hideAdBlockBanner)})},t.prototype._isEligible=function(){if("undefined"==typeof localStorage)return!1;var e=(new Date).getDate();return Number(localStorage.getItem("adbBanner"))!==e&&(void 0!==lo.a.get("SPONSORED_TRACK_CONFIG")&&(localStorage.setItem("adbBanner",e),!0))},t}(no.Component),$p=Object(Qi.a)(Xp),Jp=function(e){function t(){var n,a,r;Dr(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Ir(this,e.call.apply(e,[this].concat(i))),a._onPageChange=function(){a.props.fetchAds(window.getCurrentPage(),"navigation")},r=n,Ir(a,r)}return xr(t,e),t.prototype.componentDidMount=function(){this.props.fetchAds(window.getCurrentPage(),"initial"),go.a.subscribe(go.a.navigation.page_displayed,this._onPageChange)},t.prototype.componentWillUnmount=function(){go.a.unsubscribe(go.a.navigation.page_displayed,this._onPageChange)},t.prototype.render=function(){return null},t}(no.Component),Zp=24e4,ed=function(e){function t(){var n,a,r;Mr(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Ur(this,e.call.apply(e,[this].concat(i))),a._onPlayerPlaying=function(e,t){a._startTimer()},a._onPlayerPaused=function(e,t){a._startTimer()},a._onTimeout=function(){a._clearTimer(),a.props.fetchAds(window.getCurrentPage(),"inactivity"),a._startTimer()},a._startTimer=function(){a._isActive||(a._isActive=!0,a._timer=setTimeout(a._onTimeout,Zp))},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._resetTimer=function(){a._clearTimer(),a._startTimer()},a._isActive=!1,r=n,Ur(a,r)}return Fr(t,e),t.prototype.componentDidMount=function(){so.a.playing||this._resetTimer(),go.a.subscribe(go.a.ads.refreshDisplay,this._resetTimer),go.a.subscribe(go.a.navigation.page_displayed,this._resetTimer),go.a.subscribe(go.a.player.playing,this._onPlayerPlaying),go.a.subscribe(go.a.player.paused,this._onPlayerPaused),go.a.subscribe(go.a.player.finishTrackList,this._resetTimer)},t.prototype.componentWillUnmount=function(){this._clearTimer(),go.a.unsubscribe(go.a.ads.refreshDisplay,this._resetTimer),go.a.unsubscribe(go.a.navigation.page_displayed,this._resetTimer),go.a.unsubscribe(go.a.player.playing,this._onPlayerPlaying),go.a.unsubscribe(go.a.player.paused,this._onPlayerPaused),go.a.unsubscribe(go.a.player.finishTrackList,this._resetTimer)},t.prototype.render=function(){return null},t}(no.Component),td="has-sponsored-track",nd=6e4,ad=54e4,rd=function(e){function t(){var n,a,r;Hr(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Gr(this,e.call.apply(e,[this].concat(i))),a._onPlay=function(){var e=so.a.helper.isSponsoredTrack(),t=so.a.helper.isSponsoredTrack(so.a.getNextSong());document.body.className=e?document.body.className+" "+td:document.body.className.replace(td,"").trim(),t||e||a._isActive||a._startTimer(),e&&a._clearTimer()},a._onAudioRequest=function(){a.props.fetchAds(window.getCurrentPage(),"audio"),window.addEventListener(go.a.ads.adEnd,a._onEnd),window.addEventListener(go.a.ads.adError,a._onEnd)},a._onEnd=function(){window.removeEventListener(go.a.ads.adEnd,a._onEnd),window.removeEventListener(go.a.ads.adError,a._onEnd),a.props.fetchAds(window.getCurrentPage(),"afterAudio"),a._delay=ad,a._startTimer()},a._onReady=function(){so.a.onAudioAdsReady()},a._startTimer=function(){a._isActive=!0,a._timer=setTimeout(a._onReady,a._delay)},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._isActive=!1,a._delay=nd,r=n,Gr(a,r)}return zr(t,e),t.prototype.componentDidMount=function(){lo.a.get("USER.OPTIONS.ads_audio")&&(go.a.subscribe(go.a.ads.callAudio,this._onAudioRequest),go.a.subscribe(go.a.player.play,this._onPlay),go.a.subscribe(go.a.ads.sponsoredTrackLoaded,this._clearTimer))},t.prototype.componentWillUnmount=function(){this._clearTimer(),go.a.unsubscribe(go.a.ads.callAudio,this._onAudioRequest),go.a.unsubscribe(go.a.player.play,this._onPlay),go.a.unsubscribe(go.a.ads.sponsoredTrackLoaded,this._clearTimer),window.removeEventListener(go.a.ads.adEnd,this._onEnd),window.removeEventListener(go.a.ads.adError,this._onEnd),!0===so.a.hasAudioAds&&go.a.trigger(go.a.ads.adEnd)},t.prototype.render=function(){return null},t}(no.Component),od=function(e){function t(){qr(this,t);var n=Vr(this,e.call(this));n._onBlur=function(){n.hasFocus=!1},n._onFocus=function(){n.hasFocus=!0},n._onError=function(){window.sas.clean(),n.setState({isReady:!1})},n._onBlockFormat=function(e,t){n._blockedFormats[Number(t)]=!0},n._updateView=function(e,t,a,r,o,i){if(n._sasCallRef===e){var s=Number(i.formatId);if(n._pendingFormatIds=n._pendingFormatIds.filter(function(e){return e!==s}),n._displayedFormatIds=n._displayedFormatIds.filter(function(e){return e!==s||t}),n._blockedFormats.hasOwnProperty(s)&&(n._displayedFormatIds=n._displayedFormatIds.filter(function(e){return e!==s}),delete n._blockedFormats[s]),0===n._pendingFormatIds.length){if(o){var l=document.body.className.replace(/has-ads[^ ]*/g,"").trim();n._displayedFormatIds.forEach(function(e){l=Po()(l,{"has-ads-top":e===lo.a.get("smartAds.formatId.northBanner"),"has-ads-bottom":e===lo.a.get("smartAds.formatId.southBanner")||e===lo.a.get("smartAds.formatId.audio"),"has-ads-full":e===lo.a.get("smartAds.formatId.hpto")})}),1===n._displayedFormatIds.length&&n._displayedFormatIds[0]===lo.a.get("smartAds.formatId.audio")&&(l=Po()(l,{"has-ads-audio":!0})),document.body.className=l}var c=lo.a.get("smartAds.formatId"),u=c.audio,p=c.interstitial;-1!==n._requestedFormatIds.indexOf(u)&&-1===n._displayedFormatIds.indexOf(u)&&(so.a.noAudioAds(),n.fetchAds(window.getCurrentPage(),"navigation")),-1!==n._displayedFormatIds.indexOf(p)&&so.a.onInterstitialAdsReady(),go.a.trigger(go.a.ads.refreshDisplay,n._displayedFormatIds);var d=n._displayedFormatIds.filter(function(e){return e===lo.a.get("smartAds.formatId.hpto")}).length>0;go.a.trigger(go.a.layout.adsBackground,{display:d})}}},n.fetchAds=n.fetchAds.bind(n),n.nbStyleSheetsInitial=document.styleSheets.length,n.state={isReady:!1},n.hasFocus=!0,n._blockedFormats={},n._script=document.createElement("script"),n._script.async=!0;var a=document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(n._script,a),n._script.src="//ak-ns.sascdn.com/diff/js/smart.js",window.sas=window.sas||{},window.sas.cmd=window.sas.cmd?window.sas.cmd:[],window.sas.cmd.push(function(){window.sas.setup({domain:"//ww400.smartadserver.com",async:!0,renderMode:1})}),window.sas.cmd.push(function(){n._script&&n.setState({isReady:!0})}),void 0!==window.blockAdBlock&&window.blockAdBlock.onDetected(function(){n._script&&n.setState({isReady:!0})}),go.a.subscribe(go.a.ads.blockFormat,n._onBlockFormat),window.addEventListener(go.a.ads.blur,n._onBlur),window.addEventListener(go.a.ads.focus,n._onFocus),n}return Wr(t,e),t.prototype.componentWillUnmount=function(){this._script.parentNode.removeChild(this._script),delete this._script,go.a.unsubscribe(go.a.ads.blockFormat,this._onBlockFormat),window.removeEventListener(go.a.ads.blur,this._onBlur),window.removeEventListener(go.a.ads.focus,this._onFocus)},t.Native=function(){return ao.a.createElement("div",{id:"sas_"+lo.a.get("smartAds.formatId.native")})},t.Audio=function(){return ao.a.createElement("div",{id:"sas_"+lo.a.get("smartAds.formatId.audio")})},t.Interstitial=function(){return ao.a.createElement("div",{id:"sas_"+lo.a.get("smartAds.formatId.interstitial")})},t.Top=function(){return ao.a.createElement("div",{className:"ads ads-top"},ao.a.createElement("div",{id:"sas_"+lo.a.get("smartAds.formatId.northBanner")}))},t.Bottom=function(){return ao.a.createElement("div",{className:"ads ads-bottom"},ao.a.createElement("div",{id:"sas_"+lo.a.get("smartAds.formatId.southBanner")}))},t.Wallpaper=function(){return ao.a.createElement("div",{className:"page-ads",id:"sas_"+lo.a.get("smartAds.formatId.hpto")})},t.prototype.fetchAds=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==window.sas&&void 0!==window.sas.call){var a=lo.a.get("smartAds.formatId").interstitial,r=lo.a.get("smartAds.pageId"),o=this._getFormats(e,t),i=-1!==o.indexOf(a);n&&(window.sas.clean(),this.cleanUnecessaryStyleSheets()),o.length&&(window.sas_manager=null,this._sasCallRef=Math.ceil(1e9*Math.random()),this._requestedFormatIds=[].concat(o),this._pendingFormatIds=[].concat(o),this._displayedFormatIds=[].concat(o),window.sas.call("onecall",{siteId:lo.a.get("smartAds.siteId"),pageId:r[e],formatId:o.join(","),target:this._getTargetKeywords(i)},{resetTimestamp:!0,onNoad:this._updateView.bind(this,this._sasCallRef,!1,e,t,n),onLoad:this._updateView.bind(this,this._sasCallRef,!0,e,t,n),onError:this._onError}),o.forEach(window.sas.render))}},t.prototype.cleanUnecessaryStyleSheets=function(){var e=/sas_[0-9]{0,}/,t=document.styleSheets.length;if(t!==this.nbStyleSheetsInitial&&t>0){var n=t-1,a=document.styleSheets[n];if(null!==e.test(a.innerHTML)){var r=a.ownerNode;r.parentNode.removeChild(r)}}},t.prototype.render=function(){return this.state.isReady?ao.a.createElement("div",null,ao.a.createElement(Jp,{fetchAds:this.fetchAds}),ao.a.createElement(ed,{fetchAds:this.fetchAds}),ao.a.createElement(rd,{fetchAds:this.fetchAds})):null},t.prototype._getFormats=function(e,t){var n=lo.a.get("smartAds.pageId"),a=lo.a.get("smartAds.formatId"),r=a.northBanner,o=a.southBanner,i=a.hpto,s=a.interstitial,l=a.native,c=a.audio,u=[];if(void 0===n[e])return Oo.a.error("Ads",new Error('Unknown advertising for page name "'+e+'"')),u;switch(t){case"audio":return u.push(o,c),u;case"comeback":return u.push(s),u}switch(e){case"home":u.push(r,o,i,l),"initial"===t&&u.push(s);break;case"page":case"legacy":case"app":case"appstudio":case"offline":case"account":case"episodes":case"episode":break;default:u.push(r,o,i)}return u},t.prototype._getTargetKeywords=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=so.a.getMediaType(),n=this.props.adsArgs,a=lo.a.get("smartAds.target");if(a+=";element_type="+(n.hasOwnProperty("element_type")?n.element_type:""),a+=";element_id="+(n.hasOwnProperty("element_id")?n.element_id:""),a+=";element_data="+(n.hasOwnProperty("element_data")?n.element_data:""),"channels"===window.getCurrentPage()){var r=document.location.pathname.replace("/channels/","");a+=";channel_id="+this._normalizeParam(r)}a+=";username="+("string"==typeof lo.a.get("USER.BLOG_NAME")?encodeURIComponent(Object(Ri.x)(lo.a.get("USER.BLOG_NAME"))):""),a+=";firstname="+("string"==typeof lo.a.get("USER.FIRSTNAME")?encodeURIComponent(Object(Ri.x)(lo.a.get("USER.FIRSTNAME"))):""),a+=";lastname="+("string"==typeof lo.a.get("USER.LASTNAME")?encodeURIComponent(Object(Ri.x)(lo.a.get("USER.LASTNAME"))):""),a+=";partners="+encodeURIComponent(lo.a.get("USER.PARTNERS")),a+=";favorite_tag="+lo.a.get("USER.FAVORITE_TAG"),a+=";lang="+lo.a.get("SETTING_LANG");var o="UNKNOWN";switch(lo.a.get("env")){case"preproduction":o="PREPROD";break;case"development":o="DEV";break;case"production":default:o="PROD"}return a+=";env="+o,a+=";focus="+this.hasFocus,a+=";billboard="+e,a+=";site="+lo.a.get("smartAds.smartSite"),a+=";mt="+(lo.a.get("USER.ADS_OFFER")?lo.a.get("USER.ADS_OFFER"):"0"),a+=";user_age="+(0===lo.a.get("USER.USER_AGE")?"unknown":lo.a.get("USER.USER_AGE")),a+=";user_sexe="+lo.a.get("USER.USER_GENDER"),t===so.a.MEDIA_TYPE_SONG?(a+=";player_art_name="+this._normalizeParam(so.a.getCurrentSong("ART_NAME")),a+=";player_alb_title="+this._normalizeParam(so.a.getCurrentSong("ALB_TITLE")),a+=";player_sng_title="+this._normalizeParam(so.a.getCurrentSong("SNG_TITLE"))):t===so.a.MEDIA_TYPE_TALK&&(a+=";talk_show_name="+this._normalizeParam(so.a.getCurrentSong("SHOW_NAME"))),a+="pr="+("boolean"==typeof lo.a.get("DZPS")&&!0===lo.a.get("DZPS")?"1":"0"),a+=";user_id="+lo.a.get("USER.USER_ID"),a+=";offer_id="+lo.a.get("OFFER_ID"),a+=";user_fc="+(lo.a.get("USER.FACEBOOK.UID")?"1":"0"),a+=";player_play="+(so.a.playing?"1":"0"),a+=";newsletter="+(this._checkNewsletterStatus()?"1":"0"),a+=";notif_mail="+(this._checkNotificationStatus(lo.a.get("USER.SETTING.notification_mail"))?"1":"0"),a+=";notif_mobile="+(this._checkNotificationStatus(lo.a.get("USER.SETTING.notification_mobile"))?"1":"0"),t===so.a.MEDIA_TYPE_SONG?(a+=";player_provider_id="+so.a.getCurrentSong("PROVIDER_ID"),a+=";player_art_id="+so.a.getCurrentSong("ART_ID"),a+=";player_alb_id="+so.a.getCurrentSong("ALB_ID"),a+=";player_sng_id="+so.a.getCurrentSong("SNG_ID"),a+=";player_rank_sng="+so.a.getCurrentSong("RANK_SNG"),a+=";player_duration="+so.a.getCurrentSong("DURATION"),a+=";player_plist_id="+so.a.getContext("ID")):t===so.a.MEDIA_TYPE_TALK&&(a+=";talk_duration="+so.a.getCurrentSong("DURATION")),a},t.prototype._checkNewsletterStatus=function(){for(var e=!1,t=["editor","event","game","panel","special_offer","talk"],n=lo.a.get("USER.SETTING.newsletter"),a=t,r=Array.isArray(a),o=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(o>=a.length)break;i=a[o++]}else{if((o=a.next()).done)break;i=o.value}var s=i;if(n.hasOwnProperty(s)&&n[s]){e=!0;break}}return e},t.prototype._checkNotificationStatus=function(e){for(var t=!1,n=["artist_new_release","artist_status","friend_follow","new_message","playlist_comment","playlist_follow","share"],a=Array.isArray(n),r=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o;if(e.hasOwnProperty(i)&&e[i]){t=!0;break}}return t},t.prototype._normalizeParam=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().replace(/[^\w]/g,"")},t}(no.Component);od.defaultProps={adsArgs:{}};var id=od,sd=ao.a.createElement(id.Interstitial,null),ld=ao.a.createElement(id.Audio,null),cd=ao.a.createElement(id.Native,null),ud=ao.a.createElement(id.Bottom,null),pd=ao.a.createElement(id.Top,null),dd=ao.a.createElement($p,{timer:15}),fd=ao.a.createElement(id.Wallpaper,null),hd=function(e){function t(){return Qr(this,t),Xr(this,e.apply(this,arguments))}return $r(t,e),t.prototype._renderMain=function(){var e=(this.props.children.type.WrappedComponent||this.props.children.type).displayName,t={element_type:e,element_id:this.props.params.id?this.props.params.id:"",element_data:""};return"search"===e&&(t={element_type:"result",element_id:"ALL",element_data:this.props.params.query||this.props.params.tags||""}),ao.a.createElement("main",{className:"page-main",id:"page_content",role:"main"},ao.a.createElement(id,{adsArgs:t}),sd,ld,cd,ud,ao.a.createElement("div",{className:"page-wrapper"},ao.a.createElement("div",{className:"page-content"},pd,dd,this.props.children),fd))},t}(Vp),md=function(e){return function(t){return e(null,t.default)}},yd=function(e){throw e},bd=ao.a.createElement(oo.c,{from:"*",to:"/"}),_d=ao.a.createElement(oo.c,{from:"mixes",to:"channels/mixes"}),gd=ao.a.createElement(oo.c,{from:"tops",to:"channels/charts"}),vd=ao.a.createElement(oo.c,{from:"charts",to:"channels/charts"}),Ed=ao.a.createElement(oo.c,{from:"tour",to:"channels/charts"}),Od=ao.a.createElement(oo.c,{from:"moods",to:"channels/moods"}),Td=ao.a.createElement(oo.c,{from:"explore",to:"channels/explore"});t.a=function(e){var t=e.store,n=e.appState,a=e.modalPath,r={history:window.history&&window.history.pushState?oo.f:oo.g,routes:to(n,a,t)};return ao.a.createElement(ro.a,{store:t},ao.a.createElement(oo.e,r))}},"./js/_components/Sort.js":function(e,t,n){"use strict";var a=n("./js/_modules/userData.js"),r=n("./js/_modules/config/index.js"),o={data:function(e,t){e=e.slice(0);var n={ART_NAME:"_sortByArtName",ALB_TITLE:"_sortByAlbTitle",DATE_UPDATE:"_sortByUpdateDate",DATE_CREATE:"_sortByCreateDate",PLAYLIST_TITLE:"_sortByPlaylistTitle",PLAYLIST_TYPE:"_sortByPlaylistType",APP_NAME:"_sortByAppName",TOP_ALBUM:"_sortByTopAlbum",TOP_PLAYLIST:"_sortByTopPlaylist",SHOW_NAME:"_sortByShowName",DATE_FAVORITE:"_sortByCreateDate",RELEASE_DATE:"_sortByReleaseDate",ALB_RANK:"_sortByAlbRank",ALB_TYPE:"_sortByAlbType"};return"function"==typeof this[n[t]]?e.sort(this[n[t]]):e},_sortByUpdateDate:function(e,t){var n=e.DATE_ADD||"0000-00-00 00:00:00",a=t.DATE_ADD||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByCreateDate:function(e,t){var n=e.DATE_FAVORITE||e.DATE_CREATE||"0000-00-00 00:00:00",a=t.DATE_FAVORITE||t.DATE_CREATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByReleaseDate:function(e,t){var n=e.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00",a=t.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByAlbId:function(e,t){return Number(e.ALB_ID)<Number(t.ALB_ID)?1:-1},_sortByCopyrightDate:function(e,t,n){var a=0,r=0,i=/([12][0-9][0-9][0-9])[^0-9]/;return e.COPYRIGHT&&e.COPYRIGHT.match(i)?a=e.COPYRIGHT.match(i)[1]:e.PHYSICAL_RELEASE_DATE&&(a=e.PHYSICAL_RELEASE_DATE.substring(0,4)),t.COPYRIGHT&&t.COPYRIGHT.match(i)?r=t.COPYRIGHT.match(i)[1]:t.PHYSICAL_RELEASE_DATE&&(r=t.PHYSICAL_RELEASE_DATE.substring(0,4)),a===r?n?0:o._sortByAlbId(e,t):a<r?1:-1},_sortByArtName:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ART_NAME||"").toLowerCase().trim(),r=(t.ART_NAME||"").toLowerCase().trim();return a===r?n?0:o._sortByAlbTitle(e,t,!0):a>r?1:-1},_sortByAlbTitle:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ALB_TITLE||"").toLowerCase().trim(),r=(t.ALB_TITLE||"").toLowerCase().trim();return a===r?n?0:o._sortByArtName(e,t,!0):a>r?1:-1},_sortByAppName:function(e,t){var n=(e.NAME||"").toLowerCase().trim(),a=(t.NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistTitle:function(e,t){var n=(e.TITLE||"").toLowerCase().trim(),a=(t.TITLE||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistType:function(e,t){var n=String(r.a.get("USER.USER_ID")),a=String(e.PARENT_USER_ID)===n?0:parseInt(e.STATUS,10)+1,o=String(t.PARENT_USER_ID)===n?0:parseInt(t.STATUS,10)+1,i=(e.TITLE||"").toLowerCase(),s=(t.TITLE||"").toLowerCase();return a===o?i===s?0:i>s?1:-1:a>o?1:-1},_sortByAlbRank:function(e,t){var n=Number(e.RANK),a=Number(t.RANK);return n===a?o._sortByAlbTitle(e,t):a>n?1:-1},_sortByAlbType:function(e,t){var n=Number(e.ROLE_ID),a=Number(t.ROLE_ID);if(n===a){var r=o._getOrderAlbumType(e.TYPE),i=o._getOrderAlbumType(t.TYPE);if(r===i){var s=Number(e.HIGHLIGHT),l=Number(t.HIGHLIGHT);return s===l?o._sortByCopyrightDate(e,t):l>s?1:-1}return i<r?1:-1}return a<n?1:-1},_sortByTopAlbum:function(e,t){var n=a.a.data.TOP_ALBUMS_HASH||{},r=void 0!==n[e.ALB_ID]?1/(n[e.ALB_ID]+1):0,i=void 0!==n[t.ALB_ID]?1/(n[t.ALB_ID]+1):0;return r===i?o._sortByAlbTitle(e,t):i>r?1:-1},_sortByTopPlaylist:function(e,t){var n=a.a.data.TOP_PLAYLISTS_HASH||{},r=void 0!==n[e.PLAYLIST_ID]?1/(n[e.PLAYLIST_ID]+1):0,i=void 0!==n[t.PLAYLIST_ID]?1/(n[t.PLAYLIST_ID]+1):0;return r===i?o._sortByPlaylistTitle(e,t):i>r?1:-1},_sortByShowName:function(e,t){var n=(e.SHOW_NAME||"").toLowerCase().trim(),a=(t.SHOW_NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_getOrderAlbumType:function(e){return{1:0,0:2,3:1,2:3}[Number(e)]}};t.a=o},"./js/_components/StatesButton/index.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=n.n(s),c=n("./node_modules/react/react.js"),u=n.n(c),p=n("./node_modules/classnames/index.js"),d=n.n(p),f=n("./js/_modules/Events.js"),h=n("./js/_modules/dzPlayer.js"),m=n("./js/_modules/favorite.js"),y=n("./js/_components/DataGrid/utils.js"),b=n("./js/_modules/userData.js"),_=n("./js/_components/StatesButton/utils.js"),g=n("./js/_modules/config/index.js"),v=n("./js/_modules/player/PlayerMetrics.js"),E=(n("./js/_modules/Type.js"),n("./js/_components/Icon/index.js")),O=u.a.createElement(E.a,{name:"shuffle",size:"16"}),T=u.a.createElement(E.a,{name:"shuffle",size:"16"}),j=function(e){function t(n,a){r(this,t);var i=o(this,e.call(this,n,a));return i._handleClick=i._handleClick.bind(i),i._onFavoriteStatusChange=i._onFavoriteStatusChange.bind(i),i._onPlayStatusChange=i._onPlayStatusChange.bind(i),i._onPlayClick=i._onPlayClick.bind(i),i._onFavoriteClick=i._onFavoriteClick.bind(i),i.state=i._getStateFromStore(n),i}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this._handleEvents("subscribe"),f.a.ready(f.a.user.userReady,function(){e.setState(e._getStateFromStore(e.props))})},t.prototype.componentWillReceiveProps=function(e){this.setState(this._getStateFromStore(e))},t.prototype.shouldComponentUpdate=function(e,t){return this.props.id!==e.id||this.props.disabled!==e.disabled||this.state.status!==t.status||this.state.active!==t.active},t.prototype.componentWillUnmount=function(){this._handleEvents("unsubscribe")},t.prototype.render=function(){var e,t=this.props,n=t.color,a=t.size,r=t.action,o=t.disabled,i=this.state,s=i.active,l=i.status,c=d()("btn btn-action","btn-"+r,(e={"btn-default":"default"===n,"btn-primary":"primary"===n,active:s,paused:!s&&("play"===r||"shuffle"===r)&&"resume"===l},e["btn-"+a]=a,e));return u.a.createElement("button",{className:c,type:"button",onClick:this._handleClick,disabled:o},this._renderContent())},t.prototype._renderContent=function(){var e=this.props.action,t=this.state,n=t.status,a=t.active,r=n;"resume"!==r&&(r=a?"hover":"default");var o=[u.a.createElement("div",{key:"default",className:"action action-default"},"shuffle"===e?O:u.a.createElement(E.a,{name:this._getIcon(n)}),u.a.createElement("span",{key:"label",className:"label"},this._getWording("default"))),u.a.createElement("div",{key:"active",className:"action action-active"},null!==this._getAnimatedIcon()?u.a.createElement("span",{key:"icon",className:this._getAnimatedIcon()}):u.a.createElement(E.a,{name:this._getIcon(n)}),u.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("active"))),u.a.createElement("div",{key:"hover",className:"action action-hover"},u.a.createElement(E.a,{name:this._getIcon(r)}),u.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("hover")))];return"play"!==this.props.action&&"shuffle"!==this.props.action||o.push(u.a.createElement("div",{key:"resume",className:"action action-resume"},"shuffle"===e?T:u.a.createElement(E.a,{name:this._getIcon(n)}),u.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("resume")))),o},t.prototype._onFavoriteStatusChange=function(e,t){var n=this.props,a=n.type,r=n.id;if(void 0!==t&&a===t.type&&Number(r)===Number(t.id)){var o=b.a.isFavorite(a,r);this.setState({status:o?"active":"default",active:o})}},t.prototype._onPlayStatusChange=function(e,t){var n=this.state.active;(n||t)&&(this._hasSameContext()?this.setState({status:n&&!t?"resume":"active",active:t}):this.setState({status:"default",active:!1}))},t.prototype._onPlayClick=function(){if(this._hasSameContext())return v.a.intent("toggle"),void h.a.control.togglePause();var e=this.props,t=e.type,n=e.id,a=e.items,r=e.play_context;v.a.intent("play"),h.a.play({type:t,id:n,data:a,radio:"artist_smartradio"===r||"profile_user_radio"===r,context:{TYPE:r,ID:n}})},t.prototype._onShuffleClick=function(){if(this._hasSameContext())return v.a.intent("toggle"),void h.a.control.togglePause();var e=this.props,t=e.id,n=e.items,a=e.play_context;v.a.intent("play"),h.a.play({type:a,id:t,data:n,radio:!1,context:{TYPE:a,ID:t}})},t.prototype._onFavoriteClick=function(){m.a.action({id:this.props.id,type:this.props.type,context:this.context.name})},t.prototype._handleEvents=function(e){for(var t=this._getData("events_subscription"),n=t.length,a=0;a<n;a++)f.a[e](t[a].event_name,this[t[a].event_callback])},t.prototype._handleClick=function(){this.props.disabled||this[this._getData("onclick")]()},t.prototype._getData=function(e){var t=this.props.action,n={play:{events_subscription:[{event_name:f.a.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{default:"play-circle",active:"play-circle",hover:"pause-circle",resume:"play-circle"},onclick:"_onPlayClick"},shuffle:{events_subscription:[{event_name:f.a.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{default:"shuffle",active:"shuffle",hover:"pause",resume:"shuffle"},onclick:"_onShuffleClick"},favorite:{events_subscription:[{event_name:f.a.user.addFavorite,event_callback:"_onFavoriteStatusChange"},{event_name:f.a.user.deleteFavorite,event_callback:"_onFavoriteStatusChange"}],icon_mapping:{default:"love-outline",active:"love",hover:"cancel",default_user:"follow",active_user:"check",hover_user:"cancel"},onclick:"_onFavoriteClick"}};return n[t]?n[t][e]:null},t.prototype._hasSameContext=function(){var e=h.a.getContext();if(null===e)return!1;var t=g.a.get("LOG_CONTEXT");return t[Object(y.b)(e.TYPE)]===t[this.context.name]&&e.ID===this.context.id},t.prototype._getIcon=function(e){var t=this.props,n=t.action,a="";return"user"===t.type&&"favorite"===n&&(a="_user"),this._getData("icon_mapping")[""+e+a]},t.prototype._getAnimatedIcon=function(){return"play"!==this.props.action&&"shuffle"!==this.props.action||"active"!==this.state.status?null:d()({"equalizer equalizer-12":!0,"equalizer-dark":"default"===this.props.color,"equalizer-inverse":"default"!==this.props.color})},t.prototype._getWording=function(e){return"none"===this.props.wording_type?"":Object(_.a)({action:this.props.action,type:this.props.type,wording:this.props.wording_type},e)},t.prototype._getStateFromStore=function(e){var t=e.action,n=e.type,a=e.id,r="default";return"favorite"===t&&b.a.isFavorite(n,a)&&(r="active"),"play"!==t&&"shuffle"!==this.props.action||!this._hasSameContext()||(r=h.a.isPaused()?"resume":h.a.isPlaying()?"active":"default"),{status:r,active:"active"===r}},t}(c.Component);j.contextTypes={id:l.a.oneOfType([l.a.number,l.a.string]),name:l.a.string},j.childContextTypes={id:l.a.oneOfType([l.a.number,l.a.string]),name:l.a.string},j.defaultProps={id:0,type:"",action:"favorite",color:"default",items:[],wording_type:"standard",play_context:"",size:"",disabled:!1},t.a=j},"./js/_modules/Labs.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}var p=n("./js/_modules/i18n.js"),d=n("./node_modules/react/react.js"),f=n.n(d),h=n("./node_modules/classnames/index.js"),m=n.n(h),y=n("./node_modules/mousetrap/mousetrap.js"),b=n.n(y),_=n("./js/_modules/favorite.js"),g=n("./js/_modules/Events.js"),v=n("./js/_modules/dzPlayer.js"),E=n("./js/_modules/userData.js"),O=n("./js/_modules/player/PlayerMetrics.js"),T=f.a.createElement("div",{className:"topbar"}),j=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._keysCache=[],a._seekToPosition=a._seekToPosition.bind(a),a._togglePlayerPause=a._togglePlayerPause.bind(a),a._togglePlayAll=a._togglePlayAll.bind(a),a._focusSearchField=a._focusSearchField.bind(a),a._seekBack=a._seekBack.bind(a),a._seekForward=a._seekForward.bind(a),a._restartTrack=a._restartTrack.bind(a),a._mute=a._mute.bind(a),a._increaseVolume=a._increaseVolume.bind(a),a._decreaseVolume=a._decreaseVolume.bind(a),a._addToFavorites=a._addToFavorites.bind(a),a._toggleRepeat=a._toggleRepeat.bind(a),a._toggleHotKeysPanel=a._toggleHotKeysPanel.bind(a),a._konami=a._konami.bind(a),a.state={opened:!1},a}return i(t,e),t.prototype.componentDidMount=function(){this._bindKeys(["0","1","2","3","4","5","6","7","8","9"],this._seekToPosition,{label:Object(p.a)("Aller à la position"),shortcut:"0...9",display_size:"wide"}),this._bindKeys("space",this._togglePlayerPause,{label:Object(p.a)("Lecture/Pause"),shortcut:Object(p.a)("Espace"),display_size:"wide"}),this._bindKeys("shift+enter",this._togglePlayAll,{label:Object(p.a)("Lire les titres présents sur la page"),shortcut:"⇧ ⏎",display_size:"wide"}),this._bindKeys(["s","shift+s"],this._focusSearchField,{label:Object(p.a)("Rechercher"),shortcut:"S"}),this._bindKeys("alt+left",this._seekBack,{label:Object(p.a)("Reculer"),shortcut:"alt,←"}),this._bindKeys("alt+right",this._seekForward,{label:Object(p.a)("Avancer"),shortcut:"alt,→"}),this._bindKeys("r",this._restartTrack,{label:Object(p.a)("Rejouer le titre"),shortcut:"R"}),this._bindKeys("shift+left",v.a.control.prevSong,{label:Object(p.a)("Lire le titre précédent"),shortcut:"⇧,←"}),this._bindKeys("shift+right",v.a.control.nextSong,{label:Object(p.a)("Lire le titre suivant"),shortcut:"⇧,→"}),this._bindKeys(["m","shift+m"],this._mute,{label:Object(p.a)("Silence"),shortcut:"M"}),this._bindKeys("shift+up",this._increaseVolume,{label:Object(p.a)("Augmenter le volume"),shortcut:"⇧,↑"}),this._bindKeys("shift+down",this._decreaseVolume,{label:Object(p.a)("Baisser le volume"),shortcut:"⇧,↓"}),this._bindKeys(["l","shift+l"],this._addToFavorites,{label:Object(p.a)("Ajouter le titre aux Coups de cœur"),shortcut:"L"}),this._bindKeys("shift+r",this._toggleRepeat,{label:Object(p.a)("Mode de répétition"),shortcut:"⇧,R"}),this._bindKeys(["h","shift+h"],this._toggleHotKeysPanel,{label:Object(p.a)("Afficher les raccourcis clavier"),shortcut:"H"}),this._bindKeys("up up down down left right left right b a enter",this._konami)},t.prototype.componentWillUnmount=function(){this._keysCache.forEach(function(e){b.a.unbind(e.keys)}),clearTimeout(this._removeKonamiRef)},t.prototype.render=function(){var e=this,t=this.state.opened,n=m()({hotkeys:!0,opened:t});return f.a.createElement("div",{className:n,"aria-hidden":!t},T,f.a.createElement("div",{className:"mapping"},this._keysCache.map(function(t){return e._renderKeys(t)})))},t.prototype._renderKeys=function(e){if(!e.label)return null;var t="wide"!==e.display_size?e.shortcut.split(","):[e.shortcut],n=m()({"hotkey-icon":!0,wide:"wide"===e.display_size,single:"wide"!==e.display_size&&1===t.length});return f.a.createElement("div",{className:"hotkey",key:t.join("-")},t.map(function(e,t){return e?f.a.createElement("div",{className:n,key:"shortcut"+t},e):null}),f.a.createElement("div",{className:"hotkey-label"},e.label))},t.prototype._bindKeys=function(e,t,n){n=n||{},b.a.bind(e,t),this._keysCache.push({keys:e,label:n.label,shortcut:n.shortcut||"",display_size:n.display_size||"small"})},t.prototype._toggleHotKeysPanel=function(){this.setState({opened:!this.state.opened})},t.prototype._togglePlayerPause=function(e){e.preventDefault(),O.a.intent("toggle"),v.a.control.togglePause()},t.prototype._togglePlayAll=function(e){e.preventDefault(),O.a.intent("play"),g.a.trigger("EVENT.DATAGRID.togglePlayAll")},t.prototype._focusSearchField=function(e){e.preventDefault(),document.getElementById("menu_search").focus()},t.prototype._seekBack=function(){v.a.isPlaying()||v.a.control.play();var e=(v.a.getPosition()/v.a.getDuration()-.05).toFixed(3);this._handleSeekPosition(e)},t.prototype._seekForward=function(){v.a.isPlaying()||v.a.control.play();var e=(v.a.getPosition()/v.a.getDuration()+.05).toFixed(3);this._handleSeekPosition(e)},t.prototype._seekToPosition=function(e,t){var n=parseFloat(t)/10;return 0===n&&(n=1e-5),this._handleSeekPosition(n)},t.prototype._restartTrack=function(){this._handleSeekPosition(1e-4)},t.prototype._mute=function(){v.a.control.mute(!v.a.isMuted())},t.prototype._addToFavorites=function(){g.a.ready(g.a.user.initialized,function(){if(-1===["ads","jingle","livestream"].indexOf(v.a.getPlayerType())&&v.a.getMediaType()===v.a.MEDIA_TYPE_SONG){var e=v.a.getCurrentSong("SNG_ID"),t=E.a.isFavorite("song",e)?"remove":"add";_.a[t]({type:"song",id:e})}})},t.prototype._increaseVolume=function(){var e=(parseFloat(v.a.getVolume())+.1).toFixed(2);e=Math.min(1,e),v.a.control.setVolume(e)},t.prototype._decreaseVolume=function(){var e=(parseFloat(v.a.getVolume())-.1).toFixed(2);0!==(e=Math.max(0,e))||v.a.isMuted()||v.a.control.mute(),v.a.control.setVolume(e)},t.prototype._handleSeekPosition=function(e){e>0&&e<1&&v.a.control.seek(e)},t.prototype._toggleRepeat=function(){var e=v.a.getRepeat();v.a.control.setRepeat(2===e?0:e+1)},t.prototype._konami=function(){document.body.classList&&(document.body.classList.add("konami"),this._removeKonamiRef=setTimeout(function(){document.body.classList.remove("konami")},1e4))},t}(d.Component),S=(n("./node_modules/prop-types/index.js"),n("./node_modules/react-redux/es/index.js")),w=n("./js/_modules/config/index.js"),A=n("./js/_components/Player/store/music.js"),P=function(e){function t(n){l(this,t);var a=c(this,e.call(this,n));return a._notification=null,a._timer=null,a._lastTrackId="",a}return u(t,e),t.prototype.componentWillMount=function(){"default"===Notification.permission&&Notification.requestPermission()},t.prototype.render=function(){var e=this.props,t=e.playing,n=e.playerType,a=e.trackId;return t&&a!==this._lastTrackId&&"ads"!==n&&this._displayNotification(),null},t.prototype._displayNotification=function(){var e=this,t=this.props,n=t.cover,a=t.trackId,r=t.trackTitle,o=t.trackArtists;this._notification&&(clearTimeout(this._timer),this._notification.close()),this._lastTrackId=a,this._notification=new Notification(r,{icon:n,body:o.map(function(e){return e.ART_NAME}),dir:w.a.get("DIRECTION")}),this._timer=setTimeout(function(){return e._notification.close()},4e3)},t}(d.Component),C=Object(S.b)(function(e){return{playerType:e.player.config.playerType,playing:e.player.control.playing,cover:Object(A.e)(e),trackId:Object(A.k)(e),trackTitle:Object(A.l)(e),trackArtists:Object(A.j)(e)}})(P);n.d(t,"a",function(){return N}),n.d(t,"b",function(){return k});var N={FirefoxHTML5:"FirefoxHTML5",HotKeys:"HotKeys",Notification:"Notification"},k=function(){return[{id:N.Notification,component:C,name:Object(p.a)("Notifications de bureau"),description:Object(p.a)("Afficher une notification sur le bureau lorsqu'un nouveau titre commence."),picture:"notifs.png",browser:["Chrome","Edge","Firefox","Safari"],active:!0},{id:N.HotKeys,component:j,name:Object(p.a)("Raccourcis clavier"),description:Object(p.a)("Contôlez Deezer depuis votre clavier. Activez-le et appuyez sur H pour voir les commandes disponibles."),picture:"hotkeys.png",force:!0},{id:N.FirefoxHTML5,name:Object(p.a)("Nouveau player audio Firefox"),description:Object(p.a)("Activez-le pour utiliser le lecteur HTML5 pour le son dans Firefox plutôt que Flash."),picture:"firefox-html5.png",browser:["Firefox"],active:!0}]}},"./js/_modules/SearchStore.js":function(e,t,n){"use strict";function a(e){var t=l,n={ARTIST:!0,ALBUM:!0,TRACK:!0,PLAYLIST:!0,RADIO:!0,SHOW:!0,TAG:!0,USER:!0,CHANNEL:!0,LIVESTREAM:!0},a=3;i.a.isAllowed("business")&&!i.a.isAllowed("business_mod")&&(n={PLAYLIST:!0,ALBUM:!0},a=30),u=r.a.call({method:"deezer.suggest",data:{QUERY:t,TYPES:n,NB:a},success:function(n){c[t]=n,t===l&&e(n)}})}var r=n("./js/_modules/api.js"),o=n("./js/_modules/Store.js"),i=n("./js/_modules/gatekeeper.js"),s=null,l="",c={},u=void 0,p=new o.a({getQuery:function(){return l},setQuery:function(e){return e=e.trim(),l!==e&&(l=e,this.emitChange("input")),this},getResults:function(){return s},search:function(e){var t=this;return this.setQuery(e),""===l||"#"===l?(s=null,void this.emitChange("suggest")):void 0!==c[l]?(s=c[l],void this.emitChange("suggest")):void a(function(e){s=e,t.emitChange("suggest")})},cancel:function(){r.a.cancel(u)}});t.a=p},"./js/_modules/Store.js":function(e,t,n){"use strict";var a=n("./node_modules/uuid-v4/index.js"),r=n.n(a),o=n("./js/_modules/EventDispatcher.js");t.a=function(e){var t=this;this.uniq_id=r()(),this.parent={},this.callbacks={},this.eventDispatcher=new o.a,this.emitChange=function(e){t.eventDispatcher.trigger(e)},this.onChange=function(e){t.eventDispatcher.subscribe(e)},this.offChange=function(e){t.eventDispatcher.unSubscribe(e)};for(var n in e)e.hasOwnProperty(n)&&(this.hasOwnProperty(n)&&(this.parent[n]=this[n]),this[n]=e[n])}},"./js/_modules/displayNotification.js":function(e,t,n){"use strict";var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/config/index.js"),o=n("./js/_modules/userSetting.js"),i=n("./js/_modules/notification.js"),s={like:!0,dislike:!0},l=void 0;t.a=function(e){if(!s[e])return!1;l||(l={dislike_first:Object(a.a)("Flow ne vous proposera plus ce titre, promis."),dislike:Object(a.a)("Non merci Flow."),like_first:Object(a.a)("Ajouté aux Coups de cœur. Allez-y, continuez à ajouter, Flow apprend à vous connaître."),like:Object(a.a)("Ajouté aux Coups de cœur")});var t=r.a.get("USER.SETTING"),n="number"==typeof t.site["nb_flowplayer_"+e+"_notification"]?t.site["nb_flowplayer_"+e+"_notification"]:0;if(n<3){var c=l[e+(0===n?"_first":"")];i.a.display(null,{message:c});var u={};u["nb_flowplayer_"+e+"_notification"]=n+1,o.a.set({site:u})}}},"./js/_modules/flash_detect.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/dzPlayer.js"),o=n("./js/core/util.js"),i=n("./js/_modules/modal.js"),s=n("./js/_modules/BrowserDetect.js"),l=this,c=function e(){if(!(r.a.getNbSongs()<r.a.getNbSongsTotal())){a.a.unsubscribe(a.a.player.play,e),a.a.unsubscribe(a.a.player.seek,e);var t=document.getElementById("audioPlayerSWF"),n=function t(n,r,o){n===o?(a.a.subscribe(a.a.player.play,e),a.a.subscribe(a.a.player.seek,e)):a.a.subscribeOnce(a.a.modal.close,t.bind(l,n))};Object(o.a)(t,function(e){if(!r.a.html5.active&&e){var t=i.a.open("/lightbox/flash_detect?type="+encodeURIComponent(e)+"&browser="+encodeURIComponent(s.a.browser)+"&os="+encodeURIComponent(s.a.OS),!0);a.a.subscribeOnce(a.a.modal.close,n.bind(l,t)),a.a.subscribeOnce(a.a.player.playerLoaded,i.a.close)}})}};a.a.subscribe(a.a.player.play,c),a.a.subscribe(a.a.player.seek,c)},"./js/_modules/lyrics.js":function(e,t,n){"use strict";t.a=function(){var e=r.a.get("USER.ABTEST.lyrics.behaviour");return"noLyrics"===e?Object(a.a)("Passez à Premium+ pour afficher les paroles et les faire défiler"):"snippet"===e?Object(a.a)("Passez à Premium+ pour afficher la suite des paroles"):"static"===e?Object(a.a)("Passez à Premium+ pour faire défiler les paroles"):""};var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/config/index.js")},"./js/_modules/monitoring/jiraIssueCollector.js":function(e,t,n){"use strict";var a=n("./js/_modules/gatekeeper.js");t.a=function(){a.a.isAllowed("employee_feature")&&(window.ATL_JQ_PAGE_PROPS={triggerFunction:function(e){window.ATL_JQ_SHOW_DIALOG=e}})}},"./js/_modules/monitoring/reportSlowResources.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/live/live.js"),o=n("./js/_modules/gatekeeper.js"),i=/^https?:\/\/[^/]+\.deezer(dev)?\.com\/(?!ajax)/;t.a=function e(){var t=o.a.isAllowed("performance_monitoring"),n="performance"in window&&"getEntriesByType"in window.performance&&"clearResourceTimings"in window.performance&&window.performance.getEntriesByType("resource")instanceof Array;if(t&&n){var s=window.performance.getEntriesByType("resource");s=s.filter(function(e){var t=i.test(e.name),n=e.duration>2e3;return t&&n}),window.performance.clearResourceTimings(),s.length&&(s=s.map(function(e){return{name:e.name,duration:e.duration}}),r.a.log.send("app_perf_resources",{resources:s}))}else a.a.unsubscribe(a.a.navigation.page_displayed,e)}},"./js/_modules/publicPath.js":function(e,t,n){"use strict";var a=n("./js/_modules/config/index.js");n.p="https://"+a.a.get("host_static_ssl")+"/cache/"},"./js/_modules/redux/createStore.js":function(e,t,n){"use strict";var a=n("./js/_modules/redux/middlewares/player/initialization.js"),r=[n("./node_modules/redux-thunk/es/index.js").a,a.a],o=r,i=n("./node_modules/redux/es/index.js"),s=n("./js/Feed/store/index.js"),l=n("./js/Search/store/index.js"),c=n("./js/_components/Menu/store/menu.js"),u=n("./js/_components/modals/OnboardingAssistant/store/index.js"),p=n("./js/_components/Player/store/music.js"),d=n("./js/_components/Player/store/control.js"),f=n("./js/_components/Player/store/chromecast.js"),h=n("./js/_components/Player/store/config.js"),m=Object(i.c)({config:h.default,control:d.d,music:p.d,chromecast:f.a}),y=n("./js/_components/Menu/store/queuelist.js"),b=n("./js/_components/Popper/store/popper.js"),_=n("./js/_modules/redux/stores/entities/index.js"),g=n("./js/_modules/redux/stores/labs.js"),v=n("./js/_modules/redux/stores/modal.js"),E=n("./js/_modules/redux/stores/user.js"),O=n("./js/_modules/redux/stores/userData.js"),T=Object(i.c)({menu:c.a,queuelist:y.a,player:m,feed:s.a,user:E.a,userData:O.a,entities:_.b,onboarding:u.a,search:l.b,modal:v.b,labs:g.a,popper:b.a});n.d(t,"b",function(){return j});var j=void 0;t.a=function(){return j=Object(i.e)(T,{},Object(i.d)(i.a.apply(void 0,o),function(e){return e}))}},"./js/_modules/redux/stores/entities/albums.js":function(e,t,n){"use strict";function a(e){return m({},e.DATA,e)}n.d(t,"d",function(){return E}),n.d(t,"e",function(){return O}),t.a=function(){b.forEach(u.a.cancel),_=!1},n.d(t,"c",function(){return w});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/utils.js"),d=n("./js/_modules/config/index.js"),f=n("./js/_modules/right.js"),h=n("./js/_modules/redux/stores/entities/schemas.js"),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y=Object(o.b)(o.c,c.a),b=[],_=!1;t.b=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case"entities/albums/UPDATE_ALBUM_FAN_COUNT":return m({},n,(e={},e[a.id]=m({},n[a.id],{NB_FAN:a.nbFan}),e));case"entities/albums/FETCHED_ALBUM_FALLBACK":return m({},n,(t={},t[a.id]=m({},n[a.id],a.data),t));default:return a.data&&a.data.entities&&a.data.entities.ALBUMS?s()({},n,a.data.entities.ALBUMS):n}};var g=function(e){return function(t){_=!0;var n=u.a.call({method:"deezer.pageAlbum",data:{alb_id:e.id,lang:d.a.get("SETTING_LANG"),tab:0},success:function(n){t({type:"entities/albums/FETCHED_ALBUM",id:e.id,data:Object(r.normalize)(a(n),h.a)}),_=!1},error:function(n){n.payload&&t({type:"entities/albums/FETCHED_ALBUM_FALLBACK",id:e.id,data:{FALLBACK_ID:n.payload.FALLBACK.ALB_ID,STATUS:"0"}}),_=!1}});b.push(n)}},v=function(e){return{type:"entities/albums/REHYDRATED_ALBUM",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),h.a)}},E=function(e){return function(t,n){var a=n().entities.ALBUMS[e.id];return a&&a.SONGS?t({type:"entities/albums/FETCHED_ALBUM_FROM_CACHE",id:e.id}):e.rehydrateData?t(v(e)):_?Promise.resolve():t(g(e))}},O=function(e){return{type:"entities/albums/UPDATE_ALBUM_FAN_COUNT",id:e.id,nbFan:e.nbFan}},T=function(e,t){return e.ALBUMS[t.id]},j=function(e,t){var n=T(e,t);if(n&&"1"===n.STATUS){var a=[];return n.SONGS.data.map(function(t){return e.RELATED_SONGS[t]}).forEach(function(e){var t=Number(e.DISK_NUMBER)-1,r=Number(e.TRACK_NUMBER)-1;a[t]||(a[t]=[]),a[t][r]&&f.a.checkSongAvailable(e)!==f.a.READABLE||(a[t][r]=Object.assign({},e),a[t][r].MULTI_ARTIST=a[t][r].ARTISTS.filter(function(e){return-1===n.ARTISTS.indexOf(e.ART_ID)}),e.FALLBACK&&(a[t][r].FALLBACK=Object.assign({},e.FALLBACK,{DISK_NUMBER:e.DISK_NUMBER,TRACK_NUMBER:e.TRACK_NUMBER})))}),[].concat.apply([],a).filter(function(e){return void 0!==e})}return[]},S=function(e,t){var n=T(e,t);return n&&"1"===n.STATUS?n.PHYSICAL_RELEASE_DATE||n.DIGITAL_RELEASE_DATE:null},w=y([T,j,function(e,t){var n=T(e,t);return n&&"1"===n.STATUS?n.COMMENTS.data.map(function(t){return e.COMMENTS[t]}):[]},function(e,t){var n=T(e,t);return n&&"1"===n.STATUS?n.COMMENTS.total:0},function(e,t){var n=T(e,t),a={},r=[];return n&&"1"===n.STATUS&&(r=(r=n.ARTISTS.map(function(t){return e.RELATED_ARTISTS[t]})).filter(function(e){return!a[e.ART_ID]&&(a[e.ART_ID]=!0,!0)})),r},function(e,t){var n=T(e,t);return n&&"1"===n.STATUS?n.CHRONICLES.data.map(function(t){return e.CHRONICLES[t]}):[]},function(e,t){var n=T(e,t);return n&&"1"===n.STATUS?n.CHRONICLES.total:0},function(e,t){return j(e,t).reduce(function(e,t){return e+Number(t.DURATION)},0)},S,function(e,t){var n=S(e,t);return!!n&&(n=new Date(n).getTime())/1e3+2592e3>d.a.get("SERVER_TIMESTAMP")}],function(e,t,n,a,r,o,i,s,l,c){return m({},e,{DURATION:s,FORMATTED_DURATION:Object(p.v)(s),RELEASE_DATE:l,FORMATTED_RELEASE_DATE:Object(p.m)(l),IS_NEW:c,SONGS:t,ARTISTS:r,COMMENTS:n,TOTAL_COMMENTS:a,CHRONICLES:o,TOTAL_CHRONICLES:i})})},"./js/_modules/redux/stores/entities/artists.js":function(e,t,n){"use strict";function a(e){return f({},e.DATA,e)}n.d(t,"d",function(){return v}),n.d(t,"e",function(){return O}),n.d(t,"f",function(){return T}),t.a=function(){b.forEach(u.a.cancel),y=!1},n.d(t,"c",function(){return S});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/config/index.js"),d=n("./js/_modules/redux/stores/entities/schemas.js"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=Object(o.b)(o.c,c.a),m=void 0,y=!1,b=[];t.b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case"entities/artists/UPDATE_ARTIST_FAN_COUNT":return f({},t,(e={},e[n.id]=f({},t[n.id],{NB_FAN:n.nbFan}),e));case"entities/artists/FETCHED_TOURS":case"entities/artists/FETCHED_TOURS_FROM_CACHE":if(m){var a;return f({},t,(a={},a[n.id]=f({},t[n.id],{IS_ON_TOUR:m[n.id]}),a))}return t;default:return n.data&&n.data.entities&&n.data.entities.ARTISTS?s()({},t,n.data.entities.ARTISTS):t}};var _=function(e,t){return function(n){y=!0;var o=u.a.call({method:"deezer.pageArtist",data:{art_id:e.id,lang:p.a.get("SETTING_LANG"),tab:0},success:function(o){var i=Object(r.normalize)(a(o),d.b);n({type:"entities/artists/FETCHED_ARTIST",id:e.id,data:i}),y=!1,t()},error:function(){y=!1}});b.push(o)}},g=function(e){return{type:"entities/artists/REHYDRATED_ARTIST",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),d.b)}},v=function(e){return function(t,n){return new Promise(function(a){return n().entities.ARTISTS[e.id]?(t({type:"entities/artists/FETCHED_ARTIST_FROM_CACHE",id:e.id}),void a()):e.rehydrateData?(t(g(e)),void a()):void(y?a():t(_(e,a)))})}},E=function(e){return function(t){var n=u.a.call({method:"songkick.getGeoEvents",data:{USER_ID:e.userId},success:function(n){m=n,t({type:"entities/artists/FETCHED_TOURS",id:e.id})}});b.push(n)}},O=function(e){return function(t){var n=p.a.get("USER.USER_ID");return t(void 0===m&&n?E({id:e.id,userId:n}):{type:"entities/artists/FETCHED_TOURS_FROM_CACHE",id:e.id})}},T=function(e){return{type:"entities/artists/UPDATE_ARTIST_FAN_COUNT",id:e.id,nbFan:e.nbFan}},j=function(e,t){return e.ARTISTS[t.id]},S=h([j,function(e,t){var n=j(e,t);return n?n.ALBUMS.data.map(function(t){return e.RELATED_ALBUMS[t]}):[]},function(e,t){var n=j(e,t);return n?n.TOP.data.map(function(t){return e.RELATED_SONGS[t]}):[]},function(e,t){var n=j(e,t);if(n&&n.BIO)return{text:n.BIO.BIO,resume:n.BIO.RESUME,source:n.BIO.SOURCE}},function(e,t){var n=j(e,t);if(n){var a=n.SELECTED_PLAYLIST.data,r=n.RELATED_PLAYLIST.data.filter(function(e){return-1===a.indexOf(e)});return a.concat(r).map(function(t){return e.PLAYLISTS[t]})}return[]},function(e,t){var n=j(e,t);return n?n.RELATED_ARTISTS.data.map(function(t){return e.RELATED_ARTISTS[t]}):[]},function(e,t){var n=j(e,t);if(n)return e.RELATED_ALBUMS[n.LAST_ALBUM.data[0]]},function(e,t){var n=j(e,t);if(n&&n.STATUS)return n.STATUS.status},function(e,t){var n=j(e,t);return n&&n.DATA&&n.DATA.DATA?n.DATA.DATA:{}},function(e,t){var n=j(e,t);return n?n.ALBUMS.total:0}],function(e,t,n,a,r,o,i,s,l,c){return f({},e,l,{ALBUMS:t,NB_ALBUMS:c,TOP:n,LAST_ALBUM:i,BIO:a,PLAYLISTS:r,RELATED_ARTISTS:o,STATUS:s})})},"./js/_modules/redux/stores/entities/audiobooks.js":function(e,t,n){"use strict";function a(e){return f({},e.DATA,e)}n.d(t,"d",function(){return g}),t.a=function(){y.forEach(u.a.cancel),m=!1},n.d(t,"c",function(){return E});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/config/index.js"),d=n("./js/_modules/redux/stores/entities/schemas.js"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.AUDIOBOOKS?s()({},e,t.data.entities.AUDIOBOOKS):e};var m=!1,y=[],b=function(e){return function(t){m=!0;var n=u.a.call({method:"deezer.pageAudiobook",data:{audiobook_id:e.id,country:p.a.get("COUNTRY"),lang:p.a.get("SETTING_LANG")},success:function(n){t({type:"entities/audiobooks/FETCHED_AUDIOBOOK",id:e.id,data:Object(r.normalize)(a(n),d.c)}),m=!1},error:function(){m=!1}});y.push(n)}},_=function(e){return{type:"entities/audiobooks/REHYDRATED_AUDIOBOOK",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),d.c)}},g=function(e){return function(t,n){return n().entities.AUDIOBOOKS[e.id]?t({type:"entities/audiobooks/FETCHED_AUDIOBOOK_FROM_CACHE",id:e.id}):e.rehydrateData?t(_(e)):m?Promise.resolve():t(b(e))}},v=function(e,t){return e.AUDIOBOOKS[t.id]},E=h([v,function(e,t){var n=v(e,t);if(n)return n.CHAPTERS}],function(e,t){return f({},e,{CHAPTERS:t})})},"./js/_modules/redux/stores/entities/comments.js":function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){return{artist:1,album:2,user:3,playlist:4,radio:5,video:6}[e]}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return p}),t.c=function(e){return function(t){return l.a.call({method:"comment.add",data:{comment:e.comment,element_id:e.elementId,type:r(e.type),lang:e.lang},success:function(n){t({type:u,id:n,data:e})}})}},t.f=function(e){return function(t){return l.a.call({method:"comment.delete",data:{type:r(e.type),element_id:e.elementId,comment_id:e.id},success:function(){t({type:p,data:e})}})}},t.e=function(e){return function(t){return l.a.call({method:"comment.flag",data:{element_id:e.elementId,type:r(e.type),comment_id:e.id},success:function(){t({type:d,data:e})}})}};var o=n("./node_modules/lodash.merge/index.js"),i=n.n(o),s=n("./js/_modules/config/index.js"),l=n("./js/_modules/api.js"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u="entities/comments/COMMENT_ADDED",p="entities/comments/COMMENT_DELETED",d="entities/comments/COMMENT_FLAGGED";t.d=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case u:return c({},t,(e={},e[n.id]={BLOG_NAME:s.a.get("USER.BLOG_NAME"),COMMENT:n.data.comment,COMMENT_ID:n.id,DATE:Math.round(Date.now()/1e3),USER_ID:s.a.get("USER.USER_ID"),USER_PICTURE:s.a.get("USER.USER_PICTURE"),__TYPE__:"comment"},e));case p:t[n.data.id];return a(t,[n.data.id]);default:return n.data&&n.data.entities&&n.data.entities.COMMENTS?i()({},t,n.data.entities.COMMENTS):t}}},"./js/_modules/redux/stores/entities/episodes.js":function(e,t,n){"use strict";function a(e){return h({},e.DATA,e)}n.d(t,"d",function(){return v}),t.a=function(){b.forEach(u.a.cancel),y=!1},n.d(t,"c",function(){return O});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/utils.js"),d=n("./js/_modules/userData.js"),f=n("./js/_modules/redux/stores/entities/schemas.js"),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.EPISODES?s()({},e,t.data.entities.EPISODES):e};var y=!1,b=[],_=function(e){return function(t){y=!0;var n=u.a.call({method:"episode.getData",data:{episode_id:e.id},success:function(n){t({type:"entities/episodes/FETCHED_EPISODE",id:e.id,data:Object(r.normalize)(a(n),f.e)}),y=!1},error:function(){y=!1}});b.push(n)}},g=function(e){return{type:"entities/episodes/REHYDRATED_EPISODE",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),f.e)}},v=function(e){return function(t,n){return n().entities.EPISODES[e.id]?t({type:"entities/episodes/FETCHED_EPISODE_FROM_CACHE",id:e.id}):e.rehydrateData?t(g(e)):y?Promise.resolve():t(_(e))}},E=function(e,t){return e.EPISODES[t.id]},O=m([E,function(e,t){var n=E(e,t);return n?d.a.getEpisodeBookmark(t.id,n.DURATION):{}},function(e,t){var n=E(e,t);if(n)return Object(p.G)(n.DURATION)},function(e,t){var n=E(e,t);if(n&&n.EPISODE_PUBLISHED_TIMESTAMP){var a=n.EPISODE_PUBLISHED_TIMESTAMP.split(" ")[0];return Object(p.m)(a)}}],function(e,t,n,a){return h({},e,{IS_HEARD:t.IS_HEARD,FORMATTED_DURATION:n,FORMATTED_PUBLISHED_TIMESTAMP:a})})},"./js/_modules/redux/stores/entities/index.js":function(e,t,n){"use strict";var a=n("./node_modules/redux/es/index.js"),r=n("./js/_modules/redux/stores/entities/albums.js"),o=n("./js/_modules/redux/stores/entities/comments.js"),i=n("./js/_modules/redux/stores/entities/artists.js"),s=n("./node_modules/lodash.merge/index.js"),l=n.n(s),c=n("./js/_modules/redux/stores/entities/episodes.js"),u=n("./js/_modules/redux/stores/entities/playlists.js"),p=n("./js/_modules/redux/stores/entities/shows.js"),d=n("./js/_modules/redux/stores/entities/audiobooks.js"),f=n("./js/_modules/redux/stores/entities/songs.js"),h=n("./js/_modules/redux/stores/entities/radios.js");n("./js/_modules/api.js"),n("./js/_modules/redux/stores/entities/schemas.js"),n("./node_modules/normalizr/lib/index.js");n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return o.a}),n.d(t,!1,function(){return o.b}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return r.e}),n.d(t,"a",function(){return o.c}),n.d(t,"d",function(){return o.f}),n.d(t,"c",function(){return o.e});t.b=Object(a.c)({ALBUMS:r.b,ARTISTS:i.b,RELATED_ARTISTS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.RELATED_ARTISTS?l()({},e,t.data.entities.RELATED_ARTISTS):e},RELATED_ALBUMS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.RELATED_ALBUMS?l()({},e,t.data.entities.RELATED_ALBUMS):e},RELATED_SONGS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.RELATED_SONGS?l()({},e,t.data.entities.RELATED_SONGS):e},CHRONICLES:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.CHRONICLES?l()({},e,t.data.entities.CHRONICLES):e},COMMENTS:o.d,EPISODES:c.b,PLAYLISTS:u.b,SHOWS:p.b,AUDIOBOOKS:d.b,SONGS:f.b,RADIOS:h.b,USERS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.USERS?l()({},e,t.data.entities.USERS):e},LIVES:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.LIVES?l()({},e,t.data.entities.LIVES):e}})},"./js/_modules/redux/stores/entities/playlists.js":function(e,t,n){"use strict";function a(e){return y({},e.DATA,e)}function r(e){var t=Object(h.k)(e,"playlist"),n=t.cell,a=t.order;return null!==n||"string"==typeof a&&"asc"!==a}n.d(t,"f",function(){return v}),n.d(t,"d",function(){return O}),n.d(t,"g",function(){return T}),n.d(t,"e",function(){return j}),n.d(t,"h",function(){return S}),n.d(t,"j",function(){return w}),n.d(t,"i",function(){return A}),t.a=function(){g.forEach(c.a.cancel),_=!1},n.d(t,"c",function(){return C});var o=n("./node_modules/normalizr/lib/index.js"),i=(n.n(o),n("./node_modules/reselect/es/index.js")),s=n("./node_modules/lodash.isequal/index.js"),l=n.n(s),c=n("./js/_modules/api.js"),u=n("./js/_modules/config/index.js"),p=n("./js/_modules/user.js"),d=n("./js/_modules/utils.js"),f=n("./js/_modules/models/Track.js"),h=n("./js/_components/DataGrid/utils.js"),m=n("./js/_modules/redux/stores/entities/schemas.js"),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b=Object(i.b)(i.c,l.a),_=!1,g=[],v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(function(e,n){return y({},e,{SONG_RANK:n+t})})};t.b=function(){var e,t,n,a,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];switch(i.type){case"entities/playlists/CLEAR_PLAYLIST":return y({},o,(e={},e[i.id]=!1,e));case"entities/playlists/UPDATE_PLAYLIST_FAN_COUNT":return y({},o,(t={},t[i.id]=y({},o[i.id],{NB_FAN:i.nbFan}),t));case"entities/playlists/UPDATE_PLAYLIST_THUMBNAIL":return y({},o,(n={},n[i.id]=y({},o[i.id],{PLAYLIST_PICTURE:i.picture,PICTURE_TYPE:i.pictureType}),n));case"entities/playlists/UPDATE_PLAYLIST_INFO":return y({},o,(a={},a[i.id]=y({},o[i.id],{TITLE:i.title,DESCRIPTION:i.description,STATUS:i.status}),a));case"entities/playlists/UPDATED_PLAYLIST_COUNTS":return y({},o,(r={},r[i.id]=y({},o[i.id],{DURATION:Number(o[i.id].DURATION)+i.duration,NB_SONG:Number(o[i.id].NB_SONG)+i.nbSong}),r));default:return i.data&&i.data.entities&&i.data.entities.PLAYLISTS?(Object.keys(i.data.entities.PLAYLISTS).forEach(function(e){i.data.entities.PLAYLISTS[e].SONGS&&(i.data.entities.PLAYLISTS[e].SONGS.data=v(i.data.entities.PLAYLISTS[e].SONGS.data))}),y({},o,i.data.entities.PLAYLISTS)):o}};var E=function(e){return function(t){_=!0;var n=c.a.call({method:"deezer.pagePlaylist",data:{playlist_id:e.id,lang:u.a.get("SETTING_LANG"),nb:r(e.id)?h.u:h.l,start:0,tab:0},success:function(n){var r=Object(o.normalize)(a(n),m.g);t({type:"entities/playlists/FETCHED_PLAYLIST",id:e.id,data:r}),_=!1},error:function(){_=!1}});g.push(n)}},O=function(e){return function(t){return _?Promise.resolve():(t({type:"entities/playlists/CLEAR_PLAYLIST",id:e.id}),t(E(e)))}},T=function(e){return function(t){var n=c.a.call({method:"song.getListAllData",data:{sng_ids:e.songs},success:function(n){var a=n.data,r=("PLAYLIST.addSong"===e.action?1:-1)*a.reduce(function(e,t){return(Number(e.DURATION)||e)+Number(t.DURATION)},0),o=("PLAYLIST.addSong"===e.action?1:-1)*a.length;t({type:"entities/playlists/UPDATED_PLAYLIST_COUNTS",id:e.id,duration:r,nbSong:o})}});g.push(n)}},j=function(e){return function(){var t=c.a.call({method:"playlist.setSeen",data:{playlist_id:e.id}});g.push(t)}},S=function(e){return{type:"entities/playlists/UPDATE_PLAYLIST_FAN_COUNT",id:e.id,nbFan:e.nbFan}},w=function(e){return{type:"entities/playlists/UPDATE_PLAYLIST_THUMBNAIL",id:e.id,picture:e.picture,pictureType:e.pictureType}},A=function(e){return{type:"entities/playlists/UPDATE_PLAYLIST_INFO",id:e.id,title:e.title,description:e.description,status:e.status}},P=function(e,t){return e.PLAYLISTS[t.id]},C=b([P,function(e,t){var n=P(e,t);return n&&n.SONGS?n.SONGS.data:[]},function(e,t){var n=P(e,t);return!!n&&5===Number(n.TYPE)},function(e,t){var n=P(e,t);return!!n&&Number(n.PARENT_USER_ID)===p.a.current()},function(e,t){var n=P(e,t);return!!n&&2===Number(n.STATUS)},function(e,t){var n=P(e,t);return!!n&&(1===Number(n.STATUS)||3===Number(n.STATUS))},function(e,t){var n=P(e,t);return n?Number(n.DURATION)||0:0},function(e,t){var n=P(e,t);return n&&n.COMMENTS?n.COMMENTS.total:0}],function(e,t,n,a,r,o,i,s){return y({},e,{SONGS:f.a.hydrate(t),FORMATTED_NB_FAN:e?Object(d.f)(e.NB_FAN):0,FORMATTED_NB_SONG:e?Object(d.f)(e.NB_SONG):0,DURATION:i,FORMATTED_DURATION:Object(d.v)(i),IS_CHART:n,IS_PERSONAL:a,IS_COLLABORATIVE:r,IS_PRIVATE:o,TOTAL_COMMENTS:s})})},"./js/_modules/redux/stores/entities/radios.js":function(e,t,n){"use strict";function a(e){return m({},e.DATA,e)}function r(e,t){var n=Object.assign({},t),a={ID:e,TYPE:"radio_page"};if(p.a.isPlaying()&&!f.a.isCasting())p.a.replaceTracks(p.a.getIndexSong()+1,n.data,a);else if(f.a.isCasting()){for(var r=[],o=0,i=n.data.length;o<i;++o)r.push({data:n.data[o],context:a});p.a.setTrackList({data:r,index:0,autoplay:!0,chromecast:!0,playOnChromecast:!0})}else p.a.setTrackList({data:n.data,context:a,index:0,autoplay:!1})}n.d(t,"d",function(){return E}),n.d(t,"e",function(){return O}),t.a=function(){b.forEach(d.a.cancel),_=!1},n.d(t,"c",function(){return j});var o=n("./node_modules/normalizr/lib/index.js"),i=(n.n(o),n("./node_modules/reselect/es/index.js")),s=n("./node_modules/lodash.merge/index.js"),l=n.n(s),c=n("./node_modules/lodash.isequal/index.js"),u=n.n(c),p=n("./js/_modules/dzPlayer.js"),d=n("./js/_modules/api.js"),f=n("./js/_modules/chromecast/index.js"),h=n("./js/_modules/redux/stores/entities/schemas.js"),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y=Object(i.b)(i.c,u.a),b=[],_=!1;t.b=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1];switch(a.type){case"entities/radios/SET_DISCOVERY_LEVEL":return m({},n,(e={},e[a.id]=m({},n[a.id],{DISCOVERY_LEVEL:a.level}),e));case"entities/radios/UPDATE_RADIO_SONGS":return m({},n,(t={},t[a.id]=m({},n[a.id],{SONGS:a.songs}),t));default:return a.data&&a.data.entities&&a.data.entities.RADIOS?l()({},n,a.data.entities.RADIOS):n}};var g=function(e){return function(t){_=!0;var n=d.a.call({method:"deezer.pageRadio",data:{id:e.id,type:"genre",songs:!0},success:function(n){var r=Object(o.normalize)(a(n),h.h);t({type:"entities/radios/FETCHED_RADIO",id:e.id,data:r}),_=!1},error:function(){_=!1}});b.push(n)}},v=function(e){return{type:"entities/radios/REHYDRATED_RADIO",id:e.id,data:Object(o.normalize)(a(e.rehydrateData),h.h)}},E=function(e){return function(t,n){return n().entities.RADIOS[e.id]?t({type:"entities/radios/FETCHED_RADIO_FROM_CACHE",id:e.id}):e.rehydrateData?t(v(e)):_?Promise.resolve():t(g(e))}},O=function(e){return function(t){return new Promise(function(n,a){var o=d.a.call({method:"deezer.setUserRadioDiscoveryLevel",data:{radio_id:e.id,discovery_level:e.level},success:function(o){var i=d.a.call({method:"radio.getSongs",data:{radio_id:e.id,limit:20,array_include:["ARTISTS"]},success:function(a){r(e.id,a),t({type:"entities/radios/SET_DISCOVERY_LEVEL",id:e.id,level:o}),t({type:"entities/radios/UPDATE_RADIO_SONGS",id:e.id,songs:a}),n()},error:function(e){a(e)}});b.push(i)},error:function(e){a(e)}});b.push(o)})}},T=function(e,t){return e.RADIOS[t.id]},j=y([T,function(e,t){var n=T(e,t);if(n){var a=n.SONGS.data;if(a){for(var r={},o=a,i=Array.isArray(o),s=0,o=i?o:o[Symbol.iterator]();;){var l;if(i){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var c=l;if(!r[c.ART_ID])for(var u=c.ARTISTS,p=Array.isArray(u),d=0,u=p?u:u[Symbol.iterator]();;){var f;if(p){if(d>=u.length)break;f=u[d++]}else{if((d=u.next()).done)break;f=d.value}var h=f;r[h.ART_ID]=h}}return Object.values(r)}return n.ARTISTS}}],function(e,t){return m({},e,{ARTISTS:t})})},"./js/_modules/redux/stores/entities/schemas.js":function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"i",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"f",function(){return h});var a=n("./node_modules/normalizr/lib/index.js"),r=(n.n(a),new a.Schema("SONGS",{idAttribute:"SNG_ID"})),o=new a.Schema("ARTISTS",{idAttribute:"ART_ID"}),i=new a.Schema("PLAYLISTS",{idAttribute:"PLAYLIST_ID"}),s=new a.Schema("ALBUMS",{idAttribute:"ALB_ID"}),l=new a.Schema("CHRONICLES",{idAttribute:"ORIG_UID"}),c=new a.Schema("COMMENTS",{idAttribute:"COMMENT_ID"}),u=new a.Schema("EPISODES",{idAttribute:"EPISODE_ID"}),p=new a.Schema("SHOWS",{idAttribute:"SHOW_ID"}),d=new a.Schema("AUDIOBOOKS",{idAttribute:"id"}),f=new a.Schema("RADIOS",{idAttribute:"RADIO_ID"}),h=(new a.Schema("USERS",{idAttribute:"USER_ID"}),new a.Schema("LIVES",{idAttribute:"LIVESTREAM_ID"})),m=new a.Schema("RELATED_ARTISTS",{idAttribute:"ART_ID"}),y=new a.Schema("RELATED_ALBUMS",{idAttribute:"ALB_ID"}),b=new a.Schema("RELATED_SONGS",{idAttribute:"SNG_ID"});o.define({RELATED_ARTISTS:{data:Object(a.arrayOf)(m)},RELATED_PLAYLIST:{data:Object(a.arrayOf)(i)},SELECTED_PLAYLIST:{data:Object(a.arrayOf)(i)},TOP:{data:Object(a.arrayOf)(b)},LAST_ALBUM:{data:Object(a.arrayOf)(y)},ALBUMS:{data:Object(a.arrayOf)(y)}}),s.define({ARTISTS:Object(a.arrayOf)(m),CHRONICLES:{data:Object(a.arrayOf)(l)},COMMENTS:{data:Object(a.arrayOf)(c)},SONGS:{data:Object(a.arrayOf)(b)}})},"./js/_modules/redux/stores/entities/shows.js":function(e,t,n){"use strict";function a(e){return f({},e.DATA,e)}n.d(t,"d",function(){return g}),t.a=function(){y.forEach(u.a.cancel),m=!1},n.d(t,"c",function(){return E});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/config/index.js"),d=n("./js/_modules/redux/stores/entities/schemas.js"),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.SHOWS?s()({},e,t.data.entities.SHOWS):e};var m=!1,y=[],b=function(e){return function(t){m=!0;var n=u.a.call({method:"deezer.pageShow",data:{show_id:e.id,country:p.a.get("COUNTRY"),lang:p.a.get("SETTING_LANG"),nb:40,start:0},success:function(n){t({type:"entities/shows/FETCHED_SHOW",id:e.id,data:Object(r.normalize)(a(n),d.i)}),m=!1},error:function(){m=!1}});y.push(n)}},_=function(e){return{type:"entities/shows/REHYDRATED_SHOW",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),d.i)}},g=function(e){return function(t,n){return n().entities.SHOWS[e.id]?t({type:"entities/shows/FETCHED_SHOW_FROM_CACHE",id:e.id}):e.rehydrateData?t(_(e)):m?Promise.resolve():t(b(e))}},v=function(e,t){return e.SHOWS[t.id]},E=h([v,function(e,t){var n=v(e,t);if(n)return n.EPISODES.data}],function(e,t){return f({},e,{EPISODES:t})})},"./js/_modules/redux/stores/entities/songs.js":function(e,t,n){"use strict";function a(e){return h({},e.DATA,e)}n.d(t,"d",function(){return v}),t.a=function(){b.forEach(u.a.cancel),y=!1},n.d(t,"c",function(){return O});var r=n("./node_modules/normalizr/lib/index.js"),o=(n.n(r),n("./node_modules/reselect/es/index.js")),i=n("./node_modules/lodash.merge/index.js"),s=n.n(i),l=n("./node_modules/lodash.isequal/index.js"),c=n.n(l),u=n("./js/_modules/api.js"),p=n("./js/_modules/right.js"),d=n("./js/_modules/utils.js"),f=n("./js/_modules/redux/stores/entities/schemas.js"),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m=Object(o.b)(o.c,c.a);t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t.type,t.data&&t.data.entities&&t.data.entities.SONGS?s()({},e,t.data.entities.SONGS):e};var y=!1,b=[],_=function(e){return function(t){y=!0;var n=u.a.call({method:"deezer.pageTrack",data:{sng_id:e.id},success:function(n){t({type:"entities/songs/FETCHED_TRACK",id:e.id,data:Object(r.normalize)(a(n),f.j)}),y=!1},error:function(){y=!1}});b.push(n)}},g=function(e){return{type:"entities/songs/REHYDRATED_TRACK",id:e.id,data:Object(r.normalize)(a(e.rehydrateData),f.j)}},v=function(e){return function(t,n){return n().entities.SONGS[e.id]?t({type:"entities/songs/FETCHED_TRACK_FROM_CACHE",id:e.id}):e.rehydrateData?t(g(e)):y?Promise.resolve():t(_(e))}},E=function(e,t){return e.SONGS[t.id]},O=m([E,function(e,t){var n=E(e,t),a={};return n?n.ARTISTS.filter(function(e){return!a[e.ART_ID]&&(a[e.ART_ID]=!0,!0)}):[]},function(e,t){var n=E(e,t);if(n&&n.LYRICS_ID&&0!==n.LYRICS_ID)return h({},n.LYRICS,{HAS_SYNC_LYRICS:n.LYRICS.LYRICS_SYNC_JSON&&n.LYRICS.LYRICS_SYNC_JSON.length,LYRICS_TEXT:n.LYRICS.LYRICS_TEXT.split(/\r\n|\r|\n/g)})},function(e,t){var n=E(e,t);if(n)return n.ISRC.data.filter(function(e){return p.a.checkSongAvailable(e)===p.a.READABLE})}],function(e,t,n,a){return h({},e,{FORMATTED_DURATION:Object(d.G)(e?e.DURATION:0),ARTISTS:t,LYRICS:n,RELATED_ALBUMS:a})})},"./js/_modules/redux/stores/labs.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c:return t.setting!==e.setting?l({},e,{setting:t.setting}):e;default:return e}},n.d(t,"f",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return y});var a=n("./node_modules/reselect/es/index.js"),r=n("./js/_modules/BrowserDetect.js"),o=n("./js/_modules/config/index.js"),i=n("./js/_modules/userSetting.js"),s=n("./js/_modules/Labs.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c="labs/SET_STATUS",u=function(){return o.a.get("USER.SETTING.site.labs")||{}},p=function(){return{setting:u(),list:Object(s.b)()}},d=function(e){var t,n=e.id,a=e.status,r=Object.assign({},u(),(t={},t[n]=a,t));return o.a.get("USER")&&i.a.set({site:{labs:r}}),{type:c,setting:r}},f=function(e){return e.list.filter(function(e){return!1!==e.active})},h=Object(a.a)([function(e){var t=e.setting;return Object.keys(t).filter(function(e){return t[e]}).reduce(function(e,t){return e[t]=!0,e},{})},function(e){var t=e.setting;return e.list.filter(function(e){return e.force&&!1!==t[e.id]}).reduce(function(e,t){return e[t.id]=!0,e},{})},function(e){return e.list.filter(function(e){return e.browser&&e.browser.length>=0&&-1===e.browser.indexOf(r.a.browser)}).reduce(function(e,t){return e[t.id]=!1,e},{})},function(e){return e.list.filter(function(e){return!1===e.active}).reduce(function(e,t){return e[t.id]=!1,e},{})}],function(e,t,n,a){return Object.assign({},e,t,n,a)}),m=Object(a.a)([f,h],function(e,t){return e.filter(function(e){var n=e.id;return t[n]})}),y=Object(a.a)([f,h],function(e,t){return e.filter(function(e){var n=e.id;return!t[n]})})},"./js/_modules/redux/stores/user.js":function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s:return t.hasUpNext!==e.hasUpNext?i({},e,{hasUpNext:t.hasUpNext}):e;case l:return t.hasHqAudio!==e.hasHqAudio?i({},e,{hasHqAudio:t.hasHqAudio}):e;default:return e}},n.d(t,"b",function(){return p}),n.d(t,"c",function(){return d});var a=n("./js/_modules/config/index.js"),r=n("./js/_modules/userSetting.js"),o=n("./js/_modules/tracking.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s="user/TOGGLED_UPNEXT",l="user/TOGGLED_HQ_AUDIO",c=a.a.get("USER.SETTING.global.has_up_next")&&a.a.get("USER.HAS_UPNEXT"),u={id:a.a.get("USER.USER_ID"),isAuth:0!==a.a.get("USER.USER_ID"),hasUpNext:void 0===c||c,hasHqAudio:a.a.get("USER.OPTIONS.web_hq")},p=function(e){return{type:l,hasHqAudio:e.hasHqAudio}},d=function(e){return a.a.get("USER")&&(r.a.set({global:{has_up_next:e.hasUpNext}}),o.a.track("queue_list",{event:"up_next",properties:{enabled:e.hasUpNext}})),{type:s,hasUpNext:e.hasUpNext}}},"./js/_modules/redux/stores/userData.js":function(e,t,n){"use strict";function a(e){var t=e.LATEST_EPISODE.data[0];if(0===o()(t)||0!==s.a.checkSongAvailable(t))return!1;var n=i.a.getEpisodeBookmark(t.EPISODE_ID,t.DURATION);return c({},t,{IS_HEARD:n.IS_HEARD})}n.d(t,"b",function(){return p}),n.d(t,"c",function(){return d});var r=n("./node_modules/lodash.size/index.js"),o=n.n(r),i=n("./js/_modules/userData.js"),s=n("./js/_modules/right.js"),l=n("./js/_modules/utils.js"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u={latestEpisodes:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=void 0;switch(arguments[1].type){case"userData/FETCHED_LATEST_EPISODES":return t=i.a.data.FAVORITES_SHOWS.data.slice(0)||[],t=t.map(function(e){return a(e)}).filter(function(e){return!1!==e}),{latestEpisodes:t};default:return e}};var p=function(){return{type:"userData/FETCHED_LATEST_EPISODES"}},d=function(e){return Object(l.v)(e.reduce(function(e,t){return e+parseInt(t.DURATION,10)},0))}},"./js/_modules/tips.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/react/react.js"),l=n.n(s),c=n("./node_modules/react-dom/index.js"),u=n.n(c),p=n("./node_modules/jquery/dist/jquery.js"),d=n.n(p),f=n("./js/_modules/i18n.js"),h=n("./js/_modules/config/index.js"),m=n("./js/_modules/Events.js"),y=n("./js/_modules/error.js"),b=n("./js/_modules/userData.js"),_=n("./js/_modules/dzPlayer.js"),g=n("./js/_modules/tracking.js"),v=n("./js/_modules/api.js"),E=n("./js/_modules/userSetting.js"),O=(n("./node_modules/prop-types/index.js"),l.a.createElement("span",{className:"icon icon-cancel"})),T=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._close=a._close.bind(a),a}return i(t,e),t.prototype.componentDidMount=function(){this.props.play&&m.a.subscribeOnce(m.a.player.play,this._close)},t.prototype.componentWillUnmount=function(){this.props.play&&m.a.unsubscribe(m.a.player.play)},t.prototype.render=function(){var e=this.props,t=e.body,n=e.closeBtn,a=e.direction,r=e.title,o=e.play;return t=Array.isArray(t)?t:[t],l.a.createElement("div",{className:"popover popover-"+a,role:"alertdialog","aria-labelledby":"tipTitle","aria-describedby":"tipBody"},n?l.a.createElement("button",{className:"popover-close",type:"button","aria-label":Object(f.a)("Fermer"),onClick:this._close},O):null,l.a.createElement("div",{className:"popover-body"},""!==r?l.a.createElement("div",{className:"popover-header",id:"tipTitle"},r):null,l.a.createElement("div",{className:"highlight",id:"tipBody"},t.map(function(e){return l.a.createElement("p",{key:"tip_text"+e},e)})),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:o?this._play:this._close},l.a.createElement("span",{className:"label"},o?Object(f.a)("Écouter maintenant"):Object(f.a)("J'ai compris")))))},t.prototype._close=function(){m.a.trigger(m.a.tips.close,this.props.name)},t.prototype._play=function(){_.a.control.play()},t}(s.Component);T.defaultProps={name:void 0,title:"",play:!1,closeBtn:!1,direction:"right-top"};var j=T,S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=null,A={tipsOnLoad:{playerfocus:!0},init:function(){try{var e=null;for(var t in A.tipsOnLoad)if(A.tipsOnLoad.hasOwnProperty(t)&&!0===A.tipsOnLoad[t]){if(e=A.load(t),A.check(e))break;e=null}m.a.subscribe(m.a.tips.close,function(e,t){A.close(t)}),m.a.subscribe(m.a.tips.draw,function(e,t){"string"==typeof t?A.draw(t):"object"===(void 0===t?"undefined":S(t))&&A.draw(t.name,t.check)}),m.a.ready(m.a.player.playerReady,function(){m.a.subscribeOnce(m.a.player.displayCurrentSong,function(){setTimeout(function(){null!==e&&e.hasOwnProperty("active")&&!0===e.active&&P.draw(e)},500)},"tips")},"tips"),C.init()}catch(e){y.a.log(e)}},load:function(e){return(e=P.element[e]||function(){return{}})()},check:function(e){return e.hasOwnProperty("active")&&!0===e.active&&"function"==typeof e.trigger&&!0===e.trigger()},draw:function(e,t){t=t||!1,e=A.load(e),!0===t&&!A.check(e)||null!==w||P.draw(e)},close:function(e){try{w=null;var t=document.getElementById(P.overlayName);null!==t&&document.body.removeChild(t);var n=A.load(e);if(n.hasOwnProperty("name")){var a=document.getElementById("tips_"+n.name);null!==a&&document.body.removeChild(a)}m.a.unsubscribeAll("tips"),n.hasOwnProperty("overlay")&&n.overlay.hasOwnProperty("className")&&d()("body").removeClass("has-focus "+n.overlay.className)}catch(e){y.a.log(e)}}},P={overlayName:"tips-overlay",draw:function(e){try{var t,n=e.name;if(w=n,void 0===P.element[n])return!1;"function"==typeof e.callback&&e.callback(),"object"===S(e.overlay)&&((t=document.createElement("div")).id=P.overlayName,t.className=P.overlayName,t.style.display="none",document.body.appendChild(t).addEventListener("click",function(){A.close(n)}),d()("body").addClass("has-focus "+e.overlay.className));var a=document.createElement("div");a.id="tips_"+n,a.className="tips",a.style.visibility="hidden",document.body.appendChild(a),u.a.render(l.a.createElement(j,e),document.getElementById("tips_"+n),function(){if(e.hasOwnProperty("user_settings")){var n={};Object.keys(e.user_settings).map(function(t){n[t]=e.user_settings[t]}),E.a.set({tips:n})}e.hasOwnProperty("tracking")&&g.a.track(e.tracking.key,{context:e.tracking.context}),this.setPosition(e,a),void 0!==t&&(t.style.display="block"),a.style.visibility="visible"}.bind(this))}catch(e){y.a.log(e)}},setPosition:function(e,t){if("function"==typeof e.style){var n=e.style();for(var a in n)n.hasOwnProperty(a)&&(t.style[a]=n[a]);h.a.get("USER.OPTIONS.ads_display")&&m.a.subscribeOnce(m.a.layout.adsBanner,function(){this.setPosition(e,t)}.bind(this),"tips")}},element:{business_planning_panel:function(){return{active:!0,name:"business_planning_panel",body:Object(f.a)("Retrouvez ici vos plannings. Créez et gérez vos programmations à tout moment en allant dans “Mes plannings”."),closeBtn:!0,direction:"left-bottom",user_settings:{business_planning_panel:!1},overlay:{className:"has-focus-business-panel"},trigger:function(){return Boolean(h.a.get("USER.SETTING.tips.business_planning_panel"))},style:function(){var e=document.getElementById("business-menu"),t={top:e.getBoundingClientRect().top+5+"px",right:e.getBoundingClientRect().width+10+"px"};return t}}},business_playlists_panel:function(){return{active:!0,name:"business_playlists_panel",title:Object(f.a)("Des contenus créés pour vous"),body:Object(f.a)("Retrouvez nos playlists Business et la sélection de nos éditos Deezer. À tout moment, faites glisser une playlist pour la déposer directement dans un de vos plannings."),closeBtn:!0,direction:"right-bottom",user_settings:{business_playlists_panel:!1},overlay:{className:"has-focus-business-playlists"},trigger:function(){return Boolean(h.a.get("USER.SETTING.tips.business_playlists_panel"))},style:function(){var e=document.getElementById("business-curated-panel-toggle"),t={top:e.getBoundingClientRect().top-10+"px",left:e.getBoundingClientRect().width-10+"px"};return t}}},playlist_assistant:function(){return{active:!0,name:"playlist_assistant",title:Object(f.a)("Rajoutez des titres à votre playlist !"),body:Object(f.a)("Besoin d'inspiration ? On vous recommande des titres à ajouter à votre playlist."),closeBtn:!0,direction:"right-bottom",user_settings:{playlist_assistant:!1},overlay:{className:"has-focus-playlist-assistant"},trigger:function(){return Boolean(h.a.get("USER.SETTING.tips.playlist_assistant"))},style:function(){var e=document.getElementById("naboo_datagrid_add_track"),t={top:e.getBoundingClientRect().top-e.getBoundingClientRect().height/2+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+6+"px"};return t}}},playlist_assistant_suggest:function(){return{active:!0,name:"playlist_assistant_suggest",title:Object(f.a)("Vous avez compris le principe ?"),body:Object(f.a)('Vous pouvez stopper à tout moment. Il suffit de cliquer sur "Terminé !".'),closeBtn:!0,user_settings:{playlist_assistant_suggest:!1},trigger:function(){return Boolean(h.a.get("USER.SETTING.tips.playlist_assistant_suggest"))},style:function(){var e=document.getElementById("modal_playlist_assistant_submit"),t=document.getElementById("tips_playlist_assistant_suggest"),n={"z-index":8e3,top:e.getBoundingClientRect().top+1.5*e.getBoundingClientRect().height-t.getBoundingClientRect().height+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+10+"px"};return n}}},playerfocus:function(){return{active:!0,name:"playerfocus",play:!0,body:Object(f.a)("Écoutez vite la musique que vous avez choisie !"),closeBtn:!0,direction:"right",tracking:{key:"onboarding_feed_display",context:"onboarding"},overlay:{className:"has-focus-player"},user_settings:{player:!1},callback:function(){m.a.ready(m.a.user.userReady,function(){var e=b.a.data;void 0!==e.FAVORITES_ARTISTS.data[0]?_.a.play({type:"artist",id:e.FAVORITES_ARTISTS.data[0].ART_ID,autoplay:!1,context:{TYPE:_.a.getContext("TYPE"),ID:e.FAVORITES_ARTISTS.data[0].ART_ID}}):b.a.loadData("genre")}),m.a.subscribeOnce(m.a.user.userLoadData,function(e,t){if("genre"===t.type){var n=b.a.data.FAVORITES_GENRES.data;void 0!==n[0]&&v.a.call({method:"deezer.pageTops",data:{nb:1,type:"track",genre_id:n[0].GENRE_ID},success:function(e){void 0!==e.ITEMS.data[0]&&_.a.play({type:"track",id:[e.ITEMS.data[0].SNG_ID],autoplay:!1,context:{TYPE:_.a.getContext("TYPE"),ID:e.ITEMS.data[0].SNG_ID}})}})}})},trigger:function(){return Boolean(h.a.get("USER.SETTING.tips.player"))},style:function(){var e=document.getElementById("player-cover"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return A.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+a.height/2-8+"px"};return"rtl"===h.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},flow:function(){return{active:!0,name:"flow",title:Object(f.a)("Toute la musique que vous avez envie d'écouter"),body:Object(f.a)("Votre Flow : un mix basé sur vos goûts, qui s'adapte continuellement à vous. "),direction:"bottom-right",overlay:{className:"has-focus-flow"},user_settings:{flow:!1},trigger:function(){var e=document.getElementsByClassName("flow-content").length;return Boolean(h.a.get("USER.SETTING.tips.flow")&&e)},style:function(){var e=document.getElementById("flow-love");if(null===e)return A.close(this.name),{};var t=e.childNodes[0].getBoundingClientRect(),n={top:t.top+t.height+20+"px",left:t.left-3+"px"};return n}}},lyrics:function(){return{active:!0,name:"lyrics",title:Object(f.a)("Vous avez repéré le micro ?"),body:Object(f.a)("Les paroles sont disponibles, cliquez et commencez à chanter."),direction:"right-top",overlay:{className:"has-focus-lyrics"},user_settings:{lyrics:0},trigger:function(){return!(h.a.get("USER.SETTING.tips.lyrics")<=0)&&(0!==_.a.getCurrentSong("LYRICS_ID")&&(!(h.a.get("USER.SETTING.tips.lyrics")>1)||(E.a.set({tips:{lyrics:Math.round(h.a.get("USER.SETTING.tips.lyrics")-1)}}),!1)))},style:function(){var e=document.getElementById("player-lyrics"),t=document.getElementById("tips_lyrics");if(null===e||null===t)return A.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top-a.height+42+"px"};return"rtl"===h.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},add_to_library:function(){return{active:!0,name:"add_to_library",title:"",body:"",direction:"bottom",overlay:{className:"has-focus-add-library"},user_settings:{add_to_library:!1},callback:function(){var e=window.getCurrentPage(),t=window[e].data;"playlist"===e?(this.title=Object(f.a)("Vous avez envie de retrouver cette playlist ?"),this.body=Object(f.a)("Ajoutez-la à votre musique préférée, vous pouvez la réécouter à tout moment.")):"album"===e?(this.title=Object(f.a)("%1$s vous a plu ?",{sprintf:[t.ALB_TITLE]}),this.body=Object(f.a)("Vous aimez, vous nous le dites, il est directement ajouté à vos favoris.")):"artist"===e&&(this.title=Object(f.a)("Envie d'écouter %1$s plus tard ?",{sprintf:[t.DATA.ART_NAME]}),this.body=Object(f.a)("Retrouvez vos artistes préférés rapidement en les ajoutant à vos favoris."))},trigger:function(){var e=window.getCurrentPage();if("object"!==S(window[e]))return!1;var t=window[e].id;return!(0===t||!e.match(/^(playlist|album|artist)$/i))&&(!b.a.isFavorite(e,t)&&!(!document.getElementById("add_to_library")||!1===h.a.get("USER.SETTING.tips.add_to_library")))},style:function(){var e=document.getElementById("add_to_library"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return A.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+n.height+15+"px",left:n.left-a.width/2+42+"px"};return r}}}}},C={init:function(){!0===h.a.get("USER.SETTING.tips.flow")&&m.a.ready(m.a.flow.playerDisplay,function(){setTimeout(function(){A.draw("flow",!0)},1e3)}),h.a.get("USER.SETTING.tips.lyrics")>0&&m.a.subscribe(m.a.player.play,function(){setTimeout(function(){A.draw("lyrics",!0)},1e3)},"tips"),!0===h.a.get("USER.SETTING.tips.add_to_library")&&m.a.subscribe(m.a.navigation.page_displayed,function(){setTimeout(function(){A.draw("add_to_library",!0)},1e3)})}};t.a=A},"./js/_modules/ui.js":function(e,t,n){"use strict";var a=n("./js/_modules/config/index.js"),r={electron:6,web:5};r.current=a.a.get("USER.SETTING.site.version")===r.electron?r.electron:r.web,t.a=r},"./node_modules/lodash.throttle/index.js":function(e,t,n){(function(t){function n(e,t,n){function r(t){var n=f,a=h;return f=h=void 0,g=t,y=e.apply(a,n)}function o(e){return g=e,b=setTimeout(u,t),T?r(e):y}function s(e){var n=e-g,a=t-(e-_);return j?E(a,m-n):a}function c(e){var n=e-_,a=e-g;return void 0===_||n>=t||n<0||j&&a>=m}function u(){var e=O();if(c(e))return p(e);b=setTimeout(u,s(e))}function p(e){return b=void 0,S&&f?r(e):(f=h=void 0,y)}function d(){var e=O(),n=c(e);if(f=arguments,h=this,_=e,n){if(void 0===b)return o(_);if(j)return b=setTimeout(u,t),r(_)}return void 0===b&&(b=setTimeout(u,t)),y}var f,h,m,y,b,_,g=0,T=!1,j=!1,S=!0;if("function"!=typeof e)throw new TypeError(l);return t=i(t)||0,a(n)&&(T=!!n.leading,m=(j="maxWait"in n)?v(i(n.maxWait)||0,t):m,S="trailing"in n?!!n.trailing:S),d.cancel=function(){void 0!==b&&clearTimeout(b),g=0,f=_=h=b=void 0},d.flush=function(){return void 0===b?y:p(O())},d}function a(e){var t=void 0===e?"undefined":s(e);return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==(void 0===e?"undefined":s(e))}function o(e){return"symbol"==(void 0===e?"undefined":s(e))||r(e)&&g.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return c;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=f.test(e);return n||h.test(e)?m(e.slice(2),n?2:8):d.test(e)?c:+e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="Expected a function",c=NaN,u="[object Symbol]",p=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,h=/^0o[0-7]+$/i,m=parseInt,y="object"==(void 0===t?"undefined":s(t))&&t&&t.Object===Object&&t,b="object"==("undefined"==typeof self?"undefined":s(self))&&self&&self.Object===Object&&self,_=y||b||Function("return this")(),g=Object.prototype.toString,v=Math.max,E=Math.min,O=function(){return _.Date.now()};e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(l);return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./sass/bootstrap.scss":function(e,t){},"./sass/naboo.scss":function(e,t){}},["./js/_bundles/app-web.js"]);
//# sourceMappingURL=https://files.deezer.com/cache/js/app-web.083edc4f0132d3c17a8a.js.map.json