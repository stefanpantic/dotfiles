import sys
import re

def verify(d, m, y):
    leap_y = True if (0 != y % 400 and (0 == y % 100 or 0 == y % 4)) else False

    if d <= 0 or d > 31 or m <= 0 or m > 12:
        return False

    if 0 == m % 2 and 8 != m and d > 30:
        return False

    if not leap_y and 2 == m and d > 28:
        return False

    return True

def main():
    if 2 != len(sys.argv):
        sys.exit(1)

    date_pattern = re.compile('(\\d{2})(.|/|-)(\\d{2})\\2(\\d{4})')
    match = date_pattern.search(sys.argv[1])
    if None != match:
        day = int(match.group(1))
        month = int(match.group(3))
        year = int(match.group(4))
    else:
        print("Invalid format")
        sys.exit(1)

    if verify(day, month, year):
        print("Valid date")
    else:
        print("Invalid date")
        sys.exit(1)


if "__main__" == __name__:
    main()
