import sys
import os
import re
import urllib.request as req
from bs4 import BeautifulSoup

url = 'https://techiedelight.quora.com/500-Data-Structures-and-Algorithms-practice-problems-and-their-solutions?__filter__&__nsrc__=2&__snid3__=1594232728&amp;share=1'
page = req.urlopen(url).read()
soup = BeautifulSoup(page, 'html.parser')

b_patt = re.compile('<b>([^<]+)<\/b>')
a_patt = re.compile('<a(?:.*?)href=\"([^\"]+)\"(?:[^>]+)>([^<]+)<')
o_file = open("links_my.html", "w+")

o_file.write('''
<!DOCTYPE html>
<html>
<head>
<meta charset=\"utf-8\">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
</head>
<body>
<table class="table table-inverse table-striped table-responsive">
<thead style=\"font-size: 20px\">
<th>#</th>
<th>Title</th>
</thead>
''')

link_count = 1
cat_count = 1
for s in soup.find_all(['b', 'a']):
    b_mtc = b_patt.search(str(s))
    a_mtc = a_patt.search(str(s))
    if None != b_mtc:
        o_file.write("<thead style=\"font-size: 20px\"><th><b>%d</b></th><th><b>%s</b></th></thead>\n" % (cat_count, b_mtc.group(1)))
        cat_count += 1
        link_count = 1
    elif None != a_mtc:
        if "#" == a_mtc.group(1):
            continue
        o_file.write("<tr><td>%d</td><td><a href=\"%s\">%s</a></td></tr>\n" % (link_count, a_mtc.group(1), a_mtc.group(2)))
        link_count += 1

o_file.write('''
</table>
</body>
</html>
''')

o_file.close()
