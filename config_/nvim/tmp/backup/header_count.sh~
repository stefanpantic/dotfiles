#!/bin/sh

# extract all #include directives from .h and .c files in the linux source code
grep -rohEI --include='*.[c|h]' '^\s*#include ?<[^>]+>' $1 |
# remove the #include part and keep only the header name
sed -E 's/#include ?<([^>]+)>/\1/' |
#sort the headers
sort |
# remove the duplicates
uniq |
# count the headers
wc -l
